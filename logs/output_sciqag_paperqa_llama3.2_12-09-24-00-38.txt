Running experiment: sciqag_paperqa_llama3.2
saving results to: datasets/SciQAG/answer_results/paperqa_llama3.2 



 Skipping sciqag_question_1.json as sciqag_answer_1.json already exists. 


 Skipping sciqag_question_10.json as sciqag_answer_10.json already exists. 


 Skipping sciqag_question_100.json as sciqag_answer_100.json already exists. 


 Skipping sciqag_question_11.json as sciqag_answer_11.json already exists. 


 Skipping sciqag_question_12.json as sciqag_answer_12.json already exists. 


 Skipping sciqag_question_13.json as sciqag_answer_13.json already exists. 


 Skipping sciqag_question_14.json as sciqag_answer_14.json already exists. 


 Skipping sciqag_question_15.json as sciqag_answer_15.json already exists. 


 Skipping sciqag_question_16.json as sciqag_answer_16.json already exists. 


 Skipping sciqag_question_17.json as sciqag_answer_17.json already exists. 


 Skipping sciqag_question_18.json as sciqag_answer_18.json already exists. 


 Skipping sciqag_question_19.json as sciqag_answer_19.json already exists. 


 Skipping sciqag_question_2.json as sciqag_answer_2.json already exists. 


 Skipping sciqag_question_20.json as sciqag_answer_20.json already exists. 


 Skipping sciqag_question_21.json as sciqag_answer_21.json already exists. 


 Skipping sciqag_question_22.json as sciqag_answer_22.json already exists. 


 Skipping sciqag_question_23.json as sciqag_answer_23.json already exists. 


 Skipping sciqag_question_24.json as sciqag_answer_24.json already exists. 


 Skipping sciqag_question_25.json as sciqag_answer_25.json already exists. 


 Skipping sciqag_question_26.json as sciqag_answer_26.json already exists. 


 Skipping sciqag_question_27.json as sciqag_answer_27.json already exists. 


 Skipping sciqag_question_28.json as sciqag_answer_28.json already exists. 



 ANSWERING QUESTION: sciqag_question_29.json
 ----------------------------- 


Failed to answer question due to timeout: What is the significance of the detection limit (DL) in the analysis of phthalate esters?


 ANSWERING QUESTION: sciqag_question_3.json
 ----------------------------- 



[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.

Failed to answer question due to timeout: How was the diabetic rat model established in this study?

 Skipping sciqag_question_30.json as sciqag_answer_30.json already exists. 


 Skipping sciqag_question_31.json as sciqag_answer_31.json already exists. 


 Skipping sciqag_question_32.json as sciqag_answer_32.json already exists. 



 ANSWERING QUESTION: sciqag_question_33.json
 ----------------------------- 


[00:45:06] Starting paper search for 'MIPs stability cost production'.                                                                    
           paper_search for query 'MIPs stability cost production' and offset 0 returned 6 papers.                                        
           Status: Paper Count=6 | Relevant Papers=0 | Current Evidence=0 | Current Cost=$0.0000                                          
           Generating answer for 'Why are MIPs considered stable, less costly, and easier to produce than their biological counterparts?'.
[00:45:23] Status: Paper Count=6 | Relevant Papers=2 | Current Evidence=5 | Current Cost=$0.0000                                          
           Answer: Molecularly imprinted polymers (MIPs) are considered stable, less costly, and easier to produce than their biological  
           counterparts due to their synthetic nature. According to Author2024 chunk 1, MIPs can be synthesized through covalent,         
           non-covalent, and sacrificial spacer methods, allowing for mass production and standardization.                                
                                                                                                                                          
           In contrast, biological systems are inherently complex and subject to variability, making them more challenging to design and  
           produce. Biological systems also have limitations such as degradation, loss of specificity, or enzymatic activity, which MIPs  
           do not experience (Author2024 chunk 3).                                                                                        
                                                                                                                                          
           MIPs offer advantages in terms of durability, scalability, and reproducibility, making them a promising alternative for various
           applications. They can be produced through various polymerization processes and designed to have specific structures and       
           properties that enhance their stability and selectivity.                                                                       
                                                                                                                                          
           ANSWER SUMMARY: MIPs are stable, less costly, and easier to produce than biological counterparts due to their synthetic nature,
           mass production capabilities, and lack of limitations such as degradation and variability.                                     

 Skipping sciqag_question_34.json as sciqag_answer_34.json already exists. 


 Skipping sciqag_question_35.json as sciqag_answer_35.json already exists. 



 ANSWERING QUESTION: sciqag_question_36.json
 ----------------------------- 


[00:45:25] Generating answer for 'How does the sample pH affect the potential response of the MIP based melamine ISE?'.                   
[00:45:26] Status: Paper Count=0 | Relevant Papers=0 | Current Evidence=0 | Current Cost=$0.0000                                          
           Answer: To answer this question, we need to understand the terms involved:                                                     
                                                                                                                                          
           - **MIP**: Molecularly Imprinted Polymer                                                                                       
           - **ISE**: Ion-Selective Electrode                                                                                             
           - **Melamine ISE**: A specific type of ISE designed to detect melamine                                                         
           - **pH**: The measure of hydrogen ion concentration in a solution                                                              
                                                                                                                                          
           Based on the context, we can infer that the MIP-based melamine ISE is a sensor that uses a molecularly imprinted polymer to    
           selectively bind melamine. The pH of the sample could affect this binding process.                                             
                                                                                                                                          
           A higher or lower pH may alter the affinity of the MIP for melamine due to changes in the chemical environment. This, in turn, 
           could influence the potential response of the ISE.                                                                             
                                                                                                                                          
           Without specific information on how the MIP's affinity is affected by pH or how this translates into a measurable potential    
           response, it's difficult to provide a precise answer.                                                                          
                                                                                                                                          
           ANSWER SUMMARY: Sample pH may affect melamine ISE response due to changes in MIP binding affinity, but specifics are unknown.  


 ANSWERING QUESTION: sciqag_question_37.json
 ----------------------------- 


[00:45:27] Starting paper search for 'ion-exchanger resin columns in melamine detection'.                                                 
           paper_search for query 'ion-exchanger resin columns in melamine detection' and offset 0 returned 8 papers.                     
           Status: Paper Count=8 | Relevant Papers=0 | Current Evidence=0 | Current Cost=$0.0000                                          
got papers
           gather_evidence starting for question 'What is the role of the ion-exchanger resin columns in the detection of melamine?'.     
got papers
[00:45:32] gather_evidence starting for question 'What is the role of the ion-exchanger resin columns in the detection of melamine?'.     
[00:45:39] Generating answer for 'What is the role of the ion-exchanger resin columns in the detection of melamine?'.                     
[00:45:43] Answer:                                                                                                                        

 Skipping sciqag_question_38.json as sciqag_answer_38.json already exists. 



 ANSWERING QUESTION: sciqag_question_39.json
 ----------------------------- 



[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.

[00:48:06] Starting paper search for 'MIP based membrane electrode for the detection of melamine in milk'.                                
           paper_search for query 'MIP based membrane electrode for the detection of melamine in milk' and offset 0 returned 8 papers.    
           Status: Paper Count=8 | Relevant Papers=0 | Current Evidence=0 | Current Cost=$0.0000                                          
[00:48:07] Starting paper search for 'MIP based membrane electrode for the detection of melamine in milk'.                                
           paper_search for query 'MIP based membrane electrode for the detection of melamine in milk' and offset 8 returned 0 papers.    
           Status: Paper Count=8 | Relevant Papers=0 | Current Evidence=0 | Current Cost=$0.0000                                          
got papers
           gather_evidence starting for question 'How promising is the flow analysis system based on the MIP based membrane electrode for 
           the detection of melamine in milk?'.                                                                                           
[00:48:14] Generating answer for 'How promising is the flow analysis system based on the MIP based membrane electrode for the detection of
           melamine in milk?'.                                                                                                            

[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.

Failed to answer question due to timeout: How promising is the flow analysis system based on the MIP based membrane electrode for the detection of melamine in milk?

 Skipping sciqag_question_4.json as sciqag_answer_4.json already exists. 


 Skipping sciqag_question_40.json as sciqag_answer_40.json already exists. 


 Skipping sciqag_question_41.json as sciqag_answer_41.json already exists. 


 Skipping sciqag_question_42.json as sciqag_answer_42.json already exists. 



 ANSWERING QUESTION: sciqag_question_43.json
 ----------------------------- 



[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.

[00:49:03] Trajectory failed.                                                                                                             
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1109 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1106 â”‚   â”‚   â”‚   async with ceil_timeout(                                                                                 â”‚
           â”‚   1107 â”‚   â”‚   â”‚   â”‚   timeout.sock_connect, ceil_threshold=timeout.ceil_threshold                                          â”‚
           â”‚   1108 â”‚   â”‚   â”‚   ):                                                                                                       â”‚
           â”‚ â± 1109 â”‚   â”‚   â”‚   â”‚   sock = await aiohappyeyeballs.start_connection(                                                      â”‚
           â”‚   1110 â”‚   â”‚   â”‚   â”‚   â”‚   addr_infos=addr_infos,                                                                           â”‚
           â”‚   1111 â”‚   â”‚   â”‚   â”‚   â”‚   local_addr_infos=self._local_addr_infos,                                                         â”‚
           â”‚   1112 â”‚   â”‚   â”‚   â”‚   â”‚   happy_eyeballs_delay=self._happy_eyeballs_delay,                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py:123 in start_connection          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   120 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, OSError) and exc.errno == first_errno                                         â”‚
           â”‚   121 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   for exc in all_exceptions                                                                     â”‚
           â”‚   122 â”‚   â”‚   â”‚   â”‚   â”‚   ):                                                                                                â”‚
           â”‚ â± 123 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   raise OSError(first_errno, msg)                                                               â”‚
           â”‚   124 â”‚   â”‚   â”‚   â”‚   elif isinstance(first_exception, RuntimeError) and all(                                               â”‚
           â”‚   125 â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, RuntimeError) for exc in all_exceptions                                           â”‚
           â”‚   126 â”‚   â”‚   â”‚   â”‚   ):                                                                                                    â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:477 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    474 â”‚   â”‚   â”‚   â”‚   â”‚   response = ModelResponse(**init_response)                                                        â”‚
           â”‚    475 â”‚   â”‚   â”‚   â”‚   response = init_response                                                                             â”‚
           â”‚    476 â”‚   â”‚   â”‚   elif asyncio.iscoroutine(init_response):                                                                 â”‚
           â”‚ â±  477 â”‚   â”‚   â”‚   â”‚   response = await init_response                                                                       â”‚
           â”‚    478 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚    479 â”‚   â”‚   â”‚   â”‚   response = init_response  # type: ignore                                                             â”‚
           â”‚    480                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:566 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   563 â”‚   â”‚   â”‚   )                                                                                                         â”‚
           â”‚   564 â”‚   â”‚   â”‚   return model_response                                                                                     â”‚
           â”‚   565 â”‚   except Exception as e:                                                                                            â”‚
           â”‚ â± 566 â”‚   â”‚   raise e  # don't use verbose_logger.exception, if exception is raised                                         â”‚
           â”‚   567                                                                                                                       â”‚
           â”‚   568                                                                                                                       â”‚
           â”‚   569 async def ollama_aembeddings(                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:507 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   504 â”‚   try:                                                                                                              â”‚
           â”‚   505 â”‚   â”‚   timeout = aiohttp.ClientTimeout(total=litellm.request_timeout)  # 10 minutes                                  â”‚
           â”‚   506 â”‚   â”‚   async with aiohttp.ClientSession(timeout=timeout) as session:                                                 â”‚
           â”‚ â± 507 â”‚   â”‚   â”‚   resp = await session.post(url, json=data)                                                                 â”‚
           â”‚   508 â”‚   â”‚   â”‚                                                                                                             â”‚
           â”‚   509 â”‚   â”‚   â”‚   if resp.status != 200:                                                                                    â”‚
           â”‚   510 â”‚   â”‚   â”‚   â”‚   text = await resp.text()                                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py:696 in _request                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚    693 â”‚   â”‚   â”‚   â”‚   â”‚                                                                                                    â”‚
           â”‚    694 â”‚   â”‚   â”‚   â”‚   â”‚   # connection timeout                                                                             â”‚
           â”‚    695 â”‚   â”‚   â”‚   â”‚   â”‚   try:                                                                                             â”‚
           â”‚ â±  696 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   conn = await self._connector.connect(                                                        â”‚
           â”‚    697 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   req, traces=traces, timeout=real_timeout                                                 â”‚
           â”‚    698 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚    699 â”‚   â”‚   â”‚   â”‚   â”‚   except asyncio.TimeoutError as exc:                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:544 in connect                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚    541 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    542 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    543 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_start()                                                   â”‚
           â”‚ â±  544 â”‚   â”‚   â”‚   â”‚   proto = await self._create_connection(req, traces, timeout)                                          â”‚
           â”‚    545 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    546 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    547 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_end()                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1050 in _create_connection           â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1047 â”‚   â”‚   if req.proxy:                                                                                                â”‚
           â”‚   1048 â”‚   â”‚   â”‚   _, proto = await self._create_proxy_connection(req, traces, timeout)                                     â”‚
           â”‚   1049 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚ â± 1050 â”‚   â”‚   â”‚   _, proto = await self._create_direct_connection(req, traces, timeout)                                    â”‚
           â”‚   1051 â”‚   â”‚                                                                                                                â”‚
           â”‚   1052 â”‚   â”‚   return proto                                                                                                 â”‚
           â”‚   1053                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1394 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1391 â”‚   â”‚   â”‚   return transp, proto                                                                                     â”‚
           â”‚   1392 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   1393 â”‚   â”‚   â”‚   assert last_exc is not None                                                                              â”‚
           â”‚ â± 1394 â”‚   â”‚   â”‚   raise last_exc                                                                                           â”‚
           â”‚   1395 â”‚                                                                                                                    â”‚
           â”‚   1396 â”‚   async def _create_proxy_connection(                                                                              â”‚
           â”‚   1397 â”‚   â”‚   self, req: ClientRequest, traces: List["Trace"], timeout: "ClientTimeout"                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1363 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1360 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   1361 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1362 â”‚   â”‚   â”‚   try:                                                                                                     â”‚
           â”‚ â± 1363 â”‚   â”‚   â”‚   â”‚   transp, proto = await self._wrap_create_connection(                                                  â”‚
           â”‚   1364 â”‚   â”‚   â”‚   â”‚   â”‚   self._factory,                                                                                   â”‚
           â”‚   1365 â”‚   â”‚   â”‚   â”‚   â”‚   timeout=timeout,                                                                                 â”‚
           â”‚   1366 â”‚   â”‚   â”‚   â”‚   â”‚   ssl=sslcontext,                                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1124 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1121 â”‚   â”‚   except OSError as exc:                                                                                       â”‚
           â”‚   1122 â”‚   â”‚   â”‚   if exc.errno is None and isinstance(exc, asyncio.TimeoutError):                                          â”‚
           â”‚   1123 â”‚   â”‚   â”‚   â”‚   raise                                                                                                â”‚
           â”‚ â± 1124 â”‚   â”‚   â”‚   raise client_error(req.connection_key, exc) from exc                                                     â”‚
           â”‚   1125 â”‚                                                                                                                    â”‚
           â”‚   1126 â”‚   async def _wrap_existing_connection(                                                                             â”‚
           â”‚   1127 â”‚   â”‚   self,                                                                                                        â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno 111] Connect call failed 
           ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                                                    
                                                                                                                                          
           During handling of the above exception, another exception occurred:                                                            
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:276 in _run_with_timeout_failure                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   273 ) -> tuple[PQASession, AgentStatus]:                                                                                  â”‚
           â”‚   274 â”‚   try:                                                                                                              â”‚
           â”‚   275 â”‚   â”‚   async with asyncio.timeout(query.settings.agent.timeout):                                                     â”‚
           â”‚ â± 276 â”‚   â”‚   â”‚   status = await rollout()                                                                                  â”‚
           â”‚   277 â”‚   except TimeoutError:                                                                                              â”‚
           â”‚   278 â”‚   â”‚   logger.warning(                                                                                               â”‚
           â”‚   279 â”‚   â”‚   â”‚   f"Agent timeout after {query.settings.agent.timeout}-sec, just answering."                                â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:410 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   407 â”‚   â”‚   â”‚   â”‚   )                                                                                                     â”‚
           â”‚   408 â”‚   â”‚   â”‚   â”‚   return AgentStatus.TRUNCATED                                                                          â”‚
           â”‚   409 â”‚   â”‚   â”‚   agent_state.messages += obs                                                                               â”‚
           â”‚ â± 410 â”‚   â”‚   â”‚   for attempt in Retrying(                                                                                  â”‚
           â”‚   411 â”‚   â”‚   â”‚   â”‚   stop=stop_after_attempt(5),                                                                           â”‚
           â”‚   412 â”‚   â”‚   â”‚   â”‚   retry=retry_if_exception_type(MalformedMessageError),                                                 â”‚
           â”‚   413 â”‚   â”‚   â”‚   â”‚   before_sleep=before_sleep_log(logger, logging.WARNING),                                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:443 in __iter__                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   440 â”‚   â”‚                                                                                                                 â”‚
           â”‚   441 â”‚   â”‚   retry_state = RetryCallState(self, fn=None, args=(), kwargs={})                                               â”‚
           â”‚   442 â”‚   â”‚   while True:                                                                                                   â”‚
           â”‚ â± 443 â”‚   â”‚   â”‚   do = self.iter(retry_state=retry_state)                                                                   â”‚
           â”‚   444 â”‚   â”‚   â”‚   if isinstance(do, DoAttempt):                                                                             â”‚
           â”‚   445 â”‚   â”‚   â”‚   â”‚   yield AttemptManager(retry_state=retry_state)                                                         â”‚
           â”‚   446 â”‚   â”‚   â”‚   elif isinstance(do, DoSleep):                                                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:376 in iter                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   373 â”‚   â”‚   self._begin_iter(retry_state)                                                                                 â”‚
           â”‚   374 â”‚   â”‚   result = None                                                                                                 â”‚
           â”‚   375 â”‚   â”‚   for action in self.iter_state.actions:                                                                        â”‚
           â”‚ â± 376 â”‚   â”‚   â”‚   result = action(retry_state)                                                                              â”‚
           â”‚   377 â”‚   â”‚   return result                                                                                                 â”‚
           â”‚   378 â”‚                                                                                                                     â”‚
           â”‚   379 â”‚   def _begin_iter(self, retry_state: "RetryCallState") -> None:  # noqa                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:398 in <lambda>                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   395 â”‚                                                                                                                     â”‚
           â”‚   396 â”‚   def _post_retry_check_actions(self, retry_state: "RetryCallState") -> None:                                       â”‚
           â”‚   397 â”‚   â”‚   if not (self.iter_state.is_explicit_retry or self.iter_state.retry_run_result):                               â”‚
           â”‚ â± 398 â”‚   â”‚   â”‚   self._add_action_func(lambda rs: rs.outcome.result())                                                     â”‚
           â”‚   399 â”‚   â”‚   â”‚   return                                                                                                    â”‚
           â”‚   400 â”‚   â”‚                                                                                                                 â”‚
           â”‚   401 â”‚   â”‚   if self.after is not None:                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:449 in result                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚   446 â”‚   â”‚   â”‚   â”‚   if self._state in [CANCELLED, CANCELLED_AND_NOTIFIED]:                                                â”‚
           â”‚   447 â”‚   â”‚   â”‚   â”‚   â”‚   raise CancelledError()                                                                            â”‚
           â”‚   448 â”‚   â”‚   â”‚   â”‚   elif self._state == FINISHED:                                                                         â”‚
           â”‚ â± 449 â”‚   â”‚   â”‚   â”‚   â”‚   return self.__get_result()                                                                        â”‚
           â”‚   450 â”‚   â”‚   â”‚   â”‚                                                                                                         â”‚
           â”‚   451 â”‚   â”‚   â”‚   â”‚   self._condition.wait(timeout)                                                                         â”‚
           â”‚   452                                                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:401 in __get_result                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   398 â”‚   def __get_result(self):                                                                                           â”‚
           â”‚   399 â”‚   â”‚   if self._exception:                                                                                           â”‚
           â”‚   400 â”‚   â”‚   â”‚   try:                                                                                                      â”‚
           â”‚ â± 401 â”‚   â”‚   â”‚   â”‚   raise self._exception                                                                                 â”‚
           â”‚   402 â”‚   â”‚   â”‚   finally:                                                                                                  â”‚
           â”‚   403 â”‚   â”‚   â”‚   â”‚   # Break a reference cycle with the exception in self._exception                                       â”‚
           â”‚   404 â”‚   â”‚   â”‚   â”‚   self = None                                                                                           â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:417 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   414 â”‚   â”‚   â”‚   â”‚   reraise=True,                                                                                         â”‚
           â”‚   415 â”‚   â”‚   â”‚   ):                                                                                                        â”‚
           â”‚   416 â”‚   â”‚   â”‚   â”‚   with attempt:  # Retrying if ToolSelector fails to select a tool                                      â”‚
           â”‚ â± 417 â”‚   â”‚   â”‚   â”‚   â”‚   action = await agent(agent_state.messages, tools)                                                 â”‚
           â”‚   418 â”‚   â”‚   â”‚   agent_state.messages = [*agent_state.messages, action]                                                    â”‚
           â”‚   419 â”‚   â”‚   â”‚   if on_agent_action_callback:                                                                              â”‚
           â”‚   420 â”‚   â”‚   â”‚   â”‚   await on_agent_action_callback(action, agent_state)                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aviary/tools/utils.py:182 in __call__                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   179 â”‚   â”‚   â”‚   self._ledger.messages.extend(messages)                                                                    â”‚
           â”‚   180 â”‚   â”‚   â”‚   messages = self._ledger.messages                                                                          â”‚
           â”‚   181 â”‚   â”‚                                                                                                                 â”‚
           â”‚ â± 182 â”‚   â”‚   model_response = await self._bound_acompletion(                                                               â”‚
           â”‚   183 â”‚   â”‚   â”‚   messages=MessagesAdapter.dump_python(                                                                     â”‚
           â”‚   184 â”‚   â”‚   â”‚   â”‚   messages, exclude_none=True, by_alias=True                                                            â”‚
           â”‚   185 â”‚   â”‚   â”‚   ),                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:817 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    814 â”‚   â”‚   â”‚   â”‚   â”‚   original_exception=e,                                                                            â”‚
           â”‚    815 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    816 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚ â±  817 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    818 â”‚                                                                                                                    â”‚
           â”‚    819 â”‚   async def _acompletion(                                                                                          â”‚
           â”‚    820 â”‚   â”‚   self, model: str, messages: List[Dict[str, str]], **kwargs                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:793 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    790 â”‚   â”‚   â”‚   if request_priority is not None and isinstance(request_priority, int):                                   â”‚
           â”‚    791 â”‚   â”‚   â”‚   â”‚   response = await self.schedule_acompletion(**kwargs)                                                 â”‚
           â”‚    792 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â±  793 â”‚   â”‚   â”‚   â”‚   response = await self.async_function_with_fallbacks(**kwargs)                                        â”‚
           â”‚    794 â”‚   â”‚   â”‚   end_time = time.time()                                                                                   â”‚
           â”‚    795 â”‚   â”‚   â”‚   _duration = end_time - start_time                                                                        â”‚
           â”‚    796 â”‚   â”‚   â”‚   asyncio.create_task(                                                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2795 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2792 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚   2793 â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                                â”‚
           â”‚   2794 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2795 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2796 â”‚                                                                                                                    â”‚
           â”‚   2797 â”‚   def _handle_mock_testing_fallbacks(                                                                              â”‚
           â”‚   2798 â”‚   â”‚   self,                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2631 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2628 â”‚   â”‚   â”‚   â”‚   content_policy_fallbacks=content_policy_fallbacks,                                                   â”‚
           â”‚   2629 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2630 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2631 â”‚   â”‚   â”‚   response = await self.async_function_with_retries(*args, **kwargs)                                       â”‚
           â”‚   2632 â”‚   â”‚   â”‚   verbose_router_logger.debug(f"Async Response: {response}")                                               â”‚
           â”‚   2633 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2634 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2967 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2964 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "max_retries", num_retries)                                              â”‚
           â”‚   2965 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "num_retries", current_attempt)                                          â”‚
           â”‚   2966 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2967 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2968 â”‚                                                                                                                    â”‚
           â”‚   2969 â”‚   async def make_call(self, original_function: Any, *args, **kwargs):                                              â”‚
           â”‚   2970 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2879 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2876 â”‚   â”‚   â”‚   â”‚   model_group=model_group, kwargs=kwargs                                                               â”‚
           â”‚   2877 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2878 â”‚   â”‚   â”‚   # if the function call is successful, no exception will be raised and we'll                              â”‚
           â”‚        break out of the loop                                                                                                â”‚
           â”‚ â± 2879 â”‚   â”‚   â”‚   response = await self.make_call(original_function, *args, **kwargs)                                      â”‚
           â”‚   2880 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   2881 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2882 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2976 in make_call                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2973 â”‚   â”‚   model_group = kwargs.get("model")                                                                            â”‚
           â”‚   2974 â”‚   â”‚   response = original_function(*args, **kwargs)                                                                â”‚
           â”‚   2975 â”‚   â”‚   if inspect.iscoroutinefunction(response) or inspect.isawaitable(response):                                   â”‚
           â”‚ â± 2976 â”‚   â”‚   â”‚   response = await response                                                                                â”‚
           â”‚   2977 â”‚   â”‚   ## PROCESS RESPONSE HEADERS                                                                                  â”‚
           â”‚   2978 â”‚   â”‚   await self.set_response_headers(response=response, model_group=model_group)                                  â”‚
           â”‚   2979                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:947 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    944 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚    945 â”‚   â”‚   â”‚   if model_name is not None:                                                                               â”‚
           â”‚    946 â”‚   â”‚   â”‚   â”‚   self.fail_calls[model_name] += 1                                                                     â”‚
           â”‚ â±  947 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    948 â”‚                                                                                                                    â”‚
           â”‚    949 â”‚   def _update_kwargs_before_fallbacks(self, model: str, kwargs: dict) -> None:                                     â”‚
           â”‚    950 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:915 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    912 â”‚   â”‚   â”‚   â”‚   â”‚   parent_otel_span=parent_otel_span,                                                               â”‚
           â”‚    913 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    914 â”‚   â”‚   â”‚   â”‚                                                                                                        â”‚
           â”‚ â±  915 â”‚   â”‚   â”‚   â”‚   response = await _response                                                                           â”‚
           â”‚    916 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚    917 â”‚   â”‚   â”‚   ## CHECK CONTENT FILTER ERROR ##                                                                         â”‚
           â”‚    918 â”‚   â”‚   â”‚   if isinstance(response, ModelResponse):                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1175 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1172 â”‚   â”‚   â”‚   â”‚   â”‚   else:                                                                                            â”‚
           â”‚   1173 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   kwargs["model"] = context_window_fallback_dict[model]                                        â”‚
           â”‚   1174 â”‚   â”‚   â”‚   â”‚   â”‚   return await original_function(*args, **kwargs)                                                  â”‚
           â”‚ â± 1175 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   1176 â”‚                                                                                                                    â”‚
           â”‚   1177 â”‚   is_coroutine = inspect.iscoroutinefunction(original_function)                                                    â”‚
           â”‚   1178                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1031 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1028 â”‚   â”‚   â”‚   â”‚   return _caching_handler_response.final_embedding_cached_response                                     â”‚
           â”‚   1029 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1030 â”‚   â”‚   â”‚   # MODEL CALL                                                                                             â”‚
           â”‚ â± 1031 â”‚   â”‚   â”‚   result = await original_function(*args, **kwargs)                                                        â”‚
           â”‚   1032 â”‚   â”‚   â”‚   end_time = datetime.datetime.now()                                                                       â”‚
           â”‚   1033 â”‚   â”‚   â”‚   if "stream" in kwargs and kwargs["stream"] is True:                                                      â”‚
           â”‚   1034 â”‚   â”‚   â”‚   â”‚   if (                                                                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:499 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    496 â”‚   â”‚   return response                                                                                              â”‚
           â”‚    497 â”‚   except Exception as e:                                                                                           â”‚
           â”‚    498 â”‚   â”‚   custom_llm_provider = custom_llm_provider or "openai"                                                        â”‚
           â”‚ â±  499 â”‚   â”‚   raise exception_type(                                                                                        â”‚
           â”‚    500 â”‚   â”‚   â”‚   model=model,                                                                                             â”‚
           â”‚    501 â”‚   â”‚   â”‚   custom_llm_provider=custom_llm_provider,                                                                 â”‚
           â”‚    502 â”‚   â”‚   â”‚   original_exception=e,                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:212 â”‚
           â”‚ 5 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2122 â”‚   â”‚   # don't let an error with mapping interrupt the user from receiving an error                                 â”‚
           â”‚        from the llm api calls                                                                                               â”‚
           â”‚   2123 â”‚   â”‚   if exception_mapping_worked:                                                                                 â”‚
           â”‚   2124 â”‚   â”‚   â”‚   setattr(e, "litellm_response_headers", litellm_response_headers)                                         â”‚
           â”‚ â± 2125 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   2126 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   2127 â”‚   â”‚   â”‚   for error_type in litellm.LITELLM_EXCEPTION_TYPES:                                                       â”‚
           â”‚   2128 â”‚   â”‚   â”‚   â”‚   if isinstance(e, error_type):                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:210 â”‚
           â”‚ 1 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2098 â”‚   â”‚   â”‚   â”‚   â”‚   request=original_exception.request,                                                              â”‚
           â”‚   2099 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚   2100 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â± 2101 â”‚   â”‚   â”‚   â”‚   raise APIConnectionError(                                                                            â”‚
           â”‚   2102 â”‚   â”‚   â”‚   â”‚   â”‚   message="{}\n{}".format(                                                                         â”‚
           â”‚   2103 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   str(original_exception), traceback.format_exc()                                              â”‚
           â”‚   2104 â”‚   â”‚   â”‚   â”‚   â”‚   ),                                                                                               â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           APIConnectionError: litellm.APIConnectionError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1109, in                 
           _wrap_create_connection                                                                                                        
               sock = await aiohappyeyeballs.start_connection(                                                                            
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                            
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py", line 123, in              
           start_connection                                                                                                               
               raise OSError(first_errno, msg)                                                                                            
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py", line 477, in acompletion           
               response = await init_response                                                                                             
                          ^^^^^^^^^^^^^^^^^^^                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 566, in                
           ollama_acompletion                                                                                                             
               raise e  # don't use verbose_logger.exception, if exception is raised                                                      
               ^^^^^^^                                                                                                                    
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 507, in                
           ollama_acompletion                                                                                                             
               resp = await session.post(url, json=data)                                                                                  
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                  
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py", line 696, in _request            
               conn = await self._connector.connect(                                                                                      
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 544, in connect          
               proto = await self._create_connection(req, traces, timeout)                                                                
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1050, in                 
           _create_connection                                                                                                             
               _, proto = await self._create_direct_connection(req, traces, timeout)                                                      
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1394, in                 
           _create_direct_connection                                                                                                      
               raise last_exc                                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1363, in                 
           _create_direct_connection                                                                                                      
               transp, proto = await self._wrap_create_connection(                                                                        
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                        
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1124, in                 
           _wrap_create_connection                                                                                                        
               raise client_error(req.connection_key, exc) from exc                                                                       
           aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
                                                                                                                                          
           Received Model Group=ollama/llama3.2                                                                                           
           Available Model Group Fallbacks=None LiteLLM Retried: 2 times, LiteLLM Max Retries: 3                                          
[00:49:06] Answer:                                                                                                                        

 Skipping sciqag_question_44.json as sciqag_answer_44.json already exists. 


 Skipping sciqag_question_45.json as sciqag_answer_45.json already exists. 


 Skipping sciqag_question_46.json as sciqag_answer_46.json already exists. 



 ANSWERING QUESTION: sciqag_question_47.json
 ----------------------------- 



[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.

[00:49:26] Trajectory failed.                                                                                                             
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1109 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1106 â”‚   â”‚   â”‚   async with ceil_timeout(                                                                                 â”‚
           â”‚   1107 â”‚   â”‚   â”‚   â”‚   timeout.sock_connect, ceil_threshold=timeout.ceil_threshold                                          â”‚
           â”‚   1108 â”‚   â”‚   â”‚   ):                                                                                                       â”‚
           â”‚ â± 1109 â”‚   â”‚   â”‚   â”‚   sock = await aiohappyeyeballs.start_connection(                                                      â”‚
           â”‚   1110 â”‚   â”‚   â”‚   â”‚   â”‚   addr_infos=addr_infos,                                                                           â”‚
           â”‚   1111 â”‚   â”‚   â”‚   â”‚   â”‚   local_addr_infos=self._local_addr_infos,                                                         â”‚
           â”‚   1112 â”‚   â”‚   â”‚   â”‚   â”‚   happy_eyeballs_delay=self._happy_eyeballs_delay,                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py:123 in start_connection          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   120 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, OSError) and exc.errno == first_errno                                         â”‚
           â”‚   121 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   for exc in all_exceptions                                                                     â”‚
           â”‚   122 â”‚   â”‚   â”‚   â”‚   â”‚   ):                                                                                                â”‚
           â”‚ â± 123 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   raise OSError(first_errno, msg)                                                               â”‚
           â”‚   124 â”‚   â”‚   â”‚   â”‚   elif isinstance(first_exception, RuntimeError) and all(                                               â”‚
           â”‚   125 â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, RuntimeError) for exc in all_exceptions                                           â”‚
           â”‚   126 â”‚   â”‚   â”‚   â”‚   ):                                                                                                    â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:477 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    474 â”‚   â”‚   â”‚   â”‚   â”‚   response = ModelResponse(**init_response)                                                        â”‚
           â”‚    475 â”‚   â”‚   â”‚   â”‚   response = init_response                                                                             â”‚
           â”‚    476 â”‚   â”‚   â”‚   elif asyncio.iscoroutine(init_response):                                                                 â”‚
           â”‚ â±  477 â”‚   â”‚   â”‚   â”‚   response = await init_response                                                                       â”‚
           â”‚    478 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚    479 â”‚   â”‚   â”‚   â”‚   response = init_response  # type: ignore                                                             â”‚
           â”‚    480                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:566 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   563 â”‚   â”‚   â”‚   )                                                                                                         â”‚
           â”‚   564 â”‚   â”‚   â”‚   return model_response                                                                                     â”‚
           â”‚   565 â”‚   except Exception as e:                                                                                            â”‚
           â”‚ â± 566 â”‚   â”‚   raise e  # don't use verbose_logger.exception, if exception is raised                                         â”‚
           â”‚   567                                                                                                                       â”‚
           â”‚   568                                                                                                                       â”‚
           â”‚   569 async def ollama_aembeddings(                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:507 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   504 â”‚   try:                                                                                                              â”‚
           â”‚   505 â”‚   â”‚   timeout = aiohttp.ClientTimeout(total=litellm.request_timeout)  # 10 minutes                                  â”‚
           â”‚   506 â”‚   â”‚   async with aiohttp.ClientSession(timeout=timeout) as session:                                                 â”‚
           â”‚ â± 507 â”‚   â”‚   â”‚   resp = await session.post(url, json=data)                                                                 â”‚
           â”‚   508 â”‚   â”‚   â”‚                                                                                                             â”‚
           â”‚   509 â”‚   â”‚   â”‚   if resp.status != 200:                                                                                    â”‚
           â”‚   510 â”‚   â”‚   â”‚   â”‚   text = await resp.text()                                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py:696 in _request                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚    693 â”‚   â”‚   â”‚   â”‚   â”‚                                                                                                    â”‚
           â”‚    694 â”‚   â”‚   â”‚   â”‚   â”‚   # connection timeout                                                                             â”‚
           â”‚    695 â”‚   â”‚   â”‚   â”‚   â”‚   try:                                                                                             â”‚
           â”‚ â±  696 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   conn = await self._connector.connect(                                                        â”‚
           â”‚    697 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   req, traces=traces, timeout=real_timeout                                                 â”‚
           â”‚    698 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚    699 â”‚   â”‚   â”‚   â”‚   â”‚   except asyncio.TimeoutError as exc:                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:544 in connect                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚    541 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    542 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    543 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_start()                                                   â”‚
           â”‚ â±  544 â”‚   â”‚   â”‚   â”‚   proto = await self._create_connection(req, traces, timeout)                                          â”‚
           â”‚    545 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    546 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    547 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_end()                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1050 in _create_connection           â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1047 â”‚   â”‚   if req.proxy:                                                                                                â”‚
           â”‚   1048 â”‚   â”‚   â”‚   _, proto = await self._create_proxy_connection(req, traces, timeout)                                     â”‚
           â”‚   1049 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚ â± 1050 â”‚   â”‚   â”‚   _, proto = await self._create_direct_connection(req, traces, timeout)                                    â”‚
           â”‚   1051 â”‚   â”‚                                                                                                                â”‚
           â”‚   1052 â”‚   â”‚   return proto                                                                                                 â”‚
           â”‚   1053                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1394 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1391 â”‚   â”‚   â”‚   return transp, proto                                                                                     â”‚
           â”‚   1392 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   1393 â”‚   â”‚   â”‚   assert last_exc is not None                                                                              â”‚
           â”‚ â± 1394 â”‚   â”‚   â”‚   raise last_exc                                                                                           â”‚
           â”‚   1395 â”‚                                                                                                                    â”‚
           â”‚   1396 â”‚   async def _create_proxy_connection(                                                                              â”‚
           â”‚   1397 â”‚   â”‚   self, req: ClientRequest, traces: List["Trace"], timeout: "ClientTimeout"                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1363 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1360 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   1361 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1362 â”‚   â”‚   â”‚   try:                                                                                                     â”‚
           â”‚ â± 1363 â”‚   â”‚   â”‚   â”‚   transp, proto = await self._wrap_create_connection(                                                  â”‚
           â”‚   1364 â”‚   â”‚   â”‚   â”‚   â”‚   self._factory,                                                                                   â”‚
           â”‚   1365 â”‚   â”‚   â”‚   â”‚   â”‚   timeout=timeout,                                                                                 â”‚
           â”‚   1366 â”‚   â”‚   â”‚   â”‚   â”‚   ssl=sslcontext,                                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1124 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1121 â”‚   â”‚   except OSError as exc:                                                                                       â”‚
           â”‚   1122 â”‚   â”‚   â”‚   if exc.errno is None and isinstance(exc, asyncio.TimeoutError):                                          â”‚
           â”‚   1123 â”‚   â”‚   â”‚   â”‚   raise                                                                                                â”‚
           â”‚ â± 1124 â”‚   â”‚   â”‚   raise client_error(req.connection_key, exc) from exc                                                     â”‚
           â”‚   1125 â”‚                                                                                                                    â”‚
           â”‚   1126 â”‚   async def _wrap_existing_connection(                                                                             â”‚
           â”‚   1127 â”‚   â”‚   self,                                                                                                        â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno 111] Connect call failed 
           ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                                                    
                                                                                                                                          
           During handling of the above exception, another exception occurred:                                                            
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:276 in _run_with_timeout_failure                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   273 ) -> tuple[PQASession, AgentStatus]:                                                                                  â”‚
           â”‚   274 â”‚   try:                                                                                                              â”‚
           â”‚   275 â”‚   â”‚   async with asyncio.timeout(query.settings.agent.timeout):                                                     â”‚
           â”‚ â± 276 â”‚   â”‚   â”‚   status = await rollout()                                                                                  â”‚
           â”‚   277 â”‚   except TimeoutError:                                                                                              â”‚
           â”‚   278 â”‚   â”‚   logger.warning(                                                                                               â”‚
           â”‚   279 â”‚   â”‚   â”‚   f"Agent timeout after {query.settings.agent.timeout}-sec, just answering."                                â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:410 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   407 â”‚   â”‚   â”‚   â”‚   )                                                                                                     â”‚
           â”‚   408 â”‚   â”‚   â”‚   â”‚   return AgentStatus.TRUNCATED                                                                          â”‚
           â”‚   409 â”‚   â”‚   â”‚   agent_state.messages += obs                                                                               â”‚
           â”‚ â± 410 â”‚   â”‚   â”‚   for attempt in Retrying(                                                                                  â”‚
           â”‚   411 â”‚   â”‚   â”‚   â”‚   stop=stop_after_attempt(5),                                                                           â”‚
           â”‚   412 â”‚   â”‚   â”‚   â”‚   retry=retry_if_exception_type(MalformedMessageError),                                                 â”‚
           â”‚   413 â”‚   â”‚   â”‚   â”‚   before_sleep=before_sleep_log(logger, logging.WARNING),                                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:443 in __iter__                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   440 â”‚   â”‚                                                                                                                 â”‚
           â”‚   441 â”‚   â”‚   retry_state = RetryCallState(self, fn=None, args=(), kwargs={})                                               â”‚
           â”‚   442 â”‚   â”‚   while True:                                                                                                   â”‚
           â”‚ â± 443 â”‚   â”‚   â”‚   do = self.iter(retry_state=retry_state)                                                                   â”‚
           â”‚   444 â”‚   â”‚   â”‚   if isinstance(do, DoAttempt):                                                                             â”‚
           â”‚   445 â”‚   â”‚   â”‚   â”‚   yield AttemptManager(retry_state=retry_state)                                                         â”‚
           â”‚   446 â”‚   â”‚   â”‚   elif isinstance(do, DoSleep):                                                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:376 in iter                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   373 â”‚   â”‚   self._begin_iter(retry_state)                                                                                 â”‚
           â”‚   374 â”‚   â”‚   result = None                                                                                                 â”‚
           â”‚   375 â”‚   â”‚   for action in self.iter_state.actions:                                                                        â”‚
           â”‚ â± 376 â”‚   â”‚   â”‚   result = action(retry_state)                                                                              â”‚
           â”‚   377 â”‚   â”‚   return result                                                                                                 â”‚
           â”‚   378 â”‚                                                                                                                     â”‚
           â”‚   379 â”‚   def _begin_iter(self, retry_state: "RetryCallState") -> None:  # noqa                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:398 in <lambda>                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   395 â”‚                                                                                                                     â”‚
           â”‚   396 â”‚   def _post_retry_check_actions(self, retry_state: "RetryCallState") -> None:                                       â”‚
           â”‚   397 â”‚   â”‚   if not (self.iter_state.is_explicit_retry or self.iter_state.retry_run_result):                               â”‚
           â”‚ â± 398 â”‚   â”‚   â”‚   self._add_action_func(lambda rs: rs.outcome.result())                                                     â”‚
           â”‚   399 â”‚   â”‚   â”‚   return                                                                                                    â”‚
           â”‚   400 â”‚   â”‚                                                                                                                 â”‚
           â”‚   401 â”‚   â”‚   if self.after is not None:                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:449 in result                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚   446 â”‚   â”‚   â”‚   â”‚   if self._state in [CANCELLED, CANCELLED_AND_NOTIFIED]:                                                â”‚
           â”‚   447 â”‚   â”‚   â”‚   â”‚   â”‚   raise CancelledError()                                                                            â”‚
           â”‚   448 â”‚   â”‚   â”‚   â”‚   elif self._state == FINISHED:                                                                         â”‚
           â”‚ â± 449 â”‚   â”‚   â”‚   â”‚   â”‚   return self.__get_result()                                                                        â”‚
           â”‚   450 â”‚   â”‚   â”‚   â”‚                                                                                                         â”‚
           â”‚   451 â”‚   â”‚   â”‚   â”‚   self._condition.wait(timeout)                                                                         â”‚
           â”‚   452                                                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:401 in __get_result                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   398 â”‚   def __get_result(self):                                                                                           â”‚
           â”‚   399 â”‚   â”‚   if self._exception:                                                                                           â”‚
           â”‚   400 â”‚   â”‚   â”‚   try:                                                                                                      â”‚
           â”‚ â± 401 â”‚   â”‚   â”‚   â”‚   raise self._exception                                                                                 â”‚
           â”‚   402 â”‚   â”‚   â”‚   finally:                                                                                                  â”‚
           â”‚   403 â”‚   â”‚   â”‚   â”‚   # Break a reference cycle with the exception in self._exception                                       â”‚
           â”‚   404 â”‚   â”‚   â”‚   â”‚   self = None                                                                                           â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:417 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   414 â”‚   â”‚   â”‚   â”‚   reraise=True,                                                                                         â”‚
           â”‚   415 â”‚   â”‚   â”‚   ):                                                                                                        â”‚
           â”‚   416 â”‚   â”‚   â”‚   â”‚   with attempt:  # Retrying if ToolSelector fails to select a tool                                      â”‚
           â”‚ â± 417 â”‚   â”‚   â”‚   â”‚   â”‚   action = await agent(agent_state.messages, tools)                                                 â”‚
           â”‚   418 â”‚   â”‚   â”‚   agent_state.messages = [*agent_state.messages, action]                                                    â”‚
           â”‚   419 â”‚   â”‚   â”‚   if on_agent_action_callback:                                                                              â”‚
           â”‚   420 â”‚   â”‚   â”‚   â”‚   await on_agent_action_callback(action, agent_state)                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aviary/tools/utils.py:182 in __call__                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   179 â”‚   â”‚   â”‚   self._ledger.messages.extend(messages)                                                                    â”‚
           â”‚   180 â”‚   â”‚   â”‚   messages = self._ledger.messages                                                                          â”‚
           â”‚   181 â”‚   â”‚                                                                                                                 â”‚
           â”‚ â± 182 â”‚   â”‚   model_response = await self._bound_acompletion(                                                               â”‚
           â”‚   183 â”‚   â”‚   â”‚   messages=MessagesAdapter.dump_python(                                                                     â”‚
           â”‚   184 â”‚   â”‚   â”‚   â”‚   messages, exclude_none=True, by_alias=True                                                            â”‚
           â”‚   185 â”‚   â”‚   â”‚   ),                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:817 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    814 â”‚   â”‚   â”‚   â”‚   â”‚   original_exception=e,                                                                            â”‚
           â”‚    815 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    816 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚ â±  817 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    818 â”‚                                                                                                                    â”‚
           â”‚    819 â”‚   async def _acompletion(                                                                                          â”‚
           â”‚    820 â”‚   â”‚   self, model: str, messages: List[Dict[str, str]], **kwargs                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:793 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    790 â”‚   â”‚   â”‚   if request_priority is not None and isinstance(request_priority, int):                                   â”‚
           â”‚    791 â”‚   â”‚   â”‚   â”‚   response = await self.schedule_acompletion(**kwargs)                                                 â”‚
           â”‚    792 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â±  793 â”‚   â”‚   â”‚   â”‚   response = await self.async_function_with_fallbacks(**kwargs)                                        â”‚
           â”‚    794 â”‚   â”‚   â”‚   end_time = time.time()                                                                                   â”‚
           â”‚    795 â”‚   â”‚   â”‚   _duration = end_time - start_time                                                                        â”‚
           â”‚    796 â”‚   â”‚   â”‚   asyncio.create_task(                                                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2795 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2792 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚   2793 â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                                â”‚
           â”‚   2794 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2795 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2796 â”‚                                                                                                                    â”‚
           â”‚   2797 â”‚   def _handle_mock_testing_fallbacks(                                                                              â”‚
           â”‚   2798 â”‚   â”‚   self,                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2631 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2628 â”‚   â”‚   â”‚   â”‚   content_policy_fallbacks=content_policy_fallbacks,                                                   â”‚
           â”‚   2629 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2630 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2631 â”‚   â”‚   â”‚   response = await self.async_function_with_retries(*args, **kwargs)                                       â”‚
           â”‚   2632 â”‚   â”‚   â”‚   verbose_router_logger.debug(f"Async Response: {response}")                                               â”‚
           â”‚   2633 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2634 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2967 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2964 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "max_retries", num_retries)                                              â”‚
           â”‚   2965 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "num_retries", current_attempt)                                          â”‚
           â”‚   2966 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2967 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2968 â”‚                                                                                                                    â”‚
           â”‚   2969 â”‚   async def make_call(self, original_function: Any, *args, **kwargs):                                              â”‚
           â”‚   2970 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2879 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2876 â”‚   â”‚   â”‚   â”‚   model_group=model_group, kwargs=kwargs                                                               â”‚
           â”‚   2877 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2878 â”‚   â”‚   â”‚   # if the function call is successful, no exception will be raised and we'll                              â”‚
           â”‚        break out of the loop                                                                                                â”‚
           â”‚ â± 2879 â”‚   â”‚   â”‚   response = await self.make_call(original_function, *args, **kwargs)                                      â”‚
           â”‚   2880 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   2881 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2882 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2976 in make_call                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2973 â”‚   â”‚   model_group = kwargs.get("model")                                                                            â”‚
           â”‚   2974 â”‚   â”‚   response = original_function(*args, **kwargs)                                                                â”‚
           â”‚   2975 â”‚   â”‚   if inspect.iscoroutinefunction(response) or inspect.isawaitable(response):                                   â”‚
           â”‚ â± 2976 â”‚   â”‚   â”‚   response = await response                                                                                â”‚
           â”‚   2977 â”‚   â”‚   ## PROCESS RESPONSE HEADERS                                                                                  â”‚
           â”‚   2978 â”‚   â”‚   await self.set_response_headers(response=response, model_group=model_group)                                  â”‚
           â”‚   2979                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:947 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    944 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚    945 â”‚   â”‚   â”‚   if model_name is not None:                                                                               â”‚
           â”‚    946 â”‚   â”‚   â”‚   â”‚   self.fail_calls[model_name] += 1                                                                     â”‚
           â”‚ â±  947 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    948 â”‚                                                                                                                    â”‚
           â”‚    949 â”‚   def _update_kwargs_before_fallbacks(self, model: str, kwargs: dict) -> None:                                     â”‚
           â”‚    950 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:915 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    912 â”‚   â”‚   â”‚   â”‚   â”‚   parent_otel_span=parent_otel_span,                                                               â”‚
           â”‚    913 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    914 â”‚   â”‚   â”‚   â”‚                                                                                                        â”‚
           â”‚ â±  915 â”‚   â”‚   â”‚   â”‚   response = await _response                                                                           â”‚
           â”‚    916 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚    917 â”‚   â”‚   â”‚   ## CHECK CONTENT FILTER ERROR ##                                                                         â”‚
           â”‚    918 â”‚   â”‚   â”‚   if isinstance(response, ModelResponse):                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1175 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1172 â”‚   â”‚   â”‚   â”‚   â”‚   else:                                                                                            â”‚
           â”‚   1173 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   kwargs["model"] = context_window_fallback_dict[model]                                        â”‚
           â”‚   1174 â”‚   â”‚   â”‚   â”‚   â”‚   return await original_function(*args, **kwargs)                                                  â”‚
           â”‚ â± 1175 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   1176 â”‚                                                                                                                    â”‚
           â”‚   1177 â”‚   is_coroutine = inspect.iscoroutinefunction(original_function)                                                    â”‚
           â”‚   1178                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1031 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1028 â”‚   â”‚   â”‚   â”‚   return _caching_handler_response.final_embedding_cached_response                                     â”‚
           â”‚   1029 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1030 â”‚   â”‚   â”‚   # MODEL CALL                                                                                             â”‚
           â”‚ â± 1031 â”‚   â”‚   â”‚   result = await original_function(*args, **kwargs)                                                        â”‚
           â”‚   1032 â”‚   â”‚   â”‚   end_time = datetime.datetime.now()                                                                       â”‚
           â”‚   1033 â”‚   â”‚   â”‚   if "stream" in kwargs and kwargs["stream"] is True:                                                      â”‚
           â”‚   1034 â”‚   â”‚   â”‚   â”‚   if (                                                                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:499 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    496 â”‚   â”‚   return response                                                                                              â”‚
           â”‚    497 â”‚   except Exception as e:                                                                                           â”‚
           â”‚    498 â”‚   â”‚   custom_llm_provider = custom_llm_provider or "openai"                                                        â”‚
           â”‚ â±  499 â”‚   â”‚   raise exception_type(                                                                                        â”‚
           â”‚    500 â”‚   â”‚   â”‚   model=model,                                                                                             â”‚
           â”‚    501 â”‚   â”‚   â”‚   custom_llm_provider=custom_llm_provider,                                                                 â”‚
           â”‚    502 â”‚   â”‚   â”‚   original_exception=e,                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:212 â”‚
           â”‚ 5 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2122 â”‚   â”‚   # don't let an error with mapping interrupt the user from receiving an error                                 â”‚
           â”‚        from the llm api calls                                                                                               â”‚
           â”‚   2123 â”‚   â”‚   if exception_mapping_worked:                                                                                 â”‚
           â”‚   2124 â”‚   â”‚   â”‚   setattr(e, "litellm_response_headers", litellm_response_headers)                                         â”‚
           â”‚ â± 2125 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   2126 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   2127 â”‚   â”‚   â”‚   for error_type in litellm.LITELLM_EXCEPTION_TYPES:                                                       â”‚
           â”‚   2128 â”‚   â”‚   â”‚   â”‚   if isinstance(e, error_type):                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:210 â”‚
           â”‚ 1 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2098 â”‚   â”‚   â”‚   â”‚   â”‚   request=original_exception.request,                                                              â”‚
           â”‚   2099 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚   2100 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â± 2101 â”‚   â”‚   â”‚   â”‚   raise APIConnectionError(                                                                            â”‚
           â”‚   2102 â”‚   â”‚   â”‚   â”‚   â”‚   message="{}\n{}".format(                                                                         â”‚
           â”‚   2103 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   str(original_exception), traceback.format_exc()                                              â”‚
           â”‚   2104 â”‚   â”‚   â”‚   â”‚   â”‚   ),                                                                                               â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           APIConnectionError: litellm.APIConnectionError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1109, in                 
           _wrap_create_connection                                                                                                        
               sock = await aiohappyeyeballs.start_connection(                                                                            
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                            
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py", line 123, in              
           start_connection                                                                                                               
               raise OSError(first_errno, msg)                                                                                            
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py", line 477, in acompletion           
               response = await init_response                                                                                             
                          ^^^^^^^^^^^^^^^^^^^                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 566, in                
           ollama_acompletion                                                                                                             
               raise e  # don't use verbose_logger.exception, if exception is raised                                                      
               ^^^^^^^                                                                                                                    
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 507, in                
           ollama_acompletion                                                                                                             
               resp = await session.post(url, json=data)                                                                                  
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                  
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py", line 696, in _request            
               conn = await self._connector.connect(                                                                                      
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 544, in connect          
               proto = await self._create_connection(req, traces, timeout)                                                                
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1050, in                 
           _create_connection                                                                                                             
               _, proto = await self._create_direct_connection(req, traces, timeout)                                                      
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1394, in                 
           _create_direct_connection                                                                                                      
               raise last_exc                                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1363, in                 
           _create_direct_connection                                                                                                      
               transp, proto = await self._wrap_create_connection(                                                                        
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                        
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1124, in                 
           _wrap_create_connection                                                                                                        
               raise client_error(req.connection_key, exc) from exc                                                                       
           aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
                                                                                                                                          
           Received Model Group=ollama/llama3.2                                                                                           
           Available Model Group Fallbacks=None LiteLLM Retried: 2 times, LiteLLM Max Retries: 3                                          
[00:49:28] Answer:                                                                                                                        

 Skipping sciqag_question_48.json as sciqag_answer_48.json already exists. 



 ANSWERING QUESTION: sciqag_question_49.json
 ----------------------------- 



[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.

[00:49:48] Trajectory failed.                                                                                                             
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1109 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1106 â”‚   â”‚   â”‚   async with ceil_timeout(                                                                                 â”‚
           â”‚   1107 â”‚   â”‚   â”‚   â”‚   timeout.sock_connect, ceil_threshold=timeout.ceil_threshold                                          â”‚
           â”‚   1108 â”‚   â”‚   â”‚   ):                                                                                                       â”‚
           â”‚ â± 1109 â”‚   â”‚   â”‚   â”‚   sock = await aiohappyeyeballs.start_connection(                                                      â”‚
           â”‚   1110 â”‚   â”‚   â”‚   â”‚   â”‚   addr_infos=addr_infos,                                                                           â”‚
           â”‚   1111 â”‚   â”‚   â”‚   â”‚   â”‚   local_addr_infos=self._local_addr_infos,                                                         â”‚
           â”‚   1112 â”‚   â”‚   â”‚   â”‚   â”‚   happy_eyeballs_delay=self._happy_eyeballs_delay,                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py:123 in start_connection          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   120 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, OSError) and exc.errno == first_errno                                         â”‚
           â”‚   121 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   for exc in all_exceptions                                                                     â”‚
           â”‚   122 â”‚   â”‚   â”‚   â”‚   â”‚   ):                                                                                                â”‚
           â”‚ â± 123 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   raise OSError(first_errno, msg)                                                               â”‚
           â”‚   124 â”‚   â”‚   â”‚   â”‚   elif isinstance(first_exception, RuntimeError) and all(                                               â”‚
           â”‚   125 â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, RuntimeError) for exc in all_exceptions                                           â”‚
           â”‚   126 â”‚   â”‚   â”‚   â”‚   ):                                                                                                    â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:477 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    474 â”‚   â”‚   â”‚   â”‚   â”‚   response = ModelResponse(**init_response)                                                        â”‚
           â”‚    475 â”‚   â”‚   â”‚   â”‚   response = init_response                                                                             â”‚
           â”‚    476 â”‚   â”‚   â”‚   elif asyncio.iscoroutine(init_response):                                                                 â”‚
           â”‚ â±  477 â”‚   â”‚   â”‚   â”‚   response = await init_response                                                                       â”‚
           â”‚    478 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚    479 â”‚   â”‚   â”‚   â”‚   response = init_response  # type: ignore                                                             â”‚
           â”‚    480                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:566 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   563 â”‚   â”‚   â”‚   )                                                                                                         â”‚
           â”‚   564 â”‚   â”‚   â”‚   return model_response                                                                                     â”‚
           â”‚   565 â”‚   except Exception as e:                                                                                            â”‚
           â”‚ â± 566 â”‚   â”‚   raise e  # don't use verbose_logger.exception, if exception is raised                                         â”‚
           â”‚   567                                                                                                                       â”‚
           â”‚   568                                                                                                                       â”‚
           â”‚   569 async def ollama_aembeddings(                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:507 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   504 â”‚   try:                                                                                                              â”‚
           â”‚   505 â”‚   â”‚   timeout = aiohttp.ClientTimeout(total=litellm.request_timeout)  # 10 minutes                                  â”‚
           â”‚   506 â”‚   â”‚   async with aiohttp.ClientSession(timeout=timeout) as session:                                                 â”‚
           â”‚ â± 507 â”‚   â”‚   â”‚   resp = await session.post(url, json=data)                                                                 â”‚
           â”‚   508 â”‚   â”‚   â”‚                                                                                                             â”‚
           â”‚   509 â”‚   â”‚   â”‚   if resp.status != 200:                                                                                    â”‚
           â”‚   510 â”‚   â”‚   â”‚   â”‚   text = await resp.text()                                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py:696 in _request                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚    693 â”‚   â”‚   â”‚   â”‚   â”‚                                                                                                    â”‚
           â”‚    694 â”‚   â”‚   â”‚   â”‚   â”‚   # connection timeout                                                                             â”‚
           â”‚    695 â”‚   â”‚   â”‚   â”‚   â”‚   try:                                                                                             â”‚
           â”‚ â±  696 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   conn = await self._connector.connect(                                                        â”‚
           â”‚    697 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   req, traces=traces, timeout=real_timeout                                                 â”‚
           â”‚    698 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚    699 â”‚   â”‚   â”‚   â”‚   â”‚   except asyncio.TimeoutError as exc:                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:544 in connect                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚    541 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    542 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    543 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_start()                                                   â”‚
           â”‚ â±  544 â”‚   â”‚   â”‚   â”‚   proto = await self._create_connection(req, traces, timeout)                                          â”‚
           â”‚    545 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    546 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    547 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_end()                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1050 in _create_connection           â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1047 â”‚   â”‚   if req.proxy:                                                                                                â”‚
           â”‚   1048 â”‚   â”‚   â”‚   _, proto = await self._create_proxy_connection(req, traces, timeout)                                     â”‚
           â”‚   1049 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚ â± 1050 â”‚   â”‚   â”‚   _, proto = await self._create_direct_connection(req, traces, timeout)                                    â”‚
           â”‚   1051 â”‚   â”‚                                                                                                                â”‚
           â”‚   1052 â”‚   â”‚   return proto                                                                                                 â”‚
           â”‚   1053                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1394 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1391 â”‚   â”‚   â”‚   return transp, proto                                                                                     â”‚
           â”‚   1392 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   1393 â”‚   â”‚   â”‚   assert last_exc is not None                                                                              â”‚
           â”‚ â± 1394 â”‚   â”‚   â”‚   raise last_exc                                                                                           â”‚
           â”‚   1395 â”‚                                                                                                                    â”‚
           â”‚   1396 â”‚   async def _create_proxy_connection(                                                                              â”‚
           â”‚   1397 â”‚   â”‚   self, req: ClientRequest, traces: List["Trace"], timeout: "ClientTimeout"                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1363 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1360 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   1361 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1362 â”‚   â”‚   â”‚   try:                                                                                                     â”‚
           â”‚ â± 1363 â”‚   â”‚   â”‚   â”‚   transp, proto = await self._wrap_create_connection(                                                  â”‚
           â”‚   1364 â”‚   â”‚   â”‚   â”‚   â”‚   self._factory,                                                                                   â”‚
           â”‚   1365 â”‚   â”‚   â”‚   â”‚   â”‚   timeout=timeout,                                                                                 â”‚
           â”‚   1366 â”‚   â”‚   â”‚   â”‚   â”‚   ssl=sslcontext,                                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1124 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1121 â”‚   â”‚   except OSError as exc:                                                                                       â”‚
           â”‚   1122 â”‚   â”‚   â”‚   if exc.errno is None and isinstance(exc, asyncio.TimeoutError):                                          â”‚
           â”‚   1123 â”‚   â”‚   â”‚   â”‚   raise                                                                                                â”‚
           â”‚ â± 1124 â”‚   â”‚   â”‚   raise client_error(req.connection_key, exc) from exc                                                     â”‚
           â”‚   1125 â”‚                                                                                                                    â”‚
           â”‚   1126 â”‚   async def _wrap_existing_connection(                                                                             â”‚
           â”‚   1127 â”‚   â”‚   self,                                                                                                        â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno 111] Connect call failed 
           ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                                                    
                                                                                                                                          
           During handling of the above exception, another exception occurred:                                                            
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:276 in _run_with_timeout_failure                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   273 ) -> tuple[PQASession, AgentStatus]:                                                                                  â”‚
           â”‚   274 â”‚   try:                                                                                                              â”‚
           â”‚   275 â”‚   â”‚   async with asyncio.timeout(query.settings.agent.timeout):                                                     â”‚
           â”‚ â± 276 â”‚   â”‚   â”‚   status = await rollout()                                                                                  â”‚
           â”‚   277 â”‚   except TimeoutError:                                                                                              â”‚
           â”‚   278 â”‚   â”‚   logger.warning(                                                                                               â”‚
           â”‚   279 â”‚   â”‚   â”‚   f"Agent timeout after {query.settings.agent.timeout}-sec, just answering."                                â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:410 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   407 â”‚   â”‚   â”‚   â”‚   )                                                                                                     â”‚
           â”‚   408 â”‚   â”‚   â”‚   â”‚   return AgentStatus.TRUNCATED                                                                          â”‚
           â”‚   409 â”‚   â”‚   â”‚   agent_state.messages += obs                                                                               â”‚
           â”‚ â± 410 â”‚   â”‚   â”‚   for attempt in Retrying(                                                                                  â”‚
           â”‚   411 â”‚   â”‚   â”‚   â”‚   stop=stop_after_attempt(5),                                                                           â”‚
           â”‚   412 â”‚   â”‚   â”‚   â”‚   retry=retry_if_exception_type(MalformedMessageError),                                                 â”‚
           â”‚   413 â”‚   â”‚   â”‚   â”‚   before_sleep=before_sleep_log(logger, logging.WARNING),                                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:443 in __iter__                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   440 â”‚   â”‚                                                                                                                 â”‚
           â”‚   441 â”‚   â”‚   retry_state = RetryCallState(self, fn=None, args=(), kwargs={})                                               â”‚
           â”‚   442 â”‚   â”‚   while True:                                                                                                   â”‚
           â”‚ â± 443 â”‚   â”‚   â”‚   do = self.iter(retry_state=retry_state)                                                                   â”‚
           â”‚   444 â”‚   â”‚   â”‚   if isinstance(do, DoAttempt):                                                                             â”‚
           â”‚   445 â”‚   â”‚   â”‚   â”‚   yield AttemptManager(retry_state=retry_state)                                                         â”‚
           â”‚   446 â”‚   â”‚   â”‚   elif isinstance(do, DoSleep):                                                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:376 in iter                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   373 â”‚   â”‚   self._begin_iter(retry_state)                                                                                 â”‚
           â”‚   374 â”‚   â”‚   result = None                                                                                                 â”‚
           â”‚   375 â”‚   â”‚   for action in self.iter_state.actions:                                                                        â”‚
           â”‚ â± 376 â”‚   â”‚   â”‚   result = action(retry_state)                                                                              â”‚
           â”‚   377 â”‚   â”‚   return result                                                                                                 â”‚
           â”‚   378 â”‚                                                                                                                     â”‚
           â”‚   379 â”‚   def _begin_iter(self, retry_state: "RetryCallState") -> None:  # noqa                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:398 in <lambda>                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   395 â”‚                                                                                                                     â”‚
           â”‚   396 â”‚   def _post_retry_check_actions(self, retry_state: "RetryCallState") -> None:                                       â”‚
           â”‚   397 â”‚   â”‚   if not (self.iter_state.is_explicit_retry or self.iter_state.retry_run_result):                               â”‚
           â”‚ â± 398 â”‚   â”‚   â”‚   self._add_action_func(lambda rs: rs.outcome.result())                                                     â”‚
           â”‚   399 â”‚   â”‚   â”‚   return                                                                                                    â”‚
           â”‚   400 â”‚   â”‚                                                                                                                 â”‚
           â”‚   401 â”‚   â”‚   if self.after is not None:                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:449 in result                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚   446 â”‚   â”‚   â”‚   â”‚   if self._state in [CANCELLED, CANCELLED_AND_NOTIFIED]:                                                â”‚
           â”‚   447 â”‚   â”‚   â”‚   â”‚   â”‚   raise CancelledError()                                                                            â”‚
           â”‚   448 â”‚   â”‚   â”‚   â”‚   elif self._state == FINISHED:                                                                         â”‚
           â”‚ â± 449 â”‚   â”‚   â”‚   â”‚   â”‚   return self.__get_result()                                                                        â”‚
           â”‚   450 â”‚   â”‚   â”‚   â”‚                                                                                                         â”‚
           â”‚   451 â”‚   â”‚   â”‚   â”‚   self._condition.wait(timeout)                                                                         â”‚
           â”‚   452                                                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:401 in __get_result                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   398 â”‚   def __get_result(self):                                                                                           â”‚
           â”‚   399 â”‚   â”‚   if self._exception:                                                                                           â”‚
           â”‚   400 â”‚   â”‚   â”‚   try:                                                                                                      â”‚
           â”‚ â± 401 â”‚   â”‚   â”‚   â”‚   raise self._exception                                                                                 â”‚
           â”‚   402 â”‚   â”‚   â”‚   finally:                                                                                                  â”‚
           â”‚   403 â”‚   â”‚   â”‚   â”‚   # Break a reference cycle with the exception in self._exception                                       â”‚
           â”‚   404 â”‚   â”‚   â”‚   â”‚   self = None                                                                                           â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:417 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   414 â”‚   â”‚   â”‚   â”‚   reraise=True,                                                                                         â”‚
           â”‚   415 â”‚   â”‚   â”‚   ):                                                                                                        â”‚
           â”‚   416 â”‚   â”‚   â”‚   â”‚   with attempt:  # Retrying if ToolSelector fails to select a tool                                      â”‚
           â”‚ â± 417 â”‚   â”‚   â”‚   â”‚   â”‚   action = await agent(agent_state.messages, tools)                                                 â”‚
           â”‚   418 â”‚   â”‚   â”‚   agent_state.messages = [*agent_state.messages, action]                                                    â”‚
           â”‚   419 â”‚   â”‚   â”‚   if on_agent_action_callback:                                                                              â”‚
           â”‚   420 â”‚   â”‚   â”‚   â”‚   await on_agent_action_callback(action, agent_state)                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aviary/tools/utils.py:182 in __call__                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   179 â”‚   â”‚   â”‚   self._ledger.messages.extend(messages)                                                                    â”‚
           â”‚   180 â”‚   â”‚   â”‚   messages = self._ledger.messages                                                                          â”‚
           â”‚   181 â”‚   â”‚                                                                                                                 â”‚
           â”‚ â± 182 â”‚   â”‚   model_response = await self._bound_acompletion(                                                               â”‚
           â”‚   183 â”‚   â”‚   â”‚   messages=MessagesAdapter.dump_python(                                                                     â”‚
           â”‚   184 â”‚   â”‚   â”‚   â”‚   messages, exclude_none=True, by_alias=True                                                            â”‚
           â”‚   185 â”‚   â”‚   â”‚   ),                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:817 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    814 â”‚   â”‚   â”‚   â”‚   â”‚   original_exception=e,                                                                            â”‚
           â”‚    815 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    816 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚ â±  817 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    818 â”‚                                                                                                                    â”‚
           â”‚    819 â”‚   async def _acompletion(                                                                                          â”‚
           â”‚    820 â”‚   â”‚   self, model: str, messages: List[Dict[str, str]], **kwargs                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:793 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    790 â”‚   â”‚   â”‚   if request_priority is not None and isinstance(request_priority, int):                                   â”‚
           â”‚    791 â”‚   â”‚   â”‚   â”‚   response = await self.schedule_acompletion(**kwargs)                                                 â”‚
           â”‚    792 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â±  793 â”‚   â”‚   â”‚   â”‚   response = await self.async_function_with_fallbacks(**kwargs)                                        â”‚
           â”‚    794 â”‚   â”‚   â”‚   end_time = time.time()                                                                                   â”‚
           â”‚    795 â”‚   â”‚   â”‚   _duration = end_time - start_time                                                                        â”‚
           â”‚    796 â”‚   â”‚   â”‚   asyncio.create_task(                                                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2795 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2792 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚   2793 â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                                â”‚
           â”‚   2794 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2795 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2796 â”‚                                                                                                                    â”‚
           â”‚   2797 â”‚   def _handle_mock_testing_fallbacks(                                                                              â”‚
           â”‚   2798 â”‚   â”‚   self,                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2631 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2628 â”‚   â”‚   â”‚   â”‚   content_policy_fallbacks=content_policy_fallbacks,                                                   â”‚
           â”‚   2629 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2630 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2631 â”‚   â”‚   â”‚   response = await self.async_function_with_retries(*args, **kwargs)                                       â”‚
           â”‚   2632 â”‚   â”‚   â”‚   verbose_router_logger.debug(f"Async Response: {response}")                                               â”‚
           â”‚   2633 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2634 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2967 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2964 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "max_retries", num_retries)                                              â”‚
           â”‚   2965 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "num_retries", current_attempt)                                          â”‚
           â”‚   2966 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2967 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2968 â”‚                                                                                                                    â”‚
           â”‚   2969 â”‚   async def make_call(self, original_function: Any, *args, **kwargs):                                              â”‚
           â”‚   2970 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2879 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2876 â”‚   â”‚   â”‚   â”‚   model_group=model_group, kwargs=kwargs                                                               â”‚
           â”‚   2877 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2878 â”‚   â”‚   â”‚   # if the function call is successful, no exception will be raised and we'll                              â”‚
           â”‚        break out of the loop                                                                                                â”‚
           â”‚ â± 2879 â”‚   â”‚   â”‚   response = await self.make_call(original_function, *args, **kwargs)                                      â”‚
           â”‚   2880 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   2881 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2882 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2976 in make_call                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2973 â”‚   â”‚   model_group = kwargs.get("model")                                                                            â”‚
           â”‚   2974 â”‚   â”‚   response = original_function(*args, **kwargs)                                                                â”‚
           â”‚   2975 â”‚   â”‚   if inspect.iscoroutinefunction(response) or inspect.isawaitable(response):                                   â”‚
           â”‚ â± 2976 â”‚   â”‚   â”‚   response = await response                                                                                â”‚
           â”‚   2977 â”‚   â”‚   ## PROCESS RESPONSE HEADERS                                                                                  â”‚
           â”‚   2978 â”‚   â”‚   await self.set_response_headers(response=response, model_group=model_group)                                  â”‚
           â”‚   2979                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:947 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    944 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚    945 â”‚   â”‚   â”‚   if model_name is not None:                                                                               â”‚
           â”‚    946 â”‚   â”‚   â”‚   â”‚   self.fail_calls[model_name] += 1                                                                     â”‚
           â”‚ â±  947 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    948 â”‚                                                                                                                    â”‚
           â”‚    949 â”‚   def _update_kwargs_before_fallbacks(self, model: str, kwargs: dict) -> None:                                     â”‚
           â”‚    950 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:915 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    912 â”‚   â”‚   â”‚   â”‚   â”‚   parent_otel_span=parent_otel_span,                                                               â”‚
           â”‚    913 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    914 â”‚   â”‚   â”‚   â”‚                                                                                                        â”‚
           â”‚ â±  915 â”‚   â”‚   â”‚   â”‚   response = await _response                                                                           â”‚
           â”‚    916 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚    917 â”‚   â”‚   â”‚   ## CHECK CONTENT FILTER ERROR ##                                                                         â”‚
           â”‚    918 â”‚   â”‚   â”‚   if isinstance(response, ModelResponse):                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1175 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1172 â”‚   â”‚   â”‚   â”‚   â”‚   else:                                                                                            â”‚
           â”‚   1173 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   kwargs["model"] = context_window_fallback_dict[model]                                        â”‚
           â”‚   1174 â”‚   â”‚   â”‚   â”‚   â”‚   return await original_function(*args, **kwargs)                                                  â”‚
           â”‚ â± 1175 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   1176 â”‚                                                                                                                    â”‚
           â”‚   1177 â”‚   is_coroutine = inspect.iscoroutinefunction(original_function)                                                    â”‚
           â”‚   1178                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1031 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1028 â”‚   â”‚   â”‚   â”‚   return _caching_handler_response.final_embedding_cached_response                                     â”‚
           â”‚   1029 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1030 â”‚   â”‚   â”‚   # MODEL CALL                                                                                             â”‚
           â”‚ â± 1031 â”‚   â”‚   â”‚   result = await original_function(*args, **kwargs)                                                        â”‚
           â”‚   1032 â”‚   â”‚   â”‚   end_time = datetime.datetime.now()                                                                       â”‚
           â”‚   1033 â”‚   â”‚   â”‚   if "stream" in kwargs and kwargs["stream"] is True:                                                      â”‚
           â”‚   1034 â”‚   â”‚   â”‚   â”‚   if (                                                                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:499 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    496 â”‚   â”‚   return response                                                                                              â”‚
           â”‚    497 â”‚   except Exception as e:                                                                                           â”‚
           â”‚    498 â”‚   â”‚   custom_llm_provider = custom_llm_provider or "openai"                                                        â”‚
           â”‚ â±  499 â”‚   â”‚   raise exception_type(                                                                                        â”‚
           â”‚    500 â”‚   â”‚   â”‚   model=model,                                                                                             â”‚
           â”‚    501 â”‚   â”‚   â”‚   custom_llm_provider=custom_llm_provider,                                                                 â”‚
           â”‚    502 â”‚   â”‚   â”‚   original_exception=e,                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:212 â”‚
           â”‚ 5 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2122 â”‚   â”‚   # don't let an error with mapping interrupt the user from receiving an error                                 â”‚
           â”‚        from the llm api calls                                                                                               â”‚
           â”‚   2123 â”‚   â”‚   if exception_mapping_worked:                                                                                 â”‚
           â”‚   2124 â”‚   â”‚   â”‚   setattr(e, "litellm_response_headers", litellm_response_headers)                                         â”‚
           â”‚ â± 2125 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   2126 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   2127 â”‚   â”‚   â”‚   for error_type in litellm.LITELLM_EXCEPTION_TYPES:                                                       â”‚
           â”‚   2128 â”‚   â”‚   â”‚   â”‚   if isinstance(e, error_type):                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:210 â”‚
           â”‚ 1 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2098 â”‚   â”‚   â”‚   â”‚   â”‚   request=original_exception.request,                                                              â”‚
           â”‚   2099 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚   2100 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â± 2101 â”‚   â”‚   â”‚   â”‚   raise APIConnectionError(                                                                            â”‚
           â”‚   2102 â”‚   â”‚   â”‚   â”‚   â”‚   message="{}\n{}".format(                                                                         â”‚
           â”‚   2103 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   str(original_exception), traceback.format_exc()                                              â”‚
           â”‚   2104 â”‚   â”‚   â”‚   â”‚   â”‚   ),                                                                                               â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           APIConnectionError: litellm.APIConnectionError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1109, in                 
           _wrap_create_connection                                                                                                        
               sock = await aiohappyeyeballs.start_connection(                                                                            
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                            
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py", line 123, in              
           start_connection                                                                                                               
               raise OSError(first_errno, msg)                                                                                            
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py", line 477, in acompletion           
               response = await init_response                                                                                             
                          ^^^^^^^^^^^^^^^^^^^                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 566, in                
           ollama_acompletion                                                                                                             
               raise e  # don't use verbose_logger.exception, if exception is raised                                                      
               ^^^^^^^                                                                                                                    
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 507, in                
           ollama_acompletion                                                                                                             
               resp = await session.post(url, json=data)                                                                                  
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                  
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py", line 696, in _request            
               conn = await self._connector.connect(                                                                                      
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 544, in connect          
               proto = await self._create_connection(req, traces, timeout)                                                                
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1050, in                 
           _create_connection                                                                                                             
               _, proto = await self._create_direct_connection(req, traces, timeout)                                                      
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1394, in                 
           _create_direct_connection                                                                                                      
               raise last_exc                                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1363, in                 
           _create_direct_connection                                                                                                      
               transp, proto = await self._wrap_create_connection(                                                                        
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                        
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1124, in                 
           _wrap_create_connection                                                                                                        
               raise client_error(req.connection_key, exc) from exc                                                                       
           aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
                                                                                                                                          
           Received Model Group=ollama/llama3.2                                                                                           
           Available Model Group Fallbacks=None LiteLLM Retried: 2 times, LiteLLM Max Retries: 3                                          
[00:49:50] Answer:                                                                                                                        


 ANSWERING QUESTION: sciqag_question_5.json
 ----------------------------- 



[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.

[00:50:11] Trajectory failed.                                                                                                             
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1109 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1106 â”‚   â”‚   â”‚   async with ceil_timeout(                                                                                 â”‚
           â”‚   1107 â”‚   â”‚   â”‚   â”‚   timeout.sock_connect, ceil_threshold=timeout.ceil_threshold                                          â”‚
           â”‚   1108 â”‚   â”‚   â”‚   ):                                                                                                       â”‚
           â”‚ â± 1109 â”‚   â”‚   â”‚   â”‚   sock = await aiohappyeyeballs.start_connection(                                                      â”‚
           â”‚   1110 â”‚   â”‚   â”‚   â”‚   â”‚   addr_infos=addr_infos,                                                                           â”‚
           â”‚   1111 â”‚   â”‚   â”‚   â”‚   â”‚   local_addr_infos=self._local_addr_infos,                                                         â”‚
           â”‚   1112 â”‚   â”‚   â”‚   â”‚   â”‚   happy_eyeballs_delay=self._happy_eyeballs_delay,                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py:123 in start_connection          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   120 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, OSError) and exc.errno == first_errno                                         â”‚
           â”‚   121 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   for exc in all_exceptions                                                                     â”‚
           â”‚   122 â”‚   â”‚   â”‚   â”‚   â”‚   ):                                                                                                â”‚
           â”‚ â± 123 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   raise OSError(first_errno, msg)                                                               â”‚
           â”‚   124 â”‚   â”‚   â”‚   â”‚   elif isinstance(first_exception, RuntimeError) and all(                                               â”‚
           â”‚   125 â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, RuntimeError) for exc in all_exceptions                                           â”‚
           â”‚   126 â”‚   â”‚   â”‚   â”‚   ):                                                                                                    â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:477 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    474 â”‚   â”‚   â”‚   â”‚   â”‚   response = ModelResponse(**init_response)                                                        â”‚
           â”‚    475 â”‚   â”‚   â”‚   â”‚   response = init_response                                                                             â”‚
           â”‚    476 â”‚   â”‚   â”‚   elif asyncio.iscoroutine(init_response):                                                                 â”‚
           â”‚ â±  477 â”‚   â”‚   â”‚   â”‚   response = await init_response                                                                       â”‚
           â”‚    478 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚    479 â”‚   â”‚   â”‚   â”‚   response = init_response  # type: ignore                                                             â”‚
           â”‚    480                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:566 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   563 â”‚   â”‚   â”‚   )                                                                                                         â”‚
           â”‚   564 â”‚   â”‚   â”‚   return model_response                                                                                     â”‚
           â”‚   565 â”‚   except Exception as e:                                                                                            â”‚
           â”‚ â± 566 â”‚   â”‚   raise e  # don't use verbose_logger.exception, if exception is raised                                         â”‚
           â”‚   567                                                                                                                       â”‚
           â”‚   568                                                                                                                       â”‚
           â”‚   569 async def ollama_aembeddings(                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:507 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   504 â”‚   try:                                                                                                              â”‚
           â”‚   505 â”‚   â”‚   timeout = aiohttp.ClientTimeout(total=litellm.request_timeout)  # 10 minutes                                  â”‚
           â”‚   506 â”‚   â”‚   async with aiohttp.ClientSession(timeout=timeout) as session:                                                 â”‚
           â”‚ â± 507 â”‚   â”‚   â”‚   resp = await session.post(url, json=data)                                                                 â”‚
           â”‚   508 â”‚   â”‚   â”‚                                                                                                             â”‚
           â”‚   509 â”‚   â”‚   â”‚   if resp.status != 200:                                                                                    â”‚
           â”‚   510 â”‚   â”‚   â”‚   â”‚   text = await resp.text()                                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py:696 in _request                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚    693 â”‚   â”‚   â”‚   â”‚   â”‚                                                                                                    â”‚
           â”‚    694 â”‚   â”‚   â”‚   â”‚   â”‚   # connection timeout                                                                             â”‚
           â”‚    695 â”‚   â”‚   â”‚   â”‚   â”‚   try:                                                                                             â”‚
           â”‚ â±  696 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   conn = await self._connector.connect(                                                        â”‚
           â”‚    697 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   req, traces=traces, timeout=real_timeout                                                 â”‚
           â”‚    698 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚    699 â”‚   â”‚   â”‚   â”‚   â”‚   except asyncio.TimeoutError as exc:                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:544 in connect                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚    541 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    542 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    543 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_start()                                                   â”‚
           â”‚ â±  544 â”‚   â”‚   â”‚   â”‚   proto = await self._create_connection(req, traces, timeout)                                          â”‚
           â”‚    545 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    546 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    547 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_end()                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1050 in _create_connection           â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1047 â”‚   â”‚   if req.proxy:                                                                                                â”‚
           â”‚   1048 â”‚   â”‚   â”‚   _, proto = await self._create_proxy_connection(req, traces, timeout)                                     â”‚
           â”‚   1049 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚ â± 1050 â”‚   â”‚   â”‚   _, proto = await self._create_direct_connection(req, traces, timeout)                                    â”‚
           â”‚   1051 â”‚   â”‚                                                                                                                â”‚
           â”‚   1052 â”‚   â”‚   return proto                                                                                                 â”‚
           â”‚   1053                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1394 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1391 â”‚   â”‚   â”‚   return transp, proto                                                                                     â”‚
           â”‚   1392 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   1393 â”‚   â”‚   â”‚   assert last_exc is not None                                                                              â”‚
           â”‚ â± 1394 â”‚   â”‚   â”‚   raise last_exc                                                                                           â”‚
           â”‚   1395 â”‚                                                                                                                    â”‚
           â”‚   1396 â”‚   async def _create_proxy_connection(                                                                              â”‚
           â”‚   1397 â”‚   â”‚   self, req: ClientRequest, traces: List["Trace"], timeout: "ClientTimeout"                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1363 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1360 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   1361 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1362 â”‚   â”‚   â”‚   try:                                                                                                     â”‚
           â”‚ â± 1363 â”‚   â”‚   â”‚   â”‚   transp, proto = await self._wrap_create_connection(                                                  â”‚
           â”‚   1364 â”‚   â”‚   â”‚   â”‚   â”‚   self._factory,                                                                                   â”‚
           â”‚   1365 â”‚   â”‚   â”‚   â”‚   â”‚   timeout=timeout,                                                                                 â”‚
           â”‚   1366 â”‚   â”‚   â”‚   â”‚   â”‚   ssl=sslcontext,                                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1124 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1121 â”‚   â”‚   except OSError as exc:                                                                                       â”‚
           â”‚   1122 â”‚   â”‚   â”‚   if exc.errno is None and isinstance(exc, asyncio.TimeoutError):                                          â”‚
           â”‚   1123 â”‚   â”‚   â”‚   â”‚   raise                                                                                                â”‚
           â”‚ â± 1124 â”‚   â”‚   â”‚   raise client_error(req.connection_key, exc) from exc                                                     â”‚
           â”‚   1125 â”‚                                                                                                                    â”‚
           â”‚   1126 â”‚   async def _wrap_existing_connection(                                                                             â”‚
           â”‚   1127 â”‚   â”‚   self,                                                                                                        â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno 111] Connect call failed 
           ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                                                    
                                                                                                                                          
           During handling of the above exception, another exception occurred:                                                            
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:276 in _run_with_timeout_failure                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   273 ) -> tuple[PQASession, AgentStatus]:                                                                                  â”‚
           â”‚   274 â”‚   try:                                                                                                              â”‚
           â”‚   275 â”‚   â”‚   async with asyncio.timeout(query.settings.agent.timeout):                                                     â”‚
           â”‚ â± 276 â”‚   â”‚   â”‚   status = await rollout()                                                                                  â”‚
           â”‚   277 â”‚   except TimeoutError:                                                                                              â”‚
           â”‚   278 â”‚   â”‚   logger.warning(                                                                                               â”‚
           â”‚   279 â”‚   â”‚   â”‚   f"Agent timeout after {query.settings.agent.timeout}-sec, just answering."                                â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:410 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   407 â”‚   â”‚   â”‚   â”‚   )                                                                                                     â”‚
           â”‚   408 â”‚   â”‚   â”‚   â”‚   return AgentStatus.TRUNCATED                                                                          â”‚
           â”‚   409 â”‚   â”‚   â”‚   agent_state.messages += obs                                                                               â”‚
           â”‚ â± 410 â”‚   â”‚   â”‚   for attempt in Retrying(                                                                                  â”‚
           â”‚   411 â”‚   â”‚   â”‚   â”‚   stop=stop_after_attempt(5),                                                                           â”‚
           â”‚   412 â”‚   â”‚   â”‚   â”‚   retry=retry_if_exception_type(MalformedMessageError),                                                 â”‚
           â”‚   413 â”‚   â”‚   â”‚   â”‚   before_sleep=before_sleep_log(logger, logging.WARNING),                                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:443 in __iter__                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   440 â”‚   â”‚                                                                                                                 â”‚
           â”‚   441 â”‚   â”‚   retry_state = RetryCallState(self, fn=None, args=(), kwargs={})                                               â”‚
           â”‚   442 â”‚   â”‚   while True:                                                                                                   â”‚
           â”‚ â± 443 â”‚   â”‚   â”‚   do = self.iter(retry_state=retry_state)                                                                   â”‚
           â”‚   444 â”‚   â”‚   â”‚   if isinstance(do, DoAttempt):                                                                             â”‚
           â”‚   445 â”‚   â”‚   â”‚   â”‚   yield AttemptManager(retry_state=retry_state)                                                         â”‚
           â”‚   446 â”‚   â”‚   â”‚   elif isinstance(do, DoSleep):                                                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:376 in iter                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   373 â”‚   â”‚   self._begin_iter(retry_state)                                                                                 â”‚
           â”‚   374 â”‚   â”‚   result = None                                                                                                 â”‚
           â”‚   375 â”‚   â”‚   for action in self.iter_state.actions:                                                                        â”‚
           â”‚ â± 376 â”‚   â”‚   â”‚   result = action(retry_state)                                                                              â”‚
           â”‚   377 â”‚   â”‚   return result                                                                                                 â”‚
           â”‚   378 â”‚                                                                                                                     â”‚
           â”‚   379 â”‚   def _begin_iter(self, retry_state: "RetryCallState") -> None:  # noqa                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:398 in <lambda>                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   395 â”‚                                                                                                                     â”‚
           â”‚   396 â”‚   def _post_retry_check_actions(self, retry_state: "RetryCallState") -> None:                                       â”‚
           â”‚   397 â”‚   â”‚   if not (self.iter_state.is_explicit_retry or self.iter_state.retry_run_result):                               â”‚
           â”‚ â± 398 â”‚   â”‚   â”‚   self._add_action_func(lambda rs: rs.outcome.result())                                                     â”‚
           â”‚   399 â”‚   â”‚   â”‚   return                                                                                                    â”‚
           â”‚   400 â”‚   â”‚                                                                                                                 â”‚
           â”‚   401 â”‚   â”‚   if self.after is not None:                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:449 in result                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚   446 â”‚   â”‚   â”‚   â”‚   if self._state in [CANCELLED, CANCELLED_AND_NOTIFIED]:                                                â”‚
           â”‚   447 â”‚   â”‚   â”‚   â”‚   â”‚   raise CancelledError()                                                                            â”‚
           â”‚   448 â”‚   â”‚   â”‚   â”‚   elif self._state == FINISHED:                                                                         â”‚
           â”‚ â± 449 â”‚   â”‚   â”‚   â”‚   â”‚   return self.__get_result()                                                                        â”‚
           â”‚   450 â”‚   â”‚   â”‚   â”‚                                                                                                         â”‚
           â”‚   451 â”‚   â”‚   â”‚   â”‚   self._condition.wait(timeout)                                                                         â”‚
           â”‚   452                                                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:401 in __get_result                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   398 â”‚   def __get_result(self):                                                                                           â”‚
           â”‚   399 â”‚   â”‚   if self._exception:                                                                                           â”‚
           â”‚   400 â”‚   â”‚   â”‚   try:                                                                                                      â”‚
           â”‚ â± 401 â”‚   â”‚   â”‚   â”‚   raise self._exception                                                                                 â”‚
           â”‚   402 â”‚   â”‚   â”‚   finally:                                                                                                  â”‚
           â”‚   403 â”‚   â”‚   â”‚   â”‚   # Break a reference cycle with the exception in self._exception                                       â”‚
           â”‚   404 â”‚   â”‚   â”‚   â”‚   self = None                                                                                           â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:417 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   414 â”‚   â”‚   â”‚   â”‚   reraise=True,                                                                                         â”‚
           â”‚   415 â”‚   â”‚   â”‚   ):                                                                                                        â”‚
           â”‚   416 â”‚   â”‚   â”‚   â”‚   with attempt:  # Retrying if ToolSelector fails to select a tool                                      â”‚
           â”‚ â± 417 â”‚   â”‚   â”‚   â”‚   â”‚   action = await agent(agent_state.messages, tools)                                                 â”‚
           â”‚   418 â”‚   â”‚   â”‚   agent_state.messages = [*agent_state.messages, action]                                                    â”‚
           â”‚   419 â”‚   â”‚   â”‚   if on_agent_action_callback:                                                                              â”‚
           â”‚   420 â”‚   â”‚   â”‚   â”‚   await on_agent_action_callback(action, agent_state)                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aviary/tools/utils.py:182 in __call__                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   179 â”‚   â”‚   â”‚   self._ledger.messages.extend(messages)                                                                    â”‚
           â”‚   180 â”‚   â”‚   â”‚   messages = self._ledger.messages                                                                          â”‚
           â”‚   181 â”‚   â”‚                                                                                                                 â”‚
           â”‚ â± 182 â”‚   â”‚   model_response = await self._bound_acompletion(                                                               â”‚
           â”‚   183 â”‚   â”‚   â”‚   messages=MessagesAdapter.dump_python(                                                                     â”‚
           â”‚   184 â”‚   â”‚   â”‚   â”‚   messages, exclude_none=True, by_alias=True                                                            â”‚
           â”‚   185 â”‚   â”‚   â”‚   ),                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:817 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    814 â”‚   â”‚   â”‚   â”‚   â”‚   original_exception=e,                                                                            â”‚
           â”‚    815 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    816 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚ â±  817 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    818 â”‚                                                                                                                    â”‚
           â”‚    819 â”‚   async def _acompletion(                                                                                          â”‚
           â”‚    820 â”‚   â”‚   self, model: str, messages: List[Dict[str, str]], **kwargs                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:793 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    790 â”‚   â”‚   â”‚   if request_priority is not None and isinstance(request_priority, int):                                   â”‚
           â”‚    791 â”‚   â”‚   â”‚   â”‚   response = await self.schedule_acompletion(**kwargs)                                                 â”‚
           â”‚    792 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â±  793 â”‚   â”‚   â”‚   â”‚   response = await self.async_function_with_fallbacks(**kwargs)                                        â”‚
           â”‚    794 â”‚   â”‚   â”‚   end_time = time.time()                                                                                   â”‚
           â”‚    795 â”‚   â”‚   â”‚   _duration = end_time - start_time                                                                        â”‚
           â”‚    796 â”‚   â”‚   â”‚   asyncio.create_task(                                                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2795 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2792 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚   2793 â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                                â”‚
           â”‚   2794 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2795 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2796 â”‚                                                                                                                    â”‚
           â”‚   2797 â”‚   def _handle_mock_testing_fallbacks(                                                                              â”‚
           â”‚   2798 â”‚   â”‚   self,                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2631 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2628 â”‚   â”‚   â”‚   â”‚   content_policy_fallbacks=content_policy_fallbacks,                                                   â”‚
           â”‚   2629 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2630 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2631 â”‚   â”‚   â”‚   response = await self.async_function_with_retries(*args, **kwargs)                                       â”‚
           â”‚   2632 â”‚   â”‚   â”‚   verbose_router_logger.debug(f"Async Response: {response}")                                               â”‚
           â”‚   2633 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2634 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2967 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2964 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "max_retries", num_retries)                                              â”‚
           â”‚   2965 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "num_retries", current_attempt)                                          â”‚
           â”‚   2966 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2967 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2968 â”‚                                                                                                                    â”‚
           â”‚   2969 â”‚   async def make_call(self, original_function: Any, *args, **kwargs):                                              â”‚
           â”‚   2970 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2879 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2876 â”‚   â”‚   â”‚   â”‚   model_group=model_group, kwargs=kwargs                                                               â”‚
           â”‚   2877 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2878 â”‚   â”‚   â”‚   # if the function call is successful, no exception will be raised and we'll                              â”‚
           â”‚        break out of the loop                                                                                                â”‚
           â”‚ â± 2879 â”‚   â”‚   â”‚   response = await self.make_call(original_function, *args, **kwargs)                                      â”‚
           â”‚   2880 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   2881 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2882 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2976 in make_call                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2973 â”‚   â”‚   model_group = kwargs.get("model")                                                                            â”‚
           â”‚   2974 â”‚   â”‚   response = original_function(*args, **kwargs)                                                                â”‚
           â”‚   2975 â”‚   â”‚   if inspect.iscoroutinefunction(response) or inspect.isawaitable(response):                                   â”‚
           â”‚ â± 2976 â”‚   â”‚   â”‚   response = await response                                                                                â”‚
           â”‚   2977 â”‚   â”‚   ## PROCESS RESPONSE HEADERS                                                                                  â”‚
           â”‚   2978 â”‚   â”‚   await self.set_response_headers(response=response, model_group=model_group)                                  â”‚
           â”‚   2979                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:947 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    944 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚    945 â”‚   â”‚   â”‚   if model_name is not None:                                                                               â”‚
           â”‚    946 â”‚   â”‚   â”‚   â”‚   self.fail_calls[model_name] += 1                                                                     â”‚
           â”‚ â±  947 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    948 â”‚                                                                                                                    â”‚
           â”‚    949 â”‚   def _update_kwargs_before_fallbacks(self, model: str, kwargs: dict) -> None:                                     â”‚
           â”‚    950 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:915 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    912 â”‚   â”‚   â”‚   â”‚   â”‚   parent_otel_span=parent_otel_span,                                                               â”‚
           â”‚    913 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    914 â”‚   â”‚   â”‚   â”‚                                                                                                        â”‚
           â”‚ â±  915 â”‚   â”‚   â”‚   â”‚   response = await _response                                                                           â”‚
           â”‚    916 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚    917 â”‚   â”‚   â”‚   ## CHECK CONTENT FILTER ERROR ##                                                                         â”‚
           â”‚    918 â”‚   â”‚   â”‚   if isinstance(response, ModelResponse):                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1175 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1172 â”‚   â”‚   â”‚   â”‚   â”‚   else:                                                                                            â”‚
           â”‚   1173 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   kwargs["model"] = context_window_fallback_dict[model]                                        â”‚
           â”‚   1174 â”‚   â”‚   â”‚   â”‚   â”‚   return await original_function(*args, **kwargs)                                                  â”‚
           â”‚ â± 1175 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   1176 â”‚                                                                                                                    â”‚
           â”‚   1177 â”‚   is_coroutine = inspect.iscoroutinefunction(original_function)                                                    â”‚
           â”‚   1178                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1031 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1028 â”‚   â”‚   â”‚   â”‚   return _caching_handler_response.final_embedding_cached_response                                     â”‚
           â”‚   1029 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1030 â”‚   â”‚   â”‚   # MODEL CALL                                                                                             â”‚
           â”‚ â± 1031 â”‚   â”‚   â”‚   result = await original_function(*args, **kwargs)                                                        â”‚
           â”‚   1032 â”‚   â”‚   â”‚   end_time = datetime.datetime.now()                                                                       â”‚
           â”‚   1033 â”‚   â”‚   â”‚   if "stream" in kwargs and kwargs["stream"] is True:                                                      â”‚
           â”‚   1034 â”‚   â”‚   â”‚   â”‚   if (                                                                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:499 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    496 â”‚   â”‚   return response                                                                                              â”‚
           â”‚    497 â”‚   except Exception as e:                                                                                           â”‚
           â”‚    498 â”‚   â”‚   custom_llm_provider = custom_llm_provider or "openai"                                                        â”‚
           â”‚ â±  499 â”‚   â”‚   raise exception_type(                                                                                        â”‚
           â”‚    500 â”‚   â”‚   â”‚   model=model,                                                                                             â”‚
           â”‚    501 â”‚   â”‚   â”‚   custom_llm_provider=custom_llm_provider,                                                                 â”‚
           â”‚    502 â”‚   â”‚   â”‚   original_exception=e,                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:212 â”‚
           â”‚ 5 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2122 â”‚   â”‚   # don't let an error with mapping interrupt the user from receiving an error                                 â”‚
           â”‚        from the llm api calls                                                                                               â”‚
           â”‚   2123 â”‚   â”‚   if exception_mapping_worked:                                                                                 â”‚
           â”‚   2124 â”‚   â”‚   â”‚   setattr(e, "litellm_response_headers", litellm_response_headers)                                         â”‚
           â”‚ â± 2125 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   2126 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   2127 â”‚   â”‚   â”‚   for error_type in litellm.LITELLM_EXCEPTION_TYPES:                                                       â”‚
           â”‚   2128 â”‚   â”‚   â”‚   â”‚   if isinstance(e, error_type):                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:210 â”‚
           â”‚ 1 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2098 â”‚   â”‚   â”‚   â”‚   â”‚   request=original_exception.request,                                                              â”‚
           â”‚   2099 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚   2100 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â± 2101 â”‚   â”‚   â”‚   â”‚   raise APIConnectionError(                                                                            â”‚
           â”‚   2102 â”‚   â”‚   â”‚   â”‚   â”‚   message="{}\n{}".format(                                                                         â”‚
           â”‚   2103 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   str(original_exception), traceback.format_exc()                                              â”‚
           â”‚   2104 â”‚   â”‚   â”‚   â”‚   â”‚   ),                                                                                               â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           APIConnectionError: litellm.APIConnectionError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1109, in                 
           _wrap_create_connection                                                                                                        
               sock = await aiohappyeyeballs.start_connection(                                                                            
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                            
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py", line 123, in              
           start_connection                                                                                                               
               raise OSError(first_errno, msg)                                                                                            
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py", line 477, in acompletion           
               response = await init_response                                                                                             
                          ^^^^^^^^^^^^^^^^^^^                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 566, in                
           ollama_acompletion                                                                                                             
               raise e  # don't use verbose_logger.exception, if exception is raised                                                      
               ^^^^^^^                                                                                                                    
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 507, in                
           ollama_acompletion                                                                                                             
               resp = await session.post(url, json=data)                                                                                  
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                  
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py", line 696, in _request            
               conn = await self._connector.connect(                                                                                      
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 544, in connect          
               proto = await self._create_connection(req, traces, timeout)                                                                
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1050, in                 
           _create_connection                                                                                                             
               _, proto = await self._create_direct_connection(req, traces, timeout)                                                      
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1394, in                 
           _create_direct_connection                                                                                                      
               raise last_exc                                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1363, in                 
           _create_direct_connection                                                                                                      
               transp, proto = await self._wrap_create_connection(                                                                        
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                        
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1124, in                 
           _wrap_create_connection                                                                                                        
               raise client_error(req.connection_key, exc) from exc                                                                       
           aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
                                                                                                                                          
           Received Model Group=ollama/llama3.2                                                                                           
           Available Model Group Fallbacks=None LiteLLM Retried: 2 times, LiteLLM Max Retries: 3                                          
[00:50:13] Answer:                                                                                                                        


 ANSWERING QUESTION: sciqag_question_50.json
 ----------------------------- 



[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.

[00:50:34] Trajectory failed.                                                                                                             
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1109 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1106 â”‚   â”‚   â”‚   async with ceil_timeout(                                                                                 â”‚
           â”‚   1107 â”‚   â”‚   â”‚   â”‚   timeout.sock_connect, ceil_threshold=timeout.ceil_threshold                                          â”‚
           â”‚   1108 â”‚   â”‚   â”‚   ):                                                                                                       â”‚
           â”‚ â± 1109 â”‚   â”‚   â”‚   â”‚   sock = await aiohappyeyeballs.start_connection(                                                      â”‚
           â”‚   1110 â”‚   â”‚   â”‚   â”‚   â”‚   addr_infos=addr_infos,                                                                           â”‚
           â”‚   1111 â”‚   â”‚   â”‚   â”‚   â”‚   local_addr_infos=self._local_addr_infos,                                                         â”‚
           â”‚   1112 â”‚   â”‚   â”‚   â”‚   â”‚   happy_eyeballs_delay=self._happy_eyeballs_delay,                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py:123 in start_connection          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   120 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, OSError) and exc.errno == first_errno                                         â”‚
           â”‚   121 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   for exc in all_exceptions                                                                     â”‚
           â”‚   122 â”‚   â”‚   â”‚   â”‚   â”‚   ):                                                                                                â”‚
           â”‚ â± 123 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   raise OSError(first_errno, msg)                                                               â”‚
           â”‚   124 â”‚   â”‚   â”‚   â”‚   elif isinstance(first_exception, RuntimeError) and all(                                               â”‚
           â”‚   125 â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, RuntimeError) for exc in all_exceptions                                           â”‚
           â”‚   126 â”‚   â”‚   â”‚   â”‚   ):                                                                                                    â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:477 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    474 â”‚   â”‚   â”‚   â”‚   â”‚   response = ModelResponse(**init_response)                                                        â”‚
           â”‚    475 â”‚   â”‚   â”‚   â”‚   response = init_response                                                                             â”‚
           â”‚    476 â”‚   â”‚   â”‚   elif asyncio.iscoroutine(init_response):                                                                 â”‚
           â”‚ â±  477 â”‚   â”‚   â”‚   â”‚   response = await init_response                                                                       â”‚
           â”‚    478 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚    479 â”‚   â”‚   â”‚   â”‚   response = init_response  # type: ignore                                                             â”‚
           â”‚    480                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:566 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   563 â”‚   â”‚   â”‚   )                                                                                                         â”‚
           â”‚   564 â”‚   â”‚   â”‚   return model_response                                                                                     â”‚
           â”‚   565 â”‚   except Exception as e:                                                                                            â”‚
           â”‚ â± 566 â”‚   â”‚   raise e  # don't use verbose_logger.exception, if exception is raised                                         â”‚
           â”‚   567                                                                                                                       â”‚
           â”‚   568                                                                                                                       â”‚
           â”‚   569 async def ollama_aembeddings(                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:507 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   504 â”‚   try:                                                                                                              â”‚
           â”‚   505 â”‚   â”‚   timeout = aiohttp.ClientTimeout(total=litellm.request_timeout)  # 10 minutes                                  â”‚
           â”‚   506 â”‚   â”‚   async with aiohttp.ClientSession(timeout=timeout) as session:                                                 â”‚
           â”‚ â± 507 â”‚   â”‚   â”‚   resp = await session.post(url, json=data)                                                                 â”‚
           â”‚   508 â”‚   â”‚   â”‚                                                                                                             â”‚
           â”‚   509 â”‚   â”‚   â”‚   if resp.status != 200:                                                                                    â”‚
           â”‚   510 â”‚   â”‚   â”‚   â”‚   text = await resp.text()                                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py:696 in _request                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚    693 â”‚   â”‚   â”‚   â”‚   â”‚                                                                                                    â”‚
           â”‚    694 â”‚   â”‚   â”‚   â”‚   â”‚   # connection timeout                                                                             â”‚
           â”‚    695 â”‚   â”‚   â”‚   â”‚   â”‚   try:                                                                                             â”‚
           â”‚ â±  696 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   conn = await self._connector.connect(                                                        â”‚
           â”‚    697 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   req, traces=traces, timeout=real_timeout                                                 â”‚
           â”‚    698 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚    699 â”‚   â”‚   â”‚   â”‚   â”‚   except asyncio.TimeoutError as exc:                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:544 in connect                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚    541 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    542 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    543 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_start()                                                   â”‚
           â”‚ â±  544 â”‚   â”‚   â”‚   â”‚   proto = await self._create_connection(req, traces, timeout)                                          â”‚
           â”‚    545 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    546 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    547 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_end()                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1050 in _create_connection           â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1047 â”‚   â”‚   if req.proxy:                                                                                                â”‚
           â”‚   1048 â”‚   â”‚   â”‚   _, proto = await self._create_proxy_connection(req, traces, timeout)                                     â”‚
           â”‚   1049 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚ â± 1050 â”‚   â”‚   â”‚   _, proto = await self._create_direct_connection(req, traces, timeout)                                    â”‚
           â”‚   1051 â”‚   â”‚                                                                                                                â”‚
           â”‚   1052 â”‚   â”‚   return proto                                                                                                 â”‚
           â”‚   1053                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1394 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1391 â”‚   â”‚   â”‚   return transp, proto                                                                                     â”‚
           â”‚   1392 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   1393 â”‚   â”‚   â”‚   assert last_exc is not None                                                                              â”‚
           â”‚ â± 1394 â”‚   â”‚   â”‚   raise last_exc                                                                                           â”‚
           â”‚   1395 â”‚                                                                                                                    â”‚
           â”‚   1396 â”‚   async def _create_proxy_connection(                                                                              â”‚
           â”‚   1397 â”‚   â”‚   self, req: ClientRequest, traces: List["Trace"], timeout: "ClientTimeout"                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1363 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1360 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   1361 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1362 â”‚   â”‚   â”‚   try:                                                                                                     â”‚
           â”‚ â± 1363 â”‚   â”‚   â”‚   â”‚   transp, proto = await self._wrap_create_connection(                                                  â”‚
           â”‚   1364 â”‚   â”‚   â”‚   â”‚   â”‚   self._factory,                                                                                   â”‚
           â”‚   1365 â”‚   â”‚   â”‚   â”‚   â”‚   timeout=timeout,                                                                                 â”‚
           â”‚   1366 â”‚   â”‚   â”‚   â”‚   â”‚   ssl=sslcontext,                                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1124 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1121 â”‚   â”‚   except OSError as exc:                                                                                       â”‚
           â”‚   1122 â”‚   â”‚   â”‚   if exc.errno is None and isinstance(exc, asyncio.TimeoutError):                                          â”‚
           â”‚   1123 â”‚   â”‚   â”‚   â”‚   raise                                                                                                â”‚
           â”‚ â± 1124 â”‚   â”‚   â”‚   raise client_error(req.connection_key, exc) from exc                                                     â”‚
           â”‚   1125 â”‚                                                                                                                    â”‚
           â”‚   1126 â”‚   async def _wrap_existing_connection(                                                                             â”‚
           â”‚   1127 â”‚   â”‚   self,                                                                                                        â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno 111] Connect call failed 
           ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                                                    
                                                                                                                                          
           During handling of the above exception, another exception occurred:                                                            
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:276 in _run_with_timeout_failure                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   273 ) -> tuple[PQASession, AgentStatus]:                                                                                  â”‚
           â”‚   274 â”‚   try:                                                                                                              â”‚
           â”‚   275 â”‚   â”‚   async with asyncio.timeout(query.settings.agent.timeout):                                                     â”‚
           â”‚ â± 276 â”‚   â”‚   â”‚   status = await rollout()                                                                                  â”‚
           â”‚   277 â”‚   except TimeoutError:                                                                                              â”‚
           â”‚   278 â”‚   â”‚   logger.warning(                                                                                               â”‚
           â”‚   279 â”‚   â”‚   â”‚   f"Agent timeout after {query.settings.agent.timeout}-sec, just answering."                                â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:410 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   407 â”‚   â”‚   â”‚   â”‚   )                                                                                                     â”‚
           â”‚   408 â”‚   â”‚   â”‚   â”‚   return AgentStatus.TRUNCATED                                                                          â”‚
           â”‚   409 â”‚   â”‚   â”‚   agent_state.messages += obs                                                                               â”‚
           â”‚ â± 410 â”‚   â”‚   â”‚   for attempt in Retrying(                                                                                  â”‚
           â”‚   411 â”‚   â”‚   â”‚   â”‚   stop=stop_after_attempt(5),                                                                           â”‚
           â”‚   412 â”‚   â”‚   â”‚   â”‚   retry=retry_if_exception_type(MalformedMessageError),                                                 â”‚
           â”‚   413 â”‚   â”‚   â”‚   â”‚   before_sleep=before_sleep_log(logger, logging.WARNING),                                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:443 in __iter__                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   440 â”‚   â”‚                                                                                                                 â”‚
           â”‚   441 â”‚   â”‚   retry_state = RetryCallState(self, fn=None, args=(), kwargs={})                                               â”‚
           â”‚   442 â”‚   â”‚   while True:                                                                                                   â”‚
           â”‚ â± 443 â”‚   â”‚   â”‚   do = self.iter(retry_state=retry_state)                                                                   â”‚
           â”‚   444 â”‚   â”‚   â”‚   if isinstance(do, DoAttempt):                                                                             â”‚
           â”‚   445 â”‚   â”‚   â”‚   â”‚   yield AttemptManager(retry_state=retry_state)                                                         â”‚
           â”‚   446 â”‚   â”‚   â”‚   elif isinstance(do, DoSleep):                                                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:376 in iter                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   373 â”‚   â”‚   self._begin_iter(retry_state)                                                                                 â”‚
           â”‚   374 â”‚   â”‚   result = None                                                                                                 â”‚
           â”‚   375 â”‚   â”‚   for action in self.iter_state.actions:                                                                        â”‚
           â”‚ â± 376 â”‚   â”‚   â”‚   result = action(retry_state)                                                                              â”‚
           â”‚   377 â”‚   â”‚   return result                                                                                                 â”‚
           â”‚   378 â”‚                                                                                                                     â”‚
           â”‚   379 â”‚   def _begin_iter(self, retry_state: "RetryCallState") -> None:  # noqa                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:398 in <lambda>                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   395 â”‚                                                                                                                     â”‚
           â”‚   396 â”‚   def _post_retry_check_actions(self, retry_state: "RetryCallState") -> None:                                       â”‚
           â”‚   397 â”‚   â”‚   if not (self.iter_state.is_explicit_retry or self.iter_state.retry_run_result):                               â”‚
           â”‚ â± 398 â”‚   â”‚   â”‚   self._add_action_func(lambda rs: rs.outcome.result())                                                     â”‚
           â”‚   399 â”‚   â”‚   â”‚   return                                                                                                    â”‚
           â”‚   400 â”‚   â”‚                                                                                                                 â”‚
           â”‚   401 â”‚   â”‚   if self.after is not None:                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:449 in result                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚   446 â”‚   â”‚   â”‚   â”‚   if self._state in [CANCELLED, CANCELLED_AND_NOTIFIED]:                                                â”‚
           â”‚   447 â”‚   â”‚   â”‚   â”‚   â”‚   raise CancelledError()                                                                            â”‚
           â”‚   448 â”‚   â”‚   â”‚   â”‚   elif self._state == FINISHED:                                                                         â”‚
           â”‚ â± 449 â”‚   â”‚   â”‚   â”‚   â”‚   return self.__get_result()                                                                        â”‚
           â”‚   450 â”‚   â”‚   â”‚   â”‚                                                                                                         â”‚
           â”‚   451 â”‚   â”‚   â”‚   â”‚   self._condition.wait(timeout)                                                                         â”‚
           â”‚   452                                                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:401 in __get_result                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   398 â”‚   def __get_result(self):                                                                                           â”‚
           â”‚   399 â”‚   â”‚   if self._exception:                                                                                           â”‚
           â”‚   400 â”‚   â”‚   â”‚   try:                                                                                                      â”‚
           â”‚ â± 401 â”‚   â”‚   â”‚   â”‚   raise self._exception                                                                                 â”‚
           â”‚   402 â”‚   â”‚   â”‚   finally:                                                                                                  â”‚
           â”‚   403 â”‚   â”‚   â”‚   â”‚   # Break a reference cycle with the exception in self._exception                                       â”‚
           â”‚   404 â”‚   â”‚   â”‚   â”‚   self = None                                                                                           â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:417 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   414 â”‚   â”‚   â”‚   â”‚   reraise=True,                                                                                         â”‚
           â”‚   415 â”‚   â”‚   â”‚   ):                                                                                                        â”‚
           â”‚   416 â”‚   â”‚   â”‚   â”‚   with attempt:  # Retrying if ToolSelector fails to select a tool                                      â”‚
           â”‚ â± 417 â”‚   â”‚   â”‚   â”‚   â”‚   action = await agent(agent_state.messages, tools)                                                 â”‚
           â”‚   418 â”‚   â”‚   â”‚   agent_state.messages = [*agent_state.messages, action]                                                    â”‚
           â”‚   419 â”‚   â”‚   â”‚   if on_agent_action_callback:                                                                              â”‚
           â”‚   420 â”‚   â”‚   â”‚   â”‚   await on_agent_action_callback(action, agent_state)                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aviary/tools/utils.py:182 in __call__                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   179 â”‚   â”‚   â”‚   self._ledger.messages.extend(messages)                                                                    â”‚
           â”‚   180 â”‚   â”‚   â”‚   messages = self._ledger.messages                                                                          â”‚
           â”‚   181 â”‚   â”‚                                                                                                                 â”‚
           â”‚ â± 182 â”‚   â”‚   model_response = await self._bound_acompletion(                                                               â”‚
           â”‚   183 â”‚   â”‚   â”‚   messages=MessagesAdapter.dump_python(                                                                     â”‚
           â”‚   184 â”‚   â”‚   â”‚   â”‚   messages, exclude_none=True, by_alias=True                                                            â”‚
           â”‚   185 â”‚   â”‚   â”‚   ),                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:817 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    814 â”‚   â”‚   â”‚   â”‚   â”‚   original_exception=e,                                                                            â”‚
           â”‚    815 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    816 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚ â±  817 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    818 â”‚                                                                                                                    â”‚
           â”‚    819 â”‚   async def _acompletion(                                                                                          â”‚
           â”‚    820 â”‚   â”‚   self, model: str, messages: List[Dict[str, str]], **kwargs                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:793 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    790 â”‚   â”‚   â”‚   if request_priority is not None and isinstance(request_priority, int):                                   â”‚
           â”‚    791 â”‚   â”‚   â”‚   â”‚   response = await self.schedule_acompletion(**kwargs)                                                 â”‚
           â”‚    792 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â±  793 â”‚   â”‚   â”‚   â”‚   response = await self.async_function_with_fallbacks(**kwargs)                                        â”‚
           â”‚    794 â”‚   â”‚   â”‚   end_time = time.time()                                                                                   â”‚
           â”‚    795 â”‚   â”‚   â”‚   _duration = end_time - start_time                                                                        â”‚
           â”‚    796 â”‚   â”‚   â”‚   asyncio.create_task(                                                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2795 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2792 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚   2793 â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                                â”‚
           â”‚   2794 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2795 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2796 â”‚                                                                                                                    â”‚
           â”‚   2797 â”‚   def _handle_mock_testing_fallbacks(                                                                              â”‚
           â”‚   2798 â”‚   â”‚   self,                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2631 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2628 â”‚   â”‚   â”‚   â”‚   content_policy_fallbacks=content_policy_fallbacks,                                                   â”‚
           â”‚   2629 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2630 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2631 â”‚   â”‚   â”‚   response = await self.async_function_with_retries(*args, **kwargs)                                       â”‚
           â”‚   2632 â”‚   â”‚   â”‚   verbose_router_logger.debug(f"Async Response: {response}")                                               â”‚
           â”‚   2633 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2634 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2967 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2964 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "max_retries", num_retries)                                              â”‚
           â”‚   2965 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "num_retries", current_attempt)                                          â”‚
           â”‚   2966 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2967 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2968 â”‚                                                                                                                    â”‚
           â”‚   2969 â”‚   async def make_call(self, original_function: Any, *args, **kwargs):                                              â”‚
           â”‚   2970 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2879 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2876 â”‚   â”‚   â”‚   â”‚   model_group=model_group, kwargs=kwargs                                                               â”‚
           â”‚   2877 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2878 â”‚   â”‚   â”‚   # if the function call is successful, no exception will be raised and we'll                              â”‚
           â”‚        break out of the loop                                                                                                â”‚
           â”‚ â± 2879 â”‚   â”‚   â”‚   response = await self.make_call(original_function, *args, **kwargs)                                      â”‚
           â”‚   2880 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   2881 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2882 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2976 in make_call                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2973 â”‚   â”‚   model_group = kwargs.get("model")                                                                            â”‚
           â”‚   2974 â”‚   â”‚   response = original_function(*args, **kwargs)                                                                â”‚
           â”‚   2975 â”‚   â”‚   if inspect.iscoroutinefunction(response) or inspect.isawaitable(response):                                   â”‚
           â”‚ â± 2976 â”‚   â”‚   â”‚   response = await response                                                                                â”‚
           â”‚   2977 â”‚   â”‚   ## PROCESS RESPONSE HEADERS                                                                                  â”‚
           â”‚   2978 â”‚   â”‚   await self.set_response_headers(response=response, model_group=model_group)                                  â”‚
           â”‚   2979                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:947 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    944 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚    945 â”‚   â”‚   â”‚   if model_name is not None:                                                                               â”‚
           â”‚    946 â”‚   â”‚   â”‚   â”‚   self.fail_calls[model_name] += 1                                                                     â”‚
           â”‚ â±  947 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    948 â”‚                                                                                                                    â”‚
           â”‚    949 â”‚   def _update_kwargs_before_fallbacks(self, model: str, kwargs: dict) -> None:                                     â”‚
           â”‚    950 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:915 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    912 â”‚   â”‚   â”‚   â”‚   â”‚   parent_otel_span=parent_otel_span,                                                               â”‚
           â”‚    913 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    914 â”‚   â”‚   â”‚   â”‚                                                                                                        â”‚
           â”‚ â±  915 â”‚   â”‚   â”‚   â”‚   response = await _response                                                                           â”‚
           â”‚    916 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚    917 â”‚   â”‚   â”‚   ## CHECK CONTENT FILTER ERROR ##                                                                         â”‚
           â”‚    918 â”‚   â”‚   â”‚   if isinstance(response, ModelResponse):                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1175 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1172 â”‚   â”‚   â”‚   â”‚   â”‚   else:                                                                                            â”‚
           â”‚   1173 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   kwargs["model"] = context_window_fallback_dict[model]                                        â”‚
           â”‚   1174 â”‚   â”‚   â”‚   â”‚   â”‚   return await original_function(*args, **kwargs)                                                  â”‚
           â”‚ â± 1175 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   1176 â”‚                                                                                                                    â”‚
           â”‚   1177 â”‚   is_coroutine = inspect.iscoroutinefunction(original_function)                                                    â”‚
           â”‚   1178                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1031 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1028 â”‚   â”‚   â”‚   â”‚   return _caching_handler_response.final_embedding_cached_response                                     â”‚
           â”‚   1029 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1030 â”‚   â”‚   â”‚   # MODEL CALL                                                                                             â”‚
           â”‚ â± 1031 â”‚   â”‚   â”‚   result = await original_function(*args, **kwargs)                                                        â”‚
           â”‚   1032 â”‚   â”‚   â”‚   end_time = datetime.datetime.now()                                                                       â”‚
           â”‚   1033 â”‚   â”‚   â”‚   if "stream" in kwargs and kwargs["stream"] is True:                                                      â”‚
           â”‚   1034 â”‚   â”‚   â”‚   â”‚   if (                                                                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:499 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    496 â”‚   â”‚   return response                                                                                              â”‚
           â”‚    497 â”‚   except Exception as e:                                                                                           â”‚
           â”‚    498 â”‚   â”‚   custom_llm_provider = custom_llm_provider or "openai"                                                        â”‚
           â”‚ â±  499 â”‚   â”‚   raise exception_type(                                                                                        â”‚
           â”‚    500 â”‚   â”‚   â”‚   model=model,                                                                                             â”‚
           â”‚    501 â”‚   â”‚   â”‚   custom_llm_provider=custom_llm_provider,                                                                 â”‚
           â”‚    502 â”‚   â”‚   â”‚   original_exception=e,                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:212 â”‚
           â”‚ 5 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2122 â”‚   â”‚   # don't let an error with mapping interrupt the user from receiving an error                                 â”‚
           â”‚        from the llm api calls                                                                                               â”‚
           â”‚   2123 â”‚   â”‚   if exception_mapping_worked:                                                                                 â”‚
           â”‚   2124 â”‚   â”‚   â”‚   setattr(e, "litellm_response_headers", litellm_response_headers)                                         â”‚
           â”‚ â± 2125 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   2126 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   2127 â”‚   â”‚   â”‚   for error_type in litellm.LITELLM_EXCEPTION_TYPES:                                                       â”‚
           â”‚   2128 â”‚   â”‚   â”‚   â”‚   if isinstance(e, error_type):                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:210 â”‚
           â”‚ 1 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2098 â”‚   â”‚   â”‚   â”‚   â”‚   request=original_exception.request,                                                              â”‚
           â”‚   2099 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚   2100 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â± 2101 â”‚   â”‚   â”‚   â”‚   raise APIConnectionError(                                                                            â”‚
           â”‚   2102 â”‚   â”‚   â”‚   â”‚   â”‚   message="{}\n{}".format(                                                                         â”‚
           â”‚   2103 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   str(original_exception), traceback.format_exc()                                              â”‚
           â”‚   2104 â”‚   â”‚   â”‚   â”‚   â”‚   ),                                                                                               â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           APIConnectionError: litellm.APIConnectionError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1109, in                 
           _wrap_create_connection                                                                                                        
               sock = await aiohappyeyeballs.start_connection(                                                                            
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                            
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py", line 123, in              
           start_connection                                                                                                               
               raise OSError(first_errno, msg)                                                                                            
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py", line 477, in acompletion           
               response = await init_response                                                                                             
                          ^^^^^^^^^^^^^^^^^^^                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 566, in                
           ollama_acompletion                                                                                                             
               raise e  # don't use verbose_logger.exception, if exception is raised                                                      
               ^^^^^^^                                                                                                                    
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 507, in                
           ollama_acompletion                                                                                                             
               resp = await session.post(url, json=data)                                                                                  
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                  
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py", line 696, in _request            
               conn = await self._connector.connect(                                                                                      
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 544, in connect          
               proto = await self._create_connection(req, traces, timeout)                                                                
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1050, in                 
           _create_connection                                                                                                             
               _, proto = await self._create_direct_connection(req, traces, timeout)                                                      
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1394, in                 
           _create_direct_connection                                                                                                      
               raise last_exc                                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1363, in                 
           _create_direct_connection                                                                                                      
               transp, proto = await self._wrap_create_connection(                                                                        
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                        
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1124, in                 
           _wrap_create_connection                                                                                                        
               raise client_error(req.connection_key, exc) from exc                                                                       
           aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
                                                                                                                                          
           Received Model Group=ollama/llama3.2                                                                                           
           Available Model Group Fallbacks=None LiteLLM Retried: 2 times, LiteLLM Max Retries: 3                                          
[00:50:36] Answer:                                                                                                                        


 ANSWERING QUESTION: sciqag_question_51.json
 ----------------------------- 



[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.

[00:50:56] Trajectory failed.                                                                                                             
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1109 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1106 â”‚   â”‚   â”‚   async with ceil_timeout(                                                                                 â”‚
           â”‚   1107 â”‚   â”‚   â”‚   â”‚   timeout.sock_connect, ceil_threshold=timeout.ceil_threshold                                          â”‚
           â”‚   1108 â”‚   â”‚   â”‚   ):                                                                                                       â”‚
           â”‚ â± 1109 â”‚   â”‚   â”‚   â”‚   sock = await aiohappyeyeballs.start_connection(                                                      â”‚
           â”‚   1110 â”‚   â”‚   â”‚   â”‚   â”‚   addr_infos=addr_infos,                                                                           â”‚
           â”‚   1111 â”‚   â”‚   â”‚   â”‚   â”‚   local_addr_infos=self._local_addr_infos,                                                         â”‚
           â”‚   1112 â”‚   â”‚   â”‚   â”‚   â”‚   happy_eyeballs_delay=self._happy_eyeballs_delay,                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py:123 in start_connection          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   120 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, OSError) and exc.errno == first_errno                                         â”‚
           â”‚   121 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   for exc in all_exceptions                                                                     â”‚
           â”‚   122 â”‚   â”‚   â”‚   â”‚   â”‚   ):                                                                                                â”‚
           â”‚ â± 123 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   raise OSError(first_errno, msg)                                                               â”‚
           â”‚   124 â”‚   â”‚   â”‚   â”‚   elif isinstance(first_exception, RuntimeError) and all(                                               â”‚
           â”‚   125 â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, RuntimeError) for exc in all_exceptions                                           â”‚
           â”‚   126 â”‚   â”‚   â”‚   â”‚   ):                                                                                                    â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:477 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    474 â”‚   â”‚   â”‚   â”‚   â”‚   response = ModelResponse(**init_response)                                                        â”‚
           â”‚    475 â”‚   â”‚   â”‚   â”‚   response = init_response                                                                             â”‚
           â”‚    476 â”‚   â”‚   â”‚   elif asyncio.iscoroutine(init_response):                                                                 â”‚
           â”‚ â±  477 â”‚   â”‚   â”‚   â”‚   response = await init_response                                                                       â”‚
           â”‚    478 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚    479 â”‚   â”‚   â”‚   â”‚   response = init_response  # type: ignore                                                             â”‚
           â”‚    480                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:566 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   563 â”‚   â”‚   â”‚   )                                                                                                         â”‚
           â”‚   564 â”‚   â”‚   â”‚   return model_response                                                                                     â”‚
           â”‚   565 â”‚   except Exception as e:                                                                                            â”‚
           â”‚ â± 566 â”‚   â”‚   raise e  # don't use verbose_logger.exception, if exception is raised                                         â”‚
           â”‚   567                                                                                                                       â”‚
           â”‚   568                                                                                                                       â”‚
           â”‚   569 async def ollama_aembeddings(                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:507 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   504 â”‚   try:                                                                                                              â”‚
           â”‚   505 â”‚   â”‚   timeout = aiohttp.ClientTimeout(total=litellm.request_timeout)  # 10 minutes                                  â”‚
           â”‚   506 â”‚   â”‚   async with aiohttp.ClientSession(timeout=timeout) as session:                                                 â”‚
           â”‚ â± 507 â”‚   â”‚   â”‚   resp = await session.post(url, json=data)                                                                 â”‚
           â”‚   508 â”‚   â”‚   â”‚                                                                                                             â”‚
           â”‚   509 â”‚   â”‚   â”‚   if resp.status != 200:                                                                                    â”‚
           â”‚   510 â”‚   â”‚   â”‚   â”‚   text = await resp.text()                                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py:696 in _request                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚    693 â”‚   â”‚   â”‚   â”‚   â”‚                                                                                                    â”‚
           â”‚    694 â”‚   â”‚   â”‚   â”‚   â”‚   # connection timeout                                                                             â”‚
           â”‚    695 â”‚   â”‚   â”‚   â”‚   â”‚   try:                                                                                             â”‚
           â”‚ â±  696 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   conn = await self._connector.connect(                                                        â”‚
           â”‚    697 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   req, traces=traces, timeout=real_timeout                                                 â”‚
           â”‚    698 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚    699 â”‚   â”‚   â”‚   â”‚   â”‚   except asyncio.TimeoutError as exc:                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:544 in connect                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚    541 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    542 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    543 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_start()                                                   â”‚
           â”‚ â±  544 â”‚   â”‚   â”‚   â”‚   proto = await self._create_connection(req, traces, timeout)                                          â”‚
           â”‚    545 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    546 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    547 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_end()                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1050 in _create_connection           â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1047 â”‚   â”‚   if req.proxy:                                                                                                â”‚
           â”‚   1048 â”‚   â”‚   â”‚   _, proto = await self._create_proxy_connection(req, traces, timeout)                                     â”‚
           â”‚   1049 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚ â± 1050 â”‚   â”‚   â”‚   _, proto = await self._create_direct_connection(req, traces, timeout)                                    â”‚
           â”‚   1051 â”‚   â”‚                                                                                                                â”‚
           â”‚   1052 â”‚   â”‚   return proto                                                                                                 â”‚
           â”‚   1053                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1394 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1391 â”‚   â”‚   â”‚   return transp, proto                                                                                     â”‚
           â”‚   1392 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   1393 â”‚   â”‚   â”‚   assert last_exc is not None                                                                              â”‚
           â”‚ â± 1394 â”‚   â”‚   â”‚   raise last_exc                                                                                           â”‚
           â”‚   1395 â”‚                                                                                                                    â”‚
           â”‚   1396 â”‚   async def _create_proxy_connection(                                                                              â”‚
           â”‚   1397 â”‚   â”‚   self, req: ClientRequest, traces: List["Trace"], timeout: "ClientTimeout"                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1363 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1360 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   1361 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1362 â”‚   â”‚   â”‚   try:                                                                                                     â”‚
           â”‚ â± 1363 â”‚   â”‚   â”‚   â”‚   transp, proto = await self._wrap_create_connection(                                                  â”‚
           â”‚   1364 â”‚   â”‚   â”‚   â”‚   â”‚   self._factory,                                                                                   â”‚
           â”‚   1365 â”‚   â”‚   â”‚   â”‚   â”‚   timeout=timeout,                                                                                 â”‚
           â”‚   1366 â”‚   â”‚   â”‚   â”‚   â”‚   ssl=sslcontext,                                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1124 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1121 â”‚   â”‚   except OSError as exc:                                                                                       â”‚
           â”‚   1122 â”‚   â”‚   â”‚   if exc.errno is None and isinstance(exc, asyncio.TimeoutError):                                          â”‚
           â”‚   1123 â”‚   â”‚   â”‚   â”‚   raise                                                                                                â”‚
           â”‚ â± 1124 â”‚   â”‚   â”‚   raise client_error(req.connection_key, exc) from exc                                                     â”‚
           â”‚   1125 â”‚                                                                                                                    â”‚
           â”‚   1126 â”‚   async def _wrap_existing_connection(                                                                             â”‚
           â”‚   1127 â”‚   â”‚   self,                                                                                                        â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno 111] Connect call failed 
           ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                                                    
                                                                                                                                          
           During handling of the above exception, another exception occurred:                                                            
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:276 in _run_with_timeout_failure                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   273 ) -> tuple[PQASession, AgentStatus]:                                                                                  â”‚
           â”‚   274 â”‚   try:                                                                                                              â”‚
           â”‚   275 â”‚   â”‚   async with asyncio.timeout(query.settings.agent.timeout):                                                     â”‚
           â”‚ â± 276 â”‚   â”‚   â”‚   status = await rollout()                                                                                  â”‚
           â”‚   277 â”‚   except TimeoutError:                                                                                              â”‚
           â”‚   278 â”‚   â”‚   logger.warning(                                                                                               â”‚
           â”‚   279 â”‚   â”‚   â”‚   f"Agent timeout after {query.settings.agent.timeout}-sec, just answering."                                â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:410 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   407 â”‚   â”‚   â”‚   â”‚   )                                                                                                     â”‚
           â”‚   408 â”‚   â”‚   â”‚   â”‚   return AgentStatus.TRUNCATED                                                                          â”‚
           â”‚   409 â”‚   â”‚   â”‚   agent_state.messages += obs                                                                               â”‚
           â”‚ â± 410 â”‚   â”‚   â”‚   for attempt in Retrying(                                                                                  â”‚
           â”‚   411 â”‚   â”‚   â”‚   â”‚   stop=stop_after_attempt(5),                                                                           â”‚
           â”‚   412 â”‚   â”‚   â”‚   â”‚   retry=retry_if_exception_type(MalformedMessageError),                                                 â”‚
           â”‚   413 â”‚   â”‚   â”‚   â”‚   before_sleep=before_sleep_log(logger, logging.WARNING),                                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:443 in __iter__                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   440 â”‚   â”‚                                                                                                                 â”‚
           â”‚   441 â”‚   â”‚   retry_state = RetryCallState(self, fn=None, args=(), kwargs={})                                               â”‚
           â”‚   442 â”‚   â”‚   while True:                                                                                                   â”‚
           â”‚ â± 443 â”‚   â”‚   â”‚   do = self.iter(retry_state=retry_state)                                                                   â”‚
           â”‚   444 â”‚   â”‚   â”‚   if isinstance(do, DoAttempt):                                                                             â”‚
           â”‚   445 â”‚   â”‚   â”‚   â”‚   yield AttemptManager(retry_state=retry_state)                                                         â”‚
           â”‚   446 â”‚   â”‚   â”‚   elif isinstance(do, DoSleep):                                                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:376 in iter                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   373 â”‚   â”‚   self._begin_iter(retry_state)                                                                                 â”‚
           â”‚   374 â”‚   â”‚   result = None                                                                                                 â”‚
           â”‚   375 â”‚   â”‚   for action in self.iter_state.actions:                                                                        â”‚
           â”‚ â± 376 â”‚   â”‚   â”‚   result = action(retry_state)                                                                              â”‚
           â”‚   377 â”‚   â”‚   return result                                                                                                 â”‚
           â”‚   378 â”‚                                                                                                                     â”‚
           â”‚   379 â”‚   def _begin_iter(self, retry_state: "RetryCallState") -> None:  # noqa                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:398 in <lambda>                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   395 â”‚                                                                                                                     â”‚
           â”‚   396 â”‚   def _post_retry_check_actions(self, retry_state: "RetryCallState") -> None:                                       â”‚
           â”‚   397 â”‚   â”‚   if not (self.iter_state.is_explicit_retry or self.iter_state.retry_run_result):                               â”‚
           â”‚ â± 398 â”‚   â”‚   â”‚   self._add_action_func(lambda rs: rs.outcome.result())                                                     â”‚
           â”‚   399 â”‚   â”‚   â”‚   return                                                                                                    â”‚
           â”‚   400 â”‚   â”‚                                                                                                                 â”‚
           â”‚   401 â”‚   â”‚   if self.after is not None:                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:449 in result                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚   446 â”‚   â”‚   â”‚   â”‚   if self._state in [CANCELLED, CANCELLED_AND_NOTIFIED]:                                                â”‚
           â”‚   447 â”‚   â”‚   â”‚   â”‚   â”‚   raise CancelledError()                                                                            â”‚
           â”‚   448 â”‚   â”‚   â”‚   â”‚   elif self._state == FINISHED:                                                                         â”‚
           â”‚ â± 449 â”‚   â”‚   â”‚   â”‚   â”‚   return self.__get_result()                                                                        â”‚
           â”‚   450 â”‚   â”‚   â”‚   â”‚                                                                                                         â”‚
           â”‚   451 â”‚   â”‚   â”‚   â”‚   self._condition.wait(timeout)                                                                         â”‚
           â”‚   452                                                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:401 in __get_result                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   398 â”‚   def __get_result(self):                                                                                           â”‚
           â”‚   399 â”‚   â”‚   if self._exception:                                                                                           â”‚
           â”‚   400 â”‚   â”‚   â”‚   try:                                                                                                      â”‚
           â”‚ â± 401 â”‚   â”‚   â”‚   â”‚   raise self._exception                                                                                 â”‚
           â”‚   402 â”‚   â”‚   â”‚   finally:                                                                                                  â”‚
           â”‚   403 â”‚   â”‚   â”‚   â”‚   # Break a reference cycle with the exception in self._exception                                       â”‚
           â”‚   404 â”‚   â”‚   â”‚   â”‚   self = None                                                                                           â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:417 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   414 â”‚   â”‚   â”‚   â”‚   reraise=True,                                                                                         â”‚
           â”‚   415 â”‚   â”‚   â”‚   ):                                                                                                        â”‚
           â”‚   416 â”‚   â”‚   â”‚   â”‚   with attempt:  # Retrying if ToolSelector fails to select a tool                                      â”‚
           â”‚ â± 417 â”‚   â”‚   â”‚   â”‚   â”‚   action = await agent(agent_state.messages, tools)                                                 â”‚
           â”‚   418 â”‚   â”‚   â”‚   agent_state.messages = [*agent_state.messages, action]                                                    â”‚
           â”‚   419 â”‚   â”‚   â”‚   if on_agent_action_callback:                                                                              â”‚
           â”‚   420 â”‚   â”‚   â”‚   â”‚   await on_agent_action_callback(action, agent_state)                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aviary/tools/utils.py:182 in __call__                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   179 â”‚   â”‚   â”‚   self._ledger.messages.extend(messages)                                                                    â”‚
           â”‚   180 â”‚   â”‚   â”‚   messages = self._ledger.messages                                                                          â”‚
           â”‚   181 â”‚   â”‚                                                                                                                 â”‚
           â”‚ â± 182 â”‚   â”‚   model_response = await self._bound_acompletion(                                                               â”‚
           â”‚   183 â”‚   â”‚   â”‚   messages=MessagesAdapter.dump_python(                                                                     â”‚
           â”‚   184 â”‚   â”‚   â”‚   â”‚   messages, exclude_none=True, by_alias=True                                                            â”‚
           â”‚   185 â”‚   â”‚   â”‚   ),                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:817 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    814 â”‚   â”‚   â”‚   â”‚   â”‚   original_exception=e,                                                                            â”‚
           â”‚    815 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    816 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚ â±  817 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    818 â”‚                                                                                                                    â”‚
           â”‚    819 â”‚   async def _acompletion(                                                                                          â”‚
           â”‚    820 â”‚   â”‚   self, model: str, messages: List[Dict[str, str]], **kwargs                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:793 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    790 â”‚   â”‚   â”‚   if request_priority is not None and isinstance(request_priority, int):                                   â”‚
           â”‚    791 â”‚   â”‚   â”‚   â”‚   response = await self.schedule_acompletion(**kwargs)                                                 â”‚
           â”‚    792 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â±  793 â”‚   â”‚   â”‚   â”‚   response = await self.async_function_with_fallbacks(**kwargs)                                        â”‚
           â”‚    794 â”‚   â”‚   â”‚   end_time = time.time()                                                                                   â”‚
           â”‚    795 â”‚   â”‚   â”‚   _duration = end_time - start_time                                                                        â”‚
           â”‚    796 â”‚   â”‚   â”‚   asyncio.create_task(                                                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2795 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2792 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚   2793 â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                                â”‚
           â”‚   2794 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2795 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2796 â”‚                                                                                                                    â”‚
           â”‚   2797 â”‚   def _handle_mock_testing_fallbacks(                                                                              â”‚
           â”‚   2798 â”‚   â”‚   self,                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2631 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2628 â”‚   â”‚   â”‚   â”‚   content_policy_fallbacks=content_policy_fallbacks,                                                   â”‚
           â”‚   2629 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2630 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2631 â”‚   â”‚   â”‚   response = await self.async_function_with_retries(*args, **kwargs)                                       â”‚
           â”‚   2632 â”‚   â”‚   â”‚   verbose_router_logger.debug(f"Async Response: {response}")                                               â”‚
           â”‚   2633 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2634 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2967 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2964 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "max_retries", num_retries)                                              â”‚
           â”‚   2965 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "num_retries", current_attempt)                                          â”‚
           â”‚   2966 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2967 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2968 â”‚                                                                                                                    â”‚
           â”‚   2969 â”‚   async def make_call(self, original_function: Any, *args, **kwargs):                                              â”‚
           â”‚   2970 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2879 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2876 â”‚   â”‚   â”‚   â”‚   model_group=model_group, kwargs=kwargs                                                               â”‚
           â”‚   2877 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2878 â”‚   â”‚   â”‚   # if the function call is successful, no exception will be raised and we'll                              â”‚
           â”‚        break out of the loop                                                                                                â”‚
           â”‚ â± 2879 â”‚   â”‚   â”‚   response = await self.make_call(original_function, *args, **kwargs)                                      â”‚
           â”‚   2880 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   2881 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2882 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2976 in make_call                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2973 â”‚   â”‚   model_group = kwargs.get("model")                                                                            â”‚
           â”‚   2974 â”‚   â”‚   response = original_function(*args, **kwargs)                                                                â”‚
           â”‚   2975 â”‚   â”‚   if inspect.iscoroutinefunction(response) or inspect.isawaitable(response):                                   â”‚
           â”‚ â± 2976 â”‚   â”‚   â”‚   response = await response                                                                                â”‚
           â”‚   2977 â”‚   â”‚   ## PROCESS RESPONSE HEADERS                                                                                  â”‚
           â”‚   2978 â”‚   â”‚   await self.set_response_headers(response=response, model_group=model_group)                                  â”‚
           â”‚   2979                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:947 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    944 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚    945 â”‚   â”‚   â”‚   if model_name is not None:                                                                               â”‚
           â”‚    946 â”‚   â”‚   â”‚   â”‚   self.fail_calls[model_name] += 1                                                                     â”‚
           â”‚ â±  947 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    948 â”‚                                                                                                                    â”‚
           â”‚    949 â”‚   def _update_kwargs_before_fallbacks(self, model: str, kwargs: dict) -> None:                                     â”‚
           â”‚    950 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:915 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    912 â”‚   â”‚   â”‚   â”‚   â”‚   parent_otel_span=parent_otel_span,                                                               â”‚
           â”‚    913 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    914 â”‚   â”‚   â”‚   â”‚                                                                                                        â”‚
           â”‚ â±  915 â”‚   â”‚   â”‚   â”‚   response = await _response                                                                           â”‚
           â”‚    916 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚    917 â”‚   â”‚   â”‚   ## CHECK CONTENT FILTER ERROR ##                                                                         â”‚
           â”‚    918 â”‚   â”‚   â”‚   if isinstance(response, ModelResponse):                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1175 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1172 â”‚   â”‚   â”‚   â”‚   â”‚   else:                                                                                            â”‚
           â”‚   1173 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   kwargs["model"] = context_window_fallback_dict[model]                                        â”‚
           â”‚   1174 â”‚   â”‚   â”‚   â”‚   â”‚   return await original_function(*args, **kwargs)                                                  â”‚
           â”‚ â± 1175 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   1176 â”‚                                                                                                                    â”‚
           â”‚   1177 â”‚   is_coroutine = inspect.iscoroutinefunction(original_function)                                                    â”‚
           â”‚   1178                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1031 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1028 â”‚   â”‚   â”‚   â”‚   return _caching_handler_response.final_embedding_cached_response                                     â”‚
           â”‚   1029 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1030 â”‚   â”‚   â”‚   # MODEL CALL                                                                                             â”‚
           â”‚ â± 1031 â”‚   â”‚   â”‚   result = await original_function(*args, **kwargs)                                                        â”‚
           â”‚   1032 â”‚   â”‚   â”‚   end_time = datetime.datetime.now()                                                                       â”‚
           â”‚   1033 â”‚   â”‚   â”‚   if "stream" in kwargs and kwargs["stream"] is True:                                                      â”‚
           â”‚   1034 â”‚   â”‚   â”‚   â”‚   if (                                                                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:499 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    496 â”‚   â”‚   return response                                                                                              â”‚
           â”‚    497 â”‚   except Exception as e:                                                                                           â”‚
           â”‚    498 â”‚   â”‚   custom_llm_provider = custom_llm_provider or "openai"                                                        â”‚
           â”‚ â±  499 â”‚   â”‚   raise exception_type(                                                                                        â”‚
           â”‚    500 â”‚   â”‚   â”‚   model=model,                                                                                             â”‚
           â”‚    501 â”‚   â”‚   â”‚   custom_llm_provider=custom_llm_provider,                                                                 â”‚
           â”‚    502 â”‚   â”‚   â”‚   original_exception=e,                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:212 â”‚
           â”‚ 5 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2122 â”‚   â”‚   # don't let an error with mapping interrupt the user from receiving an error                                 â”‚
           â”‚        from the llm api calls                                                                                               â”‚
           â”‚   2123 â”‚   â”‚   if exception_mapping_worked:                                                                                 â”‚
           â”‚   2124 â”‚   â”‚   â”‚   setattr(e, "litellm_response_headers", litellm_response_headers)                                         â”‚
           â”‚ â± 2125 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   2126 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   2127 â”‚   â”‚   â”‚   for error_type in litellm.LITELLM_EXCEPTION_TYPES:                                                       â”‚
           â”‚   2128 â”‚   â”‚   â”‚   â”‚   if isinstance(e, error_type):                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:210 â”‚
           â”‚ 1 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2098 â”‚   â”‚   â”‚   â”‚   â”‚   request=original_exception.request,                                                              â”‚
           â”‚   2099 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚   2100 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â± 2101 â”‚   â”‚   â”‚   â”‚   raise APIConnectionError(                                                                            â”‚
           â”‚   2102 â”‚   â”‚   â”‚   â”‚   â”‚   message="{}\n{}".format(                                                                         â”‚
           â”‚   2103 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   str(original_exception), traceback.format_exc()                                              â”‚
           â”‚   2104 â”‚   â”‚   â”‚   â”‚   â”‚   ),                                                                                               â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           APIConnectionError: litellm.APIConnectionError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1109, in                 
           _wrap_create_connection                                                                                                        
               sock = await aiohappyeyeballs.start_connection(                                                                            
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                            
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py", line 123, in              
           start_connection                                                                                                               
               raise OSError(first_errno, msg)                                                                                            
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py", line 477, in acompletion           
               response = await init_response                                                                                             
                          ^^^^^^^^^^^^^^^^^^^                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 566, in                
           ollama_acompletion                                                                                                             
               raise e  # don't use verbose_logger.exception, if exception is raised                                                      
               ^^^^^^^                                                                                                                    
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 507, in                
           ollama_acompletion                                                                                                             
               resp = await session.post(url, json=data)                                                                                  
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                  
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py", line 696, in _request            
               conn = await self._connector.connect(                                                                                      
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 544, in connect          
               proto = await self._create_connection(req, traces, timeout)                                                                
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1050, in                 
           _create_connection                                                                                                             
               _, proto = await self._create_direct_connection(req, traces, timeout)                                                      
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1394, in                 
           _create_direct_connection                                                                                                      
               raise last_exc                                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1363, in                 
           _create_direct_connection                                                                                                      
               transp, proto = await self._wrap_create_connection(                                                                        
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                        
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1124, in                 
           _wrap_create_connection                                                                                                        
               raise client_error(req.connection_key, exc) from exc                                                                       
           aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
                                                                                                                                          
           Received Model Group=ollama/llama3.2                                                                                           
           Available Model Group Fallbacks=None LiteLLM Retried: 2 times, LiteLLM Max Retries: 3                                          
[00:50:58] Answer:                                                                                                                        


 ANSWERING QUESTION: sciqag_question_52.json
 ----------------------------- 



[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.

[00:51:18] Trajectory failed.                                                                                                             
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1109 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1106 â”‚   â”‚   â”‚   async with ceil_timeout(                                                                                 â”‚
           â”‚   1107 â”‚   â”‚   â”‚   â”‚   timeout.sock_connect, ceil_threshold=timeout.ceil_threshold                                          â”‚
           â”‚   1108 â”‚   â”‚   â”‚   ):                                                                                                       â”‚
           â”‚ â± 1109 â”‚   â”‚   â”‚   â”‚   sock = await aiohappyeyeballs.start_connection(                                                      â”‚
           â”‚   1110 â”‚   â”‚   â”‚   â”‚   â”‚   addr_infos=addr_infos,                                                                           â”‚
           â”‚   1111 â”‚   â”‚   â”‚   â”‚   â”‚   local_addr_infos=self._local_addr_infos,                                                         â”‚
           â”‚   1112 â”‚   â”‚   â”‚   â”‚   â”‚   happy_eyeballs_delay=self._happy_eyeballs_delay,                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py:123 in start_connection          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   120 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, OSError) and exc.errno == first_errno                                         â”‚
           â”‚   121 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   for exc in all_exceptions                                                                     â”‚
           â”‚   122 â”‚   â”‚   â”‚   â”‚   â”‚   ):                                                                                                â”‚
           â”‚ â± 123 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   raise OSError(first_errno, msg)                                                               â”‚
           â”‚   124 â”‚   â”‚   â”‚   â”‚   elif isinstance(first_exception, RuntimeError) and all(                                               â”‚
           â”‚   125 â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, RuntimeError) for exc in all_exceptions                                           â”‚
           â”‚   126 â”‚   â”‚   â”‚   â”‚   ):                                                                                                    â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:477 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    474 â”‚   â”‚   â”‚   â”‚   â”‚   response = ModelResponse(**init_response)                                                        â”‚
           â”‚    475 â”‚   â”‚   â”‚   â”‚   response = init_response                                                                             â”‚
           â”‚    476 â”‚   â”‚   â”‚   elif asyncio.iscoroutine(init_response):                                                                 â”‚
           â”‚ â±  477 â”‚   â”‚   â”‚   â”‚   response = await init_response                                                                       â”‚
           â”‚    478 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚    479 â”‚   â”‚   â”‚   â”‚   response = init_response  # type: ignore                                                             â”‚
           â”‚    480                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:566 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   563 â”‚   â”‚   â”‚   )                                                                                                         â”‚
           â”‚   564 â”‚   â”‚   â”‚   return model_response                                                                                     â”‚
           â”‚   565 â”‚   except Exception as e:                                                                                            â”‚
           â”‚ â± 566 â”‚   â”‚   raise e  # don't use verbose_logger.exception, if exception is raised                                         â”‚
           â”‚   567                                                                                                                       â”‚
           â”‚   568                                                                                                                       â”‚
           â”‚   569 async def ollama_aembeddings(                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:507 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   504 â”‚   try:                                                                                                              â”‚
           â”‚   505 â”‚   â”‚   timeout = aiohttp.ClientTimeout(total=litellm.request_timeout)  # 10 minutes                                  â”‚
           â”‚   506 â”‚   â”‚   async with aiohttp.ClientSession(timeout=timeout) as session:                                                 â”‚
           â”‚ â± 507 â”‚   â”‚   â”‚   resp = await session.post(url, json=data)                                                                 â”‚
           â”‚   508 â”‚   â”‚   â”‚                                                                                                             â”‚
           â”‚   509 â”‚   â”‚   â”‚   if resp.status != 200:                                                                                    â”‚
           â”‚   510 â”‚   â”‚   â”‚   â”‚   text = await resp.text()                                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py:696 in _request                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚    693 â”‚   â”‚   â”‚   â”‚   â”‚                                                                                                    â”‚
           â”‚    694 â”‚   â”‚   â”‚   â”‚   â”‚   # connection timeout                                                                             â”‚
           â”‚    695 â”‚   â”‚   â”‚   â”‚   â”‚   try:                                                                                             â”‚
           â”‚ â±  696 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   conn = await self._connector.connect(                                                        â”‚
           â”‚    697 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   req, traces=traces, timeout=real_timeout                                                 â”‚
           â”‚    698 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚    699 â”‚   â”‚   â”‚   â”‚   â”‚   except asyncio.TimeoutError as exc:                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:544 in connect                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚    541 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    542 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    543 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_start()                                                   â”‚
           â”‚ â±  544 â”‚   â”‚   â”‚   â”‚   proto = await self._create_connection(req, traces, timeout)                                          â”‚
           â”‚    545 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    546 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    547 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_end()                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1050 in _create_connection           â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1047 â”‚   â”‚   if req.proxy:                                                                                                â”‚
           â”‚   1048 â”‚   â”‚   â”‚   _, proto = await self._create_proxy_connection(req, traces, timeout)                                     â”‚
           â”‚   1049 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚ â± 1050 â”‚   â”‚   â”‚   _, proto = await self._create_direct_connection(req, traces, timeout)                                    â”‚
           â”‚   1051 â”‚   â”‚                                                                                                                â”‚
           â”‚   1052 â”‚   â”‚   return proto                                                                                                 â”‚
           â”‚   1053                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1394 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1391 â”‚   â”‚   â”‚   return transp, proto                                                                                     â”‚
           â”‚   1392 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   1393 â”‚   â”‚   â”‚   assert last_exc is not None                                                                              â”‚
           â”‚ â± 1394 â”‚   â”‚   â”‚   raise last_exc                                                                                           â”‚
           â”‚   1395 â”‚                                                                                                                    â”‚
           â”‚   1396 â”‚   async def _create_proxy_connection(                                                                              â”‚
           â”‚   1397 â”‚   â”‚   self, req: ClientRequest, traces: List["Trace"], timeout: "ClientTimeout"                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1363 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1360 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   1361 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1362 â”‚   â”‚   â”‚   try:                                                                                                     â”‚
           â”‚ â± 1363 â”‚   â”‚   â”‚   â”‚   transp, proto = await self._wrap_create_connection(                                                  â”‚
           â”‚   1364 â”‚   â”‚   â”‚   â”‚   â”‚   self._factory,                                                                                   â”‚
           â”‚   1365 â”‚   â”‚   â”‚   â”‚   â”‚   timeout=timeout,                                                                                 â”‚
           â”‚   1366 â”‚   â”‚   â”‚   â”‚   â”‚   ssl=sslcontext,                                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1124 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1121 â”‚   â”‚   except OSError as exc:                                                                                       â”‚
           â”‚   1122 â”‚   â”‚   â”‚   if exc.errno is None and isinstance(exc, asyncio.TimeoutError):                                          â”‚
           â”‚   1123 â”‚   â”‚   â”‚   â”‚   raise                                                                                                â”‚
           â”‚ â± 1124 â”‚   â”‚   â”‚   raise client_error(req.connection_key, exc) from exc                                                     â”‚
           â”‚   1125 â”‚                                                                                                                    â”‚
           â”‚   1126 â”‚   async def _wrap_existing_connection(                                                                             â”‚
           â”‚   1127 â”‚   â”‚   self,                                                                                                        â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno 111] Connect call failed 
           ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                                                    
                                                                                                                                          
           During handling of the above exception, another exception occurred:                                                            
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:276 in _run_with_timeout_failure                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   273 ) -> tuple[PQASession, AgentStatus]:                                                                                  â”‚
           â”‚   274 â”‚   try:                                                                                                              â”‚
           â”‚   275 â”‚   â”‚   async with asyncio.timeout(query.settings.agent.timeout):                                                     â”‚
           â”‚ â± 276 â”‚   â”‚   â”‚   status = await rollout()                                                                                  â”‚
           â”‚   277 â”‚   except TimeoutError:                                                                                              â”‚
           â”‚   278 â”‚   â”‚   logger.warning(                                                                                               â”‚
           â”‚   279 â”‚   â”‚   â”‚   f"Agent timeout after {query.settings.agent.timeout}-sec, just answering."                                â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:410 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   407 â”‚   â”‚   â”‚   â”‚   )                                                                                                     â”‚
           â”‚   408 â”‚   â”‚   â”‚   â”‚   return AgentStatus.TRUNCATED                                                                          â”‚
           â”‚   409 â”‚   â”‚   â”‚   agent_state.messages += obs                                                                               â”‚
           â”‚ â± 410 â”‚   â”‚   â”‚   for attempt in Retrying(                                                                                  â”‚
           â”‚   411 â”‚   â”‚   â”‚   â”‚   stop=stop_after_attempt(5),                                                                           â”‚
           â”‚   412 â”‚   â”‚   â”‚   â”‚   retry=retry_if_exception_type(MalformedMessageError),                                                 â”‚
           â”‚   413 â”‚   â”‚   â”‚   â”‚   before_sleep=before_sleep_log(logger, logging.WARNING),                                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:443 in __iter__                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   440 â”‚   â”‚                                                                                                                 â”‚
           â”‚   441 â”‚   â”‚   retry_state = RetryCallState(self, fn=None, args=(), kwargs={})                                               â”‚
           â”‚   442 â”‚   â”‚   while True:                                                                                                   â”‚
           â”‚ â± 443 â”‚   â”‚   â”‚   do = self.iter(retry_state=retry_state)                                                                   â”‚
           â”‚   444 â”‚   â”‚   â”‚   if isinstance(do, DoAttempt):                                                                             â”‚
           â”‚   445 â”‚   â”‚   â”‚   â”‚   yield AttemptManager(retry_state=retry_state)                                                         â”‚
           â”‚   446 â”‚   â”‚   â”‚   elif isinstance(do, DoSleep):                                                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:376 in iter                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   373 â”‚   â”‚   self._begin_iter(retry_state)                                                                                 â”‚
           â”‚   374 â”‚   â”‚   result = None                                                                                                 â”‚
           â”‚   375 â”‚   â”‚   for action in self.iter_state.actions:                                                                        â”‚
           â”‚ â± 376 â”‚   â”‚   â”‚   result = action(retry_state)                                                                              â”‚
           â”‚   377 â”‚   â”‚   return result                                                                                                 â”‚
           â”‚   378 â”‚                                                                                                                     â”‚
           â”‚   379 â”‚   def _begin_iter(self, retry_state: "RetryCallState") -> None:  # noqa                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:398 in <lambda>                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   395 â”‚                                                                                                                     â”‚
           â”‚   396 â”‚   def _post_retry_check_actions(self, retry_state: "RetryCallState") -> None:                                       â”‚
           â”‚   397 â”‚   â”‚   if not (self.iter_state.is_explicit_retry or self.iter_state.retry_run_result):                               â”‚
           â”‚ â± 398 â”‚   â”‚   â”‚   self._add_action_func(lambda rs: rs.outcome.result())                                                     â”‚
           â”‚   399 â”‚   â”‚   â”‚   return                                                                                                    â”‚
           â”‚   400 â”‚   â”‚                                                                                                                 â”‚
           â”‚   401 â”‚   â”‚   if self.after is not None:                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:449 in result                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚   446 â”‚   â”‚   â”‚   â”‚   if self._state in [CANCELLED, CANCELLED_AND_NOTIFIED]:                                                â”‚
           â”‚   447 â”‚   â”‚   â”‚   â”‚   â”‚   raise CancelledError()                                                                            â”‚
           â”‚   448 â”‚   â”‚   â”‚   â”‚   elif self._state == FINISHED:                                                                         â”‚
           â”‚ â± 449 â”‚   â”‚   â”‚   â”‚   â”‚   return self.__get_result()                                                                        â”‚
           â”‚   450 â”‚   â”‚   â”‚   â”‚                                                                                                         â”‚
           â”‚   451 â”‚   â”‚   â”‚   â”‚   self._condition.wait(timeout)                                                                         â”‚
           â”‚   452                                                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:401 in __get_result                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   398 â”‚   def __get_result(self):                                                                                           â”‚
           â”‚   399 â”‚   â”‚   if self._exception:                                                                                           â”‚
           â”‚   400 â”‚   â”‚   â”‚   try:                                                                                                      â”‚
           â”‚ â± 401 â”‚   â”‚   â”‚   â”‚   raise self._exception                                                                                 â”‚
           â”‚   402 â”‚   â”‚   â”‚   finally:                                                                                                  â”‚
           â”‚   403 â”‚   â”‚   â”‚   â”‚   # Break a reference cycle with the exception in self._exception                                       â”‚
           â”‚   404 â”‚   â”‚   â”‚   â”‚   self = None                                                                                           â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:417 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   414 â”‚   â”‚   â”‚   â”‚   reraise=True,                                                                                         â”‚
           â”‚   415 â”‚   â”‚   â”‚   ):                                                                                                        â”‚
           â”‚   416 â”‚   â”‚   â”‚   â”‚   with attempt:  # Retrying if ToolSelector fails to select a tool                                      â”‚
           â”‚ â± 417 â”‚   â”‚   â”‚   â”‚   â”‚   action = await agent(agent_state.messages, tools)                                                 â”‚
           â”‚   418 â”‚   â”‚   â”‚   agent_state.messages = [*agent_state.messages, action]                                                    â”‚
           â”‚   419 â”‚   â”‚   â”‚   if on_agent_action_callback:                                                                              â”‚
           â”‚   420 â”‚   â”‚   â”‚   â”‚   await on_agent_action_callback(action, agent_state)                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aviary/tools/utils.py:182 in __call__                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   179 â”‚   â”‚   â”‚   self._ledger.messages.extend(messages)                                                                    â”‚
           â”‚   180 â”‚   â”‚   â”‚   messages = self._ledger.messages                                                                          â”‚
           â”‚   181 â”‚   â”‚                                                                                                                 â”‚
           â”‚ â± 182 â”‚   â”‚   model_response = await self._bound_acompletion(                                                               â”‚
           â”‚   183 â”‚   â”‚   â”‚   messages=MessagesAdapter.dump_python(                                                                     â”‚
           â”‚   184 â”‚   â”‚   â”‚   â”‚   messages, exclude_none=True, by_alias=True                                                            â”‚
           â”‚   185 â”‚   â”‚   â”‚   ),                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:817 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    814 â”‚   â”‚   â”‚   â”‚   â”‚   original_exception=e,                                                                            â”‚
           â”‚    815 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    816 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚ â±  817 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    818 â”‚                                                                                                                    â”‚
           â”‚    819 â”‚   async def _acompletion(                                                                                          â”‚
           â”‚    820 â”‚   â”‚   self, model: str, messages: List[Dict[str, str]], **kwargs                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:793 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    790 â”‚   â”‚   â”‚   if request_priority is not None and isinstance(request_priority, int):                                   â”‚
           â”‚    791 â”‚   â”‚   â”‚   â”‚   response = await self.schedule_acompletion(**kwargs)                                                 â”‚
           â”‚    792 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â±  793 â”‚   â”‚   â”‚   â”‚   response = await self.async_function_with_fallbacks(**kwargs)                                        â”‚
           â”‚    794 â”‚   â”‚   â”‚   end_time = time.time()                                                                                   â”‚
           â”‚    795 â”‚   â”‚   â”‚   _duration = end_time - start_time                                                                        â”‚
           â”‚    796 â”‚   â”‚   â”‚   asyncio.create_task(                                                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2795 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2792 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚   2793 â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                                â”‚
           â”‚   2794 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2795 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2796 â”‚                                                                                                                    â”‚
           â”‚   2797 â”‚   def _handle_mock_testing_fallbacks(                                                                              â”‚
           â”‚   2798 â”‚   â”‚   self,                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2631 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2628 â”‚   â”‚   â”‚   â”‚   content_policy_fallbacks=content_policy_fallbacks,                                                   â”‚
           â”‚   2629 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2630 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2631 â”‚   â”‚   â”‚   response = await self.async_function_with_retries(*args, **kwargs)                                       â”‚
           â”‚   2632 â”‚   â”‚   â”‚   verbose_router_logger.debug(f"Async Response: {response}")                                               â”‚
           â”‚   2633 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2634 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2967 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2964 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "max_retries", num_retries)                                              â”‚
           â”‚   2965 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "num_retries", current_attempt)                                          â”‚
           â”‚   2966 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2967 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2968 â”‚                                                                                                                    â”‚
           â”‚   2969 â”‚   async def make_call(self, original_function: Any, *args, **kwargs):                                              â”‚
           â”‚   2970 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2879 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2876 â”‚   â”‚   â”‚   â”‚   model_group=model_group, kwargs=kwargs                                                               â”‚
           â”‚   2877 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2878 â”‚   â”‚   â”‚   # if the function call is successful, no exception will be raised and we'll                              â”‚
           â”‚        break out of the loop                                                                                                â”‚
           â”‚ â± 2879 â”‚   â”‚   â”‚   response = await self.make_call(original_function, *args, **kwargs)                                      â”‚
           â”‚   2880 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   2881 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2882 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2976 in make_call                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2973 â”‚   â”‚   model_group = kwargs.get("model")                                                                            â”‚
           â”‚   2974 â”‚   â”‚   response = original_function(*args, **kwargs)                                                                â”‚
           â”‚   2975 â”‚   â”‚   if inspect.iscoroutinefunction(response) or inspect.isawaitable(response):                                   â”‚
           â”‚ â± 2976 â”‚   â”‚   â”‚   response = await response                                                                                â”‚
           â”‚   2977 â”‚   â”‚   ## PROCESS RESPONSE HEADERS                                                                                  â”‚
           â”‚   2978 â”‚   â”‚   await self.set_response_headers(response=response, model_group=model_group)                                  â”‚
           â”‚   2979                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:947 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    944 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚    945 â”‚   â”‚   â”‚   if model_name is not None:                                                                               â”‚
           â”‚    946 â”‚   â”‚   â”‚   â”‚   self.fail_calls[model_name] += 1                                                                     â”‚
           â”‚ â±  947 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    948 â”‚                                                                                                                    â”‚
           â”‚    949 â”‚   def _update_kwargs_before_fallbacks(self, model: str, kwargs: dict) -> None:                                     â”‚
           â”‚    950 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:915 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    912 â”‚   â”‚   â”‚   â”‚   â”‚   parent_otel_span=parent_otel_span,                                                               â”‚
           â”‚    913 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    914 â”‚   â”‚   â”‚   â”‚                                                                                                        â”‚
           â”‚ â±  915 â”‚   â”‚   â”‚   â”‚   response = await _response                                                                           â”‚
           â”‚    916 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚    917 â”‚   â”‚   â”‚   ## CHECK CONTENT FILTER ERROR ##                                                                         â”‚
           â”‚    918 â”‚   â”‚   â”‚   if isinstance(response, ModelResponse):                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1175 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1172 â”‚   â”‚   â”‚   â”‚   â”‚   else:                                                                                            â”‚
           â”‚   1173 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   kwargs["model"] = context_window_fallback_dict[model]                                        â”‚
           â”‚   1174 â”‚   â”‚   â”‚   â”‚   â”‚   return await original_function(*args, **kwargs)                                                  â”‚
           â”‚ â± 1175 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   1176 â”‚                                                                                                                    â”‚
           â”‚   1177 â”‚   is_coroutine = inspect.iscoroutinefunction(original_function)                                                    â”‚
           â”‚   1178                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1031 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1028 â”‚   â”‚   â”‚   â”‚   return _caching_handler_response.final_embedding_cached_response                                     â”‚
           â”‚   1029 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1030 â”‚   â”‚   â”‚   # MODEL CALL                                                                                             â”‚
           â”‚ â± 1031 â”‚   â”‚   â”‚   result = await original_function(*args, **kwargs)                                                        â”‚
           â”‚   1032 â”‚   â”‚   â”‚   end_time = datetime.datetime.now()                                                                       â”‚
           â”‚   1033 â”‚   â”‚   â”‚   if "stream" in kwargs and kwargs["stream"] is True:                                                      â”‚
           â”‚   1034 â”‚   â”‚   â”‚   â”‚   if (                                                                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:499 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    496 â”‚   â”‚   return response                                                                                              â”‚
           â”‚    497 â”‚   except Exception as e:                                                                                           â”‚
           â”‚    498 â”‚   â”‚   custom_llm_provider = custom_llm_provider or "openai"                                                        â”‚
           â”‚ â±  499 â”‚   â”‚   raise exception_type(                                                                                        â”‚
           â”‚    500 â”‚   â”‚   â”‚   model=model,                                                                                             â”‚
           â”‚    501 â”‚   â”‚   â”‚   custom_llm_provider=custom_llm_provider,                                                                 â”‚
           â”‚    502 â”‚   â”‚   â”‚   original_exception=e,                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:212 â”‚
           â”‚ 5 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2122 â”‚   â”‚   # don't let an error with mapping interrupt the user from receiving an error                                 â”‚
           â”‚        from the llm api calls                                                                                               â”‚
           â”‚   2123 â”‚   â”‚   if exception_mapping_worked:                                                                                 â”‚
           â”‚   2124 â”‚   â”‚   â”‚   setattr(e, "litellm_response_headers", litellm_response_headers)                                         â”‚
           â”‚ â± 2125 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   2126 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   2127 â”‚   â”‚   â”‚   for error_type in litellm.LITELLM_EXCEPTION_TYPES:                                                       â”‚
           â”‚   2128 â”‚   â”‚   â”‚   â”‚   if isinstance(e, error_type):                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:210 â”‚
           â”‚ 1 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2098 â”‚   â”‚   â”‚   â”‚   â”‚   request=original_exception.request,                                                              â”‚
           â”‚   2099 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚   2100 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â± 2101 â”‚   â”‚   â”‚   â”‚   raise APIConnectionError(                                                                            â”‚
           â”‚   2102 â”‚   â”‚   â”‚   â”‚   â”‚   message="{}\n{}".format(                                                                         â”‚
           â”‚   2103 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   str(original_exception), traceback.format_exc()                                              â”‚
           â”‚   2104 â”‚   â”‚   â”‚   â”‚   â”‚   ),                                                                                               â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           APIConnectionError: litellm.APIConnectionError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1109, in                 
           _wrap_create_connection                                                                                                        
               sock = await aiohappyeyeballs.start_connection(                                                                            
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                            
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py", line 123, in              
           start_connection                                                                                                               
               raise OSError(first_errno, msg)                                                                                            
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py", line 477, in acompletion           
               response = await init_response                                                                                             
                          ^^^^^^^^^^^^^^^^^^^                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 566, in                
           ollama_acompletion                                                                                                             
               raise e  # don't use verbose_logger.exception, if exception is raised                                                      
               ^^^^^^^                                                                                                                    
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 507, in                
           ollama_acompletion                                                                                                             
               resp = await session.post(url, json=data)                                                                                  
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                  
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py", line 696, in _request            
               conn = await self._connector.connect(                                                                                      
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 544, in connect          
               proto = await self._create_connection(req, traces, timeout)                                                                
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1050, in                 
           _create_connection                                                                                                             
               _, proto = await self._create_direct_connection(req, traces, timeout)                                                      
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1394, in                 
           _create_direct_connection                                                                                                      
               raise last_exc                                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1363, in                 
           _create_direct_connection                                                                                                      
               transp, proto = await self._wrap_create_connection(                                                                        
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                        
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1124, in                 
           _wrap_create_connection                                                                                                        
               raise client_error(req.connection_key, exc) from exc                                                                       
           aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
                                                                                                                                          
           Received Model Group=ollama/llama3.2                                                                                           
           Available Model Group Fallbacks=None LiteLLM Retried: 2 times, LiteLLM Max Retries: 3                                          
[00:51:21] Answer:                                                                                                                        


 ANSWERING QUESTION: sciqag_question_53.json
 ----------------------------- 



[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.

[00:51:41] Trajectory failed.                                                                                                             
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1109 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1106 â”‚   â”‚   â”‚   async with ceil_timeout(                                                                                 â”‚
           â”‚   1107 â”‚   â”‚   â”‚   â”‚   timeout.sock_connect, ceil_threshold=timeout.ceil_threshold                                          â”‚
           â”‚   1108 â”‚   â”‚   â”‚   ):                                                                                                       â”‚
           â”‚ â± 1109 â”‚   â”‚   â”‚   â”‚   sock = await aiohappyeyeballs.start_connection(                                                      â”‚
           â”‚   1110 â”‚   â”‚   â”‚   â”‚   â”‚   addr_infos=addr_infos,                                                                           â”‚
           â”‚   1111 â”‚   â”‚   â”‚   â”‚   â”‚   local_addr_infos=self._local_addr_infos,                                                         â”‚
           â”‚   1112 â”‚   â”‚   â”‚   â”‚   â”‚   happy_eyeballs_delay=self._happy_eyeballs_delay,                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py:123 in start_connection          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   120 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, OSError) and exc.errno == first_errno                                         â”‚
           â”‚   121 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   for exc in all_exceptions                                                                     â”‚
           â”‚   122 â”‚   â”‚   â”‚   â”‚   â”‚   ):                                                                                                â”‚
           â”‚ â± 123 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   raise OSError(first_errno, msg)                                                               â”‚
           â”‚   124 â”‚   â”‚   â”‚   â”‚   elif isinstance(first_exception, RuntimeError) and all(                                               â”‚
           â”‚   125 â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, RuntimeError) for exc in all_exceptions                                           â”‚
           â”‚   126 â”‚   â”‚   â”‚   â”‚   ):                                                                                                    â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:477 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    474 â”‚   â”‚   â”‚   â”‚   â”‚   response = ModelResponse(**init_response)                                                        â”‚
           â”‚    475 â”‚   â”‚   â”‚   â”‚   response = init_response                                                                             â”‚
           â”‚    476 â”‚   â”‚   â”‚   elif asyncio.iscoroutine(init_response):                                                                 â”‚
           â”‚ â±  477 â”‚   â”‚   â”‚   â”‚   response = await init_response                                                                       â”‚
           â”‚    478 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚    479 â”‚   â”‚   â”‚   â”‚   response = init_response  # type: ignore                                                             â”‚
           â”‚    480                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:566 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   563 â”‚   â”‚   â”‚   )                                                                                                         â”‚
           â”‚   564 â”‚   â”‚   â”‚   return model_response                                                                                     â”‚
           â”‚   565 â”‚   except Exception as e:                                                                                            â”‚
           â”‚ â± 566 â”‚   â”‚   raise e  # don't use verbose_logger.exception, if exception is raised                                         â”‚
           â”‚   567                                                                                                                       â”‚
           â”‚   568                                                                                                                       â”‚
           â”‚   569 async def ollama_aembeddings(                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:507 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   504 â”‚   try:                                                                                                              â”‚
           â”‚   505 â”‚   â”‚   timeout = aiohttp.ClientTimeout(total=litellm.request_timeout)  # 10 minutes                                  â”‚
           â”‚   506 â”‚   â”‚   async with aiohttp.ClientSession(timeout=timeout) as session:                                                 â”‚
           â”‚ â± 507 â”‚   â”‚   â”‚   resp = await session.post(url, json=data)                                                                 â”‚
           â”‚   508 â”‚   â”‚   â”‚                                                                                                             â”‚
           â”‚   509 â”‚   â”‚   â”‚   if resp.status != 200:                                                                                    â”‚
           â”‚   510 â”‚   â”‚   â”‚   â”‚   text = await resp.text()                                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py:696 in _request                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚    693 â”‚   â”‚   â”‚   â”‚   â”‚                                                                                                    â”‚
           â”‚    694 â”‚   â”‚   â”‚   â”‚   â”‚   # connection timeout                                                                             â”‚
           â”‚    695 â”‚   â”‚   â”‚   â”‚   â”‚   try:                                                                                             â”‚
           â”‚ â±  696 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   conn = await self._connector.connect(                                                        â”‚
           â”‚    697 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   req, traces=traces, timeout=real_timeout                                                 â”‚
           â”‚    698 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚    699 â”‚   â”‚   â”‚   â”‚   â”‚   except asyncio.TimeoutError as exc:                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:544 in connect                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚    541 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    542 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    543 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_start()                                                   â”‚
           â”‚ â±  544 â”‚   â”‚   â”‚   â”‚   proto = await self._create_connection(req, traces, timeout)                                          â”‚
           â”‚    545 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    546 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    547 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_end()                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1050 in _create_connection           â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1047 â”‚   â”‚   if req.proxy:                                                                                                â”‚
           â”‚   1048 â”‚   â”‚   â”‚   _, proto = await self._create_proxy_connection(req, traces, timeout)                                     â”‚
           â”‚   1049 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚ â± 1050 â”‚   â”‚   â”‚   _, proto = await self._create_direct_connection(req, traces, timeout)                                    â”‚
           â”‚   1051 â”‚   â”‚                                                                                                                â”‚
           â”‚   1052 â”‚   â”‚   return proto                                                                                                 â”‚
           â”‚   1053                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1394 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1391 â”‚   â”‚   â”‚   return transp, proto                                                                                     â”‚
           â”‚   1392 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   1393 â”‚   â”‚   â”‚   assert last_exc is not None                                                                              â”‚
           â”‚ â± 1394 â”‚   â”‚   â”‚   raise last_exc                                                                                           â”‚
           â”‚   1395 â”‚                                                                                                                    â”‚
           â”‚   1396 â”‚   async def _create_proxy_connection(                                                                              â”‚
           â”‚   1397 â”‚   â”‚   self, req: ClientRequest, traces: List["Trace"], timeout: "ClientTimeout"                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1363 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1360 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   1361 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1362 â”‚   â”‚   â”‚   try:                                                                                                     â”‚
           â”‚ â± 1363 â”‚   â”‚   â”‚   â”‚   transp, proto = await self._wrap_create_connection(                                                  â”‚
           â”‚   1364 â”‚   â”‚   â”‚   â”‚   â”‚   self._factory,                                                                                   â”‚
           â”‚   1365 â”‚   â”‚   â”‚   â”‚   â”‚   timeout=timeout,                                                                                 â”‚
           â”‚   1366 â”‚   â”‚   â”‚   â”‚   â”‚   ssl=sslcontext,                                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1124 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1121 â”‚   â”‚   except OSError as exc:                                                                                       â”‚
           â”‚   1122 â”‚   â”‚   â”‚   if exc.errno is None and isinstance(exc, asyncio.TimeoutError):                                          â”‚
           â”‚   1123 â”‚   â”‚   â”‚   â”‚   raise                                                                                                â”‚
           â”‚ â± 1124 â”‚   â”‚   â”‚   raise client_error(req.connection_key, exc) from exc                                                     â”‚
           â”‚   1125 â”‚                                                                                                                    â”‚
           â”‚   1126 â”‚   async def _wrap_existing_connection(                                                                             â”‚
           â”‚   1127 â”‚   â”‚   self,                                                                                                        â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno 111] Connect call failed 
           ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                                                    
                                                                                                                                          
           During handling of the above exception, another exception occurred:                                                            
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:276 in _run_with_timeout_failure                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   273 ) -> tuple[PQASession, AgentStatus]:                                                                                  â”‚
           â”‚   274 â”‚   try:                                                                                                              â”‚
           â”‚   275 â”‚   â”‚   async with asyncio.timeout(query.settings.agent.timeout):                                                     â”‚
           â”‚ â± 276 â”‚   â”‚   â”‚   status = await rollout()                                                                                  â”‚
           â”‚   277 â”‚   except TimeoutError:                                                                                              â”‚
           â”‚   278 â”‚   â”‚   logger.warning(                                                                                               â”‚
           â”‚   279 â”‚   â”‚   â”‚   f"Agent timeout after {query.settings.agent.timeout}-sec, just answering."                                â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:410 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   407 â”‚   â”‚   â”‚   â”‚   )                                                                                                     â”‚
           â”‚   408 â”‚   â”‚   â”‚   â”‚   return AgentStatus.TRUNCATED                                                                          â”‚
           â”‚   409 â”‚   â”‚   â”‚   agent_state.messages += obs                                                                               â”‚
           â”‚ â± 410 â”‚   â”‚   â”‚   for attempt in Retrying(                                                                                  â”‚
           â”‚   411 â”‚   â”‚   â”‚   â”‚   stop=stop_after_attempt(5),                                                                           â”‚
           â”‚   412 â”‚   â”‚   â”‚   â”‚   retry=retry_if_exception_type(MalformedMessageError),                                                 â”‚
           â”‚   413 â”‚   â”‚   â”‚   â”‚   before_sleep=before_sleep_log(logger, logging.WARNING),                                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:443 in __iter__                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   440 â”‚   â”‚                                                                                                                 â”‚
           â”‚   441 â”‚   â”‚   retry_state = RetryCallState(self, fn=None, args=(), kwargs={})                                               â”‚
           â”‚   442 â”‚   â”‚   while True:                                                                                                   â”‚
           â”‚ â± 443 â”‚   â”‚   â”‚   do = self.iter(retry_state=retry_state)                                                                   â”‚
           â”‚   444 â”‚   â”‚   â”‚   if isinstance(do, DoAttempt):                                                                             â”‚
           â”‚   445 â”‚   â”‚   â”‚   â”‚   yield AttemptManager(retry_state=retry_state)                                                         â”‚
           â”‚   446 â”‚   â”‚   â”‚   elif isinstance(do, DoSleep):                                                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:376 in iter                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   373 â”‚   â”‚   self._begin_iter(retry_state)                                                                                 â”‚
           â”‚   374 â”‚   â”‚   result = None                                                                                                 â”‚
           â”‚   375 â”‚   â”‚   for action in self.iter_state.actions:                                                                        â”‚
           â”‚ â± 376 â”‚   â”‚   â”‚   result = action(retry_state)                                                                              â”‚
           â”‚   377 â”‚   â”‚   return result                                                                                                 â”‚
           â”‚   378 â”‚                                                                                                                     â”‚
           â”‚   379 â”‚   def _begin_iter(self, retry_state: "RetryCallState") -> None:  # noqa                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:398 in <lambda>                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   395 â”‚                                                                                                                     â”‚
           â”‚   396 â”‚   def _post_retry_check_actions(self, retry_state: "RetryCallState") -> None:                                       â”‚
           â”‚   397 â”‚   â”‚   if not (self.iter_state.is_explicit_retry or self.iter_state.retry_run_result):                               â”‚
           â”‚ â± 398 â”‚   â”‚   â”‚   self._add_action_func(lambda rs: rs.outcome.result())                                                     â”‚
           â”‚   399 â”‚   â”‚   â”‚   return                                                                                                    â”‚
           â”‚   400 â”‚   â”‚                                                                                                                 â”‚
           â”‚   401 â”‚   â”‚   if self.after is not None:                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:449 in result                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚   446 â”‚   â”‚   â”‚   â”‚   if self._state in [CANCELLED, CANCELLED_AND_NOTIFIED]:                                                â”‚
           â”‚   447 â”‚   â”‚   â”‚   â”‚   â”‚   raise CancelledError()                                                                            â”‚
           â”‚   448 â”‚   â”‚   â”‚   â”‚   elif self._state == FINISHED:                                                                         â”‚
           â”‚ â± 449 â”‚   â”‚   â”‚   â”‚   â”‚   return self.__get_result()                                                                        â”‚
           â”‚   450 â”‚   â”‚   â”‚   â”‚                                                                                                         â”‚
           â”‚   451 â”‚   â”‚   â”‚   â”‚   self._condition.wait(timeout)                                                                         â”‚
           â”‚   452                                                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:401 in __get_result                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   398 â”‚   def __get_result(self):                                                                                           â”‚
           â”‚   399 â”‚   â”‚   if self._exception:                                                                                           â”‚
           â”‚   400 â”‚   â”‚   â”‚   try:                                                                                                      â”‚
           â”‚ â± 401 â”‚   â”‚   â”‚   â”‚   raise self._exception                                                                                 â”‚
           â”‚   402 â”‚   â”‚   â”‚   finally:                                                                                                  â”‚
           â”‚   403 â”‚   â”‚   â”‚   â”‚   # Break a reference cycle with the exception in self._exception                                       â”‚
           â”‚   404 â”‚   â”‚   â”‚   â”‚   self = None                                                                                           â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:417 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   414 â”‚   â”‚   â”‚   â”‚   reraise=True,                                                                                         â”‚
           â”‚   415 â”‚   â”‚   â”‚   ):                                                                                                        â”‚
           â”‚   416 â”‚   â”‚   â”‚   â”‚   with attempt:  # Retrying if ToolSelector fails to select a tool                                      â”‚
           â”‚ â± 417 â”‚   â”‚   â”‚   â”‚   â”‚   action = await agent(agent_state.messages, tools)                                                 â”‚
           â”‚   418 â”‚   â”‚   â”‚   agent_state.messages = [*agent_state.messages, action]                                                    â”‚
           â”‚   419 â”‚   â”‚   â”‚   if on_agent_action_callback:                                                                              â”‚
           â”‚   420 â”‚   â”‚   â”‚   â”‚   await on_agent_action_callback(action, agent_state)                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aviary/tools/utils.py:182 in __call__                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   179 â”‚   â”‚   â”‚   self._ledger.messages.extend(messages)                                                                    â”‚
           â”‚   180 â”‚   â”‚   â”‚   messages = self._ledger.messages                                                                          â”‚
           â”‚   181 â”‚   â”‚                                                                                                                 â”‚
           â”‚ â± 182 â”‚   â”‚   model_response = await self._bound_acompletion(                                                               â”‚
           â”‚   183 â”‚   â”‚   â”‚   messages=MessagesAdapter.dump_python(                                                                     â”‚
           â”‚   184 â”‚   â”‚   â”‚   â”‚   messages, exclude_none=True, by_alias=True                                                            â”‚
           â”‚   185 â”‚   â”‚   â”‚   ),                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:817 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    814 â”‚   â”‚   â”‚   â”‚   â”‚   original_exception=e,                                                                            â”‚
           â”‚    815 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    816 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚ â±  817 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    818 â”‚                                                                                                                    â”‚
           â”‚    819 â”‚   async def _acompletion(                                                                                          â”‚
           â”‚    820 â”‚   â”‚   self, model: str, messages: List[Dict[str, str]], **kwargs                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:793 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    790 â”‚   â”‚   â”‚   if request_priority is not None and isinstance(request_priority, int):                                   â”‚
           â”‚    791 â”‚   â”‚   â”‚   â”‚   response = await self.schedule_acompletion(**kwargs)                                                 â”‚
           â”‚    792 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â±  793 â”‚   â”‚   â”‚   â”‚   response = await self.async_function_with_fallbacks(**kwargs)                                        â”‚
           â”‚    794 â”‚   â”‚   â”‚   end_time = time.time()                                                                                   â”‚
           â”‚    795 â”‚   â”‚   â”‚   _duration = end_time - start_time                                                                        â”‚
           â”‚    796 â”‚   â”‚   â”‚   asyncio.create_task(                                                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2795 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2792 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚   2793 â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                                â”‚
           â”‚   2794 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2795 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2796 â”‚                                                                                                                    â”‚
           â”‚   2797 â”‚   def _handle_mock_testing_fallbacks(                                                                              â”‚
           â”‚   2798 â”‚   â”‚   self,                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2631 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2628 â”‚   â”‚   â”‚   â”‚   content_policy_fallbacks=content_policy_fallbacks,                                                   â”‚
           â”‚   2629 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2630 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2631 â”‚   â”‚   â”‚   response = await self.async_function_with_retries(*args, **kwargs)                                       â”‚
           â”‚   2632 â”‚   â”‚   â”‚   verbose_router_logger.debug(f"Async Response: {response}")                                               â”‚
           â”‚   2633 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2634 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2967 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2964 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "max_retries", num_retries)                                              â”‚
           â”‚   2965 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "num_retries", current_attempt)                                          â”‚
           â”‚   2966 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2967 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2968 â”‚                                                                                                                    â”‚
           â”‚   2969 â”‚   async def make_call(self, original_function: Any, *args, **kwargs):                                              â”‚
           â”‚   2970 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2879 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2876 â”‚   â”‚   â”‚   â”‚   model_group=model_group, kwargs=kwargs                                                               â”‚
           â”‚   2877 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2878 â”‚   â”‚   â”‚   # if the function call is successful, no exception will be raised and we'll                              â”‚
           â”‚        break out of the loop                                                                                                â”‚
           â”‚ â± 2879 â”‚   â”‚   â”‚   response = await self.make_call(original_function, *args, **kwargs)                                      â”‚
           â”‚   2880 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   2881 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2882 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2976 in make_call                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2973 â”‚   â”‚   model_group = kwargs.get("model")                                                                            â”‚
           â”‚   2974 â”‚   â”‚   response = original_function(*args, **kwargs)                                                                â”‚
           â”‚   2975 â”‚   â”‚   if inspect.iscoroutinefunction(response) or inspect.isawaitable(response):                                   â”‚
           â”‚ â± 2976 â”‚   â”‚   â”‚   response = await response                                                                                â”‚
           â”‚   2977 â”‚   â”‚   ## PROCESS RESPONSE HEADERS                                                                                  â”‚
           â”‚   2978 â”‚   â”‚   await self.set_response_headers(response=response, model_group=model_group)                                  â”‚
           â”‚   2979                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:947 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    944 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚    945 â”‚   â”‚   â”‚   if model_name is not None:                                                                               â”‚
           â”‚    946 â”‚   â”‚   â”‚   â”‚   self.fail_calls[model_name] += 1                                                                     â”‚
           â”‚ â±  947 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    948 â”‚                                                                                                                    â”‚
           â”‚    949 â”‚   def _update_kwargs_before_fallbacks(self, model: str, kwargs: dict) -> None:                                     â”‚
           â”‚    950 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:915 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    912 â”‚   â”‚   â”‚   â”‚   â”‚   parent_otel_span=parent_otel_span,                                                               â”‚
           â”‚    913 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    914 â”‚   â”‚   â”‚   â”‚                                                                                                        â”‚
           â”‚ â±  915 â”‚   â”‚   â”‚   â”‚   response = await _response                                                                           â”‚
           â”‚    916 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚    917 â”‚   â”‚   â”‚   ## CHECK CONTENT FILTER ERROR ##                                                                         â”‚
           â”‚    918 â”‚   â”‚   â”‚   if isinstance(response, ModelResponse):                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1175 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1172 â”‚   â”‚   â”‚   â”‚   â”‚   else:                                                                                            â”‚
           â”‚   1173 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   kwargs["model"] = context_window_fallback_dict[model]                                        â”‚
           â”‚   1174 â”‚   â”‚   â”‚   â”‚   â”‚   return await original_function(*args, **kwargs)                                                  â”‚
           â”‚ â± 1175 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   1176 â”‚                                                                                                                    â”‚
           â”‚   1177 â”‚   is_coroutine = inspect.iscoroutinefunction(original_function)                                                    â”‚
           â”‚   1178                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1031 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1028 â”‚   â”‚   â”‚   â”‚   return _caching_handler_response.final_embedding_cached_response                                     â”‚
           â”‚   1029 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1030 â”‚   â”‚   â”‚   # MODEL CALL                                                                                             â”‚
           â”‚ â± 1031 â”‚   â”‚   â”‚   result = await original_function(*args, **kwargs)                                                        â”‚
           â”‚   1032 â”‚   â”‚   â”‚   end_time = datetime.datetime.now()                                                                       â”‚
           â”‚   1033 â”‚   â”‚   â”‚   if "stream" in kwargs and kwargs["stream"] is True:                                                      â”‚
           â”‚   1034 â”‚   â”‚   â”‚   â”‚   if (                                                                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:499 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    496 â”‚   â”‚   return response                                                                                              â”‚
           â”‚    497 â”‚   except Exception as e:                                                                                           â”‚
           â”‚    498 â”‚   â”‚   custom_llm_provider = custom_llm_provider or "openai"                                                        â”‚
           â”‚ â±  499 â”‚   â”‚   raise exception_type(                                                                                        â”‚
           â”‚    500 â”‚   â”‚   â”‚   model=model,                                                                                             â”‚
           â”‚    501 â”‚   â”‚   â”‚   custom_llm_provider=custom_llm_provider,                                                                 â”‚
           â”‚    502 â”‚   â”‚   â”‚   original_exception=e,                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:212 â”‚
           â”‚ 5 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2122 â”‚   â”‚   # don't let an error with mapping interrupt the user from receiving an error                                 â”‚
           â”‚        from the llm api calls                                                                                               â”‚
           â”‚   2123 â”‚   â”‚   if exception_mapping_worked:                                                                                 â”‚
           â”‚   2124 â”‚   â”‚   â”‚   setattr(e, "litellm_response_headers", litellm_response_headers)                                         â”‚
           â”‚ â± 2125 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   2126 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   2127 â”‚   â”‚   â”‚   for error_type in litellm.LITELLM_EXCEPTION_TYPES:                                                       â”‚
           â”‚   2128 â”‚   â”‚   â”‚   â”‚   if isinstance(e, error_type):                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:210 â”‚
           â”‚ 1 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2098 â”‚   â”‚   â”‚   â”‚   â”‚   request=original_exception.request,                                                              â”‚
           â”‚   2099 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚   2100 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â± 2101 â”‚   â”‚   â”‚   â”‚   raise APIConnectionError(                                                                            â”‚
           â”‚   2102 â”‚   â”‚   â”‚   â”‚   â”‚   message="{}\n{}".format(                                                                         â”‚
           â”‚   2103 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   str(original_exception), traceback.format_exc()                                              â”‚
           â”‚   2104 â”‚   â”‚   â”‚   â”‚   â”‚   ),                                                                                               â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           APIConnectionError: litellm.APIConnectionError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1109, in                 
           _wrap_create_connection                                                                                                        
               sock = await aiohappyeyeballs.start_connection(                                                                            
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                            
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py", line 123, in              
           start_connection                                                                                                               
               raise OSError(first_errno, msg)                                                                                            
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py", line 477, in acompletion           
               response = await init_response                                                                                             
                          ^^^^^^^^^^^^^^^^^^^                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 566, in                
           ollama_acompletion                                                                                                             
               raise e  # don't use verbose_logger.exception, if exception is raised                                                      
               ^^^^^^^                                                                                                                    
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 507, in                
           ollama_acompletion                                                                                                             
               resp = await session.post(url, json=data)                                                                                  
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                  
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py", line 696, in _request            
               conn = await self._connector.connect(                                                                                      
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 544, in connect          
               proto = await self._create_connection(req, traces, timeout)                                                                
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1050, in                 
           _create_connection                                                                                                             
               _, proto = await self._create_direct_connection(req, traces, timeout)                                                      
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1394, in                 
           _create_direct_connection                                                                                                      
               raise last_exc                                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1363, in                 
           _create_direct_connection                                                                                                      
               transp, proto = await self._wrap_create_connection(                                                                        
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                        
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1124, in                 
           _wrap_create_connection                                                                                                        
               raise client_error(req.connection_key, exc) from exc                                                                       
           aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
                                                                                                                                          
           Received Model Group=ollama/llama3.2                                                                                           
           Available Model Group Fallbacks=None LiteLLM Retried: 2 times, LiteLLM Max Retries: 3                                          
[00:51:43] Answer:                                                                                                                        


 ANSWERING QUESTION: sciqag_question_54.json
 ----------------------------- 



[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.

[00:52:03] Trajectory failed.                                                                                                             
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1109 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1106 â”‚   â”‚   â”‚   async with ceil_timeout(                                                                                 â”‚
           â”‚   1107 â”‚   â”‚   â”‚   â”‚   timeout.sock_connect, ceil_threshold=timeout.ceil_threshold                                          â”‚
           â”‚   1108 â”‚   â”‚   â”‚   ):                                                                                                       â”‚
           â”‚ â± 1109 â”‚   â”‚   â”‚   â”‚   sock = await aiohappyeyeballs.start_connection(                                                      â”‚
           â”‚   1110 â”‚   â”‚   â”‚   â”‚   â”‚   addr_infos=addr_infos,                                                                           â”‚
           â”‚   1111 â”‚   â”‚   â”‚   â”‚   â”‚   local_addr_infos=self._local_addr_infos,                                                         â”‚
           â”‚   1112 â”‚   â”‚   â”‚   â”‚   â”‚   happy_eyeballs_delay=self._happy_eyeballs_delay,                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py:123 in start_connection          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   120 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, OSError) and exc.errno == first_errno                                         â”‚
           â”‚   121 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   for exc in all_exceptions                                                                     â”‚
           â”‚   122 â”‚   â”‚   â”‚   â”‚   â”‚   ):                                                                                                â”‚
           â”‚ â± 123 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   raise OSError(first_errno, msg)                                                               â”‚
           â”‚   124 â”‚   â”‚   â”‚   â”‚   elif isinstance(first_exception, RuntimeError) and all(                                               â”‚
           â”‚   125 â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, RuntimeError) for exc in all_exceptions                                           â”‚
           â”‚   126 â”‚   â”‚   â”‚   â”‚   ):                                                                                                    â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:477 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    474 â”‚   â”‚   â”‚   â”‚   â”‚   response = ModelResponse(**init_response)                                                        â”‚
           â”‚    475 â”‚   â”‚   â”‚   â”‚   response = init_response                                                                             â”‚
           â”‚    476 â”‚   â”‚   â”‚   elif asyncio.iscoroutine(init_response):                                                                 â”‚
           â”‚ â±  477 â”‚   â”‚   â”‚   â”‚   response = await init_response                                                                       â”‚
           â”‚    478 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚    479 â”‚   â”‚   â”‚   â”‚   response = init_response  # type: ignore                                                             â”‚
           â”‚    480                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:566 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   563 â”‚   â”‚   â”‚   )                                                                                                         â”‚
           â”‚   564 â”‚   â”‚   â”‚   return model_response                                                                                     â”‚
           â”‚   565 â”‚   except Exception as e:                                                                                            â”‚
           â”‚ â± 566 â”‚   â”‚   raise e  # don't use verbose_logger.exception, if exception is raised                                         â”‚
           â”‚   567                                                                                                                       â”‚
           â”‚   568                                                                                                                       â”‚
           â”‚   569 async def ollama_aembeddings(                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:507 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   504 â”‚   try:                                                                                                              â”‚
           â”‚   505 â”‚   â”‚   timeout = aiohttp.ClientTimeout(total=litellm.request_timeout)  # 10 minutes                                  â”‚
           â”‚   506 â”‚   â”‚   async with aiohttp.ClientSession(timeout=timeout) as session:                                                 â”‚
           â”‚ â± 507 â”‚   â”‚   â”‚   resp = await session.post(url, json=data)                                                                 â”‚
           â”‚   508 â”‚   â”‚   â”‚                                                                                                             â”‚
           â”‚   509 â”‚   â”‚   â”‚   if resp.status != 200:                                                                                    â”‚
           â”‚   510 â”‚   â”‚   â”‚   â”‚   text = await resp.text()                                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py:696 in _request                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚    693 â”‚   â”‚   â”‚   â”‚   â”‚                                                                                                    â”‚
           â”‚    694 â”‚   â”‚   â”‚   â”‚   â”‚   # connection timeout                                                                             â”‚
           â”‚    695 â”‚   â”‚   â”‚   â”‚   â”‚   try:                                                                                             â”‚
           â”‚ â±  696 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   conn = await self._connector.connect(                                                        â”‚
           â”‚    697 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   req, traces=traces, timeout=real_timeout                                                 â”‚
           â”‚    698 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚    699 â”‚   â”‚   â”‚   â”‚   â”‚   except asyncio.TimeoutError as exc:                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:544 in connect                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚    541 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    542 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    543 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_start()                                                   â”‚
           â”‚ â±  544 â”‚   â”‚   â”‚   â”‚   proto = await self._create_connection(req, traces, timeout)                                          â”‚
           â”‚    545 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    546 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    547 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_end()                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1050 in _create_connection           â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1047 â”‚   â”‚   if req.proxy:                                                                                                â”‚
           â”‚   1048 â”‚   â”‚   â”‚   _, proto = await self._create_proxy_connection(req, traces, timeout)                                     â”‚
           â”‚   1049 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚ â± 1050 â”‚   â”‚   â”‚   _, proto = await self._create_direct_connection(req, traces, timeout)                                    â”‚
           â”‚   1051 â”‚   â”‚                                                                                                                â”‚
           â”‚   1052 â”‚   â”‚   return proto                                                                                                 â”‚
           â”‚   1053                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1394 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1391 â”‚   â”‚   â”‚   return transp, proto                                                                                     â”‚
           â”‚   1392 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   1393 â”‚   â”‚   â”‚   assert last_exc is not None                                                                              â”‚
           â”‚ â± 1394 â”‚   â”‚   â”‚   raise last_exc                                                                                           â”‚
           â”‚   1395 â”‚                                                                                                                    â”‚
           â”‚   1396 â”‚   async def _create_proxy_connection(                                                                              â”‚
           â”‚   1397 â”‚   â”‚   self, req: ClientRequest, traces: List["Trace"], timeout: "ClientTimeout"                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1363 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1360 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   1361 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1362 â”‚   â”‚   â”‚   try:                                                                                                     â”‚
           â”‚ â± 1363 â”‚   â”‚   â”‚   â”‚   transp, proto = await self._wrap_create_connection(                                                  â”‚
           â”‚   1364 â”‚   â”‚   â”‚   â”‚   â”‚   self._factory,                                                                                   â”‚
           â”‚   1365 â”‚   â”‚   â”‚   â”‚   â”‚   timeout=timeout,                                                                                 â”‚
           â”‚   1366 â”‚   â”‚   â”‚   â”‚   â”‚   ssl=sslcontext,                                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1124 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1121 â”‚   â”‚   except OSError as exc:                                                                                       â”‚
           â”‚   1122 â”‚   â”‚   â”‚   if exc.errno is None and isinstance(exc, asyncio.TimeoutError):                                          â”‚
           â”‚   1123 â”‚   â”‚   â”‚   â”‚   raise                                                                                                â”‚
           â”‚ â± 1124 â”‚   â”‚   â”‚   raise client_error(req.connection_key, exc) from exc                                                     â”‚
           â”‚   1125 â”‚                                                                                                                    â”‚
           â”‚   1126 â”‚   async def _wrap_existing_connection(                                                                             â”‚
           â”‚   1127 â”‚   â”‚   self,                                                                                                        â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno 111] Connect call failed 
           ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                                                    
                                                                                                                                          
           During handling of the above exception, another exception occurred:                                                            
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:276 in _run_with_timeout_failure                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   273 ) -> tuple[PQASession, AgentStatus]:                                                                                  â”‚
           â”‚   274 â”‚   try:                                                                                                              â”‚
           â”‚   275 â”‚   â”‚   async with asyncio.timeout(query.settings.agent.timeout):                                                     â”‚
           â”‚ â± 276 â”‚   â”‚   â”‚   status = await rollout()                                                                                  â”‚
           â”‚   277 â”‚   except TimeoutError:                                                                                              â”‚
           â”‚   278 â”‚   â”‚   logger.warning(                                                                                               â”‚
           â”‚   279 â”‚   â”‚   â”‚   f"Agent timeout after {query.settings.agent.timeout}-sec, just answering."                                â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:410 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   407 â”‚   â”‚   â”‚   â”‚   )                                                                                                     â”‚
           â”‚   408 â”‚   â”‚   â”‚   â”‚   return AgentStatus.TRUNCATED                                                                          â”‚
           â”‚   409 â”‚   â”‚   â”‚   agent_state.messages += obs                                                                               â”‚
           â”‚ â± 410 â”‚   â”‚   â”‚   for attempt in Retrying(                                                                                  â”‚
           â”‚   411 â”‚   â”‚   â”‚   â”‚   stop=stop_after_attempt(5),                                                                           â”‚
           â”‚   412 â”‚   â”‚   â”‚   â”‚   retry=retry_if_exception_type(MalformedMessageError),                                                 â”‚
           â”‚   413 â”‚   â”‚   â”‚   â”‚   before_sleep=before_sleep_log(logger, logging.WARNING),                                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:443 in __iter__                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   440 â”‚   â”‚                                                                                                                 â”‚
           â”‚   441 â”‚   â”‚   retry_state = RetryCallState(self, fn=None, args=(), kwargs={})                                               â”‚
           â”‚   442 â”‚   â”‚   while True:                                                                                                   â”‚
           â”‚ â± 443 â”‚   â”‚   â”‚   do = self.iter(retry_state=retry_state)                                                                   â”‚
           â”‚   444 â”‚   â”‚   â”‚   if isinstance(do, DoAttempt):                                                                             â”‚
           â”‚   445 â”‚   â”‚   â”‚   â”‚   yield AttemptManager(retry_state=retry_state)                                                         â”‚
           â”‚   446 â”‚   â”‚   â”‚   elif isinstance(do, DoSleep):                                                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:376 in iter                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   373 â”‚   â”‚   self._begin_iter(retry_state)                                                                                 â”‚
           â”‚   374 â”‚   â”‚   result = None                                                                                                 â”‚
           â”‚   375 â”‚   â”‚   for action in self.iter_state.actions:                                                                        â”‚
           â”‚ â± 376 â”‚   â”‚   â”‚   result = action(retry_state)                                                                              â”‚
           â”‚   377 â”‚   â”‚   return result                                                                                                 â”‚
           â”‚   378 â”‚                                                                                                                     â”‚
           â”‚   379 â”‚   def _begin_iter(self, retry_state: "RetryCallState") -> None:  # noqa                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:398 in <lambda>                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   395 â”‚                                                                                                                     â”‚
           â”‚   396 â”‚   def _post_retry_check_actions(self, retry_state: "RetryCallState") -> None:                                       â”‚
           â”‚   397 â”‚   â”‚   if not (self.iter_state.is_explicit_retry or self.iter_state.retry_run_result):                               â”‚
           â”‚ â± 398 â”‚   â”‚   â”‚   self._add_action_func(lambda rs: rs.outcome.result())                                                     â”‚
           â”‚   399 â”‚   â”‚   â”‚   return                                                                                                    â”‚
           â”‚   400 â”‚   â”‚                                                                                                                 â”‚
           â”‚   401 â”‚   â”‚   if self.after is not None:                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:449 in result                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚   446 â”‚   â”‚   â”‚   â”‚   if self._state in [CANCELLED, CANCELLED_AND_NOTIFIED]:                                                â”‚
           â”‚   447 â”‚   â”‚   â”‚   â”‚   â”‚   raise CancelledError()                                                                            â”‚
           â”‚   448 â”‚   â”‚   â”‚   â”‚   elif self._state == FINISHED:                                                                         â”‚
           â”‚ â± 449 â”‚   â”‚   â”‚   â”‚   â”‚   return self.__get_result()                                                                        â”‚
           â”‚   450 â”‚   â”‚   â”‚   â”‚                                                                                                         â”‚
           â”‚   451 â”‚   â”‚   â”‚   â”‚   self._condition.wait(timeout)                                                                         â”‚
           â”‚   452                                                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:401 in __get_result                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   398 â”‚   def __get_result(self):                                                                                           â”‚
           â”‚   399 â”‚   â”‚   if self._exception:                                                                                           â”‚
           â”‚   400 â”‚   â”‚   â”‚   try:                                                                                                      â”‚
           â”‚ â± 401 â”‚   â”‚   â”‚   â”‚   raise self._exception                                                                                 â”‚
           â”‚   402 â”‚   â”‚   â”‚   finally:                                                                                                  â”‚
           â”‚   403 â”‚   â”‚   â”‚   â”‚   # Break a reference cycle with the exception in self._exception                                       â”‚
           â”‚   404 â”‚   â”‚   â”‚   â”‚   self = None                                                                                           â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:417 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   414 â”‚   â”‚   â”‚   â”‚   reraise=True,                                                                                         â”‚
           â”‚   415 â”‚   â”‚   â”‚   ):                                                                                                        â”‚
           â”‚   416 â”‚   â”‚   â”‚   â”‚   with attempt:  # Retrying if ToolSelector fails to select a tool                                      â”‚
           â”‚ â± 417 â”‚   â”‚   â”‚   â”‚   â”‚   action = await agent(agent_state.messages, tools)                                                 â”‚
           â”‚   418 â”‚   â”‚   â”‚   agent_state.messages = [*agent_state.messages, action]                                                    â”‚
           â”‚   419 â”‚   â”‚   â”‚   if on_agent_action_callback:                                                                              â”‚
           â”‚   420 â”‚   â”‚   â”‚   â”‚   await on_agent_action_callback(action, agent_state)                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aviary/tools/utils.py:182 in __call__                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   179 â”‚   â”‚   â”‚   self._ledger.messages.extend(messages)                                                                    â”‚
           â”‚   180 â”‚   â”‚   â”‚   messages = self._ledger.messages                                                                          â”‚
           â”‚   181 â”‚   â”‚                                                                                                                 â”‚
           â”‚ â± 182 â”‚   â”‚   model_response = await self._bound_acompletion(                                                               â”‚
           â”‚   183 â”‚   â”‚   â”‚   messages=MessagesAdapter.dump_python(                                                                     â”‚
           â”‚   184 â”‚   â”‚   â”‚   â”‚   messages, exclude_none=True, by_alias=True                                                            â”‚
           â”‚   185 â”‚   â”‚   â”‚   ),                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:817 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    814 â”‚   â”‚   â”‚   â”‚   â”‚   original_exception=e,                                                                            â”‚
           â”‚    815 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    816 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚ â±  817 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    818 â”‚                                                                                                                    â”‚
           â”‚    819 â”‚   async def _acompletion(                                                                                          â”‚
           â”‚    820 â”‚   â”‚   self, model: str, messages: List[Dict[str, str]], **kwargs                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:793 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    790 â”‚   â”‚   â”‚   if request_priority is not None and isinstance(request_priority, int):                                   â”‚
           â”‚    791 â”‚   â”‚   â”‚   â”‚   response = await self.schedule_acompletion(**kwargs)                                                 â”‚
           â”‚    792 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â±  793 â”‚   â”‚   â”‚   â”‚   response = await self.async_function_with_fallbacks(**kwargs)                                        â”‚
           â”‚    794 â”‚   â”‚   â”‚   end_time = time.time()                                                                                   â”‚
           â”‚    795 â”‚   â”‚   â”‚   _duration = end_time - start_time                                                                        â”‚
           â”‚    796 â”‚   â”‚   â”‚   asyncio.create_task(                                                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2795 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2792 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚   2793 â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                                â”‚
           â”‚   2794 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2795 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2796 â”‚                                                                                                                    â”‚
           â”‚   2797 â”‚   def _handle_mock_testing_fallbacks(                                                                              â”‚
           â”‚   2798 â”‚   â”‚   self,                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2631 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2628 â”‚   â”‚   â”‚   â”‚   content_policy_fallbacks=content_policy_fallbacks,                                                   â”‚
           â”‚   2629 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2630 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2631 â”‚   â”‚   â”‚   response = await self.async_function_with_retries(*args, **kwargs)                                       â”‚
           â”‚   2632 â”‚   â”‚   â”‚   verbose_router_logger.debug(f"Async Response: {response}")                                               â”‚
           â”‚   2633 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2634 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2967 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2964 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "max_retries", num_retries)                                              â”‚
           â”‚   2965 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "num_retries", current_attempt)                                          â”‚
           â”‚   2966 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2967 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2968 â”‚                                                                                                                    â”‚
           â”‚   2969 â”‚   async def make_call(self, original_function: Any, *args, **kwargs):                                              â”‚
           â”‚   2970 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2879 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2876 â”‚   â”‚   â”‚   â”‚   model_group=model_group, kwargs=kwargs                                                               â”‚
           â”‚   2877 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2878 â”‚   â”‚   â”‚   # if the function call is successful, no exception will be raised and we'll                              â”‚
           â”‚        break out of the loop                                                                                                â”‚
           â”‚ â± 2879 â”‚   â”‚   â”‚   response = await self.make_call(original_function, *args, **kwargs)                                      â”‚
           â”‚   2880 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   2881 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2882 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2976 in make_call                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2973 â”‚   â”‚   model_group = kwargs.get("model")                                                                            â”‚
           â”‚   2974 â”‚   â”‚   response = original_function(*args, **kwargs)                                                                â”‚
           â”‚   2975 â”‚   â”‚   if inspect.iscoroutinefunction(response) or inspect.isawaitable(response):                                   â”‚
           â”‚ â± 2976 â”‚   â”‚   â”‚   response = await response                                                                                â”‚
           â”‚   2977 â”‚   â”‚   ## PROCESS RESPONSE HEADERS                                                                                  â”‚
           â”‚   2978 â”‚   â”‚   await self.set_response_headers(response=response, model_group=model_group)                                  â”‚
           â”‚   2979                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:947 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    944 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚    945 â”‚   â”‚   â”‚   if model_name is not None:                                                                               â”‚
           â”‚    946 â”‚   â”‚   â”‚   â”‚   self.fail_calls[model_name] += 1                                                                     â”‚
           â”‚ â±  947 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    948 â”‚                                                                                                                    â”‚
           â”‚    949 â”‚   def _update_kwargs_before_fallbacks(self, model: str, kwargs: dict) -> None:                                     â”‚
           â”‚    950 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:915 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    912 â”‚   â”‚   â”‚   â”‚   â”‚   parent_otel_span=parent_otel_span,                                                               â”‚
           â”‚    913 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    914 â”‚   â”‚   â”‚   â”‚                                                                                                        â”‚
           â”‚ â±  915 â”‚   â”‚   â”‚   â”‚   response = await _response                                                                           â”‚
           â”‚    916 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚    917 â”‚   â”‚   â”‚   ## CHECK CONTENT FILTER ERROR ##                                                                         â”‚
           â”‚    918 â”‚   â”‚   â”‚   if isinstance(response, ModelResponse):                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1175 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1172 â”‚   â”‚   â”‚   â”‚   â”‚   else:                                                                                            â”‚
           â”‚   1173 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   kwargs["model"] = context_window_fallback_dict[model]                                        â”‚
           â”‚   1174 â”‚   â”‚   â”‚   â”‚   â”‚   return await original_function(*args, **kwargs)                                                  â”‚
           â”‚ â± 1175 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   1176 â”‚                                                                                                                    â”‚
           â”‚   1177 â”‚   is_coroutine = inspect.iscoroutinefunction(original_function)                                                    â”‚
           â”‚   1178                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1031 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1028 â”‚   â”‚   â”‚   â”‚   return _caching_handler_response.final_embedding_cached_response                                     â”‚
           â”‚   1029 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1030 â”‚   â”‚   â”‚   # MODEL CALL                                                                                             â”‚
           â”‚ â± 1031 â”‚   â”‚   â”‚   result = await original_function(*args, **kwargs)                                                        â”‚
           â”‚   1032 â”‚   â”‚   â”‚   end_time = datetime.datetime.now()                                                                       â”‚
           â”‚   1033 â”‚   â”‚   â”‚   if "stream" in kwargs and kwargs["stream"] is True:                                                      â”‚
           â”‚   1034 â”‚   â”‚   â”‚   â”‚   if (                                                                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:499 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    496 â”‚   â”‚   return response                                                                                              â”‚
           â”‚    497 â”‚   except Exception as e:                                                                                           â”‚
           â”‚    498 â”‚   â”‚   custom_llm_provider = custom_llm_provider or "openai"                                                        â”‚
           â”‚ â±  499 â”‚   â”‚   raise exception_type(                                                                                        â”‚
           â”‚    500 â”‚   â”‚   â”‚   model=model,                                                                                             â”‚
           â”‚    501 â”‚   â”‚   â”‚   custom_llm_provider=custom_llm_provider,                                                                 â”‚
           â”‚    502 â”‚   â”‚   â”‚   original_exception=e,                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:212 â”‚
           â”‚ 5 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2122 â”‚   â”‚   # don't let an error with mapping interrupt the user from receiving an error                                 â”‚
           â”‚        from the llm api calls                                                                                               â”‚
           â”‚   2123 â”‚   â”‚   if exception_mapping_worked:                                                                                 â”‚
           â”‚   2124 â”‚   â”‚   â”‚   setattr(e, "litellm_response_headers", litellm_response_headers)                                         â”‚
           â”‚ â± 2125 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   2126 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   2127 â”‚   â”‚   â”‚   for error_type in litellm.LITELLM_EXCEPTION_TYPES:                                                       â”‚
           â”‚   2128 â”‚   â”‚   â”‚   â”‚   if isinstance(e, error_type):                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:210 â”‚
           â”‚ 1 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2098 â”‚   â”‚   â”‚   â”‚   â”‚   request=original_exception.request,                                                              â”‚
           â”‚   2099 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚   2100 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â± 2101 â”‚   â”‚   â”‚   â”‚   raise APIConnectionError(                                                                            â”‚
           â”‚   2102 â”‚   â”‚   â”‚   â”‚   â”‚   message="{}\n{}".format(                                                                         â”‚
           â”‚   2103 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   str(original_exception), traceback.format_exc()                                              â”‚
           â”‚   2104 â”‚   â”‚   â”‚   â”‚   â”‚   ),                                                                                               â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           APIConnectionError: litellm.APIConnectionError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1109, in                 
           _wrap_create_connection                                                                                                        
               sock = await aiohappyeyeballs.start_connection(                                                                            
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                            
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py", line 123, in              
           start_connection                                                                                                               
               raise OSError(first_errno, msg)                                                                                            
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py", line 477, in acompletion           
               response = await init_response                                                                                             
                          ^^^^^^^^^^^^^^^^^^^                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 566, in                
           ollama_acompletion                                                                                                             
               raise e  # don't use verbose_logger.exception, if exception is raised                                                      
               ^^^^^^^                                                                                                                    
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 507, in                
           ollama_acompletion                                                                                                             
               resp = await session.post(url, json=data)                                                                                  
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                  
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py", line 696, in _request            
               conn = await self._connector.connect(                                                                                      
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 544, in connect          
               proto = await self._create_connection(req, traces, timeout)                                                                
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1050, in                 
           _create_connection                                                                                                             
               _, proto = await self._create_direct_connection(req, traces, timeout)                                                      
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1394, in                 
           _create_direct_connection                                                                                                      
               raise last_exc                                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1363, in                 
           _create_direct_connection                                                                                                      
               transp, proto = await self._wrap_create_connection(                                                                        
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                        
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1124, in                 
           _wrap_create_connection                                                                                                        
               raise client_error(req.connection_key, exc) from exc                                                                       
           aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
                                                                                                                                          
           Received Model Group=ollama/llama3.2                                                                                           
           Available Model Group Fallbacks=None LiteLLM Retried: 2 times, LiteLLM Max Retries: 3                                          
[00:52:05] Answer:                                                                                                                        


 ANSWERING QUESTION: sciqag_question_55.json
 ----------------------------- 



[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.

[00:52:26] Trajectory failed.                                                                                                             
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1109 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1106 â”‚   â”‚   â”‚   async with ceil_timeout(                                                                                 â”‚
           â”‚   1107 â”‚   â”‚   â”‚   â”‚   timeout.sock_connect, ceil_threshold=timeout.ceil_threshold                                          â”‚
           â”‚   1108 â”‚   â”‚   â”‚   ):                                                                                                       â”‚
           â”‚ â± 1109 â”‚   â”‚   â”‚   â”‚   sock = await aiohappyeyeballs.start_connection(                                                      â”‚
           â”‚   1110 â”‚   â”‚   â”‚   â”‚   â”‚   addr_infos=addr_infos,                                                                           â”‚
           â”‚   1111 â”‚   â”‚   â”‚   â”‚   â”‚   local_addr_infos=self._local_addr_infos,                                                         â”‚
           â”‚   1112 â”‚   â”‚   â”‚   â”‚   â”‚   happy_eyeballs_delay=self._happy_eyeballs_delay,                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py:123 in start_connection          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   120 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, OSError) and exc.errno == first_errno                                         â”‚
           â”‚   121 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   for exc in all_exceptions                                                                     â”‚
           â”‚   122 â”‚   â”‚   â”‚   â”‚   â”‚   ):                                                                                                â”‚
           â”‚ â± 123 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   raise OSError(first_errno, msg)                                                               â”‚
           â”‚   124 â”‚   â”‚   â”‚   â”‚   elif isinstance(first_exception, RuntimeError) and all(                                               â”‚
           â”‚   125 â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, RuntimeError) for exc in all_exceptions                                           â”‚
           â”‚   126 â”‚   â”‚   â”‚   â”‚   ):                                                                                                    â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:477 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    474 â”‚   â”‚   â”‚   â”‚   â”‚   response = ModelResponse(**init_response)                                                        â”‚
           â”‚    475 â”‚   â”‚   â”‚   â”‚   response = init_response                                                                             â”‚
           â”‚    476 â”‚   â”‚   â”‚   elif asyncio.iscoroutine(init_response):                                                                 â”‚
           â”‚ â±  477 â”‚   â”‚   â”‚   â”‚   response = await init_response                                                                       â”‚
           â”‚    478 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚    479 â”‚   â”‚   â”‚   â”‚   response = init_response  # type: ignore                                                             â”‚
           â”‚    480                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:566 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   563 â”‚   â”‚   â”‚   )                                                                                                         â”‚
           â”‚   564 â”‚   â”‚   â”‚   return model_response                                                                                     â”‚
           â”‚   565 â”‚   except Exception as e:                                                                                            â”‚
           â”‚ â± 566 â”‚   â”‚   raise e  # don't use verbose_logger.exception, if exception is raised                                         â”‚
           â”‚   567                                                                                                                       â”‚
           â”‚   568                                                                                                                       â”‚
           â”‚   569 async def ollama_aembeddings(                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:507 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   504 â”‚   try:                                                                                                              â”‚
           â”‚   505 â”‚   â”‚   timeout = aiohttp.ClientTimeout(total=litellm.request_timeout)  # 10 minutes                                  â”‚
           â”‚   506 â”‚   â”‚   async with aiohttp.ClientSession(timeout=timeout) as session:                                                 â”‚
           â”‚ â± 507 â”‚   â”‚   â”‚   resp = await session.post(url, json=data)                                                                 â”‚
           â”‚   508 â”‚   â”‚   â”‚                                                                                                             â”‚
           â”‚   509 â”‚   â”‚   â”‚   if resp.status != 200:                                                                                    â”‚
           â”‚   510 â”‚   â”‚   â”‚   â”‚   text = await resp.text()                                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py:696 in _request                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚    693 â”‚   â”‚   â”‚   â”‚   â”‚                                                                                                    â”‚
           â”‚    694 â”‚   â”‚   â”‚   â”‚   â”‚   # connection timeout                                                                             â”‚
           â”‚    695 â”‚   â”‚   â”‚   â”‚   â”‚   try:                                                                                             â”‚
           â”‚ â±  696 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   conn = await self._connector.connect(                                                        â”‚
           â”‚    697 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   req, traces=traces, timeout=real_timeout                                                 â”‚
           â”‚    698 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚    699 â”‚   â”‚   â”‚   â”‚   â”‚   except asyncio.TimeoutError as exc:                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:544 in connect                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚    541 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    542 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    543 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_start()                                                   â”‚
           â”‚ â±  544 â”‚   â”‚   â”‚   â”‚   proto = await self._create_connection(req, traces, timeout)                                          â”‚
           â”‚    545 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    546 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    547 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_end()                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1050 in _create_connection           â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1047 â”‚   â”‚   if req.proxy:                                                                                                â”‚
           â”‚   1048 â”‚   â”‚   â”‚   _, proto = await self._create_proxy_connection(req, traces, timeout)                                     â”‚
           â”‚   1049 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚ â± 1050 â”‚   â”‚   â”‚   _, proto = await self._create_direct_connection(req, traces, timeout)                                    â”‚
           â”‚   1051 â”‚   â”‚                                                                                                                â”‚
           â”‚   1052 â”‚   â”‚   return proto                                                                                                 â”‚
           â”‚   1053                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1394 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1391 â”‚   â”‚   â”‚   return transp, proto                                                                                     â”‚
           â”‚   1392 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   1393 â”‚   â”‚   â”‚   assert last_exc is not None                                                                              â”‚
           â”‚ â± 1394 â”‚   â”‚   â”‚   raise last_exc                                                                                           â”‚
           â”‚   1395 â”‚                                                                                                                    â”‚
           â”‚   1396 â”‚   async def _create_proxy_connection(                                                                              â”‚
           â”‚   1397 â”‚   â”‚   self, req: ClientRequest, traces: List["Trace"], timeout: "ClientTimeout"                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1363 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1360 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   1361 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1362 â”‚   â”‚   â”‚   try:                                                                                                     â”‚
           â”‚ â± 1363 â”‚   â”‚   â”‚   â”‚   transp, proto = await self._wrap_create_connection(                                                  â”‚
           â”‚   1364 â”‚   â”‚   â”‚   â”‚   â”‚   self._factory,                                                                                   â”‚
           â”‚   1365 â”‚   â”‚   â”‚   â”‚   â”‚   timeout=timeout,                                                                                 â”‚
           â”‚   1366 â”‚   â”‚   â”‚   â”‚   â”‚   ssl=sslcontext,                                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1124 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1121 â”‚   â”‚   except OSError as exc:                                                                                       â”‚
           â”‚   1122 â”‚   â”‚   â”‚   if exc.errno is None and isinstance(exc, asyncio.TimeoutError):                                          â”‚
           â”‚   1123 â”‚   â”‚   â”‚   â”‚   raise                                                                                                â”‚
           â”‚ â± 1124 â”‚   â”‚   â”‚   raise client_error(req.connection_key, exc) from exc                                                     â”‚
           â”‚   1125 â”‚                                                                                                                    â”‚
           â”‚   1126 â”‚   async def _wrap_existing_connection(                                                                             â”‚
           â”‚   1127 â”‚   â”‚   self,                                                                                                        â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno 111] Connect call failed 
           ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                                                    
                                                                                                                                          
           During handling of the above exception, another exception occurred:                                                            
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:276 in _run_with_timeout_failure                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   273 ) -> tuple[PQASession, AgentStatus]:                                                                                  â”‚
           â”‚   274 â”‚   try:                                                                                                              â”‚
           â”‚   275 â”‚   â”‚   async with asyncio.timeout(query.settings.agent.timeout):                                                     â”‚
           â”‚ â± 276 â”‚   â”‚   â”‚   status = await rollout()                                                                                  â”‚
           â”‚   277 â”‚   except TimeoutError:                                                                                              â”‚
           â”‚   278 â”‚   â”‚   logger.warning(                                                                                               â”‚
           â”‚   279 â”‚   â”‚   â”‚   f"Agent timeout after {query.settings.agent.timeout}-sec, just answering."                                â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:410 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   407 â”‚   â”‚   â”‚   â”‚   )                                                                                                     â”‚
           â”‚   408 â”‚   â”‚   â”‚   â”‚   return AgentStatus.TRUNCATED                                                                          â”‚
           â”‚   409 â”‚   â”‚   â”‚   agent_state.messages += obs                                                                               â”‚
           â”‚ â± 410 â”‚   â”‚   â”‚   for attempt in Retrying(                                                                                  â”‚
           â”‚   411 â”‚   â”‚   â”‚   â”‚   stop=stop_after_attempt(5),                                                                           â”‚
           â”‚   412 â”‚   â”‚   â”‚   â”‚   retry=retry_if_exception_type(MalformedMessageError),                                                 â”‚
           â”‚   413 â”‚   â”‚   â”‚   â”‚   before_sleep=before_sleep_log(logger, logging.WARNING),                                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:443 in __iter__                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   440 â”‚   â”‚                                                                                                                 â”‚
           â”‚   441 â”‚   â”‚   retry_state = RetryCallState(self, fn=None, args=(), kwargs={})                                               â”‚
           â”‚   442 â”‚   â”‚   while True:                                                                                                   â”‚
           â”‚ â± 443 â”‚   â”‚   â”‚   do = self.iter(retry_state=retry_state)                                                                   â”‚
           â”‚   444 â”‚   â”‚   â”‚   if isinstance(do, DoAttempt):                                                                             â”‚
           â”‚   445 â”‚   â”‚   â”‚   â”‚   yield AttemptManager(retry_state=retry_state)                                                         â”‚
           â”‚   446 â”‚   â”‚   â”‚   elif isinstance(do, DoSleep):                                                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:376 in iter                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   373 â”‚   â”‚   self._begin_iter(retry_state)                                                                                 â”‚
           â”‚   374 â”‚   â”‚   result = None                                                                                                 â”‚
           â”‚   375 â”‚   â”‚   for action in self.iter_state.actions:                                                                        â”‚
           â”‚ â± 376 â”‚   â”‚   â”‚   result = action(retry_state)                                                                              â”‚
           â”‚   377 â”‚   â”‚   return result                                                                                                 â”‚
           â”‚   378 â”‚                                                                                                                     â”‚
           â”‚   379 â”‚   def _begin_iter(self, retry_state: "RetryCallState") -> None:  # noqa                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:398 in <lambda>                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   395 â”‚                                                                                                                     â”‚
           â”‚   396 â”‚   def _post_retry_check_actions(self, retry_state: "RetryCallState") -> None:                                       â”‚
           â”‚   397 â”‚   â”‚   if not (self.iter_state.is_explicit_retry or self.iter_state.retry_run_result):                               â”‚
           â”‚ â± 398 â”‚   â”‚   â”‚   self._add_action_func(lambda rs: rs.outcome.result())                                                     â”‚
           â”‚   399 â”‚   â”‚   â”‚   return                                                                                                    â”‚
           â”‚   400 â”‚   â”‚                                                                                                                 â”‚
           â”‚   401 â”‚   â”‚   if self.after is not None:                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:449 in result                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚   446 â”‚   â”‚   â”‚   â”‚   if self._state in [CANCELLED, CANCELLED_AND_NOTIFIED]:                                                â”‚
           â”‚   447 â”‚   â”‚   â”‚   â”‚   â”‚   raise CancelledError()                                                                            â”‚
           â”‚   448 â”‚   â”‚   â”‚   â”‚   elif self._state == FINISHED:                                                                         â”‚
           â”‚ â± 449 â”‚   â”‚   â”‚   â”‚   â”‚   return self.__get_result()                                                                        â”‚
           â”‚   450 â”‚   â”‚   â”‚   â”‚                                                                                                         â”‚
           â”‚   451 â”‚   â”‚   â”‚   â”‚   self._condition.wait(timeout)                                                                         â”‚
           â”‚   452                                                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:401 in __get_result                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   398 â”‚   def __get_result(self):                                                                                           â”‚
           â”‚   399 â”‚   â”‚   if self._exception:                                                                                           â”‚
           â”‚   400 â”‚   â”‚   â”‚   try:                                                                                                      â”‚
           â”‚ â± 401 â”‚   â”‚   â”‚   â”‚   raise self._exception                                                                                 â”‚
           â”‚   402 â”‚   â”‚   â”‚   finally:                                                                                                  â”‚
           â”‚   403 â”‚   â”‚   â”‚   â”‚   # Break a reference cycle with the exception in self._exception                                       â”‚
           â”‚   404 â”‚   â”‚   â”‚   â”‚   self = None                                                                                           â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:417 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   414 â”‚   â”‚   â”‚   â”‚   reraise=True,                                                                                         â”‚
           â”‚   415 â”‚   â”‚   â”‚   ):                                                                                                        â”‚
           â”‚   416 â”‚   â”‚   â”‚   â”‚   with attempt:  # Retrying if ToolSelector fails to select a tool                                      â”‚
           â”‚ â± 417 â”‚   â”‚   â”‚   â”‚   â”‚   action = await agent(agent_state.messages, tools)                                                 â”‚
           â”‚   418 â”‚   â”‚   â”‚   agent_state.messages = [*agent_state.messages, action]                                                    â”‚
           â”‚   419 â”‚   â”‚   â”‚   if on_agent_action_callback:                                                                              â”‚
           â”‚   420 â”‚   â”‚   â”‚   â”‚   await on_agent_action_callback(action, agent_state)                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aviary/tools/utils.py:182 in __call__                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   179 â”‚   â”‚   â”‚   self._ledger.messages.extend(messages)                                                                    â”‚
           â”‚   180 â”‚   â”‚   â”‚   messages = self._ledger.messages                                                                          â”‚
           â”‚   181 â”‚   â”‚                                                                                                                 â”‚
           â”‚ â± 182 â”‚   â”‚   model_response = await self._bound_acompletion(                                                               â”‚
           â”‚   183 â”‚   â”‚   â”‚   messages=MessagesAdapter.dump_python(                                                                     â”‚
           â”‚   184 â”‚   â”‚   â”‚   â”‚   messages, exclude_none=True, by_alias=True                                                            â”‚
           â”‚   185 â”‚   â”‚   â”‚   ),                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:817 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    814 â”‚   â”‚   â”‚   â”‚   â”‚   original_exception=e,                                                                            â”‚
           â”‚    815 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    816 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚ â±  817 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    818 â”‚                                                                                                                    â”‚
           â”‚    819 â”‚   async def _acompletion(                                                                                          â”‚
           â”‚    820 â”‚   â”‚   self, model: str, messages: List[Dict[str, str]], **kwargs                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:793 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    790 â”‚   â”‚   â”‚   if request_priority is not None and isinstance(request_priority, int):                                   â”‚
           â”‚    791 â”‚   â”‚   â”‚   â”‚   response = await self.schedule_acompletion(**kwargs)                                                 â”‚
           â”‚    792 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â±  793 â”‚   â”‚   â”‚   â”‚   response = await self.async_function_with_fallbacks(**kwargs)                                        â”‚
           â”‚    794 â”‚   â”‚   â”‚   end_time = time.time()                                                                                   â”‚
           â”‚    795 â”‚   â”‚   â”‚   _duration = end_time - start_time                                                                        â”‚
           â”‚    796 â”‚   â”‚   â”‚   asyncio.create_task(                                                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2795 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2792 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚   2793 â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                                â”‚
           â”‚   2794 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2795 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2796 â”‚                                                                                                                    â”‚
           â”‚   2797 â”‚   def _handle_mock_testing_fallbacks(                                                                              â”‚
           â”‚   2798 â”‚   â”‚   self,                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2631 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2628 â”‚   â”‚   â”‚   â”‚   content_policy_fallbacks=content_policy_fallbacks,                                                   â”‚
           â”‚   2629 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2630 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2631 â”‚   â”‚   â”‚   response = await self.async_function_with_retries(*args, **kwargs)                                       â”‚
           â”‚   2632 â”‚   â”‚   â”‚   verbose_router_logger.debug(f"Async Response: {response}")                                               â”‚
           â”‚   2633 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2634 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2967 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2964 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "max_retries", num_retries)                                              â”‚
           â”‚   2965 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "num_retries", current_attempt)                                          â”‚
           â”‚   2966 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2967 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2968 â”‚                                                                                                                    â”‚
           â”‚   2969 â”‚   async def make_call(self, original_function: Any, *args, **kwargs):                                              â”‚
           â”‚   2970 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2879 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2876 â”‚   â”‚   â”‚   â”‚   model_group=model_group, kwargs=kwargs                                                               â”‚
           â”‚   2877 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2878 â”‚   â”‚   â”‚   # if the function call is successful, no exception will be raised and we'll                              â”‚
           â”‚        break out of the loop                                                                                                â”‚
           â”‚ â± 2879 â”‚   â”‚   â”‚   response = await self.make_call(original_function, *args, **kwargs)                                      â”‚
           â”‚   2880 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   2881 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2882 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2976 in make_call                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2973 â”‚   â”‚   model_group = kwargs.get("model")                                                                            â”‚
           â”‚   2974 â”‚   â”‚   response = original_function(*args, **kwargs)                                                                â”‚
           â”‚   2975 â”‚   â”‚   if inspect.iscoroutinefunction(response) or inspect.isawaitable(response):                                   â”‚
           â”‚ â± 2976 â”‚   â”‚   â”‚   response = await response                                                                                â”‚
           â”‚   2977 â”‚   â”‚   ## PROCESS RESPONSE HEADERS                                                                                  â”‚
           â”‚   2978 â”‚   â”‚   await self.set_response_headers(response=response, model_group=model_group)                                  â”‚
           â”‚   2979                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:947 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    944 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚    945 â”‚   â”‚   â”‚   if model_name is not None:                                                                               â”‚
           â”‚    946 â”‚   â”‚   â”‚   â”‚   self.fail_calls[model_name] += 1                                                                     â”‚
           â”‚ â±  947 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    948 â”‚                                                                                                                    â”‚
           â”‚    949 â”‚   def _update_kwargs_before_fallbacks(self, model: str, kwargs: dict) -> None:                                     â”‚
           â”‚    950 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:915 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    912 â”‚   â”‚   â”‚   â”‚   â”‚   parent_otel_span=parent_otel_span,                                                               â”‚
           â”‚    913 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    914 â”‚   â”‚   â”‚   â”‚                                                                                                        â”‚
           â”‚ â±  915 â”‚   â”‚   â”‚   â”‚   response = await _response                                                                           â”‚
           â”‚    916 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚    917 â”‚   â”‚   â”‚   ## CHECK CONTENT FILTER ERROR ##                                                                         â”‚
           â”‚    918 â”‚   â”‚   â”‚   if isinstance(response, ModelResponse):                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1175 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1172 â”‚   â”‚   â”‚   â”‚   â”‚   else:                                                                                            â”‚
           â”‚   1173 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   kwargs["model"] = context_window_fallback_dict[model]                                        â”‚
           â”‚   1174 â”‚   â”‚   â”‚   â”‚   â”‚   return await original_function(*args, **kwargs)                                                  â”‚
           â”‚ â± 1175 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   1176 â”‚                                                                                                                    â”‚
           â”‚   1177 â”‚   is_coroutine = inspect.iscoroutinefunction(original_function)                                                    â”‚
           â”‚   1178                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1031 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1028 â”‚   â”‚   â”‚   â”‚   return _caching_handler_response.final_embedding_cached_response                                     â”‚
           â”‚   1029 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1030 â”‚   â”‚   â”‚   # MODEL CALL                                                                                             â”‚
           â”‚ â± 1031 â”‚   â”‚   â”‚   result = await original_function(*args, **kwargs)                                                        â”‚
           â”‚   1032 â”‚   â”‚   â”‚   end_time = datetime.datetime.now()                                                                       â”‚
           â”‚   1033 â”‚   â”‚   â”‚   if "stream" in kwargs and kwargs["stream"] is True:                                                      â”‚
           â”‚   1034 â”‚   â”‚   â”‚   â”‚   if (                                                                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:499 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    496 â”‚   â”‚   return response                                                                                              â”‚
           â”‚    497 â”‚   except Exception as e:                                                                                           â”‚
           â”‚    498 â”‚   â”‚   custom_llm_provider = custom_llm_provider or "openai"                                                        â”‚
           â”‚ â±  499 â”‚   â”‚   raise exception_type(                                                                                        â”‚
           â”‚    500 â”‚   â”‚   â”‚   model=model,                                                                                             â”‚
           â”‚    501 â”‚   â”‚   â”‚   custom_llm_provider=custom_llm_provider,                                                                 â”‚
           â”‚    502 â”‚   â”‚   â”‚   original_exception=e,                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:212 â”‚
           â”‚ 5 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2122 â”‚   â”‚   # don't let an error with mapping interrupt the user from receiving an error                                 â”‚
           â”‚        from the llm api calls                                                                                               â”‚
           â”‚   2123 â”‚   â”‚   if exception_mapping_worked:                                                                                 â”‚
           â”‚   2124 â”‚   â”‚   â”‚   setattr(e, "litellm_response_headers", litellm_response_headers)                                         â”‚
           â”‚ â± 2125 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   2126 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   2127 â”‚   â”‚   â”‚   for error_type in litellm.LITELLM_EXCEPTION_TYPES:                                                       â”‚
           â”‚   2128 â”‚   â”‚   â”‚   â”‚   if isinstance(e, error_type):                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:210 â”‚
           â”‚ 1 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2098 â”‚   â”‚   â”‚   â”‚   â”‚   request=original_exception.request,                                                              â”‚
           â”‚   2099 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚   2100 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â± 2101 â”‚   â”‚   â”‚   â”‚   raise APIConnectionError(                                                                            â”‚
           â”‚   2102 â”‚   â”‚   â”‚   â”‚   â”‚   message="{}\n{}".format(                                                                         â”‚
           â”‚   2103 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   str(original_exception), traceback.format_exc()                                              â”‚
           â”‚   2104 â”‚   â”‚   â”‚   â”‚   â”‚   ),                                                                                               â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           APIConnectionError: litellm.APIConnectionError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1109, in                 
           _wrap_create_connection                                                                                                        
               sock = await aiohappyeyeballs.start_connection(                                                                            
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                            
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py", line 123, in              
           start_connection                                                                                                               
               raise OSError(first_errno, msg)                                                                                            
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py", line 477, in acompletion           
               response = await init_response                                                                                             
                          ^^^^^^^^^^^^^^^^^^^                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 566, in                
           ollama_acompletion                                                                                                             
               raise e  # don't use verbose_logger.exception, if exception is raised                                                      
               ^^^^^^^                                                                                                                    
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 507, in                
           ollama_acompletion                                                                                                             
               resp = await session.post(url, json=data)                                                                                  
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                  
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py", line 696, in _request            
               conn = await self._connector.connect(                                                                                      
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 544, in connect          
               proto = await self._create_connection(req, traces, timeout)                                                                
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1050, in                 
           _create_connection                                                                                                             
               _, proto = await self._create_direct_connection(req, traces, timeout)                                                      
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1394, in                 
           _create_direct_connection                                                                                                      
               raise last_exc                                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1363, in                 
           _create_direct_connection                                                                                                      
               transp, proto = await self._wrap_create_connection(                                                                        
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                        
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1124, in                 
           _wrap_create_connection                                                                                                        
               raise client_error(req.connection_key, exc) from exc                                                                       
           aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
                                                                                                                                          
           Received Model Group=ollama/llama3.2                                                                                           
           Available Model Group Fallbacks=None LiteLLM Retried: 2 times, LiteLLM Max Retries: 3                                          
[00:52:28] Answer:                                                                                                                        


 ANSWERING QUESTION: sciqag_question_56.json
 ----------------------------- 



[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.

[00:52:49] Trajectory failed.                                                                                                             
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1109 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1106 â”‚   â”‚   â”‚   async with ceil_timeout(                                                                                 â”‚
           â”‚   1107 â”‚   â”‚   â”‚   â”‚   timeout.sock_connect, ceil_threshold=timeout.ceil_threshold                                          â”‚
           â”‚   1108 â”‚   â”‚   â”‚   ):                                                                                                       â”‚
           â”‚ â± 1109 â”‚   â”‚   â”‚   â”‚   sock = await aiohappyeyeballs.start_connection(                                                      â”‚
           â”‚   1110 â”‚   â”‚   â”‚   â”‚   â”‚   addr_infos=addr_infos,                                                                           â”‚
           â”‚   1111 â”‚   â”‚   â”‚   â”‚   â”‚   local_addr_infos=self._local_addr_infos,                                                         â”‚
           â”‚   1112 â”‚   â”‚   â”‚   â”‚   â”‚   happy_eyeballs_delay=self._happy_eyeballs_delay,                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py:123 in start_connection          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   120 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, OSError) and exc.errno == first_errno                                         â”‚
           â”‚   121 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   for exc in all_exceptions                                                                     â”‚
           â”‚   122 â”‚   â”‚   â”‚   â”‚   â”‚   ):                                                                                                â”‚
           â”‚ â± 123 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   raise OSError(first_errno, msg)                                                               â”‚
           â”‚   124 â”‚   â”‚   â”‚   â”‚   elif isinstance(first_exception, RuntimeError) and all(                                               â”‚
           â”‚   125 â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, RuntimeError) for exc in all_exceptions                                           â”‚
           â”‚   126 â”‚   â”‚   â”‚   â”‚   ):                                                                                                    â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:477 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    474 â”‚   â”‚   â”‚   â”‚   â”‚   response = ModelResponse(**init_response)                                                        â”‚
           â”‚    475 â”‚   â”‚   â”‚   â”‚   response = init_response                                                                             â”‚
           â”‚    476 â”‚   â”‚   â”‚   elif asyncio.iscoroutine(init_response):                                                                 â”‚
           â”‚ â±  477 â”‚   â”‚   â”‚   â”‚   response = await init_response                                                                       â”‚
           â”‚    478 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚    479 â”‚   â”‚   â”‚   â”‚   response = init_response  # type: ignore                                                             â”‚
           â”‚    480                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:566 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   563 â”‚   â”‚   â”‚   )                                                                                                         â”‚
           â”‚   564 â”‚   â”‚   â”‚   return model_response                                                                                     â”‚
           â”‚   565 â”‚   except Exception as e:                                                                                            â”‚
           â”‚ â± 566 â”‚   â”‚   raise e  # don't use verbose_logger.exception, if exception is raised                                         â”‚
           â”‚   567                                                                                                                       â”‚
           â”‚   568                                                                                                                       â”‚
           â”‚   569 async def ollama_aembeddings(                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:507 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   504 â”‚   try:                                                                                                              â”‚
           â”‚   505 â”‚   â”‚   timeout = aiohttp.ClientTimeout(total=litellm.request_timeout)  # 10 minutes                                  â”‚
           â”‚   506 â”‚   â”‚   async with aiohttp.ClientSession(timeout=timeout) as session:                                                 â”‚
           â”‚ â± 507 â”‚   â”‚   â”‚   resp = await session.post(url, json=data)                                                                 â”‚
           â”‚   508 â”‚   â”‚   â”‚                                                                                                             â”‚
           â”‚   509 â”‚   â”‚   â”‚   if resp.status != 200:                                                                                    â”‚
           â”‚   510 â”‚   â”‚   â”‚   â”‚   text = await resp.text()                                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py:696 in _request                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚    693 â”‚   â”‚   â”‚   â”‚   â”‚                                                                                                    â”‚
           â”‚    694 â”‚   â”‚   â”‚   â”‚   â”‚   # connection timeout                                                                             â”‚
           â”‚    695 â”‚   â”‚   â”‚   â”‚   â”‚   try:                                                                                             â”‚
           â”‚ â±  696 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   conn = await self._connector.connect(                                                        â”‚
           â”‚    697 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   req, traces=traces, timeout=real_timeout                                                 â”‚
           â”‚    698 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚    699 â”‚   â”‚   â”‚   â”‚   â”‚   except asyncio.TimeoutError as exc:                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:544 in connect                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚    541 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    542 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    543 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_start()                                                   â”‚
           â”‚ â±  544 â”‚   â”‚   â”‚   â”‚   proto = await self._create_connection(req, traces, timeout)                                          â”‚
           â”‚    545 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    546 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    547 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_end()                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1050 in _create_connection           â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1047 â”‚   â”‚   if req.proxy:                                                                                                â”‚
           â”‚   1048 â”‚   â”‚   â”‚   _, proto = await self._create_proxy_connection(req, traces, timeout)                                     â”‚
           â”‚   1049 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚ â± 1050 â”‚   â”‚   â”‚   _, proto = await self._create_direct_connection(req, traces, timeout)                                    â”‚
           â”‚   1051 â”‚   â”‚                                                                                                                â”‚
           â”‚   1052 â”‚   â”‚   return proto                                                                                                 â”‚
           â”‚   1053                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1394 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1391 â”‚   â”‚   â”‚   return transp, proto                                                                                     â”‚
           â”‚   1392 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   1393 â”‚   â”‚   â”‚   assert last_exc is not None                                                                              â”‚
           â”‚ â± 1394 â”‚   â”‚   â”‚   raise last_exc                                                                                           â”‚
           â”‚   1395 â”‚                                                                                                                    â”‚
           â”‚   1396 â”‚   async def _create_proxy_connection(                                                                              â”‚
           â”‚   1397 â”‚   â”‚   self, req: ClientRequest, traces: List["Trace"], timeout: "ClientTimeout"                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1363 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1360 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   1361 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1362 â”‚   â”‚   â”‚   try:                                                                                                     â”‚
           â”‚ â± 1363 â”‚   â”‚   â”‚   â”‚   transp, proto = await self._wrap_create_connection(                                                  â”‚
           â”‚   1364 â”‚   â”‚   â”‚   â”‚   â”‚   self._factory,                                                                                   â”‚
           â”‚   1365 â”‚   â”‚   â”‚   â”‚   â”‚   timeout=timeout,                                                                                 â”‚
           â”‚   1366 â”‚   â”‚   â”‚   â”‚   â”‚   ssl=sslcontext,                                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1124 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1121 â”‚   â”‚   except OSError as exc:                                                                                       â”‚
           â”‚   1122 â”‚   â”‚   â”‚   if exc.errno is None and isinstance(exc, asyncio.TimeoutError):                                          â”‚
           â”‚   1123 â”‚   â”‚   â”‚   â”‚   raise                                                                                                â”‚
           â”‚ â± 1124 â”‚   â”‚   â”‚   raise client_error(req.connection_key, exc) from exc                                                     â”‚
           â”‚   1125 â”‚                                                                                                                    â”‚
           â”‚   1126 â”‚   async def _wrap_existing_connection(                                                                             â”‚
           â”‚   1127 â”‚   â”‚   self,                                                                                                        â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno 111] Connect call failed 
           ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                                                    
                                                                                                                                          
           During handling of the above exception, another exception occurred:                                                            
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:276 in _run_with_timeout_failure                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   273 ) -> tuple[PQASession, AgentStatus]:                                                                                  â”‚
           â”‚   274 â”‚   try:                                                                                                              â”‚
           â”‚   275 â”‚   â”‚   async with asyncio.timeout(query.settings.agent.timeout):                                                     â”‚
           â”‚ â± 276 â”‚   â”‚   â”‚   status = await rollout()                                                                                  â”‚
           â”‚   277 â”‚   except TimeoutError:                                                                                              â”‚
           â”‚   278 â”‚   â”‚   logger.warning(                                                                                               â”‚
           â”‚   279 â”‚   â”‚   â”‚   f"Agent timeout after {query.settings.agent.timeout}-sec, just answering."                                â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:410 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   407 â”‚   â”‚   â”‚   â”‚   )                                                                                                     â”‚
           â”‚   408 â”‚   â”‚   â”‚   â”‚   return AgentStatus.TRUNCATED                                                                          â”‚
           â”‚   409 â”‚   â”‚   â”‚   agent_state.messages += obs                                                                               â”‚
           â”‚ â± 410 â”‚   â”‚   â”‚   for attempt in Retrying(                                                                                  â”‚
           â”‚   411 â”‚   â”‚   â”‚   â”‚   stop=stop_after_attempt(5),                                                                           â”‚
           â”‚   412 â”‚   â”‚   â”‚   â”‚   retry=retry_if_exception_type(MalformedMessageError),                                                 â”‚
           â”‚   413 â”‚   â”‚   â”‚   â”‚   before_sleep=before_sleep_log(logger, logging.WARNING),                                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:443 in __iter__                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   440 â”‚   â”‚                                                                                                                 â”‚
           â”‚   441 â”‚   â”‚   retry_state = RetryCallState(self, fn=None, args=(), kwargs={})                                               â”‚
           â”‚   442 â”‚   â”‚   while True:                                                                                                   â”‚
           â”‚ â± 443 â”‚   â”‚   â”‚   do = self.iter(retry_state=retry_state)                                                                   â”‚
           â”‚   444 â”‚   â”‚   â”‚   if isinstance(do, DoAttempt):                                                                             â”‚
           â”‚   445 â”‚   â”‚   â”‚   â”‚   yield AttemptManager(retry_state=retry_state)                                                         â”‚
           â”‚   446 â”‚   â”‚   â”‚   elif isinstance(do, DoSleep):                                                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:376 in iter                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   373 â”‚   â”‚   self._begin_iter(retry_state)                                                                                 â”‚
           â”‚   374 â”‚   â”‚   result = None                                                                                                 â”‚
           â”‚   375 â”‚   â”‚   for action in self.iter_state.actions:                                                                        â”‚
           â”‚ â± 376 â”‚   â”‚   â”‚   result = action(retry_state)                                                                              â”‚
           â”‚   377 â”‚   â”‚   return result                                                                                                 â”‚
           â”‚   378 â”‚                                                                                                                     â”‚
           â”‚   379 â”‚   def _begin_iter(self, retry_state: "RetryCallState") -> None:  # noqa                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:398 in <lambda>                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   395 â”‚                                                                                                                     â”‚
           â”‚   396 â”‚   def _post_retry_check_actions(self, retry_state: "RetryCallState") -> None:                                       â”‚
           â”‚   397 â”‚   â”‚   if not (self.iter_state.is_explicit_retry or self.iter_state.retry_run_result):                               â”‚
           â”‚ â± 398 â”‚   â”‚   â”‚   self._add_action_func(lambda rs: rs.outcome.result())                                                     â”‚
           â”‚   399 â”‚   â”‚   â”‚   return                                                                                                    â”‚
           â”‚   400 â”‚   â”‚                                                                                                                 â”‚
           â”‚   401 â”‚   â”‚   if self.after is not None:                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:449 in result                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚   446 â”‚   â”‚   â”‚   â”‚   if self._state in [CANCELLED, CANCELLED_AND_NOTIFIED]:                                                â”‚
           â”‚   447 â”‚   â”‚   â”‚   â”‚   â”‚   raise CancelledError()                                                                            â”‚
           â”‚   448 â”‚   â”‚   â”‚   â”‚   elif self._state == FINISHED:                                                                         â”‚
           â”‚ â± 449 â”‚   â”‚   â”‚   â”‚   â”‚   return self.__get_result()                                                                        â”‚
           â”‚   450 â”‚   â”‚   â”‚   â”‚                                                                                                         â”‚
           â”‚   451 â”‚   â”‚   â”‚   â”‚   self._condition.wait(timeout)                                                                         â”‚
           â”‚   452                                                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:401 in __get_result                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   398 â”‚   def __get_result(self):                                                                                           â”‚
           â”‚   399 â”‚   â”‚   if self._exception:                                                                                           â”‚
           â”‚   400 â”‚   â”‚   â”‚   try:                                                                                                      â”‚
           â”‚ â± 401 â”‚   â”‚   â”‚   â”‚   raise self._exception                                                                                 â”‚
           â”‚   402 â”‚   â”‚   â”‚   finally:                                                                                                  â”‚
           â”‚   403 â”‚   â”‚   â”‚   â”‚   # Break a reference cycle with the exception in self._exception                                       â”‚
           â”‚   404 â”‚   â”‚   â”‚   â”‚   self = None                                                                                           â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:417 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   414 â”‚   â”‚   â”‚   â”‚   reraise=True,                                                                                         â”‚
           â”‚   415 â”‚   â”‚   â”‚   ):                                                                                                        â”‚
           â”‚   416 â”‚   â”‚   â”‚   â”‚   with attempt:  # Retrying if ToolSelector fails to select a tool                                      â”‚
           â”‚ â± 417 â”‚   â”‚   â”‚   â”‚   â”‚   action = await agent(agent_state.messages, tools)                                                 â”‚
           â”‚   418 â”‚   â”‚   â”‚   agent_state.messages = [*agent_state.messages, action]                                                    â”‚
           â”‚   419 â”‚   â”‚   â”‚   if on_agent_action_callback:                                                                              â”‚
           â”‚   420 â”‚   â”‚   â”‚   â”‚   await on_agent_action_callback(action, agent_state)                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aviary/tools/utils.py:182 in __call__                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   179 â”‚   â”‚   â”‚   self._ledger.messages.extend(messages)                                                                    â”‚
           â”‚   180 â”‚   â”‚   â”‚   messages = self._ledger.messages                                                                          â”‚
           â”‚   181 â”‚   â”‚                                                                                                                 â”‚
           â”‚ â± 182 â”‚   â”‚   model_response = await self._bound_acompletion(                                                               â”‚
           â”‚   183 â”‚   â”‚   â”‚   messages=MessagesAdapter.dump_python(                                                                     â”‚
           â”‚   184 â”‚   â”‚   â”‚   â”‚   messages, exclude_none=True, by_alias=True                                                            â”‚
           â”‚   185 â”‚   â”‚   â”‚   ),                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:817 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    814 â”‚   â”‚   â”‚   â”‚   â”‚   original_exception=e,                                                                            â”‚
           â”‚    815 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    816 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚ â±  817 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    818 â”‚                                                                                                                    â”‚
           â”‚    819 â”‚   async def _acompletion(                                                                                          â”‚
           â”‚    820 â”‚   â”‚   self, model: str, messages: List[Dict[str, str]], **kwargs                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:793 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    790 â”‚   â”‚   â”‚   if request_priority is not None and isinstance(request_priority, int):                                   â”‚
           â”‚    791 â”‚   â”‚   â”‚   â”‚   response = await self.schedule_acompletion(**kwargs)                                                 â”‚
           â”‚    792 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â±  793 â”‚   â”‚   â”‚   â”‚   response = await self.async_function_with_fallbacks(**kwargs)                                        â”‚
           â”‚    794 â”‚   â”‚   â”‚   end_time = time.time()                                                                                   â”‚
           â”‚    795 â”‚   â”‚   â”‚   _duration = end_time - start_time                                                                        â”‚
           â”‚    796 â”‚   â”‚   â”‚   asyncio.create_task(                                                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2795 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2792 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚   2793 â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                                â”‚
           â”‚   2794 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2795 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2796 â”‚                                                                                                                    â”‚
           â”‚   2797 â”‚   def _handle_mock_testing_fallbacks(                                                                              â”‚
           â”‚   2798 â”‚   â”‚   self,                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2631 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2628 â”‚   â”‚   â”‚   â”‚   content_policy_fallbacks=content_policy_fallbacks,                                                   â”‚
           â”‚   2629 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2630 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2631 â”‚   â”‚   â”‚   response = await self.async_function_with_retries(*args, **kwargs)                                       â”‚
           â”‚   2632 â”‚   â”‚   â”‚   verbose_router_logger.debug(f"Async Response: {response}")                                               â”‚
           â”‚   2633 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2634 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2967 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2964 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "max_retries", num_retries)                                              â”‚
           â”‚   2965 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "num_retries", current_attempt)                                          â”‚
           â”‚   2966 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2967 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2968 â”‚                                                                                                                    â”‚
           â”‚   2969 â”‚   async def make_call(self, original_function: Any, *args, **kwargs):                                              â”‚
           â”‚   2970 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2879 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2876 â”‚   â”‚   â”‚   â”‚   model_group=model_group, kwargs=kwargs                                                               â”‚
           â”‚   2877 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2878 â”‚   â”‚   â”‚   # if the function call is successful, no exception will be raised and we'll                              â”‚
           â”‚        break out of the loop                                                                                                â”‚
           â”‚ â± 2879 â”‚   â”‚   â”‚   response = await self.make_call(original_function, *args, **kwargs)                                      â”‚
           â”‚   2880 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   2881 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2882 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2976 in make_call                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2973 â”‚   â”‚   model_group = kwargs.get("model")                                                                            â”‚
           â”‚   2974 â”‚   â”‚   response = original_function(*args, **kwargs)                                                                â”‚
           â”‚   2975 â”‚   â”‚   if inspect.iscoroutinefunction(response) or inspect.isawaitable(response):                                   â”‚
           â”‚ â± 2976 â”‚   â”‚   â”‚   response = await response                                                                                â”‚
           â”‚   2977 â”‚   â”‚   ## PROCESS RESPONSE HEADERS                                                                                  â”‚
           â”‚   2978 â”‚   â”‚   await self.set_response_headers(response=response, model_group=model_group)                                  â”‚
           â”‚   2979                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:947 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    944 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚    945 â”‚   â”‚   â”‚   if model_name is not None:                                                                               â”‚
           â”‚    946 â”‚   â”‚   â”‚   â”‚   self.fail_calls[model_name] += 1                                                                     â”‚
           â”‚ â±  947 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    948 â”‚                                                                                                                    â”‚
           â”‚    949 â”‚   def _update_kwargs_before_fallbacks(self, model: str, kwargs: dict) -> None:                                     â”‚
           â”‚    950 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:915 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    912 â”‚   â”‚   â”‚   â”‚   â”‚   parent_otel_span=parent_otel_span,                                                               â”‚
           â”‚    913 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    914 â”‚   â”‚   â”‚   â”‚                                                                                                        â”‚
           â”‚ â±  915 â”‚   â”‚   â”‚   â”‚   response = await _response                                                                           â”‚
           â”‚    916 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚    917 â”‚   â”‚   â”‚   ## CHECK CONTENT FILTER ERROR ##                                                                         â”‚
           â”‚    918 â”‚   â”‚   â”‚   if isinstance(response, ModelResponse):                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1175 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1172 â”‚   â”‚   â”‚   â”‚   â”‚   else:                                                                                            â”‚
           â”‚   1173 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   kwargs["model"] = context_window_fallback_dict[model]                                        â”‚
           â”‚   1174 â”‚   â”‚   â”‚   â”‚   â”‚   return await original_function(*args, **kwargs)                                                  â”‚
           â”‚ â± 1175 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   1176 â”‚                                                                                                                    â”‚
           â”‚   1177 â”‚   is_coroutine = inspect.iscoroutinefunction(original_function)                                                    â”‚
           â”‚   1178                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1031 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1028 â”‚   â”‚   â”‚   â”‚   return _caching_handler_response.final_embedding_cached_response                                     â”‚
           â”‚   1029 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1030 â”‚   â”‚   â”‚   # MODEL CALL                                                                                             â”‚
           â”‚ â± 1031 â”‚   â”‚   â”‚   result = await original_function(*args, **kwargs)                                                        â”‚
           â”‚   1032 â”‚   â”‚   â”‚   end_time = datetime.datetime.now()                                                                       â”‚
           â”‚   1033 â”‚   â”‚   â”‚   if "stream" in kwargs and kwargs["stream"] is True:                                                      â”‚
           â”‚   1034 â”‚   â”‚   â”‚   â”‚   if (                                                                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:499 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    496 â”‚   â”‚   return response                                                                                              â”‚
           â”‚    497 â”‚   except Exception as e:                                                                                           â”‚
           â”‚    498 â”‚   â”‚   custom_llm_provider = custom_llm_provider or "openai"                                                        â”‚
           â”‚ â±  499 â”‚   â”‚   raise exception_type(                                                                                        â”‚
           â”‚    500 â”‚   â”‚   â”‚   model=model,                                                                                             â”‚
           â”‚    501 â”‚   â”‚   â”‚   custom_llm_provider=custom_llm_provider,                                                                 â”‚
           â”‚    502 â”‚   â”‚   â”‚   original_exception=e,                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:212 â”‚
           â”‚ 5 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2122 â”‚   â”‚   # don't let an error with mapping interrupt the user from receiving an error                                 â”‚
           â”‚        from the llm api calls                                                                                               â”‚
           â”‚   2123 â”‚   â”‚   if exception_mapping_worked:                                                                                 â”‚
           â”‚   2124 â”‚   â”‚   â”‚   setattr(e, "litellm_response_headers", litellm_response_headers)                                         â”‚
           â”‚ â± 2125 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   2126 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   2127 â”‚   â”‚   â”‚   for error_type in litellm.LITELLM_EXCEPTION_TYPES:                                                       â”‚
           â”‚   2128 â”‚   â”‚   â”‚   â”‚   if isinstance(e, error_type):                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:210 â”‚
           â”‚ 1 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2098 â”‚   â”‚   â”‚   â”‚   â”‚   request=original_exception.request,                                                              â”‚
           â”‚   2099 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚   2100 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â± 2101 â”‚   â”‚   â”‚   â”‚   raise APIConnectionError(                                                                            â”‚
           â”‚   2102 â”‚   â”‚   â”‚   â”‚   â”‚   message="{}\n{}".format(                                                                         â”‚
           â”‚   2103 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   str(original_exception), traceback.format_exc()                                              â”‚
           â”‚   2104 â”‚   â”‚   â”‚   â”‚   â”‚   ),                                                                                               â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           APIConnectionError: litellm.APIConnectionError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1109, in                 
           _wrap_create_connection                                                                                                        
               sock = await aiohappyeyeballs.start_connection(                                                                            
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                            
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py", line 123, in              
           start_connection                                                                                                               
               raise OSError(first_errno, msg)                                                                                            
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py", line 477, in acompletion           
               response = await init_response                                                                                             
                          ^^^^^^^^^^^^^^^^^^^                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 566, in                
           ollama_acompletion                                                                                                             
               raise e  # don't use verbose_logger.exception, if exception is raised                                                      
               ^^^^^^^                                                                                                                    
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 507, in                
           ollama_acompletion                                                                                                             
               resp = await session.post(url, json=data)                                                                                  
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                  
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py", line 696, in _request            
               conn = await self._connector.connect(                                                                                      
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 544, in connect          
               proto = await self._create_connection(req, traces, timeout)                                                                
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1050, in                 
           _create_connection                                                                                                             
               _, proto = await self._create_direct_connection(req, traces, timeout)                                                      
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1394, in                 
           _create_direct_connection                                                                                                      
               raise last_exc                                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1363, in                 
           _create_direct_connection                                                                                                      
               transp, proto = await self._wrap_create_connection(                                                                        
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                        
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1124, in                 
           _wrap_create_connection                                                                                                        
               raise client_error(req.connection_key, exc) from exc                                                                       
           aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
                                                                                                                                          
           Received Model Group=ollama/llama3.2                                                                                           
           Available Model Group Fallbacks=None LiteLLM Retried: 2 times, LiteLLM Max Retries: 3                                          
[00:52:51] Answer:                                                                                                                        


 ANSWERING QUESTION: sciqag_question_57.json
 ----------------------------- 



[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.

[00:53:11] Trajectory failed.                                                                                                             
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1109 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1106 â”‚   â”‚   â”‚   async with ceil_timeout(                                                                                 â”‚
           â”‚   1107 â”‚   â”‚   â”‚   â”‚   timeout.sock_connect, ceil_threshold=timeout.ceil_threshold                                          â”‚
           â”‚   1108 â”‚   â”‚   â”‚   ):                                                                                                       â”‚
           â”‚ â± 1109 â”‚   â”‚   â”‚   â”‚   sock = await aiohappyeyeballs.start_connection(                                                      â”‚
           â”‚   1110 â”‚   â”‚   â”‚   â”‚   â”‚   addr_infos=addr_infos,                                                                           â”‚
           â”‚   1111 â”‚   â”‚   â”‚   â”‚   â”‚   local_addr_infos=self._local_addr_infos,                                                         â”‚
           â”‚   1112 â”‚   â”‚   â”‚   â”‚   â”‚   happy_eyeballs_delay=self._happy_eyeballs_delay,                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py:123 in start_connection          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   120 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, OSError) and exc.errno == first_errno                                         â”‚
           â”‚   121 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   for exc in all_exceptions                                                                     â”‚
           â”‚   122 â”‚   â”‚   â”‚   â”‚   â”‚   ):                                                                                                â”‚
           â”‚ â± 123 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   raise OSError(first_errno, msg)                                                               â”‚
           â”‚   124 â”‚   â”‚   â”‚   â”‚   elif isinstance(first_exception, RuntimeError) and all(                                               â”‚
           â”‚   125 â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, RuntimeError) for exc in all_exceptions                                           â”‚
           â”‚   126 â”‚   â”‚   â”‚   â”‚   ):                                                                                                    â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:477 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    474 â”‚   â”‚   â”‚   â”‚   â”‚   response = ModelResponse(**init_response)                                                        â”‚
           â”‚    475 â”‚   â”‚   â”‚   â”‚   response = init_response                                                                             â”‚
           â”‚    476 â”‚   â”‚   â”‚   elif asyncio.iscoroutine(init_response):                                                                 â”‚
           â”‚ â±  477 â”‚   â”‚   â”‚   â”‚   response = await init_response                                                                       â”‚
           â”‚    478 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚    479 â”‚   â”‚   â”‚   â”‚   response = init_response  # type: ignore                                                             â”‚
           â”‚    480                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:566 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   563 â”‚   â”‚   â”‚   )                                                                                                         â”‚
           â”‚   564 â”‚   â”‚   â”‚   return model_response                                                                                     â”‚
           â”‚   565 â”‚   except Exception as e:                                                                                            â”‚
           â”‚ â± 566 â”‚   â”‚   raise e  # don't use verbose_logger.exception, if exception is raised                                         â”‚
           â”‚   567                                                                                                                       â”‚
           â”‚   568                                                                                                                       â”‚
           â”‚   569 async def ollama_aembeddings(                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:507 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   504 â”‚   try:                                                                                                              â”‚
           â”‚   505 â”‚   â”‚   timeout = aiohttp.ClientTimeout(total=litellm.request_timeout)  # 10 minutes                                  â”‚
           â”‚   506 â”‚   â”‚   async with aiohttp.ClientSession(timeout=timeout) as session:                                                 â”‚
           â”‚ â± 507 â”‚   â”‚   â”‚   resp = await session.post(url, json=data)                                                                 â”‚
           â”‚   508 â”‚   â”‚   â”‚                                                                                                             â”‚
           â”‚   509 â”‚   â”‚   â”‚   if resp.status != 200:                                                                                    â”‚
           â”‚   510 â”‚   â”‚   â”‚   â”‚   text = await resp.text()                                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py:696 in _request                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚    693 â”‚   â”‚   â”‚   â”‚   â”‚                                                                                                    â”‚
           â”‚    694 â”‚   â”‚   â”‚   â”‚   â”‚   # connection timeout                                                                             â”‚
           â”‚    695 â”‚   â”‚   â”‚   â”‚   â”‚   try:                                                                                             â”‚
           â”‚ â±  696 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   conn = await self._connector.connect(                                                        â”‚
           â”‚    697 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   req, traces=traces, timeout=real_timeout                                                 â”‚
           â”‚    698 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚    699 â”‚   â”‚   â”‚   â”‚   â”‚   except asyncio.TimeoutError as exc:                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:544 in connect                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚    541 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    542 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    543 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_start()                                                   â”‚
           â”‚ â±  544 â”‚   â”‚   â”‚   â”‚   proto = await self._create_connection(req, traces, timeout)                                          â”‚
           â”‚    545 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    546 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    547 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_end()                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1050 in _create_connection           â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1047 â”‚   â”‚   if req.proxy:                                                                                                â”‚
           â”‚   1048 â”‚   â”‚   â”‚   _, proto = await self._create_proxy_connection(req, traces, timeout)                                     â”‚
           â”‚   1049 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚ â± 1050 â”‚   â”‚   â”‚   _, proto = await self._create_direct_connection(req, traces, timeout)                                    â”‚
           â”‚   1051 â”‚   â”‚                                                                                                                â”‚
           â”‚   1052 â”‚   â”‚   return proto                                                                                                 â”‚
           â”‚   1053                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1394 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1391 â”‚   â”‚   â”‚   return transp, proto                                                                                     â”‚
           â”‚   1392 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   1393 â”‚   â”‚   â”‚   assert last_exc is not None                                                                              â”‚
           â”‚ â± 1394 â”‚   â”‚   â”‚   raise last_exc                                                                                           â”‚
           â”‚   1395 â”‚                                                                                                                    â”‚
           â”‚   1396 â”‚   async def _create_proxy_connection(                                                                              â”‚
           â”‚   1397 â”‚   â”‚   self, req: ClientRequest, traces: List["Trace"], timeout: "ClientTimeout"                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1363 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1360 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   1361 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1362 â”‚   â”‚   â”‚   try:                                                                                                     â”‚
           â”‚ â± 1363 â”‚   â”‚   â”‚   â”‚   transp, proto = await self._wrap_create_connection(                                                  â”‚
           â”‚   1364 â”‚   â”‚   â”‚   â”‚   â”‚   self._factory,                                                                                   â”‚
           â”‚   1365 â”‚   â”‚   â”‚   â”‚   â”‚   timeout=timeout,                                                                                 â”‚
           â”‚   1366 â”‚   â”‚   â”‚   â”‚   â”‚   ssl=sslcontext,                                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1124 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1121 â”‚   â”‚   except OSError as exc:                                                                                       â”‚
           â”‚   1122 â”‚   â”‚   â”‚   if exc.errno is None and isinstance(exc, asyncio.TimeoutError):                                          â”‚
           â”‚   1123 â”‚   â”‚   â”‚   â”‚   raise                                                                                                â”‚
           â”‚ â± 1124 â”‚   â”‚   â”‚   raise client_error(req.connection_key, exc) from exc                                                     â”‚
           â”‚   1125 â”‚                                                                                                                    â”‚
           â”‚   1126 â”‚   async def _wrap_existing_connection(                                                                             â”‚
           â”‚   1127 â”‚   â”‚   self,                                                                                                        â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno 111] Connect call failed 
           ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                                                    
                                                                                                                                          
           During handling of the above exception, another exception occurred:                                                            
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:276 in _run_with_timeout_failure                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   273 ) -> tuple[PQASession, AgentStatus]:                                                                                  â”‚
           â”‚   274 â”‚   try:                                                                                                              â”‚
           â”‚   275 â”‚   â”‚   async with asyncio.timeout(query.settings.agent.timeout):                                                     â”‚
           â”‚ â± 276 â”‚   â”‚   â”‚   status = await rollout()                                                                                  â”‚
           â”‚   277 â”‚   except TimeoutError:                                                                                              â”‚
           â”‚   278 â”‚   â”‚   logger.warning(                                                                                               â”‚
           â”‚   279 â”‚   â”‚   â”‚   f"Agent timeout after {query.settings.agent.timeout}-sec, just answering."                                â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:410 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   407 â”‚   â”‚   â”‚   â”‚   )                                                                                                     â”‚
           â”‚   408 â”‚   â”‚   â”‚   â”‚   return AgentStatus.TRUNCATED                                                                          â”‚
           â”‚   409 â”‚   â”‚   â”‚   agent_state.messages += obs                                                                               â”‚
           â”‚ â± 410 â”‚   â”‚   â”‚   for attempt in Retrying(                                                                                  â”‚
           â”‚   411 â”‚   â”‚   â”‚   â”‚   stop=stop_after_attempt(5),                                                                           â”‚
           â”‚   412 â”‚   â”‚   â”‚   â”‚   retry=retry_if_exception_type(MalformedMessageError),                                                 â”‚
           â”‚   413 â”‚   â”‚   â”‚   â”‚   before_sleep=before_sleep_log(logger, logging.WARNING),                                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:443 in __iter__                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   440 â”‚   â”‚                                                                                                                 â”‚
           â”‚   441 â”‚   â”‚   retry_state = RetryCallState(self, fn=None, args=(), kwargs={})                                               â”‚
           â”‚   442 â”‚   â”‚   while True:                                                                                                   â”‚
           â”‚ â± 443 â”‚   â”‚   â”‚   do = self.iter(retry_state=retry_state)                                                                   â”‚
           â”‚   444 â”‚   â”‚   â”‚   if isinstance(do, DoAttempt):                                                                             â”‚
           â”‚   445 â”‚   â”‚   â”‚   â”‚   yield AttemptManager(retry_state=retry_state)                                                         â”‚
           â”‚   446 â”‚   â”‚   â”‚   elif isinstance(do, DoSleep):                                                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:376 in iter                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   373 â”‚   â”‚   self._begin_iter(retry_state)                                                                                 â”‚
           â”‚   374 â”‚   â”‚   result = None                                                                                                 â”‚
           â”‚   375 â”‚   â”‚   for action in self.iter_state.actions:                                                                        â”‚
           â”‚ â± 376 â”‚   â”‚   â”‚   result = action(retry_state)                                                                              â”‚
           â”‚   377 â”‚   â”‚   return result                                                                                                 â”‚
           â”‚   378 â”‚                                                                                                                     â”‚
           â”‚   379 â”‚   def _begin_iter(self, retry_state: "RetryCallState") -> None:  # noqa                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:398 in <lambda>                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   395 â”‚                                                                                                                     â”‚
           â”‚   396 â”‚   def _post_retry_check_actions(self, retry_state: "RetryCallState") -> None:                                       â”‚
           â”‚   397 â”‚   â”‚   if not (self.iter_state.is_explicit_retry or self.iter_state.retry_run_result):                               â”‚
           â”‚ â± 398 â”‚   â”‚   â”‚   self._add_action_func(lambda rs: rs.outcome.result())                                                     â”‚
           â”‚   399 â”‚   â”‚   â”‚   return                                                                                                    â”‚
           â”‚   400 â”‚   â”‚                                                                                                                 â”‚
           â”‚   401 â”‚   â”‚   if self.after is not None:                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:449 in result                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚   446 â”‚   â”‚   â”‚   â”‚   if self._state in [CANCELLED, CANCELLED_AND_NOTIFIED]:                                                â”‚
           â”‚   447 â”‚   â”‚   â”‚   â”‚   â”‚   raise CancelledError()                                                                            â”‚
           â”‚   448 â”‚   â”‚   â”‚   â”‚   elif self._state == FINISHED:                                                                         â”‚
           â”‚ â± 449 â”‚   â”‚   â”‚   â”‚   â”‚   return self.__get_result()                                                                        â”‚
           â”‚   450 â”‚   â”‚   â”‚   â”‚                                                                                                         â”‚
           â”‚   451 â”‚   â”‚   â”‚   â”‚   self._condition.wait(timeout)                                                                         â”‚
           â”‚   452                                                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:401 in __get_result                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   398 â”‚   def __get_result(self):                                                                                           â”‚
           â”‚   399 â”‚   â”‚   if self._exception:                                                                                           â”‚
           â”‚   400 â”‚   â”‚   â”‚   try:                                                                                                      â”‚
           â”‚ â± 401 â”‚   â”‚   â”‚   â”‚   raise self._exception                                                                                 â”‚
           â”‚   402 â”‚   â”‚   â”‚   finally:                                                                                                  â”‚
           â”‚   403 â”‚   â”‚   â”‚   â”‚   # Break a reference cycle with the exception in self._exception                                       â”‚
           â”‚   404 â”‚   â”‚   â”‚   â”‚   self = None                                                                                           â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:417 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   414 â”‚   â”‚   â”‚   â”‚   reraise=True,                                                                                         â”‚
           â”‚   415 â”‚   â”‚   â”‚   ):                                                                                                        â”‚
           â”‚   416 â”‚   â”‚   â”‚   â”‚   with attempt:  # Retrying if ToolSelector fails to select a tool                                      â”‚
           â”‚ â± 417 â”‚   â”‚   â”‚   â”‚   â”‚   action = await agent(agent_state.messages, tools)                                                 â”‚
           â”‚   418 â”‚   â”‚   â”‚   agent_state.messages = [*agent_state.messages, action]                                                    â”‚
           â”‚   419 â”‚   â”‚   â”‚   if on_agent_action_callback:                                                                              â”‚
           â”‚   420 â”‚   â”‚   â”‚   â”‚   await on_agent_action_callback(action, agent_state)                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aviary/tools/utils.py:182 in __call__                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   179 â”‚   â”‚   â”‚   self._ledger.messages.extend(messages)                                                                    â”‚
           â”‚   180 â”‚   â”‚   â”‚   messages = self._ledger.messages                                                                          â”‚
           â”‚   181 â”‚   â”‚                                                                                                                 â”‚
           â”‚ â± 182 â”‚   â”‚   model_response = await self._bound_acompletion(                                                               â”‚
           â”‚   183 â”‚   â”‚   â”‚   messages=MessagesAdapter.dump_python(                                                                     â”‚
           â”‚   184 â”‚   â”‚   â”‚   â”‚   messages, exclude_none=True, by_alias=True                                                            â”‚
           â”‚   185 â”‚   â”‚   â”‚   ),                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:817 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    814 â”‚   â”‚   â”‚   â”‚   â”‚   original_exception=e,                                                                            â”‚
           â”‚    815 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    816 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚ â±  817 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    818 â”‚                                                                                                                    â”‚
           â”‚    819 â”‚   async def _acompletion(                                                                                          â”‚
           â”‚    820 â”‚   â”‚   self, model: str, messages: List[Dict[str, str]], **kwargs                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:793 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    790 â”‚   â”‚   â”‚   if request_priority is not None and isinstance(request_priority, int):                                   â”‚
           â”‚    791 â”‚   â”‚   â”‚   â”‚   response = await self.schedule_acompletion(**kwargs)                                                 â”‚
           â”‚    792 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â±  793 â”‚   â”‚   â”‚   â”‚   response = await self.async_function_with_fallbacks(**kwargs)                                        â”‚
           â”‚    794 â”‚   â”‚   â”‚   end_time = time.time()                                                                                   â”‚
           â”‚    795 â”‚   â”‚   â”‚   _duration = end_time - start_time                                                                        â”‚
           â”‚    796 â”‚   â”‚   â”‚   asyncio.create_task(                                                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2795 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2792 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚   2793 â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                                â”‚
           â”‚   2794 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2795 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2796 â”‚                                                                                                                    â”‚
           â”‚   2797 â”‚   def _handle_mock_testing_fallbacks(                                                                              â”‚
           â”‚   2798 â”‚   â”‚   self,                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2631 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2628 â”‚   â”‚   â”‚   â”‚   content_policy_fallbacks=content_policy_fallbacks,                                                   â”‚
           â”‚   2629 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2630 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2631 â”‚   â”‚   â”‚   response = await self.async_function_with_retries(*args, **kwargs)                                       â”‚
           â”‚   2632 â”‚   â”‚   â”‚   verbose_router_logger.debug(f"Async Response: {response}")                                               â”‚
           â”‚   2633 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2634 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2967 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2964 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "max_retries", num_retries)                                              â”‚
           â”‚   2965 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "num_retries", current_attempt)                                          â”‚
           â”‚   2966 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2967 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2968 â”‚                                                                                                                    â”‚
           â”‚   2969 â”‚   async def make_call(self, original_function: Any, *args, **kwargs):                                              â”‚
           â”‚   2970 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2879 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2876 â”‚   â”‚   â”‚   â”‚   model_group=model_group, kwargs=kwargs                                                               â”‚
           â”‚   2877 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2878 â”‚   â”‚   â”‚   # if the function call is successful, no exception will be raised and we'll                              â”‚
           â”‚        break out of the loop                                                                                                â”‚
           â”‚ â± 2879 â”‚   â”‚   â”‚   response = await self.make_call(original_function, *args, **kwargs)                                      â”‚
           â”‚   2880 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   2881 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2882 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2976 in make_call                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2973 â”‚   â”‚   model_group = kwargs.get("model")                                                                            â”‚
           â”‚   2974 â”‚   â”‚   response = original_function(*args, **kwargs)                                                                â”‚
           â”‚   2975 â”‚   â”‚   if inspect.iscoroutinefunction(response) or inspect.isawaitable(response):                                   â”‚
           â”‚ â± 2976 â”‚   â”‚   â”‚   response = await response                                                                                â”‚
           â”‚   2977 â”‚   â”‚   ## PROCESS RESPONSE HEADERS                                                                                  â”‚
           â”‚   2978 â”‚   â”‚   await self.set_response_headers(response=response, model_group=model_group)                                  â”‚
           â”‚   2979                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:947 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    944 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚    945 â”‚   â”‚   â”‚   if model_name is not None:                                                                               â”‚
           â”‚    946 â”‚   â”‚   â”‚   â”‚   self.fail_calls[model_name] += 1                                                                     â”‚
           â”‚ â±  947 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    948 â”‚                                                                                                                    â”‚
           â”‚    949 â”‚   def _update_kwargs_before_fallbacks(self, model: str, kwargs: dict) -> None:                                     â”‚
           â”‚    950 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:915 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    912 â”‚   â”‚   â”‚   â”‚   â”‚   parent_otel_span=parent_otel_span,                                                               â”‚
           â”‚    913 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    914 â”‚   â”‚   â”‚   â”‚                                                                                                        â”‚
           â”‚ â±  915 â”‚   â”‚   â”‚   â”‚   response = await _response                                                                           â”‚
           â”‚    916 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚    917 â”‚   â”‚   â”‚   ## CHECK CONTENT FILTER ERROR ##                                                                         â”‚
           â”‚    918 â”‚   â”‚   â”‚   if isinstance(response, ModelResponse):                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1175 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1172 â”‚   â”‚   â”‚   â”‚   â”‚   else:                                                                                            â”‚
           â”‚   1173 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   kwargs["model"] = context_window_fallback_dict[model]                                        â”‚
           â”‚   1174 â”‚   â”‚   â”‚   â”‚   â”‚   return await original_function(*args, **kwargs)                                                  â”‚
           â”‚ â± 1175 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   1176 â”‚                                                                                                                    â”‚
           â”‚   1177 â”‚   is_coroutine = inspect.iscoroutinefunction(original_function)                                                    â”‚
           â”‚   1178                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1031 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1028 â”‚   â”‚   â”‚   â”‚   return _caching_handler_response.final_embedding_cached_response                                     â”‚
           â”‚   1029 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1030 â”‚   â”‚   â”‚   # MODEL CALL                                                                                             â”‚
           â”‚ â± 1031 â”‚   â”‚   â”‚   result = await original_function(*args, **kwargs)                                                        â”‚
           â”‚   1032 â”‚   â”‚   â”‚   end_time = datetime.datetime.now()                                                                       â”‚
           â”‚   1033 â”‚   â”‚   â”‚   if "stream" in kwargs and kwargs["stream"] is True:                                                      â”‚
           â”‚   1034 â”‚   â”‚   â”‚   â”‚   if (                                                                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:499 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    496 â”‚   â”‚   return response                                                                                              â”‚
           â”‚    497 â”‚   except Exception as e:                                                                                           â”‚
           â”‚    498 â”‚   â”‚   custom_llm_provider = custom_llm_provider or "openai"                                                        â”‚
           â”‚ â±  499 â”‚   â”‚   raise exception_type(                                                                                        â”‚
           â”‚    500 â”‚   â”‚   â”‚   model=model,                                                                                             â”‚
           â”‚    501 â”‚   â”‚   â”‚   custom_llm_provider=custom_llm_provider,                                                                 â”‚
           â”‚    502 â”‚   â”‚   â”‚   original_exception=e,                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:212 â”‚
           â”‚ 5 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2122 â”‚   â”‚   # don't let an error with mapping interrupt the user from receiving an error                                 â”‚
           â”‚        from the llm api calls                                                                                               â”‚
           â”‚   2123 â”‚   â”‚   if exception_mapping_worked:                                                                                 â”‚
           â”‚   2124 â”‚   â”‚   â”‚   setattr(e, "litellm_response_headers", litellm_response_headers)                                         â”‚
           â”‚ â± 2125 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   2126 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   2127 â”‚   â”‚   â”‚   for error_type in litellm.LITELLM_EXCEPTION_TYPES:                                                       â”‚
           â”‚   2128 â”‚   â”‚   â”‚   â”‚   if isinstance(e, error_type):                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:210 â”‚
           â”‚ 1 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2098 â”‚   â”‚   â”‚   â”‚   â”‚   request=original_exception.request,                                                              â”‚
           â”‚   2099 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚   2100 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â± 2101 â”‚   â”‚   â”‚   â”‚   raise APIConnectionError(                                                                            â”‚
           â”‚   2102 â”‚   â”‚   â”‚   â”‚   â”‚   message="{}\n{}".format(                                                                         â”‚
           â”‚   2103 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   str(original_exception), traceback.format_exc()                                              â”‚
           â”‚   2104 â”‚   â”‚   â”‚   â”‚   â”‚   ),                                                                                               â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           APIConnectionError: litellm.APIConnectionError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1109, in                 
           _wrap_create_connection                                                                                                        
               sock = await aiohappyeyeballs.start_connection(                                                                            
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                            
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py", line 123, in              
           start_connection                                                                                                               
               raise OSError(first_errno, msg)                                                                                            
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py", line 477, in acompletion           
               response = await init_response                                                                                             
                          ^^^^^^^^^^^^^^^^^^^                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 566, in                
           ollama_acompletion                                                                                                             
               raise e  # don't use verbose_logger.exception, if exception is raised                                                      
               ^^^^^^^                                                                                                                    
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 507, in                
           ollama_acompletion                                                                                                             
               resp = await session.post(url, json=data)                                                                                  
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                  
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py", line 696, in _request            
               conn = await self._connector.connect(                                                                                      
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 544, in connect          
               proto = await self._create_connection(req, traces, timeout)                                                                
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1050, in                 
           _create_connection                                                                                                             
               _, proto = await self._create_direct_connection(req, traces, timeout)                                                      
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1394, in                 
           _create_direct_connection                                                                                                      
               raise last_exc                                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1363, in                 
           _create_direct_connection                                                                                                      
               transp, proto = await self._wrap_create_connection(                                                                        
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                        
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1124, in                 
           _wrap_create_connection                                                                                                        
               raise client_error(req.connection_key, exc) from exc                                                                       
           aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
                                                                                                                                          
           Received Model Group=ollama/llama3.2                                                                                           
           Available Model Group Fallbacks=None LiteLLM Retried: 2 times, LiteLLM Max Retries: 3                                          
[00:53:13] Answer:                                                                                                                        


 ANSWERING QUESTION: sciqag_question_58.json
 ----------------------------- 



[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.

[00:53:34] Trajectory failed.                                                                                                             
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1109 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1106 â”‚   â”‚   â”‚   async with ceil_timeout(                                                                                 â”‚
           â”‚   1107 â”‚   â”‚   â”‚   â”‚   timeout.sock_connect, ceil_threshold=timeout.ceil_threshold                                          â”‚
           â”‚   1108 â”‚   â”‚   â”‚   ):                                                                                                       â”‚
           â”‚ â± 1109 â”‚   â”‚   â”‚   â”‚   sock = await aiohappyeyeballs.start_connection(                                                      â”‚
           â”‚   1110 â”‚   â”‚   â”‚   â”‚   â”‚   addr_infos=addr_infos,                                                                           â”‚
           â”‚   1111 â”‚   â”‚   â”‚   â”‚   â”‚   local_addr_infos=self._local_addr_infos,                                                         â”‚
           â”‚   1112 â”‚   â”‚   â”‚   â”‚   â”‚   happy_eyeballs_delay=self._happy_eyeballs_delay,                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py:123 in start_connection          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   120 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, OSError) and exc.errno == first_errno                                         â”‚
           â”‚   121 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   for exc in all_exceptions                                                                     â”‚
           â”‚   122 â”‚   â”‚   â”‚   â”‚   â”‚   ):                                                                                                â”‚
           â”‚ â± 123 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   raise OSError(first_errno, msg)                                                               â”‚
           â”‚   124 â”‚   â”‚   â”‚   â”‚   elif isinstance(first_exception, RuntimeError) and all(                                               â”‚
           â”‚   125 â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, RuntimeError) for exc in all_exceptions                                           â”‚
           â”‚   126 â”‚   â”‚   â”‚   â”‚   ):                                                                                                    â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:477 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    474 â”‚   â”‚   â”‚   â”‚   â”‚   response = ModelResponse(**init_response)                                                        â”‚
           â”‚    475 â”‚   â”‚   â”‚   â”‚   response = init_response                                                                             â”‚
           â”‚    476 â”‚   â”‚   â”‚   elif asyncio.iscoroutine(init_response):                                                                 â”‚
           â”‚ â±  477 â”‚   â”‚   â”‚   â”‚   response = await init_response                                                                       â”‚
           â”‚    478 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚    479 â”‚   â”‚   â”‚   â”‚   response = init_response  # type: ignore                                                             â”‚
           â”‚    480                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:566 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   563 â”‚   â”‚   â”‚   )                                                                                                         â”‚
           â”‚   564 â”‚   â”‚   â”‚   return model_response                                                                                     â”‚
           â”‚   565 â”‚   except Exception as e:                                                                                            â”‚
           â”‚ â± 566 â”‚   â”‚   raise e  # don't use verbose_logger.exception, if exception is raised                                         â”‚
           â”‚   567                                                                                                                       â”‚
           â”‚   568                                                                                                                       â”‚
           â”‚   569 async def ollama_aembeddings(                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:507 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   504 â”‚   try:                                                                                                              â”‚
           â”‚   505 â”‚   â”‚   timeout = aiohttp.ClientTimeout(total=litellm.request_timeout)  # 10 minutes                                  â”‚
           â”‚   506 â”‚   â”‚   async with aiohttp.ClientSession(timeout=timeout) as session:                                                 â”‚
           â”‚ â± 507 â”‚   â”‚   â”‚   resp = await session.post(url, json=data)                                                                 â”‚
           â”‚   508 â”‚   â”‚   â”‚                                                                                                             â”‚
           â”‚   509 â”‚   â”‚   â”‚   if resp.status != 200:                                                                                    â”‚
           â”‚   510 â”‚   â”‚   â”‚   â”‚   text = await resp.text()                                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py:696 in _request                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚    693 â”‚   â”‚   â”‚   â”‚   â”‚                                                                                                    â”‚
           â”‚    694 â”‚   â”‚   â”‚   â”‚   â”‚   # connection timeout                                                                             â”‚
           â”‚    695 â”‚   â”‚   â”‚   â”‚   â”‚   try:                                                                                             â”‚
           â”‚ â±  696 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   conn = await self._connector.connect(                                                        â”‚
           â”‚    697 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   req, traces=traces, timeout=real_timeout                                                 â”‚
           â”‚    698 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚    699 â”‚   â”‚   â”‚   â”‚   â”‚   except asyncio.TimeoutError as exc:                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:544 in connect                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚    541 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    542 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    543 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_start()                                                   â”‚
           â”‚ â±  544 â”‚   â”‚   â”‚   â”‚   proto = await self._create_connection(req, traces, timeout)                                          â”‚
           â”‚    545 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    546 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    547 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_end()                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1050 in _create_connection           â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1047 â”‚   â”‚   if req.proxy:                                                                                                â”‚
           â”‚   1048 â”‚   â”‚   â”‚   _, proto = await self._create_proxy_connection(req, traces, timeout)                                     â”‚
           â”‚   1049 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚ â± 1050 â”‚   â”‚   â”‚   _, proto = await self._create_direct_connection(req, traces, timeout)                                    â”‚
           â”‚   1051 â”‚   â”‚                                                                                                                â”‚
           â”‚   1052 â”‚   â”‚   return proto                                                                                                 â”‚
           â”‚   1053                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1394 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1391 â”‚   â”‚   â”‚   return transp, proto                                                                                     â”‚
           â”‚   1392 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   1393 â”‚   â”‚   â”‚   assert last_exc is not None                                                                              â”‚
           â”‚ â± 1394 â”‚   â”‚   â”‚   raise last_exc                                                                                           â”‚
           â”‚   1395 â”‚                                                                                                                    â”‚
           â”‚   1396 â”‚   async def _create_proxy_connection(                                                                              â”‚
           â”‚   1397 â”‚   â”‚   self, req: ClientRequest, traces: List["Trace"], timeout: "ClientTimeout"                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1363 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1360 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   1361 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1362 â”‚   â”‚   â”‚   try:                                                                                                     â”‚
           â”‚ â± 1363 â”‚   â”‚   â”‚   â”‚   transp, proto = await self._wrap_create_connection(                                                  â”‚
           â”‚   1364 â”‚   â”‚   â”‚   â”‚   â”‚   self._factory,                                                                                   â”‚
           â”‚   1365 â”‚   â”‚   â”‚   â”‚   â”‚   timeout=timeout,                                                                                 â”‚
           â”‚   1366 â”‚   â”‚   â”‚   â”‚   â”‚   ssl=sslcontext,                                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1124 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1121 â”‚   â”‚   except OSError as exc:                                                                                       â”‚
           â”‚   1122 â”‚   â”‚   â”‚   if exc.errno is None and isinstance(exc, asyncio.TimeoutError):                                          â”‚
           â”‚   1123 â”‚   â”‚   â”‚   â”‚   raise                                                                                                â”‚
           â”‚ â± 1124 â”‚   â”‚   â”‚   raise client_error(req.connection_key, exc) from exc                                                     â”‚
           â”‚   1125 â”‚                                                                                                                    â”‚
           â”‚   1126 â”‚   async def _wrap_existing_connection(                                                                             â”‚
           â”‚   1127 â”‚   â”‚   self,                                                                                                        â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno 111] Connect call failed 
           ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                                                    
                                                                                                                                          
           During handling of the above exception, another exception occurred:                                                            
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:276 in _run_with_timeout_failure                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   273 ) -> tuple[PQASession, AgentStatus]:                                                                                  â”‚
           â”‚   274 â”‚   try:                                                                                                              â”‚
           â”‚   275 â”‚   â”‚   async with asyncio.timeout(query.settings.agent.timeout):                                                     â”‚
           â”‚ â± 276 â”‚   â”‚   â”‚   status = await rollout()                                                                                  â”‚
           â”‚   277 â”‚   except TimeoutError:                                                                                              â”‚
           â”‚   278 â”‚   â”‚   logger.warning(                                                                                               â”‚
           â”‚   279 â”‚   â”‚   â”‚   f"Agent timeout after {query.settings.agent.timeout}-sec, just answering."                                â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:410 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   407 â”‚   â”‚   â”‚   â”‚   )                                                                                                     â”‚
           â”‚   408 â”‚   â”‚   â”‚   â”‚   return AgentStatus.TRUNCATED                                                                          â”‚
           â”‚   409 â”‚   â”‚   â”‚   agent_state.messages += obs                                                                               â”‚
           â”‚ â± 410 â”‚   â”‚   â”‚   for attempt in Retrying(                                                                                  â”‚
           â”‚   411 â”‚   â”‚   â”‚   â”‚   stop=stop_after_attempt(5),                                                                           â”‚
           â”‚   412 â”‚   â”‚   â”‚   â”‚   retry=retry_if_exception_type(MalformedMessageError),                                                 â”‚
           â”‚   413 â”‚   â”‚   â”‚   â”‚   before_sleep=before_sleep_log(logger, logging.WARNING),                                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:443 in __iter__                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   440 â”‚   â”‚                                                                                                                 â”‚
           â”‚   441 â”‚   â”‚   retry_state = RetryCallState(self, fn=None, args=(), kwargs={})                                               â”‚
           â”‚   442 â”‚   â”‚   while True:                                                                                                   â”‚
           â”‚ â± 443 â”‚   â”‚   â”‚   do = self.iter(retry_state=retry_state)                                                                   â”‚
           â”‚   444 â”‚   â”‚   â”‚   if isinstance(do, DoAttempt):                                                                             â”‚
           â”‚   445 â”‚   â”‚   â”‚   â”‚   yield AttemptManager(retry_state=retry_state)                                                         â”‚
           â”‚   446 â”‚   â”‚   â”‚   elif isinstance(do, DoSleep):                                                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:376 in iter                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   373 â”‚   â”‚   self._begin_iter(retry_state)                                                                                 â”‚
           â”‚   374 â”‚   â”‚   result = None                                                                                                 â”‚
           â”‚   375 â”‚   â”‚   for action in self.iter_state.actions:                                                                        â”‚
           â”‚ â± 376 â”‚   â”‚   â”‚   result = action(retry_state)                                                                              â”‚
           â”‚   377 â”‚   â”‚   return result                                                                                                 â”‚
           â”‚   378 â”‚                                                                                                                     â”‚
           â”‚   379 â”‚   def _begin_iter(self, retry_state: "RetryCallState") -> None:  # noqa                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:398 in <lambda>                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   395 â”‚                                                                                                                     â”‚
           â”‚   396 â”‚   def _post_retry_check_actions(self, retry_state: "RetryCallState") -> None:                                       â”‚
           â”‚   397 â”‚   â”‚   if not (self.iter_state.is_explicit_retry or self.iter_state.retry_run_result):                               â”‚
           â”‚ â± 398 â”‚   â”‚   â”‚   self._add_action_func(lambda rs: rs.outcome.result())                                                     â”‚
           â”‚   399 â”‚   â”‚   â”‚   return                                                                                                    â”‚
           â”‚   400 â”‚   â”‚                                                                                                                 â”‚
           â”‚   401 â”‚   â”‚   if self.after is not None:                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:449 in result                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚   446 â”‚   â”‚   â”‚   â”‚   if self._state in [CANCELLED, CANCELLED_AND_NOTIFIED]:                                                â”‚
           â”‚   447 â”‚   â”‚   â”‚   â”‚   â”‚   raise CancelledError()                                                                            â”‚
           â”‚   448 â”‚   â”‚   â”‚   â”‚   elif self._state == FINISHED:                                                                         â”‚
           â”‚ â± 449 â”‚   â”‚   â”‚   â”‚   â”‚   return self.__get_result()                                                                        â”‚
           â”‚   450 â”‚   â”‚   â”‚   â”‚                                                                                                         â”‚
           â”‚   451 â”‚   â”‚   â”‚   â”‚   self._condition.wait(timeout)                                                                         â”‚
           â”‚   452                                                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:401 in __get_result                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   398 â”‚   def __get_result(self):                                                                                           â”‚
           â”‚   399 â”‚   â”‚   if self._exception:                                                                                           â”‚
           â”‚   400 â”‚   â”‚   â”‚   try:                                                                                                      â”‚
           â”‚ â± 401 â”‚   â”‚   â”‚   â”‚   raise self._exception                                                                                 â”‚
           â”‚   402 â”‚   â”‚   â”‚   finally:                                                                                                  â”‚
           â”‚   403 â”‚   â”‚   â”‚   â”‚   # Break a reference cycle with the exception in self._exception                                       â”‚
           â”‚   404 â”‚   â”‚   â”‚   â”‚   self = None                                                                                           â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:417 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   414 â”‚   â”‚   â”‚   â”‚   reraise=True,                                                                                         â”‚
           â”‚   415 â”‚   â”‚   â”‚   ):                                                                                                        â”‚
           â”‚   416 â”‚   â”‚   â”‚   â”‚   with attempt:  # Retrying if ToolSelector fails to select a tool                                      â”‚
           â”‚ â± 417 â”‚   â”‚   â”‚   â”‚   â”‚   action = await agent(agent_state.messages, tools)                                                 â”‚
           â”‚   418 â”‚   â”‚   â”‚   agent_state.messages = [*agent_state.messages, action]                                                    â”‚
           â”‚   419 â”‚   â”‚   â”‚   if on_agent_action_callback:                                                                              â”‚
           â”‚   420 â”‚   â”‚   â”‚   â”‚   await on_agent_action_callback(action, agent_state)                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aviary/tools/utils.py:182 in __call__                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   179 â”‚   â”‚   â”‚   self._ledger.messages.extend(messages)                                                                    â”‚
           â”‚   180 â”‚   â”‚   â”‚   messages = self._ledger.messages                                                                          â”‚
           â”‚   181 â”‚   â”‚                                                                                                                 â”‚
           â”‚ â± 182 â”‚   â”‚   model_response = await self._bound_acompletion(                                                               â”‚
           â”‚   183 â”‚   â”‚   â”‚   messages=MessagesAdapter.dump_python(                                                                     â”‚
           â”‚   184 â”‚   â”‚   â”‚   â”‚   messages, exclude_none=True, by_alias=True                                                            â”‚
           â”‚   185 â”‚   â”‚   â”‚   ),                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:817 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    814 â”‚   â”‚   â”‚   â”‚   â”‚   original_exception=e,                                                                            â”‚
           â”‚    815 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    816 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚ â±  817 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    818 â”‚                                                                                                                    â”‚
           â”‚    819 â”‚   async def _acompletion(                                                                                          â”‚
           â”‚    820 â”‚   â”‚   self, model: str, messages: List[Dict[str, str]], **kwargs                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:793 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    790 â”‚   â”‚   â”‚   if request_priority is not None and isinstance(request_priority, int):                                   â”‚
           â”‚    791 â”‚   â”‚   â”‚   â”‚   response = await self.schedule_acompletion(**kwargs)                                                 â”‚
           â”‚    792 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â±  793 â”‚   â”‚   â”‚   â”‚   response = await self.async_function_with_fallbacks(**kwargs)                                        â”‚
           â”‚    794 â”‚   â”‚   â”‚   end_time = time.time()                                                                                   â”‚
           â”‚    795 â”‚   â”‚   â”‚   _duration = end_time - start_time                                                                        â”‚
           â”‚    796 â”‚   â”‚   â”‚   asyncio.create_task(                                                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2795 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2792 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚   2793 â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                                â”‚
           â”‚   2794 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2795 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2796 â”‚                                                                                                                    â”‚
           â”‚   2797 â”‚   def _handle_mock_testing_fallbacks(                                                                              â”‚
           â”‚   2798 â”‚   â”‚   self,                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2631 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2628 â”‚   â”‚   â”‚   â”‚   content_policy_fallbacks=content_policy_fallbacks,                                                   â”‚
           â”‚   2629 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2630 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2631 â”‚   â”‚   â”‚   response = await self.async_function_with_retries(*args, **kwargs)                                       â”‚
           â”‚   2632 â”‚   â”‚   â”‚   verbose_router_logger.debug(f"Async Response: {response}")                                               â”‚
           â”‚   2633 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2634 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2967 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2964 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "max_retries", num_retries)                                              â”‚
           â”‚   2965 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "num_retries", current_attempt)                                          â”‚
           â”‚   2966 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2967 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2968 â”‚                                                                                                                    â”‚
           â”‚   2969 â”‚   async def make_call(self, original_function: Any, *args, **kwargs):                                              â”‚
           â”‚   2970 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2879 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2876 â”‚   â”‚   â”‚   â”‚   model_group=model_group, kwargs=kwargs                                                               â”‚
           â”‚   2877 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2878 â”‚   â”‚   â”‚   # if the function call is successful, no exception will be raised and we'll                              â”‚
           â”‚        break out of the loop                                                                                                â”‚
           â”‚ â± 2879 â”‚   â”‚   â”‚   response = await self.make_call(original_function, *args, **kwargs)                                      â”‚
           â”‚   2880 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   2881 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2882 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2976 in make_call                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2973 â”‚   â”‚   model_group = kwargs.get("model")                                                                            â”‚
           â”‚   2974 â”‚   â”‚   response = original_function(*args, **kwargs)                                                                â”‚
           â”‚   2975 â”‚   â”‚   if inspect.iscoroutinefunction(response) or inspect.isawaitable(response):                                   â”‚
           â”‚ â± 2976 â”‚   â”‚   â”‚   response = await response                                                                                â”‚
           â”‚   2977 â”‚   â”‚   ## PROCESS RESPONSE HEADERS                                                                                  â”‚
           â”‚   2978 â”‚   â”‚   await self.set_response_headers(response=response, model_group=model_group)                                  â”‚
           â”‚   2979                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:947 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    944 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚    945 â”‚   â”‚   â”‚   if model_name is not None:                                                                               â”‚
           â”‚    946 â”‚   â”‚   â”‚   â”‚   self.fail_calls[model_name] += 1                                                                     â”‚
           â”‚ â±  947 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    948 â”‚                                                                                                                    â”‚
           â”‚    949 â”‚   def _update_kwargs_before_fallbacks(self, model: str, kwargs: dict) -> None:                                     â”‚
           â”‚    950 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:915 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    912 â”‚   â”‚   â”‚   â”‚   â”‚   parent_otel_span=parent_otel_span,                                                               â”‚
           â”‚    913 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    914 â”‚   â”‚   â”‚   â”‚                                                                                                        â”‚
           â”‚ â±  915 â”‚   â”‚   â”‚   â”‚   response = await _response                                                                           â”‚
           â”‚    916 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚    917 â”‚   â”‚   â”‚   ## CHECK CONTENT FILTER ERROR ##                                                                         â”‚
           â”‚    918 â”‚   â”‚   â”‚   if isinstance(response, ModelResponse):                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1175 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1172 â”‚   â”‚   â”‚   â”‚   â”‚   else:                                                                                            â”‚
           â”‚   1173 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   kwargs["model"] = context_window_fallback_dict[model]                                        â”‚
           â”‚   1174 â”‚   â”‚   â”‚   â”‚   â”‚   return await original_function(*args, **kwargs)                                                  â”‚
           â”‚ â± 1175 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   1176 â”‚                                                                                                                    â”‚
           â”‚   1177 â”‚   is_coroutine = inspect.iscoroutinefunction(original_function)                                                    â”‚
           â”‚   1178                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1031 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1028 â”‚   â”‚   â”‚   â”‚   return _caching_handler_response.final_embedding_cached_response                                     â”‚
           â”‚   1029 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1030 â”‚   â”‚   â”‚   # MODEL CALL                                                                                             â”‚
           â”‚ â± 1031 â”‚   â”‚   â”‚   result = await original_function(*args, **kwargs)                                                        â”‚
           â”‚   1032 â”‚   â”‚   â”‚   end_time = datetime.datetime.now()                                                                       â”‚
           â”‚   1033 â”‚   â”‚   â”‚   if "stream" in kwargs and kwargs["stream"] is True:                                                      â”‚
           â”‚   1034 â”‚   â”‚   â”‚   â”‚   if (                                                                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:499 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    496 â”‚   â”‚   return response                                                                                              â”‚
           â”‚    497 â”‚   except Exception as e:                                                                                           â”‚
           â”‚    498 â”‚   â”‚   custom_llm_provider = custom_llm_provider or "openai"                                                        â”‚
           â”‚ â±  499 â”‚   â”‚   raise exception_type(                                                                                        â”‚
           â”‚    500 â”‚   â”‚   â”‚   model=model,                                                                                             â”‚
           â”‚    501 â”‚   â”‚   â”‚   custom_llm_provider=custom_llm_provider,                                                                 â”‚
           â”‚    502 â”‚   â”‚   â”‚   original_exception=e,                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:212 â”‚
           â”‚ 5 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2122 â”‚   â”‚   # don't let an error with mapping interrupt the user from receiving an error                                 â”‚
           â”‚        from the llm api calls                                                                                               â”‚
           â”‚   2123 â”‚   â”‚   if exception_mapping_worked:                                                                                 â”‚
           â”‚   2124 â”‚   â”‚   â”‚   setattr(e, "litellm_response_headers", litellm_response_headers)                                         â”‚
           â”‚ â± 2125 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   2126 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   2127 â”‚   â”‚   â”‚   for error_type in litellm.LITELLM_EXCEPTION_TYPES:                                                       â”‚
           â”‚   2128 â”‚   â”‚   â”‚   â”‚   if isinstance(e, error_type):                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:210 â”‚
           â”‚ 1 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2098 â”‚   â”‚   â”‚   â”‚   â”‚   request=original_exception.request,                                                              â”‚
           â”‚   2099 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚   2100 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â± 2101 â”‚   â”‚   â”‚   â”‚   raise APIConnectionError(                                                                            â”‚
           â”‚   2102 â”‚   â”‚   â”‚   â”‚   â”‚   message="{}\n{}".format(                                                                         â”‚
           â”‚   2103 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   str(original_exception), traceback.format_exc()                                              â”‚
           â”‚   2104 â”‚   â”‚   â”‚   â”‚   â”‚   ),                                                                                               â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           APIConnectionError: litellm.APIConnectionError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1109, in                 
           _wrap_create_connection                                                                                                        
               sock = await aiohappyeyeballs.start_connection(                                                                            
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                            
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py", line 123, in              
           start_connection                                                                                                               
               raise OSError(first_errno, msg)                                                                                            
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py", line 477, in acompletion           
               response = await init_response                                                                                             
                          ^^^^^^^^^^^^^^^^^^^                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 566, in                
           ollama_acompletion                                                                                                             
               raise e  # don't use verbose_logger.exception, if exception is raised                                                      
               ^^^^^^^                                                                                                                    
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 507, in                
           ollama_acompletion                                                                                                             
               resp = await session.post(url, json=data)                                                                                  
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                  
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py", line 696, in _request            
               conn = await self._connector.connect(                                                                                      
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 544, in connect          
               proto = await self._create_connection(req, traces, timeout)                                                                
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1050, in                 
           _create_connection                                                                                                             
               _, proto = await self._create_direct_connection(req, traces, timeout)                                                      
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1394, in                 
           _create_direct_connection                                                                                                      
               raise last_exc                                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1363, in                 
           _create_direct_connection                                                                                                      
               transp, proto = await self._wrap_create_connection(                                                                        
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                        
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1124, in                 
           _wrap_create_connection                                                                                                        
               raise client_error(req.connection_key, exc) from exc                                                                       
           aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
                                                                                                                                          
           Received Model Group=ollama/llama3.2                                                                                           
           Available Model Group Fallbacks=None LiteLLM Retried: 2 times, LiteLLM Max Retries: 3                                          
[00:53:36] Answer:                                                                                                                        


 ANSWERING QUESTION: sciqag_question_59.json
 ----------------------------- 



[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.

[00:53:56] Trajectory failed.                                                                                                             
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1109 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1106 â”‚   â”‚   â”‚   async with ceil_timeout(                                                                                 â”‚
           â”‚   1107 â”‚   â”‚   â”‚   â”‚   timeout.sock_connect, ceil_threshold=timeout.ceil_threshold                                          â”‚
           â”‚   1108 â”‚   â”‚   â”‚   ):                                                                                                       â”‚
           â”‚ â± 1109 â”‚   â”‚   â”‚   â”‚   sock = await aiohappyeyeballs.start_connection(                                                      â”‚
           â”‚   1110 â”‚   â”‚   â”‚   â”‚   â”‚   addr_infos=addr_infos,                                                                           â”‚
           â”‚   1111 â”‚   â”‚   â”‚   â”‚   â”‚   local_addr_infos=self._local_addr_infos,                                                         â”‚
           â”‚   1112 â”‚   â”‚   â”‚   â”‚   â”‚   happy_eyeballs_delay=self._happy_eyeballs_delay,                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py:123 in start_connection          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   120 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, OSError) and exc.errno == first_errno                                         â”‚
           â”‚   121 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   for exc in all_exceptions                                                                     â”‚
           â”‚   122 â”‚   â”‚   â”‚   â”‚   â”‚   ):                                                                                                â”‚
           â”‚ â± 123 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   raise OSError(first_errno, msg)                                                               â”‚
           â”‚   124 â”‚   â”‚   â”‚   â”‚   elif isinstance(first_exception, RuntimeError) and all(                                               â”‚
           â”‚   125 â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, RuntimeError) for exc in all_exceptions                                           â”‚
           â”‚   126 â”‚   â”‚   â”‚   â”‚   ):                                                                                                    â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:477 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    474 â”‚   â”‚   â”‚   â”‚   â”‚   response = ModelResponse(**init_response)                                                        â”‚
           â”‚    475 â”‚   â”‚   â”‚   â”‚   response = init_response                                                                             â”‚
           â”‚    476 â”‚   â”‚   â”‚   elif asyncio.iscoroutine(init_response):                                                                 â”‚
           â”‚ â±  477 â”‚   â”‚   â”‚   â”‚   response = await init_response                                                                       â”‚
           â”‚    478 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚    479 â”‚   â”‚   â”‚   â”‚   response = init_response  # type: ignore                                                             â”‚
           â”‚    480                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:566 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   563 â”‚   â”‚   â”‚   )                                                                                                         â”‚
           â”‚   564 â”‚   â”‚   â”‚   return model_response                                                                                     â”‚
           â”‚   565 â”‚   except Exception as e:                                                                                            â”‚
           â”‚ â± 566 â”‚   â”‚   raise e  # don't use verbose_logger.exception, if exception is raised                                         â”‚
           â”‚   567                                                                                                                       â”‚
           â”‚   568                                                                                                                       â”‚
           â”‚   569 async def ollama_aembeddings(                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:507 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   504 â”‚   try:                                                                                                              â”‚
           â”‚   505 â”‚   â”‚   timeout = aiohttp.ClientTimeout(total=litellm.request_timeout)  # 10 minutes                                  â”‚
           â”‚   506 â”‚   â”‚   async with aiohttp.ClientSession(timeout=timeout) as session:                                                 â”‚
           â”‚ â± 507 â”‚   â”‚   â”‚   resp = await session.post(url, json=data)                                                                 â”‚
           â”‚   508 â”‚   â”‚   â”‚                                                                                                             â”‚
           â”‚   509 â”‚   â”‚   â”‚   if resp.status != 200:                                                                                    â”‚
           â”‚   510 â”‚   â”‚   â”‚   â”‚   text = await resp.text()                                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py:696 in _request                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚    693 â”‚   â”‚   â”‚   â”‚   â”‚                                                                                                    â”‚
           â”‚    694 â”‚   â”‚   â”‚   â”‚   â”‚   # connection timeout                                                                             â”‚
           â”‚    695 â”‚   â”‚   â”‚   â”‚   â”‚   try:                                                                                             â”‚
           â”‚ â±  696 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   conn = await self._connector.connect(                                                        â”‚
           â”‚    697 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   req, traces=traces, timeout=real_timeout                                                 â”‚
           â”‚    698 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚    699 â”‚   â”‚   â”‚   â”‚   â”‚   except asyncio.TimeoutError as exc:                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:544 in connect                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚    541 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    542 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    543 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_start()                                                   â”‚
           â”‚ â±  544 â”‚   â”‚   â”‚   â”‚   proto = await self._create_connection(req, traces, timeout)                                          â”‚
           â”‚    545 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    546 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    547 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_end()                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1050 in _create_connection           â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1047 â”‚   â”‚   if req.proxy:                                                                                                â”‚
           â”‚   1048 â”‚   â”‚   â”‚   _, proto = await self._create_proxy_connection(req, traces, timeout)                                     â”‚
           â”‚   1049 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚ â± 1050 â”‚   â”‚   â”‚   _, proto = await self._create_direct_connection(req, traces, timeout)                                    â”‚
           â”‚   1051 â”‚   â”‚                                                                                                                â”‚
           â”‚   1052 â”‚   â”‚   return proto                                                                                                 â”‚
           â”‚   1053                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1394 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1391 â”‚   â”‚   â”‚   return transp, proto                                                                                     â”‚
           â”‚   1392 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   1393 â”‚   â”‚   â”‚   assert last_exc is not None                                                                              â”‚
           â”‚ â± 1394 â”‚   â”‚   â”‚   raise last_exc                                                                                           â”‚
           â”‚   1395 â”‚                                                                                                                    â”‚
           â”‚   1396 â”‚   async def _create_proxy_connection(                                                                              â”‚
           â”‚   1397 â”‚   â”‚   self, req: ClientRequest, traces: List["Trace"], timeout: "ClientTimeout"                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1363 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1360 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   1361 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1362 â”‚   â”‚   â”‚   try:                                                                                                     â”‚
           â”‚ â± 1363 â”‚   â”‚   â”‚   â”‚   transp, proto = await self._wrap_create_connection(                                                  â”‚
           â”‚   1364 â”‚   â”‚   â”‚   â”‚   â”‚   self._factory,                                                                                   â”‚
           â”‚   1365 â”‚   â”‚   â”‚   â”‚   â”‚   timeout=timeout,                                                                                 â”‚
           â”‚   1366 â”‚   â”‚   â”‚   â”‚   â”‚   ssl=sslcontext,                                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1124 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1121 â”‚   â”‚   except OSError as exc:                                                                                       â”‚
           â”‚   1122 â”‚   â”‚   â”‚   if exc.errno is None and isinstance(exc, asyncio.TimeoutError):                                          â”‚
           â”‚   1123 â”‚   â”‚   â”‚   â”‚   raise                                                                                                â”‚
           â”‚ â± 1124 â”‚   â”‚   â”‚   raise client_error(req.connection_key, exc) from exc                                                     â”‚
           â”‚   1125 â”‚                                                                                                                    â”‚
           â”‚   1126 â”‚   async def _wrap_existing_connection(                                                                             â”‚
           â”‚   1127 â”‚   â”‚   self,                                                                                                        â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno 111] Connect call failed 
           ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                                                    
                                                                                                                                          
           During handling of the above exception, another exception occurred:                                                            
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:276 in _run_with_timeout_failure                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   273 ) -> tuple[PQASession, AgentStatus]:                                                                                  â”‚
           â”‚   274 â”‚   try:                                                                                                              â”‚
           â”‚   275 â”‚   â”‚   async with asyncio.timeout(query.settings.agent.timeout):                                                     â”‚
           â”‚ â± 276 â”‚   â”‚   â”‚   status = await rollout()                                                                                  â”‚
           â”‚   277 â”‚   except TimeoutError:                                                                                              â”‚
           â”‚   278 â”‚   â”‚   logger.warning(                                                                                               â”‚
           â”‚   279 â”‚   â”‚   â”‚   f"Agent timeout after {query.settings.agent.timeout}-sec, just answering."                                â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:410 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   407 â”‚   â”‚   â”‚   â”‚   )                                                                                                     â”‚
           â”‚   408 â”‚   â”‚   â”‚   â”‚   return AgentStatus.TRUNCATED                                                                          â”‚
           â”‚   409 â”‚   â”‚   â”‚   agent_state.messages += obs                                                                               â”‚
           â”‚ â± 410 â”‚   â”‚   â”‚   for attempt in Retrying(                                                                                  â”‚
           â”‚   411 â”‚   â”‚   â”‚   â”‚   stop=stop_after_attempt(5),                                                                           â”‚
           â”‚   412 â”‚   â”‚   â”‚   â”‚   retry=retry_if_exception_type(MalformedMessageError),                                                 â”‚
           â”‚   413 â”‚   â”‚   â”‚   â”‚   before_sleep=before_sleep_log(logger, logging.WARNING),                                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:443 in __iter__                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   440 â”‚   â”‚                                                                                                                 â”‚
           â”‚   441 â”‚   â”‚   retry_state = RetryCallState(self, fn=None, args=(), kwargs={})                                               â”‚
           â”‚   442 â”‚   â”‚   while True:                                                                                                   â”‚
           â”‚ â± 443 â”‚   â”‚   â”‚   do = self.iter(retry_state=retry_state)                                                                   â”‚
           â”‚   444 â”‚   â”‚   â”‚   if isinstance(do, DoAttempt):                                                                             â”‚
           â”‚   445 â”‚   â”‚   â”‚   â”‚   yield AttemptManager(retry_state=retry_state)                                                         â”‚
           â”‚   446 â”‚   â”‚   â”‚   elif isinstance(do, DoSleep):                                                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:376 in iter                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   373 â”‚   â”‚   self._begin_iter(retry_state)                                                                                 â”‚
           â”‚   374 â”‚   â”‚   result = None                                                                                                 â”‚
           â”‚   375 â”‚   â”‚   for action in self.iter_state.actions:                                                                        â”‚
           â”‚ â± 376 â”‚   â”‚   â”‚   result = action(retry_state)                                                                              â”‚
           â”‚   377 â”‚   â”‚   return result                                                                                                 â”‚
           â”‚   378 â”‚                                                                                                                     â”‚
           â”‚   379 â”‚   def _begin_iter(self, retry_state: "RetryCallState") -> None:  # noqa                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:398 in <lambda>                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   395 â”‚                                                                                                                     â”‚
           â”‚   396 â”‚   def _post_retry_check_actions(self, retry_state: "RetryCallState") -> None:                                       â”‚
           â”‚   397 â”‚   â”‚   if not (self.iter_state.is_explicit_retry or self.iter_state.retry_run_result):                               â”‚
           â”‚ â± 398 â”‚   â”‚   â”‚   self._add_action_func(lambda rs: rs.outcome.result())                                                     â”‚
           â”‚   399 â”‚   â”‚   â”‚   return                                                                                                    â”‚
           â”‚   400 â”‚   â”‚                                                                                                                 â”‚
           â”‚   401 â”‚   â”‚   if self.after is not None:                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:449 in result                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚   446 â”‚   â”‚   â”‚   â”‚   if self._state in [CANCELLED, CANCELLED_AND_NOTIFIED]:                                                â”‚
           â”‚   447 â”‚   â”‚   â”‚   â”‚   â”‚   raise CancelledError()                                                                            â”‚
           â”‚   448 â”‚   â”‚   â”‚   â”‚   elif self._state == FINISHED:                                                                         â”‚
           â”‚ â± 449 â”‚   â”‚   â”‚   â”‚   â”‚   return self.__get_result()                                                                        â”‚
           â”‚   450 â”‚   â”‚   â”‚   â”‚                                                                                                         â”‚
           â”‚   451 â”‚   â”‚   â”‚   â”‚   self._condition.wait(timeout)                                                                         â”‚
           â”‚   452                                                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:401 in __get_result                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   398 â”‚   def __get_result(self):                                                                                           â”‚
           â”‚   399 â”‚   â”‚   if self._exception:                                                                                           â”‚
           â”‚   400 â”‚   â”‚   â”‚   try:                                                                                                      â”‚
           â”‚ â± 401 â”‚   â”‚   â”‚   â”‚   raise self._exception                                                                                 â”‚
           â”‚   402 â”‚   â”‚   â”‚   finally:                                                                                                  â”‚
           â”‚   403 â”‚   â”‚   â”‚   â”‚   # Break a reference cycle with the exception in self._exception                                       â”‚
           â”‚   404 â”‚   â”‚   â”‚   â”‚   self = None                                                                                           â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:417 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   414 â”‚   â”‚   â”‚   â”‚   reraise=True,                                                                                         â”‚
           â”‚   415 â”‚   â”‚   â”‚   ):                                                                                                        â”‚
           â”‚   416 â”‚   â”‚   â”‚   â”‚   with attempt:  # Retrying if ToolSelector fails to select a tool                                      â”‚
           â”‚ â± 417 â”‚   â”‚   â”‚   â”‚   â”‚   action = await agent(agent_state.messages, tools)                                                 â”‚
           â”‚   418 â”‚   â”‚   â”‚   agent_state.messages = [*agent_state.messages, action]                                                    â”‚
           â”‚   419 â”‚   â”‚   â”‚   if on_agent_action_callback:                                                                              â”‚
           â”‚   420 â”‚   â”‚   â”‚   â”‚   await on_agent_action_callback(action, agent_state)                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aviary/tools/utils.py:182 in __call__                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   179 â”‚   â”‚   â”‚   self._ledger.messages.extend(messages)                                                                    â”‚
           â”‚   180 â”‚   â”‚   â”‚   messages = self._ledger.messages                                                                          â”‚
           â”‚   181 â”‚   â”‚                                                                                                                 â”‚
           â”‚ â± 182 â”‚   â”‚   model_response = await self._bound_acompletion(                                                               â”‚
           â”‚   183 â”‚   â”‚   â”‚   messages=MessagesAdapter.dump_python(                                                                     â”‚
           â”‚   184 â”‚   â”‚   â”‚   â”‚   messages, exclude_none=True, by_alias=True                                                            â”‚
           â”‚   185 â”‚   â”‚   â”‚   ),                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:817 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    814 â”‚   â”‚   â”‚   â”‚   â”‚   original_exception=e,                                                                            â”‚
           â”‚    815 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    816 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚ â±  817 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    818 â”‚                                                                                                                    â”‚
           â”‚    819 â”‚   async def _acompletion(                                                                                          â”‚
           â”‚    820 â”‚   â”‚   self, model: str, messages: List[Dict[str, str]], **kwargs                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:793 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    790 â”‚   â”‚   â”‚   if request_priority is not None and isinstance(request_priority, int):                                   â”‚
           â”‚    791 â”‚   â”‚   â”‚   â”‚   response = await self.schedule_acompletion(**kwargs)                                                 â”‚
           â”‚    792 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â±  793 â”‚   â”‚   â”‚   â”‚   response = await self.async_function_with_fallbacks(**kwargs)                                        â”‚
           â”‚    794 â”‚   â”‚   â”‚   end_time = time.time()                                                                                   â”‚
           â”‚    795 â”‚   â”‚   â”‚   _duration = end_time - start_time                                                                        â”‚
           â”‚    796 â”‚   â”‚   â”‚   asyncio.create_task(                                                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2795 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2792 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚   2793 â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                                â”‚
           â”‚   2794 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2795 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2796 â”‚                                                                                                                    â”‚
           â”‚   2797 â”‚   def _handle_mock_testing_fallbacks(                                                                              â”‚
           â”‚   2798 â”‚   â”‚   self,                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2631 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2628 â”‚   â”‚   â”‚   â”‚   content_policy_fallbacks=content_policy_fallbacks,                                                   â”‚
           â”‚   2629 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2630 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2631 â”‚   â”‚   â”‚   response = await self.async_function_with_retries(*args, **kwargs)                                       â”‚
           â”‚   2632 â”‚   â”‚   â”‚   verbose_router_logger.debug(f"Async Response: {response}")                                               â”‚
           â”‚   2633 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2634 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2967 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2964 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "max_retries", num_retries)                                              â”‚
           â”‚   2965 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "num_retries", current_attempt)                                          â”‚
           â”‚   2966 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2967 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2968 â”‚                                                                                                                    â”‚
           â”‚   2969 â”‚   async def make_call(self, original_function: Any, *args, **kwargs):                                              â”‚
           â”‚   2970 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2879 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2876 â”‚   â”‚   â”‚   â”‚   model_group=model_group, kwargs=kwargs                                                               â”‚
           â”‚   2877 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2878 â”‚   â”‚   â”‚   # if the function call is successful, no exception will be raised and we'll                              â”‚
           â”‚        break out of the loop                                                                                                â”‚
           â”‚ â± 2879 â”‚   â”‚   â”‚   response = await self.make_call(original_function, *args, **kwargs)                                      â”‚
           â”‚   2880 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   2881 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2882 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2976 in make_call                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2973 â”‚   â”‚   model_group = kwargs.get("model")                                                                            â”‚
           â”‚   2974 â”‚   â”‚   response = original_function(*args, **kwargs)                                                                â”‚
           â”‚   2975 â”‚   â”‚   if inspect.iscoroutinefunction(response) or inspect.isawaitable(response):                                   â”‚
           â”‚ â± 2976 â”‚   â”‚   â”‚   response = await response                                                                                â”‚
           â”‚   2977 â”‚   â”‚   ## PROCESS RESPONSE HEADERS                                                                                  â”‚
           â”‚   2978 â”‚   â”‚   await self.set_response_headers(response=response, model_group=model_group)                                  â”‚
           â”‚   2979                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:947 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    944 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚    945 â”‚   â”‚   â”‚   if model_name is not None:                                                                               â”‚
           â”‚    946 â”‚   â”‚   â”‚   â”‚   self.fail_calls[model_name] += 1                                                                     â”‚
           â”‚ â±  947 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    948 â”‚                                                                                                                    â”‚
           â”‚    949 â”‚   def _update_kwargs_before_fallbacks(self, model: str, kwargs: dict) -> None:                                     â”‚
           â”‚    950 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:915 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    912 â”‚   â”‚   â”‚   â”‚   â”‚   parent_otel_span=parent_otel_span,                                                               â”‚
           â”‚    913 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    914 â”‚   â”‚   â”‚   â”‚                                                                                                        â”‚
           â”‚ â±  915 â”‚   â”‚   â”‚   â”‚   response = await _response                                                                           â”‚
           â”‚    916 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚    917 â”‚   â”‚   â”‚   ## CHECK CONTENT FILTER ERROR ##                                                                         â”‚
           â”‚    918 â”‚   â”‚   â”‚   if isinstance(response, ModelResponse):                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1175 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1172 â”‚   â”‚   â”‚   â”‚   â”‚   else:                                                                                            â”‚
           â”‚   1173 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   kwargs["model"] = context_window_fallback_dict[model]                                        â”‚
           â”‚   1174 â”‚   â”‚   â”‚   â”‚   â”‚   return await original_function(*args, **kwargs)                                                  â”‚
           â”‚ â± 1175 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   1176 â”‚                                                                                                                    â”‚
           â”‚   1177 â”‚   is_coroutine = inspect.iscoroutinefunction(original_function)                                                    â”‚
           â”‚   1178                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1031 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1028 â”‚   â”‚   â”‚   â”‚   return _caching_handler_response.final_embedding_cached_response                                     â”‚
           â”‚   1029 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1030 â”‚   â”‚   â”‚   # MODEL CALL                                                                                             â”‚
           â”‚ â± 1031 â”‚   â”‚   â”‚   result = await original_function(*args, **kwargs)                                                        â”‚
           â”‚   1032 â”‚   â”‚   â”‚   end_time = datetime.datetime.now()                                                                       â”‚
           â”‚   1033 â”‚   â”‚   â”‚   if "stream" in kwargs and kwargs["stream"] is True:                                                      â”‚
           â”‚   1034 â”‚   â”‚   â”‚   â”‚   if (                                                                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:499 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    496 â”‚   â”‚   return response                                                                                              â”‚
           â”‚    497 â”‚   except Exception as e:                                                                                           â”‚
           â”‚    498 â”‚   â”‚   custom_llm_provider = custom_llm_provider or "openai"                                                        â”‚
           â”‚ â±  499 â”‚   â”‚   raise exception_type(                                                                                        â”‚
           â”‚    500 â”‚   â”‚   â”‚   model=model,                                                                                             â”‚
           â”‚    501 â”‚   â”‚   â”‚   custom_llm_provider=custom_llm_provider,                                                                 â”‚
           â”‚    502 â”‚   â”‚   â”‚   original_exception=e,                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:212 â”‚
           â”‚ 5 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2122 â”‚   â”‚   # don't let an error with mapping interrupt the user from receiving an error                                 â”‚
           â”‚        from the llm api calls                                                                                               â”‚
           â”‚   2123 â”‚   â”‚   if exception_mapping_worked:                                                                                 â”‚
           â”‚   2124 â”‚   â”‚   â”‚   setattr(e, "litellm_response_headers", litellm_response_headers)                                         â”‚
           â”‚ â± 2125 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   2126 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   2127 â”‚   â”‚   â”‚   for error_type in litellm.LITELLM_EXCEPTION_TYPES:                                                       â”‚
           â”‚   2128 â”‚   â”‚   â”‚   â”‚   if isinstance(e, error_type):                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:210 â”‚
           â”‚ 1 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2098 â”‚   â”‚   â”‚   â”‚   â”‚   request=original_exception.request,                                                              â”‚
           â”‚   2099 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚   2100 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â± 2101 â”‚   â”‚   â”‚   â”‚   raise APIConnectionError(                                                                            â”‚
           â”‚   2102 â”‚   â”‚   â”‚   â”‚   â”‚   message="{}\n{}".format(                                                                         â”‚
           â”‚   2103 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   str(original_exception), traceback.format_exc()                                              â”‚
           â”‚   2104 â”‚   â”‚   â”‚   â”‚   â”‚   ),                                                                                               â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           APIConnectionError: litellm.APIConnectionError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1109, in                 
           _wrap_create_connection                                                                                                        
               sock = await aiohappyeyeballs.start_connection(                                                                            
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                            
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py", line 123, in              
           start_connection                                                                                                               
               raise OSError(first_errno, msg)                                                                                            
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py", line 477, in acompletion           
               response = await init_response                                                                                             
                          ^^^^^^^^^^^^^^^^^^^                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 566, in                
           ollama_acompletion                                                                                                             
               raise e  # don't use verbose_logger.exception, if exception is raised                                                      
               ^^^^^^^                                                                                                                    
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 507, in                
           ollama_acompletion                                                                                                             
               resp = await session.post(url, json=data)                                                                                  
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                  
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py", line 696, in _request            
               conn = await self._connector.connect(                                                                                      
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 544, in connect          
               proto = await self._create_connection(req, traces, timeout)                                                                
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1050, in                 
           _create_connection                                                                                                             
               _, proto = await self._create_direct_connection(req, traces, timeout)                                                      
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1394, in                 
           _create_direct_connection                                                                                                      
               raise last_exc                                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1363, in                 
           _create_direct_connection                                                                                                      
               transp, proto = await self._wrap_create_connection(                                                                        
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                        
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1124, in                 
           _wrap_create_connection                                                                                                        
               raise client_error(req.connection_key, exc) from exc                                                                       
           aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
                                                                                                                                          
           Received Model Group=ollama/llama3.2                                                                                           
           Available Model Group Fallbacks=None LiteLLM Retried: 2 times, LiteLLM Max Retries: 3                                          
[00:53:58] Answer:                                                                                                                        


 ANSWERING QUESTION: sciqag_question_6.json
 ----------------------------- 



[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.

[00:54:18] Trajectory failed.                                                                                                             
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1109 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1106 â”‚   â”‚   â”‚   async with ceil_timeout(                                                                                 â”‚
           â”‚   1107 â”‚   â”‚   â”‚   â”‚   timeout.sock_connect, ceil_threshold=timeout.ceil_threshold                                          â”‚
           â”‚   1108 â”‚   â”‚   â”‚   ):                                                                                                       â”‚
           â”‚ â± 1109 â”‚   â”‚   â”‚   â”‚   sock = await aiohappyeyeballs.start_connection(                                                      â”‚
           â”‚   1110 â”‚   â”‚   â”‚   â”‚   â”‚   addr_infos=addr_infos,                                                                           â”‚
           â”‚   1111 â”‚   â”‚   â”‚   â”‚   â”‚   local_addr_infos=self._local_addr_infos,                                                         â”‚
           â”‚   1112 â”‚   â”‚   â”‚   â”‚   â”‚   happy_eyeballs_delay=self._happy_eyeballs_delay,                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py:123 in start_connection          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   120 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, OSError) and exc.errno == first_errno                                         â”‚
           â”‚   121 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   for exc in all_exceptions                                                                     â”‚
           â”‚   122 â”‚   â”‚   â”‚   â”‚   â”‚   ):                                                                                                â”‚
           â”‚ â± 123 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   raise OSError(first_errno, msg)                                                               â”‚
           â”‚   124 â”‚   â”‚   â”‚   â”‚   elif isinstance(first_exception, RuntimeError) and all(                                               â”‚
           â”‚   125 â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, RuntimeError) for exc in all_exceptions                                           â”‚
           â”‚   126 â”‚   â”‚   â”‚   â”‚   ):                                                                                                    â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:477 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    474 â”‚   â”‚   â”‚   â”‚   â”‚   response = ModelResponse(**init_response)                                                        â”‚
           â”‚    475 â”‚   â”‚   â”‚   â”‚   response = init_response                                                                             â”‚
           â”‚    476 â”‚   â”‚   â”‚   elif asyncio.iscoroutine(init_response):                                                                 â”‚
           â”‚ â±  477 â”‚   â”‚   â”‚   â”‚   response = await init_response                                                                       â”‚
           â”‚    478 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚    479 â”‚   â”‚   â”‚   â”‚   response = init_response  # type: ignore                                                             â”‚
           â”‚    480                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:566 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   563 â”‚   â”‚   â”‚   )                                                                                                         â”‚
           â”‚   564 â”‚   â”‚   â”‚   return model_response                                                                                     â”‚
           â”‚   565 â”‚   except Exception as e:                                                                                            â”‚
           â”‚ â± 566 â”‚   â”‚   raise e  # don't use verbose_logger.exception, if exception is raised                                         â”‚
           â”‚   567                                                                                                                       â”‚
           â”‚   568                                                                                                                       â”‚
           â”‚   569 async def ollama_aembeddings(                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:507 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   504 â”‚   try:                                                                                                              â”‚
           â”‚   505 â”‚   â”‚   timeout = aiohttp.ClientTimeout(total=litellm.request_timeout)  # 10 minutes                                  â”‚
           â”‚   506 â”‚   â”‚   async with aiohttp.ClientSession(timeout=timeout) as session:                                                 â”‚
           â”‚ â± 507 â”‚   â”‚   â”‚   resp = await session.post(url, json=data)                                                                 â”‚
           â”‚   508 â”‚   â”‚   â”‚                                                                                                             â”‚
           â”‚   509 â”‚   â”‚   â”‚   if resp.status != 200:                                                                                    â”‚
           â”‚   510 â”‚   â”‚   â”‚   â”‚   text = await resp.text()                                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py:696 in _request                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚    693 â”‚   â”‚   â”‚   â”‚   â”‚                                                                                                    â”‚
           â”‚    694 â”‚   â”‚   â”‚   â”‚   â”‚   # connection timeout                                                                             â”‚
           â”‚    695 â”‚   â”‚   â”‚   â”‚   â”‚   try:                                                                                             â”‚
           â”‚ â±  696 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   conn = await self._connector.connect(                                                        â”‚
           â”‚    697 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   req, traces=traces, timeout=real_timeout                                                 â”‚
           â”‚    698 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚    699 â”‚   â”‚   â”‚   â”‚   â”‚   except asyncio.TimeoutError as exc:                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:544 in connect                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚    541 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    542 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    543 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_start()                                                   â”‚
           â”‚ â±  544 â”‚   â”‚   â”‚   â”‚   proto = await self._create_connection(req, traces, timeout)                                          â”‚
           â”‚    545 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    546 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    547 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_end()                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1050 in _create_connection           â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1047 â”‚   â”‚   if req.proxy:                                                                                                â”‚
           â”‚   1048 â”‚   â”‚   â”‚   _, proto = await self._create_proxy_connection(req, traces, timeout)                                     â”‚
           â”‚   1049 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚ â± 1050 â”‚   â”‚   â”‚   _, proto = await self._create_direct_connection(req, traces, timeout)                                    â”‚
           â”‚   1051 â”‚   â”‚                                                                                                                â”‚
           â”‚   1052 â”‚   â”‚   return proto                                                                                                 â”‚
           â”‚   1053                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1394 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1391 â”‚   â”‚   â”‚   return transp, proto                                                                                     â”‚
           â”‚   1392 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   1393 â”‚   â”‚   â”‚   assert last_exc is not None                                                                              â”‚
           â”‚ â± 1394 â”‚   â”‚   â”‚   raise last_exc                                                                                           â”‚
           â”‚   1395 â”‚                                                                                                                    â”‚
           â”‚   1396 â”‚   async def _create_proxy_connection(                                                                              â”‚
           â”‚   1397 â”‚   â”‚   self, req: ClientRequest, traces: List["Trace"], timeout: "ClientTimeout"                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1363 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1360 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   1361 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1362 â”‚   â”‚   â”‚   try:                                                                                                     â”‚
           â”‚ â± 1363 â”‚   â”‚   â”‚   â”‚   transp, proto = await self._wrap_create_connection(                                                  â”‚
           â”‚   1364 â”‚   â”‚   â”‚   â”‚   â”‚   self._factory,                                                                                   â”‚
           â”‚   1365 â”‚   â”‚   â”‚   â”‚   â”‚   timeout=timeout,                                                                                 â”‚
           â”‚   1366 â”‚   â”‚   â”‚   â”‚   â”‚   ssl=sslcontext,                                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1124 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1121 â”‚   â”‚   except OSError as exc:                                                                                       â”‚
           â”‚   1122 â”‚   â”‚   â”‚   if exc.errno is None and isinstance(exc, asyncio.TimeoutError):                                          â”‚
           â”‚   1123 â”‚   â”‚   â”‚   â”‚   raise                                                                                                â”‚
           â”‚ â± 1124 â”‚   â”‚   â”‚   raise client_error(req.connection_key, exc) from exc                                                     â”‚
           â”‚   1125 â”‚                                                                                                                    â”‚
           â”‚   1126 â”‚   async def _wrap_existing_connection(                                                                             â”‚
           â”‚   1127 â”‚   â”‚   self,                                                                                                        â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno 111] Connect call failed 
           ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                                                    
                                                                                                                                          
           During handling of the above exception, another exception occurred:                                                            
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:276 in _run_with_timeout_failure                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   273 ) -> tuple[PQASession, AgentStatus]:                                                                                  â”‚
           â”‚   274 â”‚   try:                                                                                                              â”‚
           â”‚   275 â”‚   â”‚   async with asyncio.timeout(query.settings.agent.timeout):                                                     â”‚
           â”‚ â± 276 â”‚   â”‚   â”‚   status = await rollout()                                                                                  â”‚
           â”‚   277 â”‚   except TimeoutError:                                                                                              â”‚
           â”‚   278 â”‚   â”‚   logger.warning(                                                                                               â”‚
           â”‚   279 â”‚   â”‚   â”‚   f"Agent timeout after {query.settings.agent.timeout}-sec, just answering."                                â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:410 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   407 â”‚   â”‚   â”‚   â”‚   )                                                                                                     â”‚
           â”‚   408 â”‚   â”‚   â”‚   â”‚   return AgentStatus.TRUNCATED                                                                          â”‚
           â”‚   409 â”‚   â”‚   â”‚   agent_state.messages += obs                                                                               â”‚
           â”‚ â± 410 â”‚   â”‚   â”‚   for attempt in Retrying(                                                                                  â”‚
           â”‚   411 â”‚   â”‚   â”‚   â”‚   stop=stop_after_attempt(5),                                                                           â”‚
           â”‚   412 â”‚   â”‚   â”‚   â”‚   retry=retry_if_exception_type(MalformedMessageError),                                                 â”‚
           â”‚   413 â”‚   â”‚   â”‚   â”‚   before_sleep=before_sleep_log(logger, logging.WARNING),                                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:443 in __iter__                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   440 â”‚   â”‚                                                                                                                 â”‚
           â”‚   441 â”‚   â”‚   retry_state = RetryCallState(self, fn=None, args=(), kwargs={})                                               â”‚
           â”‚   442 â”‚   â”‚   while True:                                                                                                   â”‚
           â”‚ â± 443 â”‚   â”‚   â”‚   do = self.iter(retry_state=retry_state)                                                                   â”‚
           â”‚   444 â”‚   â”‚   â”‚   if isinstance(do, DoAttempt):                                                                             â”‚
           â”‚   445 â”‚   â”‚   â”‚   â”‚   yield AttemptManager(retry_state=retry_state)                                                         â”‚
           â”‚   446 â”‚   â”‚   â”‚   elif isinstance(do, DoSleep):                                                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:376 in iter                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   373 â”‚   â”‚   self._begin_iter(retry_state)                                                                                 â”‚
           â”‚   374 â”‚   â”‚   result = None                                                                                                 â”‚
           â”‚   375 â”‚   â”‚   for action in self.iter_state.actions:                                                                        â”‚
           â”‚ â± 376 â”‚   â”‚   â”‚   result = action(retry_state)                                                                              â”‚
           â”‚   377 â”‚   â”‚   return result                                                                                                 â”‚
           â”‚   378 â”‚                                                                                                                     â”‚
           â”‚   379 â”‚   def _begin_iter(self, retry_state: "RetryCallState") -> None:  # noqa                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:398 in <lambda>                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   395 â”‚                                                                                                                     â”‚
           â”‚   396 â”‚   def _post_retry_check_actions(self, retry_state: "RetryCallState") -> None:                                       â”‚
           â”‚   397 â”‚   â”‚   if not (self.iter_state.is_explicit_retry or self.iter_state.retry_run_result):                               â”‚
           â”‚ â± 398 â”‚   â”‚   â”‚   self._add_action_func(lambda rs: rs.outcome.result())                                                     â”‚
           â”‚   399 â”‚   â”‚   â”‚   return                                                                                                    â”‚
           â”‚   400 â”‚   â”‚                                                                                                                 â”‚
           â”‚   401 â”‚   â”‚   if self.after is not None:                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:449 in result                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚   446 â”‚   â”‚   â”‚   â”‚   if self._state in [CANCELLED, CANCELLED_AND_NOTIFIED]:                                                â”‚
           â”‚   447 â”‚   â”‚   â”‚   â”‚   â”‚   raise CancelledError()                                                                            â”‚
           â”‚   448 â”‚   â”‚   â”‚   â”‚   elif self._state == FINISHED:                                                                         â”‚
           â”‚ â± 449 â”‚   â”‚   â”‚   â”‚   â”‚   return self.__get_result()                                                                        â”‚
           â”‚   450 â”‚   â”‚   â”‚   â”‚                                                                                                         â”‚
           â”‚   451 â”‚   â”‚   â”‚   â”‚   self._condition.wait(timeout)                                                                         â”‚
           â”‚   452                                                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:401 in __get_result                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   398 â”‚   def __get_result(self):                                                                                           â”‚
           â”‚   399 â”‚   â”‚   if self._exception:                                                                                           â”‚
           â”‚   400 â”‚   â”‚   â”‚   try:                                                                                                      â”‚
           â”‚ â± 401 â”‚   â”‚   â”‚   â”‚   raise self._exception                                                                                 â”‚
           â”‚   402 â”‚   â”‚   â”‚   finally:                                                                                                  â”‚
           â”‚   403 â”‚   â”‚   â”‚   â”‚   # Break a reference cycle with the exception in self._exception                                       â”‚
           â”‚   404 â”‚   â”‚   â”‚   â”‚   self = None                                                                                           â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:417 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   414 â”‚   â”‚   â”‚   â”‚   reraise=True,                                                                                         â”‚
           â”‚   415 â”‚   â”‚   â”‚   ):                                                                                                        â”‚
           â”‚   416 â”‚   â”‚   â”‚   â”‚   with attempt:  # Retrying if ToolSelector fails to select a tool                                      â”‚
           â”‚ â± 417 â”‚   â”‚   â”‚   â”‚   â”‚   action = await agent(agent_state.messages, tools)                                                 â”‚
           â”‚   418 â”‚   â”‚   â”‚   agent_state.messages = [*agent_state.messages, action]                                                    â”‚
           â”‚   419 â”‚   â”‚   â”‚   if on_agent_action_callback:                                                                              â”‚
           â”‚   420 â”‚   â”‚   â”‚   â”‚   await on_agent_action_callback(action, agent_state)                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aviary/tools/utils.py:182 in __call__                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   179 â”‚   â”‚   â”‚   self._ledger.messages.extend(messages)                                                                    â”‚
           â”‚   180 â”‚   â”‚   â”‚   messages = self._ledger.messages                                                                          â”‚
           â”‚   181 â”‚   â”‚                                                                                                                 â”‚
           â”‚ â± 182 â”‚   â”‚   model_response = await self._bound_acompletion(                                                               â”‚
           â”‚   183 â”‚   â”‚   â”‚   messages=MessagesAdapter.dump_python(                                                                     â”‚
           â”‚   184 â”‚   â”‚   â”‚   â”‚   messages, exclude_none=True, by_alias=True                                                            â”‚
           â”‚   185 â”‚   â”‚   â”‚   ),                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:817 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    814 â”‚   â”‚   â”‚   â”‚   â”‚   original_exception=e,                                                                            â”‚
           â”‚    815 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    816 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚ â±  817 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    818 â”‚                                                                                                                    â”‚
           â”‚    819 â”‚   async def _acompletion(                                                                                          â”‚
           â”‚    820 â”‚   â”‚   self, model: str, messages: List[Dict[str, str]], **kwargs                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:793 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    790 â”‚   â”‚   â”‚   if request_priority is not None and isinstance(request_priority, int):                                   â”‚
           â”‚    791 â”‚   â”‚   â”‚   â”‚   response = await self.schedule_acompletion(**kwargs)                                                 â”‚
           â”‚    792 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â±  793 â”‚   â”‚   â”‚   â”‚   response = await self.async_function_with_fallbacks(**kwargs)                                        â”‚
           â”‚    794 â”‚   â”‚   â”‚   end_time = time.time()                                                                                   â”‚
           â”‚    795 â”‚   â”‚   â”‚   _duration = end_time - start_time                                                                        â”‚
           â”‚    796 â”‚   â”‚   â”‚   asyncio.create_task(                                                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2795 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2792 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚   2793 â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                                â”‚
           â”‚   2794 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2795 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2796 â”‚                                                                                                                    â”‚
           â”‚   2797 â”‚   def _handle_mock_testing_fallbacks(                                                                              â”‚
           â”‚   2798 â”‚   â”‚   self,                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2631 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2628 â”‚   â”‚   â”‚   â”‚   content_policy_fallbacks=content_policy_fallbacks,                                                   â”‚
           â”‚   2629 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2630 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2631 â”‚   â”‚   â”‚   response = await self.async_function_with_retries(*args, **kwargs)                                       â”‚
           â”‚   2632 â”‚   â”‚   â”‚   verbose_router_logger.debug(f"Async Response: {response}")                                               â”‚
           â”‚   2633 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2634 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2967 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2964 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "max_retries", num_retries)                                              â”‚
           â”‚   2965 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "num_retries", current_attempt)                                          â”‚
           â”‚   2966 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2967 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2968 â”‚                                                                                                                    â”‚
           â”‚   2969 â”‚   async def make_call(self, original_function: Any, *args, **kwargs):                                              â”‚
           â”‚   2970 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2879 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2876 â”‚   â”‚   â”‚   â”‚   model_group=model_group, kwargs=kwargs                                                               â”‚
           â”‚   2877 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2878 â”‚   â”‚   â”‚   # if the function call is successful, no exception will be raised and we'll                              â”‚
           â”‚        break out of the loop                                                                                                â”‚
           â”‚ â± 2879 â”‚   â”‚   â”‚   response = await self.make_call(original_function, *args, **kwargs)                                      â”‚
           â”‚   2880 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   2881 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2882 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2976 in make_call                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2973 â”‚   â”‚   model_group = kwargs.get("model")                                                                            â”‚
           â”‚   2974 â”‚   â”‚   response = original_function(*args, **kwargs)                                                                â”‚
           â”‚   2975 â”‚   â”‚   if inspect.iscoroutinefunction(response) or inspect.isawaitable(response):                                   â”‚
           â”‚ â± 2976 â”‚   â”‚   â”‚   response = await response                                                                                â”‚
           â”‚   2977 â”‚   â”‚   ## PROCESS RESPONSE HEADERS                                                                                  â”‚
           â”‚   2978 â”‚   â”‚   await self.set_response_headers(response=response, model_group=model_group)                                  â”‚
           â”‚   2979                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:947 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    944 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚    945 â”‚   â”‚   â”‚   if model_name is not None:                                                                               â”‚
           â”‚    946 â”‚   â”‚   â”‚   â”‚   self.fail_calls[model_name] += 1                                                                     â”‚
           â”‚ â±  947 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    948 â”‚                                                                                                                    â”‚
           â”‚    949 â”‚   def _update_kwargs_before_fallbacks(self, model: str, kwargs: dict) -> None:                                     â”‚
           â”‚    950 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:915 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    912 â”‚   â”‚   â”‚   â”‚   â”‚   parent_otel_span=parent_otel_span,                                                               â”‚
           â”‚    913 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    914 â”‚   â”‚   â”‚   â”‚                                                                                                        â”‚
           â”‚ â±  915 â”‚   â”‚   â”‚   â”‚   response = await _response                                                                           â”‚
           â”‚    916 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚    917 â”‚   â”‚   â”‚   ## CHECK CONTENT FILTER ERROR ##                                                                         â”‚
           â”‚    918 â”‚   â”‚   â”‚   if isinstance(response, ModelResponse):                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1175 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1172 â”‚   â”‚   â”‚   â”‚   â”‚   else:                                                                                            â”‚
           â”‚   1173 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   kwargs["model"] = context_window_fallback_dict[model]                                        â”‚
           â”‚   1174 â”‚   â”‚   â”‚   â”‚   â”‚   return await original_function(*args, **kwargs)                                                  â”‚
           â”‚ â± 1175 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   1176 â”‚                                                                                                                    â”‚
           â”‚   1177 â”‚   is_coroutine = inspect.iscoroutinefunction(original_function)                                                    â”‚
           â”‚   1178                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1031 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1028 â”‚   â”‚   â”‚   â”‚   return _caching_handler_response.final_embedding_cached_response                                     â”‚
           â”‚   1029 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1030 â”‚   â”‚   â”‚   # MODEL CALL                                                                                             â”‚
           â”‚ â± 1031 â”‚   â”‚   â”‚   result = await original_function(*args, **kwargs)                                                        â”‚
           â”‚   1032 â”‚   â”‚   â”‚   end_time = datetime.datetime.now()                                                                       â”‚
           â”‚   1033 â”‚   â”‚   â”‚   if "stream" in kwargs and kwargs["stream"] is True:                                                      â”‚
           â”‚   1034 â”‚   â”‚   â”‚   â”‚   if (                                                                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:499 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    496 â”‚   â”‚   return response                                                                                              â”‚
           â”‚    497 â”‚   except Exception as e:                                                                                           â”‚
           â”‚    498 â”‚   â”‚   custom_llm_provider = custom_llm_provider or "openai"                                                        â”‚
           â”‚ â±  499 â”‚   â”‚   raise exception_type(                                                                                        â”‚
           â”‚    500 â”‚   â”‚   â”‚   model=model,                                                                                             â”‚
           â”‚    501 â”‚   â”‚   â”‚   custom_llm_provider=custom_llm_provider,                                                                 â”‚
           â”‚    502 â”‚   â”‚   â”‚   original_exception=e,                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:212 â”‚
           â”‚ 5 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2122 â”‚   â”‚   # don't let an error with mapping interrupt the user from receiving an error                                 â”‚
           â”‚        from the llm api calls                                                                                               â”‚
           â”‚   2123 â”‚   â”‚   if exception_mapping_worked:                                                                                 â”‚
           â”‚   2124 â”‚   â”‚   â”‚   setattr(e, "litellm_response_headers", litellm_response_headers)                                         â”‚
           â”‚ â± 2125 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   2126 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   2127 â”‚   â”‚   â”‚   for error_type in litellm.LITELLM_EXCEPTION_TYPES:                                                       â”‚
           â”‚   2128 â”‚   â”‚   â”‚   â”‚   if isinstance(e, error_type):                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:210 â”‚
           â”‚ 1 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2098 â”‚   â”‚   â”‚   â”‚   â”‚   request=original_exception.request,                                                              â”‚
           â”‚   2099 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚   2100 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â± 2101 â”‚   â”‚   â”‚   â”‚   raise APIConnectionError(                                                                            â”‚
           â”‚   2102 â”‚   â”‚   â”‚   â”‚   â”‚   message="{}\n{}".format(                                                                         â”‚
           â”‚   2103 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   str(original_exception), traceback.format_exc()                                              â”‚
           â”‚   2104 â”‚   â”‚   â”‚   â”‚   â”‚   ),                                                                                               â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           APIConnectionError: litellm.APIConnectionError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1109, in                 
           _wrap_create_connection                                                                                                        
               sock = await aiohappyeyeballs.start_connection(                                                                            
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                            
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py", line 123, in              
           start_connection                                                                                                               
               raise OSError(first_errno, msg)                                                                                            
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py", line 477, in acompletion           
               response = await init_response                                                                                             
                          ^^^^^^^^^^^^^^^^^^^                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 566, in                
           ollama_acompletion                                                                                                             
               raise e  # don't use verbose_logger.exception, if exception is raised                                                      
               ^^^^^^^                                                                                                                    
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 507, in                
           ollama_acompletion                                                                                                             
               resp = await session.post(url, json=data)                                                                                  
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                  
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py", line 696, in _request            
               conn = await self._connector.connect(                                                                                      
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 544, in connect          
               proto = await self._create_connection(req, traces, timeout)                                                                
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1050, in                 
           _create_connection                                                                                                             
               _, proto = await self._create_direct_connection(req, traces, timeout)                                                      
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1394, in                 
           _create_direct_connection                                                                                                      
               raise last_exc                                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1363, in                 
           _create_direct_connection                                                                                                      
               transp, proto = await self._wrap_create_connection(                                                                        
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                        
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1124, in                 
           _wrap_create_connection                                                                                                        
               raise client_error(req.connection_key, exc) from exc                                                                       
           aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
                                                                                                                                          
           Received Model Group=ollama/llama3.2                                                                                           
           Available Model Group Fallbacks=None LiteLLM Retried: 2 times, LiteLLM Max Retries: 3                                          
[00:54:20] Answer:                                                                                                                        


 ANSWERING QUESTION: sciqag_question_60.json
 ----------------------------- 



[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.

[00:54:41] Trajectory failed.                                                                                                             
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1109 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1106 â”‚   â”‚   â”‚   async with ceil_timeout(                                                                                 â”‚
           â”‚   1107 â”‚   â”‚   â”‚   â”‚   timeout.sock_connect, ceil_threshold=timeout.ceil_threshold                                          â”‚
           â”‚   1108 â”‚   â”‚   â”‚   ):                                                                                                       â”‚
           â”‚ â± 1109 â”‚   â”‚   â”‚   â”‚   sock = await aiohappyeyeballs.start_connection(                                                      â”‚
           â”‚   1110 â”‚   â”‚   â”‚   â”‚   â”‚   addr_infos=addr_infos,                                                                           â”‚
           â”‚   1111 â”‚   â”‚   â”‚   â”‚   â”‚   local_addr_infos=self._local_addr_infos,                                                         â”‚
           â”‚   1112 â”‚   â”‚   â”‚   â”‚   â”‚   happy_eyeballs_delay=self._happy_eyeballs_delay,                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py:123 in start_connection          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   120 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, OSError) and exc.errno == first_errno                                         â”‚
           â”‚   121 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   for exc in all_exceptions                                                                     â”‚
           â”‚   122 â”‚   â”‚   â”‚   â”‚   â”‚   ):                                                                                                â”‚
           â”‚ â± 123 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   raise OSError(first_errno, msg)                                                               â”‚
           â”‚   124 â”‚   â”‚   â”‚   â”‚   elif isinstance(first_exception, RuntimeError) and all(                                               â”‚
           â”‚   125 â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, RuntimeError) for exc in all_exceptions                                           â”‚
           â”‚   126 â”‚   â”‚   â”‚   â”‚   ):                                                                                                    â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:477 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    474 â”‚   â”‚   â”‚   â”‚   â”‚   response = ModelResponse(**init_response)                                                        â”‚
           â”‚    475 â”‚   â”‚   â”‚   â”‚   response = init_response                                                                             â”‚
           â”‚    476 â”‚   â”‚   â”‚   elif asyncio.iscoroutine(init_response):                                                                 â”‚
           â”‚ â±  477 â”‚   â”‚   â”‚   â”‚   response = await init_response                                                                       â”‚
           â”‚    478 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚    479 â”‚   â”‚   â”‚   â”‚   response = init_response  # type: ignore                                                             â”‚
           â”‚    480                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:566 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   563 â”‚   â”‚   â”‚   )                                                                                                         â”‚
           â”‚   564 â”‚   â”‚   â”‚   return model_response                                                                                     â”‚
           â”‚   565 â”‚   except Exception as e:                                                                                            â”‚
           â”‚ â± 566 â”‚   â”‚   raise e  # don't use verbose_logger.exception, if exception is raised                                         â”‚
           â”‚   567                                                                                                                       â”‚
           â”‚   568                                                                                                                       â”‚
           â”‚   569 async def ollama_aembeddings(                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:507 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   504 â”‚   try:                                                                                                              â”‚
           â”‚   505 â”‚   â”‚   timeout = aiohttp.ClientTimeout(total=litellm.request_timeout)  # 10 minutes                                  â”‚
           â”‚   506 â”‚   â”‚   async with aiohttp.ClientSession(timeout=timeout) as session:                                                 â”‚
           â”‚ â± 507 â”‚   â”‚   â”‚   resp = await session.post(url, json=data)                                                                 â”‚
           â”‚   508 â”‚   â”‚   â”‚                                                                                                             â”‚
           â”‚   509 â”‚   â”‚   â”‚   if resp.status != 200:                                                                                    â”‚
           â”‚   510 â”‚   â”‚   â”‚   â”‚   text = await resp.text()                                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py:696 in _request                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚    693 â”‚   â”‚   â”‚   â”‚   â”‚                                                                                                    â”‚
           â”‚    694 â”‚   â”‚   â”‚   â”‚   â”‚   # connection timeout                                                                             â”‚
           â”‚    695 â”‚   â”‚   â”‚   â”‚   â”‚   try:                                                                                             â”‚
           â”‚ â±  696 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   conn = await self._connector.connect(                                                        â”‚
           â”‚    697 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   req, traces=traces, timeout=real_timeout                                                 â”‚
           â”‚    698 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚    699 â”‚   â”‚   â”‚   â”‚   â”‚   except asyncio.TimeoutError as exc:                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:544 in connect                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚    541 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    542 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    543 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_start()                                                   â”‚
           â”‚ â±  544 â”‚   â”‚   â”‚   â”‚   proto = await self._create_connection(req, traces, timeout)                                          â”‚
           â”‚    545 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    546 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    547 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_end()                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1050 in _create_connection           â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1047 â”‚   â”‚   if req.proxy:                                                                                                â”‚
           â”‚   1048 â”‚   â”‚   â”‚   _, proto = await self._create_proxy_connection(req, traces, timeout)                                     â”‚
           â”‚   1049 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚ â± 1050 â”‚   â”‚   â”‚   _, proto = await self._create_direct_connection(req, traces, timeout)                                    â”‚
           â”‚   1051 â”‚   â”‚                                                                                                                â”‚
           â”‚   1052 â”‚   â”‚   return proto                                                                                                 â”‚
           â”‚   1053                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1394 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1391 â”‚   â”‚   â”‚   return transp, proto                                                                                     â”‚
           â”‚   1392 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   1393 â”‚   â”‚   â”‚   assert last_exc is not None                                                                              â”‚
           â”‚ â± 1394 â”‚   â”‚   â”‚   raise last_exc                                                                                           â”‚
           â”‚   1395 â”‚                                                                                                                    â”‚
           â”‚   1396 â”‚   async def _create_proxy_connection(                                                                              â”‚
           â”‚   1397 â”‚   â”‚   self, req: ClientRequest, traces: List["Trace"], timeout: "ClientTimeout"                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1363 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1360 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   1361 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1362 â”‚   â”‚   â”‚   try:                                                                                                     â”‚
           â”‚ â± 1363 â”‚   â”‚   â”‚   â”‚   transp, proto = await self._wrap_create_connection(                                                  â”‚
           â”‚   1364 â”‚   â”‚   â”‚   â”‚   â”‚   self._factory,                                                                                   â”‚
           â”‚   1365 â”‚   â”‚   â”‚   â”‚   â”‚   timeout=timeout,                                                                                 â”‚
           â”‚   1366 â”‚   â”‚   â”‚   â”‚   â”‚   ssl=sslcontext,                                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1124 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1121 â”‚   â”‚   except OSError as exc:                                                                                       â”‚
           â”‚   1122 â”‚   â”‚   â”‚   if exc.errno is None and isinstance(exc, asyncio.TimeoutError):                                          â”‚
           â”‚   1123 â”‚   â”‚   â”‚   â”‚   raise                                                                                                â”‚
           â”‚ â± 1124 â”‚   â”‚   â”‚   raise client_error(req.connection_key, exc) from exc                                                     â”‚
           â”‚   1125 â”‚                                                                                                                    â”‚
           â”‚   1126 â”‚   async def _wrap_existing_connection(                                                                             â”‚
           â”‚   1127 â”‚   â”‚   self,                                                                                                        â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno 111] Connect call failed 
           ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                                                    
                                                                                                                                          
           During handling of the above exception, another exception occurred:                                                            
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:276 in _run_with_timeout_failure                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   273 ) -> tuple[PQASession, AgentStatus]:                                                                                  â”‚
           â”‚   274 â”‚   try:                                                                                                              â”‚
           â”‚   275 â”‚   â”‚   async with asyncio.timeout(query.settings.agent.timeout):                                                     â”‚
           â”‚ â± 276 â”‚   â”‚   â”‚   status = await rollout()                                                                                  â”‚
           â”‚   277 â”‚   except TimeoutError:                                                                                              â”‚
           â”‚   278 â”‚   â”‚   logger.warning(                                                                                               â”‚
           â”‚   279 â”‚   â”‚   â”‚   f"Agent timeout after {query.settings.agent.timeout}-sec, just answering."                                â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:410 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   407 â”‚   â”‚   â”‚   â”‚   )                                                                                                     â”‚
           â”‚   408 â”‚   â”‚   â”‚   â”‚   return AgentStatus.TRUNCATED                                                                          â”‚
           â”‚   409 â”‚   â”‚   â”‚   agent_state.messages += obs                                                                               â”‚
           â”‚ â± 410 â”‚   â”‚   â”‚   for attempt in Retrying(                                                                                  â”‚
           â”‚   411 â”‚   â”‚   â”‚   â”‚   stop=stop_after_attempt(5),                                                                           â”‚
           â”‚   412 â”‚   â”‚   â”‚   â”‚   retry=retry_if_exception_type(MalformedMessageError),                                                 â”‚
           â”‚   413 â”‚   â”‚   â”‚   â”‚   before_sleep=before_sleep_log(logger, logging.WARNING),                                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:443 in __iter__                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   440 â”‚   â”‚                                                                                                                 â”‚
           â”‚   441 â”‚   â”‚   retry_state = RetryCallState(self, fn=None, args=(), kwargs={})                                               â”‚
           â”‚   442 â”‚   â”‚   while True:                                                                                                   â”‚
           â”‚ â± 443 â”‚   â”‚   â”‚   do = self.iter(retry_state=retry_state)                                                                   â”‚
           â”‚   444 â”‚   â”‚   â”‚   if isinstance(do, DoAttempt):                                                                             â”‚
           â”‚   445 â”‚   â”‚   â”‚   â”‚   yield AttemptManager(retry_state=retry_state)                                                         â”‚
           â”‚   446 â”‚   â”‚   â”‚   elif isinstance(do, DoSleep):                                                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:376 in iter                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   373 â”‚   â”‚   self._begin_iter(retry_state)                                                                                 â”‚
           â”‚   374 â”‚   â”‚   result = None                                                                                                 â”‚
           â”‚   375 â”‚   â”‚   for action in self.iter_state.actions:                                                                        â”‚
           â”‚ â± 376 â”‚   â”‚   â”‚   result = action(retry_state)                                                                              â”‚
           â”‚   377 â”‚   â”‚   return result                                                                                                 â”‚
           â”‚   378 â”‚                                                                                                                     â”‚
           â”‚   379 â”‚   def _begin_iter(self, retry_state: "RetryCallState") -> None:  # noqa                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:398 in <lambda>                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   395 â”‚                                                                                                                     â”‚
           â”‚   396 â”‚   def _post_retry_check_actions(self, retry_state: "RetryCallState") -> None:                                       â”‚
           â”‚   397 â”‚   â”‚   if not (self.iter_state.is_explicit_retry or self.iter_state.retry_run_result):                               â”‚
           â”‚ â± 398 â”‚   â”‚   â”‚   self._add_action_func(lambda rs: rs.outcome.result())                                                     â”‚
           â”‚   399 â”‚   â”‚   â”‚   return                                                                                                    â”‚
           â”‚   400 â”‚   â”‚                                                                                                                 â”‚
           â”‚   401 â”‚   â”‚   if self.after is not None:                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:449 in result                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚   446 â”‚   â”‚   â”‚   â”‚   if self._state in [CANCELLED, CANCELLED_AND_NOTIFIED]:                                                â”‚
           â”‚   447 â”‚   â”‚   â”‚   â”‚   â”‚   raise CancelledError()                                                                            â”‚
           â”‚   448 â”‚   â”‚   â”‚   â”‚   elif self._state == FINISHED:                                                                         â”‚
           â”‚ â± 449 â”‚   â”‚   â”‚   â”‚   â”‚   return self.__get_result()                                                                        â”‚
           â”‚   450 â”‚   â”‚   â”‚   â”‚                                                                                                         â”‚
           â”‚   451 â”‚   â”‚   â”‚   â”‚   self._condition.wait(timeout)                                                                         â”‚
           â”‚   452                                                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:401 in __get_result                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   398 â”‚   def __get_result(self):                                                                                           â”‚
           â”‚   399 â”‚   â”‚   if self._exception:                                                                                           â”‚
           â”‚   400 â”‚   â”‚   â”‚   try:                                                                                                      â”‚
           â”‚ â± 401 â”‚   â”‚   â”‚   â”‚   raise self._exception                                                                                 â”‚
           â”‚   402 â”‚   â”‚   â”‚   finally:                                                                                                  â”‚
           â”‚   403 â”‚   â”‚   â”‚   â”‚   # Break a reference cycle with the exception in self._exception                                       â”‚
           â”‚   404 â”‚   â”‚   â”‚   â”‚   self = None                                                                                           â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:417 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   414 â”‚   â”‚   â”‚   â”‚   reraise=True,                                                                                         â”‚
           â”‚   415 â”‚   â”‚   â”‚   ):                                                                                                        â”‚
           â”‚   416 â”‚   â”‚   â”‚   â”‚   with attempt:  # Retrying if ToolSelector fails to select a tool                                      â”‚
           â”‚ â± 417 â”‚   â”‚   â”‚   â”‚   â”‚   action = await agent(agent_state.messages, tools)                                                 â”‚
           â”‚   418 â”‚   â”‚   â”‚   agent_state.messages = [*agent_state.messages, action]                                                    â”‚
           â”‚   419 â”‚   â”‚   â”‚   if on_agent_action_callback:                                                                              â”‚
           â”‚   420 â”‚   â”‚   â”‚   â”‚   await on_agent_action_callback(action, agent_state)                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aviary/tools/utils.py:182 in __call__                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   179 â”‚   â”‚   â”‚   self._ledger.messages.extend(messages)                                                                    â”‚
           â”‚   180 â”‚   â”‚   â”‚   messages = self._ledger.messages                                                                          â”‚
           â”‚   181 â”‚   â”‚                                                                                                                 â”‚
           â”‚ â± 182 â”‚   â”‚   model_response = await self._bound_acompletion(                                                               â”‚
           â”‚   183 â”‚   â”‚   â”‚   messages=MessagesAdapter.dump_python(                                                                     â”‚
           â”‚   184 â”‚   â”‚   â”‚   â”‚   messages, exclude_none=True, by_alias=True                                                            â”‚
           â”‚   185 â”‚   â”‚   â”‚   ),                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:817 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    814 â”‚   â”‚   â”‚   â”‚   â”‚   original_exception=e,                                                                            â”‚
           â”‚    815 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    816 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚ â±  817 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    818 â”‚                                                                                                                    â”‚
           â”‚    819 â”‚   async def _acompletion(                                                                                          â”‚
           â”‚    820 â”‚   â”‚   self, model: str, messages: List[Dict[str, str]], **kwargs                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:793 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    790 â”‚   â”‚   â”‚   if request_priority is not None and isinstance(request_priority, int):                                   â”‚
           â”‚    791 â”‚   â”‚   â”‚   â”‚   response = await self.schedule_acompletion(**kwargs)                                                 â”‚
           â”‚    792 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â±  793 â”‚   â”‚   â”‚   â”‚   response = await self.async_function_with_fallbacks(**kwargs)                                        â”‚
           â”‚    794 â”‚   â”‚   â”‚   end_time = time.time()                                                                                   â”‚
           â”‚    795 â”‚   â”‚   â”‚   _duration = end_time - start_time                                                                        â”‚
           â”‚    796 â”‚   â”‚   â”‚   asyncio.create_task(                                                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2795 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2792 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚   2793 â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                                â”‚
           â”‚   2794 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2795 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2796 â”‚                                                                                                                    â”‚
           â”‚   2797 â”‚   def _handle_mock_testing_fallbacks(                                                                              â”‚
           â”‚   2798 â”‚   â”‚   self,                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2631 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2628 â”‚   â”‚   â”‚   â”‚   content_policy_fallbacks=content_policy_fallbacks,                                                   â”‚
           â”‚   2629 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2630 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2631 â”‚   â”‚   â”‚   response = await self.async_function_with_retries(*args, **kwargs)                                       â”‚
           â”‚   2632 â”‚   â”‚   â”‚   verbose_router_logger.debug(f"Async Response: {response}")                                               â”‚
           â”‚   2633 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2634 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2967 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2964 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "max_retries", num_retries)                                              â”‚
           â”‚   2965 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "num_retries", current_attempt)                                          â”‚
           â”‚   2966 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2967 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2968 â”‚                                                                                                                    â”‚
           â”‚   2969 â”‚   async def make_call(self, original_function: Any, *args, **kwargs):                                              â”‚
           â”‚   2970 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2879 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2876 â”‚   â”‚   â”‚   â”‚   model_group=model_group, kwargs=kwargs                                                               â”‚
           â”‚   2877 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2878 â”‚   â”‚   â”‚   # if the function call is successful, no exception will be raised and we'll                              â”‚
           â”‚        break out of the loop                                                                                                â”‚
           â”‚ â± 2879 â”‚   â”‚   â”‚   response = await self.make_call(original_function, *args, **kwargs)                                      â”‚
           â”‚   2880 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   2881 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2882 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2976 in make_call                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2973 â”‚   â”‚   model_group = kwargs.get("model")                                                                            â”‚
           â”‚   2974 â”‚   â”‚   response = original_function(*args, **kwargs)                                                                â”‚
           â”‚   2975 â”‚   â”‚   if inspect.iscoroutinefunction(response) or inspect.isawaitable(response):                                   â”‚
           â”‚ â± 2976 â”‚   â”‚   â”‚   response = await response                                                                                â”‚
           â”‚   2977 â”‚   â”‚   ## PROCESS RESPONSE HEADERS                                                                                  â”‚
           â”‚   2978 â”‚   â”‚   await self.set_response_headers(response=response, model_group=model_group)                                  â”‚
           â”‚   2979                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:947 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    944 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚    945 â”‚   â”‚   â”‚   if model_name is not None:                                                                               â”‚
           â”‚    946 â”‚   â”‚   â”‚   â”‚   self.fail_calls[model_name] += 1                                                                     â”‚
           â”‚ â±  947 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    948 â”‚                                                                                                                    â”‚
           â”‚    949 â”‚   def _update_kwargs_before_fallbacks(self, model: str, kwargs: dict) -> None:                                     â”‚
           â”‚    950 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:915 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    912 â”‚   â”‚   â”‚   â”‚   â”‚   parent_otel_span=parent_otel_span,                                                               â”‚
           â”‚    913 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    914 â”‚   â”‚   â”‚   â”‚                                                                                                        â”‚
           â”‚ â±  915 â”‚   â”‚   â”‚   â”‚   response = await _response                                                                           â”‚
           â”‚    916 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚    917 â”‚   â”‚   â”‚   ## CHECK CONTENT FILTER ERROR ##                                                                         â”‚
           â”‚    918 â”‚   â”‚   â”‚   if isinstance(response, ModelResponse):                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1175 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1172 â”‚   â”‚   â”‚   â”‚   â”‚   else:                                                                                            â”‚
           â”‚   1173 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   kwargs["model"] = context_window_fallback_dict[model]                                        â”‚
           â”‚   1174 â”‚   â”‚   â”‚   â”‚   â”‚   return await original_function(*args, **kwargs)                                                  â”‚
           â”‚ â± 1175 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   1176 â”‚                                                                                                                    â”‚
           â”‚   1177 â”‚   is_coroutine = inspect.iscoroutinefunction(original_function)                                                    â”‚
           â”‚   1178                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1031 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1028 â”‚   â”‚   â”‚   â”‚   return _caching_handler_response.final_embedding_cached_response                                     â”‚
           â”‚   1029 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1030 â”‚   â”‚   â”‚   # MODEL CALL                                                                                             â”‚
           â”‚ â± 1031 â”‚   â”‚   â”‚   result = await original_function(*args, **kwargs)                                                        â”‚
           â”‚   1032 â”‚   â”‚   â”‚   end_time = datetime.datetime.now()                                                                       â”‚
           â”‚   1033 â”‚   â”‚   â”‚   if "stream" in kwargs and kwargs["stream"] is True:                                                      â”‚
           â”‚   1034 â”‚   â”‚   â”‚   â”‚   if (                                                                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:499 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    496 â”‚   â”‚   return response                                                                                              â”‚
           â”‚    497 â”‚   except Exception as e:                                                                                           â”‚
           â”‚    498 â”‚   â”‚   custom_llm_provider = custom_llm_provider or "openai"                                                        â”‚
           â”‚ â±  499 â”‚   â”‚   raise exception_type(                                                                                        â”‚
           â”‚    500 â”‚   â”‚   â”‚   model=model,                                                                                             â”‚
           â”‚    501 â”‚   â”‚   â”‚   custom_llm_provider=custom_llm_provider,                                                                 â”‚
           â”‚    502 â”‚   â”‚   â”‚   original_exception=e,                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:212 â”‚
           â”‚ 5 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2122 â”‚   â”‚   # don't let an error with mapping interrupt the user from receiving an error                                 â”‚
           â”‚        from the llm api calls                                                                                               â”‚
           â”‚   2123 â”‚   â”‚   if exception_mapping_worked:                                                                                 â”‚
           â”‚   2124 â”‚   â”‚   â”‚   setattr(e, "litellm_response_headers", litellm_response_headers)                                         â”‚
           â”‚ â± 2125 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   2126 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   2127 â”‚   â”‚   â”‚   for error_type in litellm.LITELLM_EXCEPTION_TYPES:                                                       â”‚
           â”‚   2128 â”‚   â”‚   â”‚   â”‚   if isinstance(e, error_type):                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:210 â”‚
           â”‚ 1 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2098 â”‚   â”‚   â”‚   â”‚   â”‚   request=original_exception.request,                                                              â”‚
           â”‚   2099 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚   2100 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â± 2101 â”‚   â”‚   â”‚   â”‚   raise APIConnectionError(                                                                            â”‚
           â”‚   2102 â”‚   â”‚   â”‚   â”‚   â”‚   message="{}\n{}".format(                                                                         â”‚
           â”‚   2103 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   str(original_exception), traceback.format_exc()                                              â”‚
           â”‚   2104 â”‚   â”‚   â”‚   â”‚   â”‚   ),                                                                                               â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           APIConnectionError: litellm.APIConnectionError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1109, in                 
           _wrap_create_connection                                                                                                        
               sock = await aiohappyeyeballs.start_connection(                                                                            
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                            
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py", line 123, in              
           start_connection                                                                                                               
               raise OSError(first_errno, msg)                                                                                            
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py", line 477, in acompletion           
               response = await init_response                                                                                             
                          ^^^^^^^^^^^^^^^^^^^                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 566, in                
           ollama_acompletion                                                                                                             
               raise e  # don't use verbose_logger.exception, if exception is raised                                                      
               ^^^^^^^                                                                                                                    
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 507, in                
           ollama_acompletion                                                                                                             
               resp = await session.post(url, json=data)                                                                                  
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                  
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py", line 696, in _request            
               conn = await self._connector.connect(                                                                                      
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 544, in connect          
               proto = await self._create_connection(req, traces, timeout)                                                                
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1050, in                 
           _create_connection                                                                                                             
               _, proto = await self._create_direct_connection(req, traces, timeout)                                                      
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1394, in                 
           _create_direct_connection                                                                                                      
               raise last_exc                                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1363, in                 
           _create_direct_connection                                                                                                      
               transp, proto = await self._wrap_create_connection(                                                                        
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                        
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1124, in                 
           _wrap_create_connection                                                                                                        
               raise client_error(req.connection_key, exc) from exc                                                                       
           aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
                                                                                                                                          
           Received Model Group=ollama/llama3.2                                                                                           
           Available Model Group Fallbacks=None LiteLLM Retried: 2 times, LiteLLM Max Retries: 3                                          
[00:54:43] Answer:                                                                                                                        


 ANSWERING QUESTION: sciqag_question_61.json
 ----------------------------- 



[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.

[00:55:03] Trajectory failed.                                                                                                             
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1109 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1106 â”‚   â”‚   â”‚   async with ceil_timeout(                                                                                 â”‚
           â”‚   1107 â”‚   â”‚   â”‚   â”‚   timeout.sock_connect, ceil_threshold=timeout.ceil_threshold                                          â”‚
           â”‚   1108 â”‚   â”‚   â”‚   ):                                                                                                       â”‚
           â”‚ â± 1109 â”‚   â”‚   â”‚   â”‚   sock = await aiohappyeyeballs.start_connection(                                                      â”‚
           â”‚   1110 â”‚   â”‚   â”‚   â”‚   â”‚   addr_infos=addr_infos,                                                                           â”‚
           â”‚   1111 â”‚   â”‚   â”‚   â”‚   â”‚   local_addr_infos=self._local_addr_infos,                                                         â”‚
           â”‚   1112 â”‚   â”‚   â”‚   â”‚   â”‚   happy_eyeballs_delay=self._happy_eyeballs_delay,                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py:123 in start_connection          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   120 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, OSError) and exc.errno == first_errno                                         â”‚
           â”‚   121 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   for exc in all_exceptions                                                                     â”‚
           â”‚   122 â”‚   â”‚   â”‚   â”‚   â”‚   ):                                                                                                â”‚
           â”‚ â± 123 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   raise OSError(first_errno, msg)                                                               â”‚
           â”‚   124 â”‚   â”‚   â”‚   â”‚   elif isinstance(first_exception, RuntimeError) and all(                                               â”‚
           â”‚   125 â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, RuntimeError) for exc in all_exceptions                                           â”‚
           â”‚   126 â”‚   â”‚   â”‚   â”‚   ):                                                                                                    â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:477 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    474 â”‚   â”‚   â”‚   â”‚   â”‚   response = ModelResponse(**init_response)                                                        â”‚
           â”‚    475 â”‚   â”‚   â”‚   â”‚   response = init_response                                                                             â”‚
           â”‚    476 â”‚   â”‚   â”‚   elif asyncio.iscoroutine(init_response):                                                                 â”‚
           â”‚ â±  477 â”‚   â”‚   â”‚   â”‚   response = await init_response                                                                       â”‚
           â”‚    478 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚    479 â”‚   â”‚   â”‚   â”‚   response = init_response  # type: ignore                                                             â”‚
           â”‚    480                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:566 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   563 â”‚   â”‚   â”‚   )                                                                                                         â”‚
           â”‚   564 â”‚   â”‚   â”‚   return model_response                                                                                     â”‚
           â”‚   565 â”‚   except Exception as e:                                                                                            â”‚
           â”‚ â± 566 â”‚   â”‚   raise e  # don't use verbose_logger.exception, if exception is raised                                         â”‚
           â”‚   567                                                                                                                       â”‚
           â”‚   568                                                                                                                       â”‚
           â”‚   569 async def ollama_aembeddings(                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:507 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   504 â”‚   try:                                                                                                              â”‚
           â”‚   505 â”‚   â”‚   timeout = aiohttp.ClientTimeout(total=litellm.request_timeout)  # 10 minutes                                  â”‚
           â”‚   506 â”‚   â”‚   async with aiohttp.ClientSession(timeout=timeout) as session:                                                 â”‚
           â”‚ â± 507 â”‚   â”‚   â”‚   resp = await session.post(url, json=data)                                                                 â”‚
           â”‚   508 â”‚   â”‚   â”‚                                                                                                             â”‚
           â”‚   509 â”‚   â”‚   â”‚   if resp.status != 200:                                                                                    â”‚
           â”‚   510 â”‚   â”‚   â”‚   â”‚   text = await resp.text()                                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py:696 in _request                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚    693 â”‚   â”‚   â”‚   â”‚   â”‚                                                                                                    â”‚
           â”‚    694 â”‚   â”‚   â”‚   â”‚   â”‚   # connection timeout                                                                             â”‚
           â”‚    695 â”‚   â”‚   â”‚   â”‚   â”‚   try:                                                                                             â”‚
           â”‚ â±  696 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   conn = await self._connector.connect(                                                        â”‚
           â”‚    697 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   req, traces=traces, timeout=real_timeout                                                 â”‚
           â”‚    698 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚    699 â”‚   â”‚   â”‚   â”‚   â”‚   except asyncio.TimeoutError as exc:                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:544 in connect                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚    541 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    542 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    543 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_start()                                                   â”‚
           â”‚ â±  544 â”‚   â”‚   â”‚   â”‚   proto = await self._create_connection(req, traces, timeout)                                          â”‚
           â”‚    545 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    546 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    547 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_end()                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1050 in _create_connection           â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1047 â”‚   â”‚   if req.proxy:                                                                                                â”‚
           â”‚   1048 â”‚   â”‚   â”‚   _, proto = await self._create_proxy_connection(req, traces, timeout)                                     â”‚
           â”‚   1049 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚ â± 1050 â”‚   â”‚   â”‚   _, proto = await self._create_direct_connection(req, traces, timeout)                                    â”‚
           â”‚   1051 â”‚   â”‚                                                                                                                â”‚
           â”‚   1052 â”‚   â”‚   return proto                                                                                                 â”‚
           â”‚   1053                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1394 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1391 â”‚   â”‚   â”‚   return transp, proto                                                                                     â”‚
           â”‚   1392 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   1393 â”‚   â”‚   â”‚   assert last_exc is not None                                                                              â”‚
           â”‚ â± 1394 â”‚   â”‚   â”‚   raise last_exc                                                                                           â”‚
           â”‚   1395 â”‚                                                                                                                    â”‚
           â”‚   1396 â”‚   async def _create_proxy_connection(                                                                              â”‚
           â”‚   1397 â”‚   â”‚   self, req: ClientRequest, traces: List["Trace"], timeout: "ClientTimeout"                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1363 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1360 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   1361 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1362 â”‚   â”‚   â”‚   try:                                                                                                     â”‚
           â”‚ â± 1363 â”‚   â”‚   â”‚   â”‚   transp, proto = await self._wrap_create_connection(                                                  â”‚
           â”‚   1364 â”‚   â”‚   â”‚   â”‚   â”‚   self._factory,                                                                                   â”‚
           â”‚   1365 â”‚   â”‚   â”‚   â”‚   â”‚   timeout=timeout,                                                                                 â”‚
           â”‚   1366 â”‚   â”‚   â”‚   â”‚   â”‚   ssl=sslcontext,                                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1124 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1121 â”‚   â”‚   except OSError as exc:                                                                                       â”‚
           â”‚   1122 â”‚   â”‚   â”‚   if exc.errno is None and isinstance(exc, asyncio.TimeoutError):                                          â”‚
           â”‚   1123 â”‚   â”‚   â”‚   â”‚   raise                                                                                                â”‚
           â”‚ â± 1124 â”‚   â”‚   â”‚   raise client_error(req.connection_key, exc) from exc                                                     â”‚
           â”‚   1125 â”‚                                                                                                                    â”‚
           â”‚   1126 â”‚   async def _wrap_existing_connection(                                                                             â”‚
           â”‚   1127 â”‚   â”‚   self,                                                                                                        â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno 111] Connect call failed 
           ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                                                    
                                                                                                                                          
           During handling of the above exception, another exception occurred:                                                            
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:276 in _run_with_timeout_failure                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   273 ) -> tuple[PQASession, AgentStatus]:                                                                                  â”‚
           â”‚   274 â”‚   try:                                                                                                              â”‚
           â”‚   275 â”‚   â”‚   async with asyncio.timeout(query.settings.agent.timeout):                                                     â”‚
           â”‚ â± 276 â”‚   â”‚   â”‚   status = await rollout()                                                                                  â”‚
           â”‚   277 â”‚   except TimeoutError:                                                                                              â”‚
           â”‚   278 â”‚   â”‚   logger.warning(                                                                                               â”‚
           â”‚   279 â”‚   â”‚   â”‚   f"Agent timeout after {query.settings.agent.timeout}-sec, just answering."                                â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:410 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   407 â”‚   â”‚   â”‚   â”‚   )                                                                                                     â”‚
           â”‚   408 â”‚   â”‚   â”‚   â”‚   return AgentStatus.TRUNCATED                                                                          â”‚
           â”‚   409 â”‚   â”‚   â”‚   agent_state.messages += obs                                                                               â”‚
           â”‚ â± 410 â”‚   â”‚   â”‚   for attempt in Retrying(                                                                                  â”‚
           â”‚   411 â”‚   â”‚   â”‚   â”‚   stop=stop_after_attempt(5),                                                                           â”‚
           â”‚   412 â”‚   â”‚   â”‚   â”‚   retry=retry_if_exception_type(MalformedMessageError),                                                 â”‚
           â”‚   413 â”‚   â”‚   â”‚   â”‚   before_sleep=before_sleep_log(logger, logging.WARNING),                                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:443 in __iter__                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   440 â”‚   â”‚                                                                                                                 â”‚
           â”‚   441 â”‚   â”‚   retry_state = RetryCallState(self, fn=None, args=(), kwargs={})                                               â”‚
           â”‚   442 â”‚   â”‚   while True:                                                                                                   â”‚
           â”‚ â± 443 â”‚   â”‚   â”‚   do = self.iter(retry_state=retry_state)                                                                   â”‚
           â”‚   444 â”‚   â”‚   â”‚   if isinstance(do, DoAttempt):                                                                             â”‚
           â”‚   445 â”‚   â”‚   â”‚   â”‚   yield AttemptManager(retry_state=retry_state)                                                         â”‚
           â”‚   446 â”‚   â”‚   â”‚   elif isinstance(do, DoSleep):                                                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:376 in iter                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   373 â”‚   â”‚   self._begin_iter(retry_state)                                                                                 â”‚
           â”‚   374 â”‚   â”‚   result = None                                                                                                 â”‚
           â”‚   375 â”‚   â”‚   for action in self.iter_state.actions:                                                                        â”‚
           â”‚ â± 376 â”‚   â”‚   â”‚   result = action(retry_state)                                                                              â”‚
           â”‚   377 â”‚   â”‚   return result                                                                                                 â”‚
           â”‚   378 â”‚                                                                                                                     â”‚
           â”‚   379 â”‚   def _begin_iter(self, retry_state: "RetryCallState") -> None:  # noqa                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:398 in <lambda>                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   395 â”‚                                                                                                                     â”‚
           â”‚   396 â”‚   def _post_retry_check_actions(self, retry_state: "RetryCallState") -> None:                                       â”‚
           â”‚   397 â”‚   â”‚   if not (self.iter_state.is_explicit_retry or self.iter_state.retry_run_result):                               â”‚
           â”‚ â± 398 â”‚   â”‚   â”‚   self._add_action_func(lambda rs: rs.outcome.result())                                                     â”‚
           â”‚   399 â”‚   â”‚   â”‚   return                                                                                                    â”‚
           â”‚   400 â”‚   â”‚                                                                                                                 â”‚
           â”‚   401 â”‚   â”‚   if self.after is not None:                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:449 in result                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚   446 â”‚   â”‚   â”‚   â”‚   if self._state in [CANCELLED, CANCELLED_AND_NOTIFIED]:                                                â”‚
           â”‚   447 â”‚   â”‚   â”‚   â”‚   â”‚   raise CancelledError()                                                                            â”‚
           â”‚   448 â”‚   â”‚   â”‚   â”‚   elif self._state == FINISHED:                                                                         â”‚
           â”‚ â± 449 â”‚   â”‚   â”‚   â”‚   â”‚   return self.__get_result()                                                                        â”‚
           â”‚   450 â”‚   â”‚   â”‚   â”‚                                                                                                         â”‚
           â”‚   451 â”‚   â”‚   â”‚   â”‚   self._condition.wait(timeout)                                                                         â”‚
           â”‚   452                                                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:401 in __get_result                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   398 â”‚   def __get_result(self):                                                                                           â”‚
           â”‚   399 â”‚   â”‚   if self._exception:                                                                                           â”‚
           â”‚   400 â”‚   â”‚   â”‚   try:                                                                                                      â”‚
           â”‚ â± 401 â”‚   â”‚   â”‚   â”‚   raise self._exception                                                                                 â”‚
           â”‚   402 â”‚   â”‚   â”‚   finally:                                                                                                  â”‚
           â”‚   403 â”‚   â”‚   â”‚   â”‚   # Break a reference cycle with the exception in self._exception                                       â”‚
           â”‚   404 â”‚   â”‚   â”‚   â”‚   self = None                                                                                           â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:417 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   414 â”‚   â”‚   â”‚   â”‚   reraise=True,                                                                                         â”‚
           â”‚   415 â”‚   â”‚   â”‚   ):                                                                                                        â”‚
           â”‚   416 â”‚   â”‚   â”‚   â”‚   with attempt:  # Retrying if ToolSelector fails to select a tool                                      â”‚
           â”‚ â± 417 â”‚   â”‚   â”‚   â”‚   â”‚   action = await agent(agent_state.messages, tools)                                                 â”‚
           â”‚   418 â”‚   â”‚   â”‚   agent_state.messages = [*agent_state.messages, action]                                                    â”‚
           â”‚   419 â”‚   â”‚   â”‚   if on_agent_action_callback:                                                                              â”‚
           â”‚   420 â”‚   â”‚   â”‚   â”‚   await on_agent_action_callback(action, agent_state)                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aviary/tools/utils.py:182 in __call__                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   179 â”‚   â”‚   â”‚   self._ledger.messages.extend(messages)                                                                    â”‚
           â”‚   180 â”‚   â”‚   â”‚   messages = self._ledger.messages                                                                          â”‚
           â”‚   181 â”‚   â”‚                                                                                                                 â”‚
           â”‚ â± 182 â”‚   â”‚   model_response = await self._bound_acompletion(                                                               â”‚
           â”‚   183 â”‚   â”‚   â”‚   messages=MessagesAdapter.dump_python(                                                                     â”‚
           â”‚   184 â”‚   â”‚   â”‚   â”‚   messages, exclude_none=True, by_alias=True                                                            â”‚
           â”‚   185 â”‚   â”‚   â”‚   ),                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:817 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    814 â”‚   â”‚   â”‚   â”‚   â”‚   original_exception=e,                                                                            â”‚
           â”‚    815 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    816 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚ â±  817 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    818 â”‚                                                                                                                    â”‚
           â”‚    819 â”‚   async def _acompletion(                                                                                          â”‚
           â”‚    820 â”‚   â”‚   self, model: str, messages: List[Dict[str, str]], **kwargs                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:793 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    790 â”‚   â”‚   â”‚   if request_priority is not None and isinstance(request_priority, int):                                   â”‚
           â”‚    791 â”‚   â”‚   â”‚   â”‚   response = await self.schedule_acompletion(**kwargs)                                                 â”‚
           â”‚    792 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â±  793 â”‚   â”‚   â”‚   â”‚   response = await self.async_function_with_fallbacks(**kwargs)                                        â”‚
           â”‚    794 â”‚   â”‚   â”‚   end_time = time.time()                                                                                   â”‚
           â”‚    795 â”‚   â”‚   â”‚   _duration = end_time - start_time                                                                        â”‚
           â”‚    796 â”‚   â”‚   â”‚   asyncio.create_task(                                                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2795 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2792 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚   2793 â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                                â”‚
           â”‚   2794 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2795 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2796 â”‚                                                                                                                    â”‚
           â”‚   2797 â”‚   def _handle_mock_testing_fallbacks(                                                                              â”‚
           â”‚   2798 â”‚   â”‚   self,                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2631 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2628 â”‚   â”‚   â”‚   â”‚   content_policy_fallbacks=content_policy_fallbacks,                                                   â”‚
           â”‚   2629 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2630 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2631 â”‚   â”‚   â”‚   response = await self.async_function_with_retries(*args, **kwargs)                                       â”‚
           â”‚   2632 â”‚   â”‚   â”‚   verbose_router_logger.debug(f"Async Response: {response}")                                               â”‚
           â”‚   2633 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2634 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2967 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2964 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "max_retries", num_retries)                                              â”‚
           â”‚   2965 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "num_retries", current_attempt)                                          â”‚
           â”‚   2966 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2967 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2968 â”‚                                                                                                                    â”‚
           â”‚   2969 â”‚   async def make_call(self, original_function: Any, *args, **kwargs):                                              â”‚
           â”‚   2970 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2879 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2876 â”‚   â”‚   â”‚   â”‚   model_group=model_group, kwargs=kwargs                                                               â”‚
           â”‚   2877 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2878 â”‚   â”‚   â”‚   # if the function call is successful, no exception will be raised and we'll                              â”‚
           â”‚        break out of the loop                                                                                                â”‚
           â”‚ â± 2879 â”‚   â”‚   â”‚   response = await self.make_call(original_function, *args, **kwargs)                                      â”‚
           â”‚   2880 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   2881 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2882 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2976 in make_call                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2973 â”‚   â”‚   model_group = kwargs.get("model")                                                                            â”‚
           â”‚   2974 â”‚   â”‚   response = original_function(*args, **kwargs)                                                                â”‚
           â”‚   2975 â”‚   â”‚   if inspect.iscoroutinefunction(response) or inspect.isawaitable(response):                                   â”‚
           â”‚ â± 2976 â”‚   â”‚   â”‚   response = await response                                                                                â”‚
           â”‚   2977 â”‚   â”‚   ## PROCESS RESPONSE HEADERS                                                                                  â”‚
           â”‚   2978 â”‚   â”‚   await self.set_response_headers(response=response, model_group=model_group)                                  â”‚
           â”‚   2979                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:947 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    944 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚    945 â”‚   â”‚   â”‚   if model_name is not None:                                                                               â”‚
           â”‚    946 â”‚   â”‚   â”‚   â”‚   self.fail_calls[model_name] += 1                                                                     â”‚
           â”‚ â±  947 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    948 â”‚                                                                                                                    â”‚
           â”‚    949 â”‚   def _update_kwargs_before_fallbacks(self, model: str, kwargs: dict) -> None:                                     â”‚
           â”‚    950 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:915 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    912 â”‚   â”‚   â”‚   â”‚   â”‚   parent_otel_span=parent_otel_span,                                                               â”‚
           â”‚    913 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    914 â”‚   â”‚   â”‚   â”‚                                                                                                        â”‚
           â”‚ â±  915 â”‚   â”‚   â”‚   â”‚   response = await _response                                                                           â”‚
           â”‚    916 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚    917 â”‚   â”‚   â”‚   ## CHECK CONTENT FILTER ERROR ##                                                                         â”‚
           â”‚    918 â”‚   â”‚   â”‚   if isinstance(response, ModelResponse):                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1175 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1172 â”‚   â”‚   â”‚   â”‚   â”‚   else:                                                                                            â”‚
           â”‚   1173 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   kwargs["model"] = context_window_fallback_dict[model]                                        â”‚
           â”‚   1174 â”‚   â”‚   â”‚   â”‚   â”‚   return await original_function(*args, **kwargs)                                                  â”‚
           â”‚ â± 1175 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   1176 â”‚                                                                                                                    â”‚
           â”‚   1177 â”‚   is_coroutine = inspect.iscoroutinefunction(original_function)                                                    â”‚
           â”‚   1178                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1031 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1028 â”‚   â”‚   â”‚   â”‚   return _caching_handler_response.final_embedding_cached_response                                     â”‚
           â”‚   1029 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1030 â”‚   â”‚   â”‚   # MODEL CALL                                                                                             â”‚
           â”‚ â± 1031 â”‚   â”‚   â”‚   result = await original_function(*args, **kwargs)                                                        â”‚
           â”‚   1032 â”‚   â”‚   â”‚   end_time = datetime.datetime.now()                                                                       â”‚
           â”‚   1033 â”‚   â”‚   â”‚   if "stream" in kwargs and kwargs["stream"] is True:                                                      â”‚
           â”‚   1034 â”‚   â”‚   â”‚   â”‚   if (                                                                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:499 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    496 â”‚   â”‚   return response                                                                                              â”‚
           â”‚    497 â”‚   except Exception as e:                                                                                           â”‚
           â”‚    498 â”‚   â”‚   custom_llm_provider = custom_llm_provider or "openai"                                                        â”‚
           â”‚ â±  499 â”‚   â”‚   raise exception_type(                                                                                        â”‚
           â”‚    500 â”‚   â”‚   â”‚   model=model,                                                                                             â”‚
           â”‚    501 â”‚   â”‚   â”‚   custom_llm_provider=custom_llm_provider,                                                                 â”‚
           â”‚    502 â”‚   â”‚   â”‚   original_exception=e,                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:212 â”‚
           â”‚ 5 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2122 â”‚   â”‚   # don't let an error with mapping interrupt the user from receiving an error                                 â”‚
           â”‚        from the llm api calls                                                                                               â”‚
           â”‚   2123 â”‚   â”‚   if exception_mapping_worked:                                                                                 â”‚
           â”‚   2124 â”‚   â”‚   â”‚   setattr(e, "litellm_response_headers", litellm_response_headers)                                         â”‚
           â”‚ â± 2125 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   2126 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   2127 â”‚   â”‚   â”‚   for error_type in litellm.LITELLM_EXCEPTION_TYPES:                                                       â”‚
           â”‚   2128 â”‚   â”‚   â”‚   â”‚   if isinstance(e, error_type):                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:210 â”‚
           â”‚ 1 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2098 â”‚   â”‚   â”‚   â”‚   â”‚   request=original_exception.request,                                                              â”‚
           â”‚   2099 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚   2100 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â± 2101 â”‚   â”‚   â”‚   â”‚   raise APIConnectionError(                                                                            â”‚
           â”‚   2102 â”‚   â”‚   â”‚   â”‚   â”‚   message="{}\n{}".format(                                                                         â”‚
           â”‚   2103 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   str(original_exception), traceback.format_exc()                                              â”‚
           â”‚   2104 â”‚   â”‚   â”‚   â”‚   â”‚   ),                                                                                               â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           APIConnectionError: litellm.APIConnectionError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1109, in                 
           _wrap_create_connection                                                                                                        
               sock = await aiohappyeyeballs.start_connection(                                                                            
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                            
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py", line 123, in              
           start_connection                                                                                                               
               raise OSError(first_errno, msg)                                                                                            
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py", line 477, in acompletion           
               response = await init_response                                                                                             
                          ^^^^^^^^^^^^^^^^^^^                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 566, in                
           ollama_acompletion                                                                                                             
               raise e  # don't use verbose_logger.exception, if exception is raised                                                      
               ^^^^^^^                                                                                                                    
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 507, in                
           ollama_acompletion                                                                                                             
               resp = await session.post(url, json=data)                                                                                  
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                  
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py", line 696, in _request            
               conn = await self._connector.connect(                                                                                      
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 544, in connect          
               proto = await self._create_connection(req, traces, timeout)                                                                
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1050, in                 
           _create_connection                                                                                                             
               _, proto = await self._create_direct_connection(req, traces, timeout)                                                      
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1394, in                 
           _create_direct_connection                                                                                                      
               raise last_exc                                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1363, in                 
           _create_direct_connection                                                                                                      
               transp, proto = await self._wrap_create_connection(                                                                        
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                        
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1124, in                 
           _wrap_create_connection                                                                                                        
               raise client_error(req.connection_key, exc) from exc                                                                       
           aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
                                                                                                                                          
           Received Model Group=ollama/llama3.2                                                                                           
           Available Model Group Fallbacks=None LiteLLM Retried: 2 times, LiteLLM Max Retries: 3                                          
[00:55:05] Answer:                                                                                                                        


 ANSWERING QUESTION: sciqag_question_62.json
 ----------------------------- 



[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.

[00:55:25] Trajectory failed.                                                                                                             
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1109 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1106 â”‚   â”‚   â”‚   async with ceil_timeout(                                                                                 â”‚
           â”‚   1107 â”‚   â”‚   â”‚   â”‚   timeout.sock_connect, ceil_threshold=timeout.ceil_threshold                                          â”‚
           â”‚   1108 â”‚   â”‚   â”‚   ):                                                                                                       â”‚
           â”‚ â± 1109 â”‚   â”‚   â”‚   â”‚   sock = await aiohappyeyeballs.start_connection(                                                      â”‚
           â”‚   1110 â”‚   â”‚   â”‚   â”‚   â”‚   addr_infos=addr_infos,                                                                           â”‚
           â”‚   1111 â”‚   â”‚   â”‚   â”‚   â”‚   local_addr_infos=self._local_addr_infos,                                                         â”‚
           â”‚   1112 â”‚   â”‚   â”‚   â”‚   â”‚   happy_eyeballs_delay=self._happy_eyeballs_delay,                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py:123 in start_connection          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   120 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, OSError) and exc.errno == first_errno                                         â”‚
           â”‚   121 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   for exc in all_exceptions                                                                     â”‚
           â”‚   122 â”‚   â”‚   â”‚   â”‚   â”‚   ):                                                                                                â”‚
           â”‚ â± 123 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   raise OSError(first_errno, msg)                                                               â”‚
           â”‚   124 â”‚   â”‚   â”‚   â”‚   elif isinstance(first_exception, RuntimeError) and all(                                               â”‚
           â”‚   125 â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, RuntimeError) for exc in all_exceptions                                           â”‚
           â”‚   126 â”‚   â”‚   â”‚   â”‚   ):                                                                                                    â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:477 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    474 â”‚   â”‚   â”‚   â”‚   â”‚   response = ModelResponse(**init_response)                                                        â”‚
           â”‚    475 â”‚   â”‚   â”‚   â”‚   response = init_response                                                                             â”‚
           â”‚    476 â”‚   â”‚   â”‚   elif asyncio.iscoroutine(init_response):                                                                 â”‚
           â”‚ â±  477 â”‚   â”‚   â”‚   â”‚   response = await init_response                                                                       â”‚
           â”‚    478 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚    479 â”‚   â”‚   â”‚   â”‚   response = init_response  # type: ignore                                                             â”‚
           â”‚    480                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:566 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   563 â”‚   â”‚   â”‚   )                                                                                                         â”‚
           â”‚   564 â”‚   â”‚   â”‚   return model_response                                                                                     â”‚
           â”‚   565 â”‚   except Exception as e:                                                                                            â”‚
           â”‚ â± 566 â”‚   â”‚   raise e  # don't use verbose_logger.exception, if exception is raised                                         â”‚
           â”‚   567                                                                                                                       â”‚
           â”‚   568                                                                                                                       â”‚
           â”‚   569 async def ollama_aembeddings(                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:507 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   504 â”‚   try:                                                                                                              â”‚
           â”‚   505 â”‚   â”‚   timeout = aiohttp.ClientTimeout(total=litellm.request_timeout)  # 10 minutes                                  â”‚
           â”‚   506 â”‚   â”‚   async with aiohttp.ClientSession(timeout=timeout) as session:                                                 â”‚
           â”‚ â± 507 â”‚   â”‚   â”‚   resp = await session.post(url, json=data)                                                                 â”‚
           â”‚   508 â”‚   â”‚   â”‚                                                                                                             â”‚
           â”‚   509 â”‚   â”‚   â”‚   if resp.status != 200:                                                                                    â”‚
           â”‚   510 â”‚   â”‚   â”‚   â”‚   text = await resp.text()                                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py:696 in _request                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚    693 â”‚   â”‚   â”‚   â”‚   â”‚                                                                                                    â”‚
           â”‚    694 â”‚   â”‚   â”‚   â”‚   â”‚   # connection timeout                                                                             â”‚
           â”‚    695 â”‚   â”‚   â”‚   â”‚   â”‚   try:                                                                                             â”‚
           â”‚ â±  696 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   conn = await self._connector.connect(                                                        â”‚
           â”‚    697 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   req, traces=traces, timeout=real_timeout                                                 â”‚
           â”‚    698 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚    699 â”‚   â”‚   â”‚   â”‚   â”‚   except asyncio.TimeoutError as exc:                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:544 in connect                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚    541 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    542 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    543 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_start()                                                   â”‚
           â”‚ â±  544 â”‚   â”‚   â”‚   â”‚   proto = await self._create_connection(req, traces, timeout)                                          â”‚
           â”‚    545 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    546 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    547 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_end()                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1050 in _create_connection           â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1047 â”‚   â”‚   if req.proxy:                                                                                                â”‚
           â”‚   1048 â”‚   â”‚   â”‚   _, proto = await self._create_proxy_connection(req, traces, timeout)                                     â”‚
           â”‚   1049 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚ â± 1050 â”‚   â”‚   â”‚   _, proto = await self._create_direct_connection(req, traces, timeout)                                    â”‚
           â”‚   1051 â”‚   â”‚                                                                                                                â”‚
           â”‚   1052 â”‚   â”‚   return proto                                                                                                 â”‚
           â”‚   1053                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1394 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1391 â”‚   â”‚   â”‚   return transp, proto                                                                                     â”‚
           â”‚   1392 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   1393 â”‚   â”‚   â”‚   assert last_exc is not None                                                                              â”‚
           â”‚ â± 1394 â”‚   â”‚   â”‚   raise last_exc                                                                                           â”‚
           â”‚   1395 â”‚                                                                                                                    â”‚
           â”‚   1396 â”‚   async def _create_proxy_connection(                                                                              â”‚
           â”‚   1397 â”‚   â”‚   self, req: ClientRequest, traces: List["Trace"], timeout: "ClientTimeout"                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1363 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1360 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   1361 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1362 â”‚   â”‚   â”‚   try:                                                                                                     â”‚
           â”‚ â± 1363 â”‚   â”‚   â”‚   â”‚   transp, proto = await self._wrap_create_connection(                                                  â”‚
           â”‚   1364 â”‚   â”‚   â”‚   â”‚   â”‚   self._factory,                                                                                   â”‚
           â”‚   1365 â”‚   â”‚   â”‚   â”‚   â”‚   timeout=timeout,                                                                                 â”‚
           â”‚   1366 â”‚   â”‚   â”‚   â”‚   â”‚   ssl=sslcontext,                                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1124 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1121 â”‚   â”‚   except OSError as exc:                                                                                       â”‚
           â”‚   1122 â”‚   â”‚   â”‚   if exc.errno is None and isinstance(exc, asyncio.TimeoutError):                                          â”‚
           â”‚   1123 â”‚   â”‚   â”‚   â”‚   raise                                                                                                â”‚
           â”‚ â± 1124 â”‚   â”‚   â”‚   raise client_error(req.connection_key, exc) from exc                                                     â”‚
           â”‚   1125 â”‚                                                                                                                    â”‚
           â”‚   1126 â”‚   async def _wrap_existing_connection(                                                                             â”‚
           â”‚   1127 â”‚   â”‚   self,                                                                                                        â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno 111] Connect call failed 
           ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                                                    
                                                                                                                                          
           During handling of the above exception, another exception occurred:                                                            
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:276 in _run_with_timeout_failure                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   273 ) -> tuple[PQASession, AgentStatus]:                                                                                  â”‚
           â”‚   274 â”‚   try:                                                                                                              â”‚
           â”‚   275 â”‚   â”‚   async with asyncio.timeout(query.settings.agent.timeout):                                                     â”‚
           â”‚ â± 276 â”‚   â”‚   â”‚   status = await rollout()                                                                                  â”‚
           â”‚   277 â”‚   except TimeoutError:                                                                                              â”‚
           â”‚   278 â”‚   â”‚   logger.warning(                                                                                               â”‚
           â”‚   279 â”‚   â”‚   â”‚   f"Agent timeout after {query.settings.agent.timeout}-sec, just answering."                                â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:410 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   407 â”‚   â”‚   â”‚   â”‚   )                                                                                                     â”‚
           â”‚   408 â”‚   â”‚   â”‚   â”‚   return AgentStatus.TRUNCATED                                                                          â”‚
           â”‚   409 â”‚   â”‚   â”‚   agent_state.messages += obs                                                                               â”‚
           â”‚ â± 410 â”‚   â”‚   â”‚   for attempt in Retrying(                                                                                  â”‚
           â”‚   411 â”‚   â”‚   â”‚   â”‚   stop=stop_after_attempt(5),                                                                           â”‚
           â”‚   412 â”‚   â”‚   â”‚   â”‚   retry=retry_if_exception_type(MalformedMessageError),                                                 â”‚
           â”‚   413 â”‚   â”‚   â”‚   â”‚   before_sleep=before_sleep_log(logger, logging.WARNING),                                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:443 in __iter__                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   440 â”‚   â”‚                                                                                                                 â”‚
           â”‚   441 â”‚   â”‚   retry_state = RetryCallState(self, fn=None, args=(), kwargs={})                                               â”‚
           â”‚   442 â”‚   â”‚   while True:                                                                                                   â”‚
           â”‚ â± 443 â”‚   â”‚   â”‚   do = self.iter(retry_state=retry_state)                                                                   â”‚
           â”‚   444 â”‚   â”‚   â”‚   if isinstance(do, DoAttempt):                                                                             â”‚
           â”‚   445 â”‚   â”‚   â”‚   â”‚   yield AttemptManager(retry_state=retry_state)                                                         â”‚
           â”‚   446 â”‚   â”‚   â”‚   elif isinstance(do, DoSleep):                                                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:376 in iter                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   373 â”‚   â”‚   self._begin_iter(retry_state)                                                                                 â”‚
           â”‚   374 â”‚   â”‚   result = None                                                                                                 â”‚
           â”‚   375 â”‚   â”‚   for action in self.iter_state.actions:                                                                        â”‚
           â”‚ â± 376 â”‚   â”‚   â”‚   result = action(retry_state)                                                                              â”‚
           â”‚   377 â”‚   â”‚   return result                                                                                                 â”‚
           â”‚   378 â”‚                                                                                                                     â”‚
           â”‚   379 â”‚   def _begin_iter(self, retry_state: "RetryCallState") -> None:  # noqa                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:398 in <lambda>                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   395 â”‚                                                                                                                     â”‚
           â”‚   396 â”‚   def _post_retry_check_actions(self, retry_state: "RetryCallState") -> None:                                       â”‚
           â”‚   397 â”‚   â”‚   if not (self.iter_state.is_explicit_retry or self.iter_state.retry_run_result):                               â”‚
           â”‚ â± 398 â”‚   â”‚   â”‚   self._add_action_func(lambda rs: rs.outcome.result())                                                     â”‚
           â”‚   399 â”‚   â”‚   â”‚   return                                                                                                    â”‚
           â”‚   400 â”‚   â”‚                                                                                                                 â”‚
           â”‚   401 â”‚   â”‚   if self.after is not None:                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:449 in result                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚   446 â”‚   â”‚   â”‚   â”‚   if self._state in [CANCELLED, CANCELLED_AND_NOTIFIED]:                                                â”‚
           â”‚   447 â”‚   â”‚   â”‚   â”‚   â”‚   raise CancelledError()                                                                            â”‚
           â”‚   448 â”‚   â”‚   â”‚   â”‚   elif self._state == FINISHED:                                                                         â”‚
           â”‚ â± 449 â”‚   â”‚   â”‚   â”‚   â”‚   return self.__get_result()                                                                        â”‚
           â”‚   450 â”‚   â”‚   â”‚   â”‚                                                                                                         â”‚
           â”‚   451 â”‚   â”‚   â”‚   â”‚   self._condition.wait(timeout)                                                                         â”‚
           â”‚   452                                                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:401 in __get_result                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   398 â”‚   def __get_result(self):                                                                                           â”‚
           â”‚   399 â”‚   â”‚   if self._exception:                                                                                           â”‚
           â”‚   400 â”‚   â”‚   â”‚   try:                                                                                                      â”‚
           â”‚ â± 401 â”‚   â”‚   â”‚   â”‚   raise self._exception                                                                                 â”‚
           â”‚   402 â”‚   â”‚   â”‚   finally:                                                                                                  â”‚
           â”‚   403 â”‚   â”‚   â”‚   â”‚   # Break a reference cycle with the exception in self._exception                                       â”‚
           â”‚   404 â”‚   â”‚   â”‚   â”‚   self = None                                                                                           â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:417 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   414 â”‚   â”‚   â”‚   â”‚   reraise=True,                                                                                         â”‚
           â”‚   415 â”‚   â”‚   â”‚   ):                                                                                                        â”‚
           â”‚   416 â”‚   â”‚   â”‚   â”‚   with attempt:  # Retrying if ToolSelector fails to select a tool                                      â”‚
           â”‚ â± 417 â”‚   â”‚   â”‚   â”‚   â”‚   action = await agent(agent_state.messages, tools)                                                 â”‚
           â”‚   418 â”‚   â”‚   â”‚   agent_state.messages = [*agent_state.messages, action]                                                    â”‚
           â”‚   419 â”‚   â”‚   â”‚   if on_agent_action_callback:                                                                              â”‚
           â”‚   420 â”‚   â”‚   â”‚   â”‚   await on_agent_action_callback(action, agent_state)                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aviary/tools/utils.py:182 in __call__                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   179 â”‚   â”‚   â”‚   self._ledger.messages.extend(messages)                                                                    â”‚
           â”‚   180 â”‚   â”‚   â”‚   messages = self._ledger.messages                                                                          â”‚
           â”‚   181 â”‚   â”‚                                                                                                                 â”‚
           â”‚ â± 182 â”‚   â”‚   model_response = await self._bound_acompletion(                                                               â”‚
           â”‚   183 â”‚   â”‚   â”‚   messages=MessagesAdapter.dump_python(                                                                     â”‚
           â”‚   184 â”‚   â”‚   â”‚   â”‚   messages, exclude_none=True, by_alias=True                                                            â”‚
           â”‚   185 â”‚   â”‚   â”‚   ),                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:817 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    814 â”‚   â”‚   â”‚   â”‚   â”‚   original_exception=e,                                                                            â”‚
           â”‚    815 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    816 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚ â±  817 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    818 â”‚                                                                                                                    â”‚
           â”‚    819 â”‚   async def _acompletion(                                                                                          â”‚
           â”‚    820 â”‚   â”‚   self, model: str, messages: List[Dict[str, str]], **kwargs                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:793 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    790 â”‚   â”‚   â”‚   if request_priority is not None and isinstance(request_priority, int):                                   â”‚
           â”‚    791 â”‚   â”‚   â”‚   â”‚   response = await self.schedule_acompletion(**kwargs)                                                 â”‚
           â”‚    792 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â±  793 â”‚   â”‚   â”‚   â”‚   response = await self.async_function_with_fallbacks(**kwargs)                                        â”‚
           â”‚    794 â”‚   â”‚   â”‚   end_time = time.time()                                                                                   â”‚
           â”‚    795 â”‚   â”‚   â”‚   _duration = end_time - start_time                                                                        â”‚
           â”‚    796 â”‚   â”‚   â”‚   asyncio.create_task(                                                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2795 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2792 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚   2793 â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                                â”‚
           â”‚   2794 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2795 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2796 â”‚                                                                                                                    â”‚
           â”‚   2797 â”‚   def _handle_mock_testing_fallbacks(                                                                              â”‚
           â”‚   2798 â”‚   â”‚   self,                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2631 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2628 â”‚   â”‚   â”‚   â”‚   content_policy_fallbacks=content_policy_fallbacks,                                                   â”‚
           â”‚   2629 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2630 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2631 â”‚   â”‚   â”‚   response = await self.async_function_with_retries(*args, **kwargs)                                       â”‚
           â”‚   2632 â”‚   â”‚   â”‚   verbose_router_logger.debug(f"Async Response: {response}")                                               â”‚
           â”‚   2633 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2634 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2967 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2964 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "max_retries", num_retries)                                              â”‚
           â”‚   2965 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "num_retries", current_attempt)                                          â”‚
           â”‚   2966 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2967 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2968 â”‚                                                                                                                    â”‚
           â”‚   2969 â”‚   async def make_call(self, original_function: Any, *args, **kwargs):                                              â”‚
           â”‚   2970 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2879 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2876 â”‚   â”‚   â”‚   â”‚   model_group=model_group, kwargs=kwargs                                                               â”‚
           â”‚   2877 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2878 â”‚   â”‚   â”‚   # if the function call is successful, no exception will be raised and we'll                              â”‚
           â”‚        break out of the loop                                                                                                â”‚
           â”‚ â± 2879 â”‚   â”‚   â”‚   response = await self.make_call(original_function, *args, **kwargs)                                      â”‚
           â”‚   2880 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   2881 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2882 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2976 in make_call                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2973 â”‚   â”‚   model_group = kwargs.get("model")                                                                            â”‚
           â”‚   2974 â”‚   â”‚   response = original_function(*args, **kwargs)                                                                â”‚
           â”‚   2975 â”‚   â”‚   if inspect.iscoroutinefunction(response) or inspect.isawaitable(response):                                   â”‚
           â”‚ â± 2976 â”‚   â”‚   â”‚   response = await response                                                                                â”‚
           â”‚   2977 â”‚   â”‚   ## PROCESS RESPONSE HEADERS                                                                                  â”‚
           â”‚   2978 â”‚   â”‚   await self.set_response_headers(response=response, model_group=model_group)                                  â”‚
           â”‚   2979                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:947 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    944 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚    945 â”‚   â”‚   â”‚   if model_name is not None:                                                                               â”‚
           â”‚    946 â”‚   â”‚   â”‚   â”‚   self.fail_calls[model_name] += 1                                                                     â”‚
           â”‚ â±  947 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    948 â”‚                                                                                                                    â”‚
           â”‚    949 â”‚   def _update_kwargs_before_fallbacks(self, model: str, kwargs: dict) -> None:                                     â”‚
           â”‚    950 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:915 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    912 â”‚   â”‚   â”‚   â”‚   â”‚   parent_otel_span=parent_otel_span,                                                               â”‚
           â”‚    913 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    914 â”‚   â”‚   â”‚   â”‚                                                                                                        â”‚
           â”‚ â±  915 â”‚   â”‚   â”‚   â”‚   response = await _response                                                                           â”‚
           â”‚    916 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚    917 â”‚   â”‚   â”‚   ## CHECK CONTENT FILTER ERROR ##                                                                         â”‚
           â”‚    918 â”‚   â”‚   â”‚   if isinstance(response, ModelResponse):                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1175 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1172 â”‚   â”‚   â”‚   â”‚   â”‚   else:                                                                                            â”‚
           â”‚   1173 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   kwargs["model"] = context_window_fallback_dict[model]                                        â”‚
           â”‚   1174 â”‚   â”‚   â”‚   â”‚   â”‚   return await original_function(*args, **kwargs)                                                  â”‚
           â”‚ â± 1175 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   1176 â”‚                                                                                                                    â”‚
           â”‚   1177 â”‚   is_coroutine = inspect.iscoroutinefunction(original_function)                                                    â”‚
           â”‚   1178                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1031 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1028 â”‚   â”‚   â”‚   â”‚   return _caching_handler_response.final_embedding_cached_response                                     â”‚
           â”‚   1029 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1030 â”‚   â”‚   â”‚   # MODEL CALL                                                                                             â”‚
           â”‚ â± 1031 â”‚   â”‚   â”‚   result = await original_function(*args, **kwargs)                                                        â”‚
           â”‚   1032 â”‚   â”‚   â”‚   end_time = datetime.datetime.now()                                                                       â”‚
           â”‚   1033 â”‚   â”‚   â”‚   if "stream" in kwargs and kwargs["stream"] is True:                                                      â”‚
           â”‚   1034 â”‚   â”‚   â”‚   â”‚   if (                                                                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:499 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    496 â”‚   â”‚   return response                                                                                              â”‚
           â”‚    497 â”‚   except Exception as e:                                                                                           â”‚
           â”‚    498 â”‚   â”‚   custom_llm_provider = custom_llm_provider or "openai"                                                        â”‚
           â”‚ â±  499 â”‚   â”‚   raise exception_type(                                                                                        â”‚
           â”‚    500 â”‚   â”‚   â”‚   model=model,                                                                                             â”‚
           â”‚    501 â”‚   â”‚   â”‚   custom_llm_provider=custom_llm_provider,                                                                 â”‚
           â”‚    502 â”‚   â”‚   â”‚   original_exception=e,                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:212 â”‚
           â”‚ 5 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2122 â”‚   â”‚   # don't let an error with mapping interrupt the user from receiving an error                                 â”‚
           â”‚        from the llm api calls                                                                                               â”‚
           â”‚   2123 â”‚   â”‚   if exception_mapping_worked:                                                                                 â”‚
           â”‚   2124 â”‚   â”‚   â”‚   setattr(e, "litellm_response_headers", litellm_response_headers)                                         â”‚
           â”‚ â± 2125 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   2126 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   2127 â”‚   â”‚   â”‚   for error_type in litellm.LITELLM_EXCEPTION_TYPES:                                                       â”‚
           â”‚   2128 â”‚   â”‚   â”‚   â”‚   if isinstance(e, error_type):                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:210 â”‚
           â”‚ 1 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2098 â”‚   â”‚   â”‚   â”‚   â”‚   request=original_exception.request,                                                              â”‚
           â”‚   2099 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚   2100 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â± 2101 â”‚   â”‚   â”‚   â”‚   raise APIConnectionError(                                                                            â”‚
           â”‚   2102 â”‚   â”‚   â”‚   â”‚   â”‚   message="{}\n{}".format(                                                                         â”‚
           â”‚   2103 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   str(original_exception), traceback.format_exc()                                              â”‚
           â”‚   2104 â”‚   â”‚   â”‚   â”‚   â”‚   ),                                                                                               â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           APIConnectionError: litellm.APIConnectionError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1109, in                 
           _wrap_create_connection                                                                                                        
               sock = await aiohappyeyeballs.start_connection(                                                                            
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                            
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py", line 123, in              
           start_connection                                                                                                               
               raise OSError(first_errno, msg)                                                                                            
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py", line 477, in acompletion           
               response = await init_response                                                                                             
                          ^^^^^^^^^^^^^^^^^^^                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 566, in                
           ollama_acompletion                                                                                                             
               raise e  # don't use verbose_logger.exception, if exception is raised                                                      
               ^^^^^^^                                                                                                                    
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 507, in                
           ollama_acompletion                                                                                                             
               resp = await session.post(url, json=data)                                                                                  
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                  
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py", line 696, in _request            
               conn = await self._connector.connect(                                                                                      
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 544, in connect          
               proto = await self._create_connection(req, traces, timeout)                                                                
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1050, in                 
           _create_connection                                                                                                             
               _, proto = await self._create_direct_connection(req, traces, timeout)                                                      
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1394, in                 
           _create_direct_connection                                                                                                      
               raise last_exc                                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1363, in                 
           _create_direct_connection                                                                                                      
               transp, proto = await self._wrap_create_connection(                                                                        
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                        
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1124, in                 
           _wrap_create_connection                                                                                                        
               raise client_error(req.connection_key, exc) from exc                                                                       
           aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
                                                                                                                                          
           Received Model Group=ollama/llama3.2                                                                                           
           Available Model Group Fallbacks=None LiteLLM Retried: 2 times, LiteLLM Max Retries: 3                                          
[00:55:28] Answer:                                                                                                                        


 ANSWERING QUESTION: sciqag_question_63.json
 ----------------------------- 



[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.

[00:55:48] Trajectory failed.                                                                                                             
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1109 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1106 â”‚   â”‚   â”‚   async with ceil_timeout(                                                                                 â”‚
           â”‚   1107 â”‚   â”‚   â”‚   â”‚   timeout.sock_connect, ceil_threshold=timeout.ceil_threshold                                          â”‚
           â”‚   1108 â”‚   â”‚   â”‚   ):                                                                                                       â”‚
           â”‚ â± 1109 â”‚   â”‚   â”‚   â”‚   sock = await aiohappyeyeballs.start_connection(                                                      â”‚
           â”‚   1110 â”‚   â”‚   â”‚   â”‚   â”‚   addr_infos=addr_infos,                                                                           â”‚
           â”‚   1111 â”‚   â”‚   â”‚   â”‚   â”‚   local_addr_infos=self._local_addr_infos,                                                         â”‚
           â”‚   1112 â”‚   â”‚   â”‚   â”‚   â”‚   happy_eyeballs_delay=self._happy_eyeballs_delay,                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py:123 in start_connection          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   120 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, OSError) and exc.errno == first_errno                                         â”‚
           â”‚   121 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   for exc in all_exceptions                                                                     â”‚
           â”‚   122 â”‚   â”‚   â”‚   â”‚   â”‚   ):                                                                                                â”‚
           â”‚ â± 123 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   raise OSError(first_errno, msg)                                                               â”‚
           â”‚   124 â”‚   â”‚   â”‚   â”‚   elif isinstance(first_exception, RuntimeError) and all(                                               â”‚
           â”‚   125 â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, RuntimeError) for exc in all_exceptions                                           â”‚
           â”‚   126 â”‚   â”‚   â”‚   â”‚   ):                                                                                                    â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:477 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    474 â”‚   â”‚   â”‚   â”‚   â”‚   response = ModelResponse(**init_response)                                                        â”‚
           â”‚    475 â”‚   â”‚   â”‚   â”‚   response = init_response                                                                             â”‚
           â”‚    476 â”‚   â”‚   â”‚   elif asyncio.iscoroutine(init_response):                                                                 â”‚
           â”‚ â±  477 â”‚   â”‚   â”‚   â”‚   response = await init_response                                                                       â”‚
           â”‚    478 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚    479 â”‚   â”‚   â”‚   â”‚   response = init_response  # type: ignore                                                             â”‚
           â”‚    480                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:566 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   563 â”‚   â”‚   â”‚   )                                                                                                         â”‚
           â”‚   564 â”‚   â”‚   â”‚   return model_response                                                                                     â”‚
           â”‚   565 â”‚   except Exception as e:                                                                                            â”‚
           â”‚ â± 566 â”‚   â”‚   raise e  # don't use verbose_logger.exception, if exception is raised                                         â”‚
           â”‚   567                                                                                                                       â”‚
           â”‚   568                                                                                                                       â”‚
           â”‚   569 async def ollama_aembeddings(                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:507 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   504 â”‚   try:                                                                                                              â”‚
           â”‚   505 â”‚   â”‚   timeout = aiohttp.ClientTimeout(total=litellm.request_timeout)  # 10 minutes                                  â”‚
           â”‚   506 â”‚   â”‚   async with aiohttp.ClientSession(timeout=timeout) as session:                                                 â”‚
           â”‚ â± 507 â”‚   â”‚   â”‚   resp = await session.post(url, json=data)                                                                 â”‚
           â”‚   508 â”‚   â”‚   â”‚                                                                                                             â”‚
           â”‚   509 â”‚   â”‚   â”‚   if resp.status != 200:                                                                                    â”‚
           â”‚   510 â”‚   â”‚   â”‚   â”‚   text = await resp.text()                                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py:696 in _request                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚    693 â”‚   â”‚   â”‚   â”‚   â”‚                                                                                                    â”‚
           â”‚    694 â”‚   â”‚   â”‚   â”‚   â”‚   # connection timeout                                                                             â”‚
           â”‚    695 â”‚   â”‚   â”‚   â”‚   â”‚   try:                                                                                             â”‚
           â”‚ â±  696 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   conn = await self._connector.connect(                                                        â”‚
           â”‚    697 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   req, traces=traces, timeout=real_timeout                                                 â”‚
           â”‚    698 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚    699 â”‚   â”‚   â”‚   â”‚   â”‚   except asyncio.TimeoutError as exc:                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:544 in connect                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚    541 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    542 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    543 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_start()                                                   â”‚
           â”‚ â±  544 â”‚   â”‚   â”‚   â”‚   proto = await self._create_connection(req, traces, timeout)                                          â”‚
           â”‚    545 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    546 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    547 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_end()                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1050 in _create_connection           â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1047 â”‚   â”‚   if req.proxy:                                                                                                â”‚
           â”‚   1048 â”‚   â”‚   â”‚   _, proto = await self._create_proxy_connection(req, traces, timeout)                                     â”‚
           â”‚   1049 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚ â± 1050 â”‚   â”‚   â”‚   _, proto = await self._create_direct_connection(req, traces, timeout)                                    â”‚
           â”‚   1051 â”‚   â”‚                                                                                                                â”‚
           â”‚   1052 â”‚   â”‚   return proto                                                                                                 â”‚
           â”‚   1053                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1394 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1391 â”‚   â”‚   â”‚   return transp, proto                                                                                     â”‚
           â”‚   1392 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   1393 â”‚   â”‚   â”‚   assert last_exc is not None                                                                              â”‚
           â”‚ â± 1394 â”‚   â”‚   â”‚   raise last_exc                                                                                           â”‚
           â”‚   1395 â”‚                                                                                                                    â”‚
           â”‚   1396 â”‚   async def _create_proxy_connection(                                                                              â”‚
           â”‚   1397 â”‚   â”‚   self, req: ClientRequest, traces: List["Trace"], timeout: "ClientTimeout"                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1363 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1360 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   1361 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1362 â”‚   â”‚   â”‚   try:                                                                                                     â”‚
           â”‚ â± 1363 â”‚   â”‚   â”‚   â”‚   transp, proto = await self._wrap_create_connection(                                                  â”‚
           â”‚   1364 â”‚   â”‚   â”‚   â”‚   â”‚   self._factory,                                                                                   â”‚
           â”‚   1365 â”‚   â”‚   â”‚   â”‚   â”‚   timeout=timeout,                                                                                 â”‚
           â”‚   1366 â”‚   â”‚   â”‚   â”‚   â”‚   ssl=sslcontext,                                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1124 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1121 â”‚   â”‚   except OSError as exc:                                                                                       â”‚
           â”‚   1122 â”‚   â”‚   â”‚   if exc.errno is None and isinstance(exc, asyncio.TimeoutError):                                          â”‚
           â”‚   1123 â”‚   â”‚   â”‚   â”‚   raise                                                                                                â”‚
           â”‚ â± 1124 â”‚   â”‚   â”‚   raise client_error(req.connection_key, exc) from exc                                                     â”‚
           â”‚   1125 â”‚                                                                                                                    â”‚
           â”‚   1126 â”‚   async def _wrap_existing_connection(                                                                             â”‚
           â”‚   1127 â”‚   â”‚   self,                                                                                                        â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno 111] Connect call failed 
           ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                                                    
                                                                                                                                          
           During handling of the above exception, another exception occurred:                                                            
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:276 in _run_with_timeout_failure                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   273 ) -> tuple[PQASession, AgentStatus]:                                                                                  â”‚
           â”‚   274 â”‚   try:                                                                                                              â”‚
           â”‚   275 â”‚   â”‚   async with asyncio.timeout(query.settings.agent.timeout):                                                     â”‚
           â”‚ â± 276 â”‚   â”‚   â”‚   status = await rollout()                                                                                  â”‚
           â”‚   277 â”‚   except TimeoutError:                                                                                              â”‚
           â”‚   278 â”‚   â”‚   logger.warning(                                                                                               â”‚
           â”‚   279 â”‚   â”‚   â”‚   f"Agent timeout after {query.settings.agent.timeout}-sec, just answering."                                â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:410 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   407 â”‚   â”‚   â”‚   â”‚   )                                                                                                     â”‚
           â”‚   408 â”‚   â”‚   â”‚   â”‚   return AgentStatus.TRUNCATED                                                                          â”‚
           â”‚   409 â”‚   â”‚   â”‚   agent_state.messages += obs                                                                               â”‚
           â”‚ â± 410 â”‚   â”‚   â”‚   for attempt in Retrying(                                                                                  â”‚
           â”‚   411 â”‚   â”‚   â”‚   â”‚   stop=stop_after_attempt(5),                                                                           â”‚
           â”‚   412 â”‚   â”‚   â”‚   â”‚   retry=retry_if_exception_type(MalformedMessageError),                                                 â”‚
           â”‚   413 â”‚   â”‚   â”‚   â”‚   before_sleep=before_sleep_log(logger, logging.WARNING),                                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:443 in __iter__                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   440 â”‚   â”‚                                                                                                                 â”‚
           â”‚   441 â”‚   â”‚   retry_state = RetryCallState(self, fn=None, args=(), kwargs={})                                               â”‚
           â”‚   442 â”‚   â”‚   while True:                                                                                                   â”‚
           â”‚ â± 443 â”‚   â”‚   â”‚   do = self.iter(retry_state=retry_state)                                                                   â”‚
           â”‚   444 â”‚   â”‚   â”‚   if isinstance(do, DoAttempt):                                                                             â”‚
           â”‚   445 â”‚   â”‚   â”‚   â”‚   yield AttemptManager(retry_state=retry_state)                                                         â”‚
           â”‚   446 â”‚   â”‚   â”‚   elif isinstance(do, DoSleep):                                                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:376 in iter                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   373 â”‚   â”‚   self._begin_iter(retry_state)                                                                                 â”‚
           â”‚   374 â”‚   â”‚   result = None                                                                                                 â”‚
           â”‚   375 â”‚   â”‚   for action in self.iter_state.actions:                                                                        â”‚
           â”‚ â± 376 â”‚   â”‚   â”‚   result = action(retry_state)                                                                              â”‚
           â”‚   377 â”‚   â”‚   return result                                                                                                 â”‚
           â”‚   378 â”‚                                                                                                                     â”‚
           â”‚   379 â”‚   def _begin_iter(self, retry_state: "RetryCallState") -> None:  # noqa                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:398 in <lambda>                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   395 â”‚                                                                                                                     â”‚
           â”‚   396 â”‚   def _post_retry_check_actions(self, retry_state: "RetryCallState") -> None:                                       â”‚
           â”‚   397 â”‚   â”‚   if not (self.iter_state.is_explicit_retry or self.iter_state.retry_run_result):                               â”‚
           â”‚ â± 398 â”‚   â”‚   â”‚   self._add_action_func(lambda rs: rs.outcome.result())                                                     â”‚
           â”‚   399 â”‚   â”‚   â”‚   return                                                                                                    â”‚
           â”‚   400 â”‚   â”‚                                                                                                                 â”‚
           â”‚   401 â”‚   â”‚   if self.after is not None:                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:449 in result                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚   446 â”‚   â”‚   â”‚   â”‚   if self._state in [CANCELLED, CANCELLED_AND_NOTIFIED]:                                                â”‚
           â”‚   447 â”‚   â”‚   â”‚   â”‚   â”‚   raise CancelledError()                                                                            â”‚
           â”‚   448 â”‚   â”‚   â”‚   â”‚   elif self._state == FINISHED:                                                                         â”‚
           â”‚ â± 449 â”‚   â”‚   â”‚   â”‚   â”‚   return self.__get_result()                                                                        â”‚
           â”‚   450 â”‚   â”‚   â”‚   â”‚                                                                                                         â”‚
           â”‚   451 â”‚   â”‚   â”‚   â”‚   self._condition.wait(timeout)                                                                         â”‚
           â”‚   452                                                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:401 in __get_result                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   398 â”‚   def __get_result(self):                                                                                           â”‚
           â”‚   399 â”‚   â”‚   if self._exception:                                                                                           â”‚
           â”‚   400 â”‚   â”‚   â”‚   try:                                                                                                      â”‚
           â”‚ â± 401 â”‚   â”‚   â”‚   â”‚   raise self._exception                                                                                 â”‚
           â”‚   402 â”‚   â”‚   â”‚   finally:                                                                                                  â”‚
           â”‚   403 â”‚   â”‚   â”‚   â”‚   # Break a reference cycle with the exception in self._exception                                       â”‚
           â”‚   404 â”‚   â”‚   â”‚   â”‚   self = None                                                                                           â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:417 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   414 â”‚   â”‚   â”‚   â”‚   reraise=True,                                                                                         â”‚
           â”‚   415 â”‚   â”‚   â”‚   ):                                                                                                        â”‚
           â”‚   416 â”‚   â”‚   â”‚   â”‚   with attempt:  # Retrying if ToolSelector fails to select a tool                                      â”‚
           â”‚ â± 417 â”‚   â”‚   â”‚   â”‚   â”‚   action = await agent(agent_state.messages, tools)                                                 â”‚
           â”‚   418 â”‚   â”‚   â”‚   agent_state.messages = [*agent_state.messages, action]                                                    â”‚
           â”‚   419 â”‚   â”‚   â”‚   if on_agent_action_callback:                                                                              â”‚
           â”‚   420 â”‚   â”‚   â”‚   â”‚   await on_agent_action_callback(action, agent_state)                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aviary/tools/utils.py:182 in __call__                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   179 â”‚   â”‚   â”‚   self._ledger.messages.extend(messages)                                                                    â”‚
           â”‚   180 â”‚   â”‚   â”‚   messages = self._ledger.messages                                                                          â”‚
           â”‚   181 â”‚   â”‚                                                                                                                 â”‚
           â”‚ â± 182 â”‚   â”‚   model_response = await self._bound_acompletion(                                                               â”‚
           â”‚   183 â”‚   â”‚   â”‚   messages=MessagesAdapter.dump_python(                                                                     â”‚
           â”‚   184 â”‚   â”‚   â”‚   â”‚   messages, exclude_none=True, by_alias=True                                                            â”‚
           â”‚   185 â”‚   â”‚   â”‚   ),                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:817 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    814 â”‚   â”‚   â”‚   â”‚   â”‚   original_exception=e,                                                                            â”‚
           â”‚    815 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    816 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚ â±  817 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    818 â”‚                                                                                                                    â”‚
           â”‚    819 â”‚   async def _acompletion(                                                                                          â”‚
           â”‚    820 â”‚   â”‚   self, model: str, messages: List[Dict[str, str]], **kwargs                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:793 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    790 â”‚   â”‚   â”‚   if request_priority is not None and isinstance(request_priority, int):                                   â”‚
           â”‚    791 â”‚   â”‚   â”‚   â”‚   response = await self.schedule_acompletion(**kwargs)                                                 â”‚
           â”‚    792 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â±  793 â”‚   â”‚   â”‚   â”‚   response = await self.async_function_with_fallbacks(**kwargs)                                        â”‚
           â”‚    794 â”‚   â”‚   â”‚   end_time = time.time()                                                                                   â”‚
           â”‚    795 â”‚   â”‚   â”‚   _duration = end_time - start_time                                                                        â”‚
           â”‚    796 â”‚   â”‚   â”‚   asyncio.create_task(                                                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2795 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2792 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚   2793 â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                                â”‚
           â”‚   2794 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2795 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2796 â”‚                                                                                                                    â”‚
           â”‚   2797 â”‚   def _handle_mock_testing_fallbacks(                                                                              â”‚
           â”‚   2798 â”‚   â”‚   self,                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2631 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2628 â”‚   â”‚   â”‚   â”‚   content_policy_fallbacks=content_policy_fallbacks,                                                   â”‚
           â”‚   2629 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2630 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2631 â”‚   â”‚   â”‚   response = await self.async_function_with_retries(*args, **kwargs)                                       â”‚
           â”‚   2632 â”‚   â”‚   â”‚   verbose_router_logger.debug(f"Async Response: {response}")                                               â”‚
           â”‚   2633 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2634 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2967 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2964 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "max_retries", num_retries)                                              â”‚
           â”‚   2965 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "num_retries", current_attempt)                                          â”‚
           â”‚   2966 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2967 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2968 â”‚                                                                                                                    â”‚
           â”‚   2969 â”‚   async def make_call(self, original_function: Any, *args, **kwargs):                                              â”‚
           â”‚   2970 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2879 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2876 â”‚   â”‚   â”‚   â”‚   model_group=model_group, kwargs=kwargs                                                               â”‚
           â”‚   2877 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2878 â”‚   â”‚   â”‚   # if the function call is successful, no exception will be raised and we'll                              â”‚
           â”‚        break out of the loop                                                                                                â”‚
           â”‚ â± 2879 â”‚   â”‚   â”‚   response = await self.make_call(original_function, *args, **kwargs)                                      â”‚
           â”‚   2880 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   2881 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2882 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2976 in make_call                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2973 â”‚   â”‚   model_group = kwargs.get("model")                                                                            â”‚
           â”‚   2974 â”‚   â”‚   response = original_function(*args, **kwargs)                                                                â”‚
           â”‚   2975 â”‚   â”‚   if inspect.iscoroutinefunction(response) or inspect.isawaitable(response):                                   â”‚
           â”‚ â± 2976 â”‚   â”‚   â”‚   response = await response                                                                                â”‚
           â”‚   2977 â”‚   â”‚   ## PROCESS RESPONSE HEADERS                                                                                  â”‚
           â”‚   2978 â”‚   â”‚   await self.set_response_headers(response=response, model_group=model_group)                                  â”‚
           â”‚   2979                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:947 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    944 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚    945 â”‚   â”‚   â”‚   if model_name is not None:                                                                               â”‚
           â”‚    946 â”‚   â”‚   â”‚   â”‚   self.fail_calls[model_name] += 1                                                                     â”‚
           â”‚ â±  947 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    948 â”‚                                                                                                                    â”‚
           â”‚    949 â”‚   def _update_kwargs_before_fallbacks(self, model: str, kwargs: dict) -> None:                                     â”‚
           â”‚    950 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:915 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    912 â”‚   â”‚   â”‚   â”‚   â”‚   parent_otel_span=parent_otel_span,                                                               â”‚
           â”‚    913 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    914 â”‚   â”‚   â”‚   â”‚                                                                                                        â”‚
           â”‚ â±  915 â”‚   â”‚   â”‚   â”‚   response = await _response                                                                           â”‚
           â”‚    916 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚    917 â”‚   â”‚   â”‚   ## CHECK CONTENT FILTER ERROR ##                                                                         â”‚
           â”‚    918 â”‚   â”‚   â”‚   if isinstance(response, ModelResponse):                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1175 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1172 â”‚   â”‚   â”‚   â”‚   â”‚   else:                                                                                            â”‚
           â”‚   1173 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   kwargs["model"] = context_window_fallback_dict[model]                                        â”‚
           â”‚   1174 â”‚   â”‚   â”‚   â”‚   â”‚   return await original_function(*args, **kwargs)                                                  â”‚
           â”‚ â± 1175 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   1176 â”‚                                                                                                                    â”‚
           â”‚   1177 â”‚   is_coroutine = inspect.iscoroutinefunction(original_function)                                                    â”‚
           â”‚   1178                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1031 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1028 â”‚   â”‚   â”‚   â”‚   return _caching_handler_response.final_embedding_cached_response                                     â”‚
           â”‚   1029 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1030 â”‚   â”‚   â”‚   # MODEL CALL                                                                                             â”‚
           â”‚ â± 1031 â”‚   â”‚   â”‚   result = await original_function(*args, **kwargs)                                                        â”‚
           â”‚   1032 â”‚   â”‚   â”‚   end_time = datetime.datetime.now()                                                                       â”‚
           â”‚   1033 â”‚   â”‚   â”‚   if "stream" in kwargs and kwargs["stream"] is True:                                                      â”‚
           â”‚   1034 â”‚   â”‚   â”‚   â”‚   if (                                                                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:499 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    496 â”‚   â”‚   return response                                                                                              â”‚
           â”‚    497 â”‚   except Exception as e:                                                                                           â”‚
           â”‚    498 â”‚   â”‚   custom_llm_provider = custom_llm_provider or "openai"                                                        â”‚
           â”‚ â±  499 â”‚   â”‚   raise exception_type(                                                                                        â”‚
           â”‚    500 â”‚   â”‚   â”‚   model=model,                                                                                             â”‚
           â”‚    501 â”‚   â”‚   â”‚   custom_llm_provider=custom_llm_provider,                                                                 â”‚
           â”‚    502 â”‚   â”‚   â”‚   original_exception=e,                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:212 â”‚
           â”‚ 5 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2122 â”‚   â”‚   # don't let an error with mapping interrupt the user from receiving an error                                 â”‚
           â”‚        from the llm api calls                                                                                               â”‚
           â”‚   2123 â”‚   â”‚   if exception_mapping_worked:                                                                                 â”‚
           â”‚   2124 â”‚   â”‚   â”‚   setattr(e, "litellm_response_headers", litellm_response_headers)                                         â”‚
           â”‚ â± 2125 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   2126 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   2127 â”‚   â”‚   â”‚   for error_type in litellm.LITELLM_EXCEPTION_TYPES:                                                       â”‚
           â”‚   2128 â”‚   â”‚   â”‚   â”‚   if isinstance(e, error_type):                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:210 â”‚
           â”‚ 1 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2098 â”‚   â”‚   â”‚   â”‚   â”‚   request=original_exception.request,                                                              â”‚
           â”‚   2099 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚   2100 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â± 2101 â”‚   â”‚   â”‚   â”‚   raise APIConnectionError(                                                                            â”‚
           â”‚   2102 â”‚   â”‚   â”‚   â”‚   â”‚   message="{}\n{}".format(                                                                         â”‚
           â”‚   2103 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   str(original_exception), traceback.format_exc()                                              â”‚
           â”‚   2104 â”‚   â”‚   â”‚   â”‚   â”‚   ),                                                                                               â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           APIConnectionError: litellm.APIConnectionError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1109, in                 
           _wrap_create_connection                                                                                                        
               sock = await aiohappyeyeballs.start_connection(                                                                            
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                            
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py", line 123, in              
           start_connection                                                                                                               
               raise OSError(first_errno, msg)                                                                                            
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py", line 477, in acompletion           
               response = await init_response                                                                                             
                          ^^^^^^^^^^^^^^^^^^^                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 566, in                
           ollama_acompletion                                                                                                             
               raise e  # don't use verbose_logger.exception, if exception is raised                                                      
               ^^^^^^^                                                                                                                    
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 507, in                
           ollama_acompletion                                                                                                             
               resp = await session.post(url, json=data)                                                                                  
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                  
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py", line 696, in _request            
               conn = await self._connector.connect(                                                                                      
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 544, in connect          
               proto = await self._create_connection(req, traces, timeout)                                                                
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1050, in                 
           _create_connection                                                                                                             
               _, proto = await self._create_direct_connection(req, traces, timeout)                                                      
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1394, in                 
           _create_direct_connection                                                                                                      
               raise last_exc                                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1363, in                 
           _create_direct_connection                                                                                                      
               transp, proto = await self._wrap_create_connection(                                                                        
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                        
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1124, in                 
           _wrap_create_connection                                                                                                        
               raise client_error(req.connection_key, exc) from exc                                                                       
           aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
                                                                                                                                          
           Received Model Group=ollama/llama3.2                                                                                           
           Available Model Group Fallbacks=None LiteLLM Retried: 2 times, LiteLLM Max Retries: 3                                          
[00:55:50] Answer:                                                                                                                        


 ANSWERING QUESTION: sciqag_question_64.json
 ----------------------------- 



[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.

[00:56:10] Trajectory failed.                                                                                                             
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1109 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1106 â”‚   â”‚   â”‚   async with ceil_timeout(                                                                                 â”‚
           â”‚   1107 â”‚   â”‚   â”‚   â”‚   timeout.sock_connect, ceil_threshold=timeout.ceil_threshold                                          â”‚
           â”‚   1108 â”‚   â”‚   â”‚   ):                                                                                                       â”‚
           â”‚ â± 1109 â”‚   â”‚   â”‚   â”‚   sock = await aiohappyeyeballs.start_connection(                                                      â”‚
           â”‚   1110 â”‚   â”‚   â”‚   â”‚   â”‚   addr_infos=addr_infos,                                                                           â”‚
           â”‚   1111 â”‚   â”‚   â”‚   â”‚   â”‚   local_addr_infos=self._local_addr_infos,                                                         â”‚
           â”‚   1112 â”‚   â”‚   â”‚   â”‚   â”‚   happy_eyeballs_delay=self._happy_eyeballs_delay,                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py:123 in start_connection          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   120 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, OSError) and exc.errno == first_errno                                         â”‚
           â”‚   121 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   for exc in all_exceptions                                                                     â”‚
           â”‚   122 â”‚   â”‚   â”‚   â”‚   â”‚   ):                                                                                                â”‚
           â”‚ â± 123 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   raise OSError(first_errno, msg)                                                               â”‚
           â”‚   124 â”‚   â”‚   â”‚   â”‚   elif isinstance(first_exception, RuntimeError) and all(                                               â”‚
           â”‚   125 â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, RuntimeError) for exc in all_exceptions                                           â”‚
           â”‚   126 â”‚   â”‚   â”‚   â”‚   ):                                                                                                    â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:477 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    474 â”‚   â”‚   â”‚   â”‚   â”‚   response = ModelResponse(**init_response)                                                        â”‚
           â”‚    475 â”‚   â”‚   â”‚   â”‚   response = init_response                                                                             â”‚
           â”‚    476 â”‚   â”‚   â”‚   elif asyncio.iscoroutine(init_response):                                                                 â”‚
           â”‚ â±  477 â”‚   â”‚   â”‚   â”‚   response = await init_response                                                                       â”‚
           â”‚    478 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚    479 â”‚   â”‚   â”‚   â”‚   response = init_response  # type: ignore                                                             â”‚
           â”‚    480                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:566 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   563 â”‚   â”‚   â”‚   )                                                                                                         â”‚
           â”‚   564 â”‚   â”‚   â”‚   return model_response                                                                                     â”‚
           â”‚   565 â”‚   except Exception as e:                                                                                            â”‚
           â”‚ â± 566 â”‚   â”‚   raise e  # don't use verbose_logger.exception, if exception is raised                                         â”‚
           â”‚   567                                                                                                                       â”‚
           â”‚   568                                                                                                                       â”‚
           â”‚   569 async def ollama_aembeddings(                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:507 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   504 â”‚   try:                                                                                                              â”‚
           â”‚   505 â”‚   â”‚   timeout = aiohttp.ClientTimeout(total=litellm.request_timeout)  # 10 minutes                                  â”‚
           â”‚   506 â”‚   â”‚   async with aiohttp.ClientSession(timeout=timeout) as session:                                                 â”‚
           â”‚ â± 507 â”‚   â”‚   â”‚   resp = await session.post(url, json=data)                                                                 â”‚
           â”‚   508 â”‚   â”‚   â”‚                                                                                                             â”‚
           â”‚   509 â”‚   â”‚   â”‚   if resp.status != 200:                                                                                    â”‚
           â”‚   510 â”‚   â”‚   â”‚   â”‚   text = await resp.text()                                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py:696 in _request                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚    693 â”‚   â”‚   â”‚   â”‚   â”‚                                                                                                    â”‚
           â”‚    694 â”‚   â”‚   â”‚   â”‚   â”‚   # connection timeout                                                                             â”‚
           â”‚    695 â”‚   â”‚   â”‚   â”‚   â”‚   try:                                                                                             â”‚
           â”‚ â±  696 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   conn = await self._connector.connect(                                                        â”‚
           â”‚    697 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   req, traces=traces, timeout=real_timeout                                                 â”‚
           â”‚    698 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚    699 â”‚   â”‚   â”‚   â”‚   â”‚   except asyncio.TimeoutError as exc:                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:544 in connect                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚    541 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    542 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    543 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_start()                                                   â”‚
           â”‚ â±  544 â”‚   â”‚   â”‚   â”‚   proto = await self._create_connection(req, traces, timeout)                                          â”‚
           â”‚    545 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    546 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    547 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_end()                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1050 in _create_connection           â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1047 â”‚   â”‚   if req.proxy:                                                                                                â”‚
           â”‚   1048 â”‚   â”‚   â”‚   _, proto = await self._create_proxy_connection(req, traces, timeout)                                     â”‚
           â”‚   1049 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚ â± 1050 â”‚   â”‚   â”‚   _, proto = await self._create_direct_connection(req, traces, timeout)                                    â”‚
           â”‚   1051 â”‚   â”‚                                                                                                                â”‚
           â”‚   1052 â”‚   â”‚   return proto                                                                                                 â”‚
           â”‚   1053                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1394 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1391 â”‚   â”‚   â”‚   return transp, proto                                                                                     â”‚
           â”‚   1392 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   1393 â”‚   â”‚   â”‚   assert last_exc is not None                                                                              â”‚
           â”‚ â± 1394 â”‚   â”‚   â”‚   raise last_exc                                                                                           â”‚
           â”‚   1395 â”‚                                                                                                                    â”‚
           â”‚   1396 â”‚   async def _create_proxy_connection(                                                                              â”‚
           â”‚   1397 â”‚   â”‚   self, req: ClientRequest, traces: List["Trace"], timeout: "ClientTimeout"                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1363 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1360 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   1361 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1362 â”‚   â”‚   â”‚   try:                                                                                                     â”‚
           â”‚ â± 1363 â”‚   â”‚   â”‚   â”‚   transp, proto = await self._wrap_create_connection(                                                  â”‚
           â”‚   1364 â”‚   â”‚   â”‚   â”‚   â”‚   self._factory,                                                                                   â”‚
           â”‚   1365 â”‚   â”‚   â”‚   â”‚   â”‚   timeout=timeout,                                                                                 â”‚
           â”‚   1366 â”‚   â”‚   â”‚   â”‚   â”‚   ssl=sslcontext,                                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1124 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1121 â”‚   â”‚   except OSError as exc:                                                                                       â”‚
           â”‚   1122 â”‚   â”‚   â”‚   if exc.errno is None and isinstance(exc, asyncio.TimeoutError):                                          â”‚
           â”‚   1123 â”‚   â”‚   â”‚   â”‚   raise                                                                                                â”‚
           â”‚ â± 1124 â”‚   â”‚   â”‚   raise client_error(req.connection_key, exc) from exc                                                     â”‚
           â”‚   1125 â”‚                                                                                                                    â”‚
           â”‚   1126 â”‚   async def _wrap_existing_connection(                                                                             â”‚
           â”‚   1127 â”‚   â”‚   self,                                                                                                        â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno 111] Connect call failed 
           ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                                                    
                                                                                                                                          
           During handling of the above exception, another exception occurred:                                                            
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:276 in _run_with_timeout_failure                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   273 ) -> tuple[PQASession, AgentStatus]:                                                                                  â”‚
           â”‚   274 â”‚   try:                                                                                                              â”‚
           â”‚   275 â”‚   â”‚   async with asyncio.timeout(query.settings.agent.timeout):                                                     â”‚
           â”‚ â± 276 â”‚   â”‚   â”‚   status = await rollout()                                                                                  â”‚
           â”‚   277 â”‚   except TimeoutError:                                                                                              â”‚
           â”‚   278 â”‚   â”‚   logger.warning(                                                                                               â”‚
           â”‚   279 â”‚   â”‚   â”‚   f"Agent timeout after {query.settings.agent.timeout}-sec, just answering."                                â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:410 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   407 â”‚   â”‚   â”‚   â”‚   )                                                                                                     â”‚
           â”‚   408 â”‚   â”‚   â”‚   â”‚   return AgentStatus.TRUNCATED                                                                          â”‚
           â”‚   409 â”‚   â”‚   â”‚   agent_state.messages += obs                                                                               â”‚
           â”‚ â± 410 â”‚   â”‚   â”‚   for attempt in Retrying(                                                                                  â”‚
           â”‚   411 â”‚   â”‚   â”‚   â”‚   stop=stop_after_attempt(5),                                                                           â”‚
           â”‚   412 â”‚   â”‚   â”‚   â”‚   retry=retry_if_exception_type(MalformedMessageError),                                                 â”‚
           â”‚   413 â”‚   â”‚   â”‚   â”‚   before_sleep=before_sleep_log(logger, logging.WARNING),                                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:443 in __iter__                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   440 â”‚   â”‚                                                                                                                 â”‚
           â”‚   441 â”‚   â”‚   retry_state = RetryCallState(self, fn=None, args=(), kwargs={})                                               â”‚
           â”‚   442 â”‚   â”‚   while True:                                                                                                   â”‚
           â”‚ â± 443 â”‚   â”‚   â”‚   do = self.iter(retry_state=retry_state)                                                                   â”‚
           â”‚   444 â”‚   â”‚   â”‚   if isinstance(do, DoAttempt):                                                                             â”‚
           â”‚   445 â”‚   â”‚   â”‚   â”‚   yield AttemptManager(retry_state=retry_state)                                                         â”‚
           â”‚   446 â”‚   â”‚   â”‚   elif isinstance(do, DoSleep):                                                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:376 in iter                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   373 â”‚   â”‚   self._begin_iter(retry_state)                                                                                 â”‚
           â”‚   374 â”‚   â”‚   result = None                                                                                                 â”‚
           â”‚   375 â”‚   â”‚   for action in self.iter_state.actions:                                                                        â”‚
           â”‚ â± 376 â”‚   â”‚   â”‚   result = action(retry_state)                                                                              â”‚
           â”‚   377 â”‚   â”‚   return result                                                                                                 â”‚
           â”‚   378 â”‚                                                                                                                     â”‚
           â”‚   379 â”‚   def _begin_iter(self, retry_state: "RetryCallState") -> None:  # noqa                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:398 in <lambda>                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   395 â”‚                                                                                                                     â”‚
           â”‚   396 â”‚   def _post_retry_check_actions(self, retry_state: "RetryCallState") -> None:                                       â”‚
           â”‚   397 â”‚   â”‚   if not (self.iter_state.is_explicit_retry or self.iter_state.retry_run_result):                               â”‚
           â”‚ â± 398 â”‚   â”‚   â”‚   self._add_action_func(lambda rs: rs.outcome.result())                                                     â”‚
           â”‚   399 â”‚   â”‚   â”‚   return                                                                                                    â”‚
           â”‚   400 â”‚   â”‚                                                                                                                 â”‚
           â”‚   401 â”‚   â”‚   if self.after is not None:                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:449 in result                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚   446 â”‚   â”‚   â”‚   â”‚   if self._state in [CANCELLED, CANCELLED_AND_NOTIFIED]:                                                â”‚
           â”‚   447 â”‚   â”‚   â”‚   â”‚   â”‚   raise CancelledError()                                                                            â”‚
           â”‚   448 â”‚   â”‚   â”‚   â”‚   elif self._state == FINISHED:                                                                         â”‚
           â”‚ â± 449 â”‚   â”‚   â”‚   â”‚   â”‚   return self.__get_result()                                                                        â”‚
           â”‚   450 â”‚   â”‚   â”‚   â”‚                                                                                                         â”‚
           â”‚   451 â”‚   â”‚   â”‚   â”‚   self._condition.wait(timeout)                                                                         â”‚
           â”‚   452                                                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:401 in __get_result                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   398 â”‚   def __get_result(self):                                                                                           â”‚
           â”‚   399 â”‚   â”‚   if self._exception:                                                                                           â”‚
           â”‚   400 â”‚   â”‚   â”‚   try:                                                                                                      â”‚
           â”‚ â± 401 â”‚   â”‚   â”‚   â”‚   raise self._exception                                                                                 â”‚
           â”‚   402 â”‚   â”‚   â”‚   finally:                                                                                                  â”‚
           â”‚   403 â”‚   â”‚   â”‚   â”‚   # Break a reference cycle with the exception in self._exception                                       â”‚
           â”‚   404 â”‚   â”‚   â”‚   â”‚   self = None                                                                                           â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:417 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   414 â”‚   â”‚   â”‚   â”‚   reraise=True,                                                                                         â”‚
           â”‚   415 â”‚   â”‚   â”‚   ):                                                                                                        â”‚
           â”‚   416 â”‚   â”‚   â”‚   â”‚   with attempt:  # Retrying if ToolSelector fails to select a tool                                      â”‚
           â”‚ â± 417 â”‚   â”‚   â”‚   â”‚   â”‚   action = await agent(agent_state.messages, tools)                                                 â”‚
           â”‚   418 â”‚   â”‚   â”‚   agent_state.messages = [*agent_state.messages, action]                                                    â”‚
           â”‚   419 â”‚   â”‚   â”‚   if on_agent_action_callback:                                                                              â”‚
           â”‚   420 â”‚   â”‚   â”‚   â”‚   await on_agent_action_callback(action, agent_state)                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aviary/tools/utils.py:182 in __call__                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   179 â”‚   â”‚   â”‚   self._ledger.messages.extend(messages)                                                                    â”‚
           â”‚   180 â”‚   â”‚   â”‚   messages = self._ledger.messages                                                                          â”‚
           â”‚   181 â”‚   â”‚                                                                                                                 â”‚
           â”‚ â± 182 â”‚   â”‚   model_response = await self._bound_acompletion(                                                               â”‚
           â”‚   183 â”‚   â”‚   â”‚   messages=MessagesAdapter.dump_python(                                                                     â”‚
           â”‚   184 â”‚   â”‚   â”‚   â”‚   messages, exclude_none=True, by_alias=True                                                            â”‚
           â”‚   185 â”‚   â”‚   â”‚   ),                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:817 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    814 â”‚   â”‚   â”‚   â”‚   â”‚   original_exception=e,                                                                            â”‚
           â”‚    815 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    816 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚ â±  817 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    818 â”‚                                                                                                                    â”‚
           â”‚    819 â”‚   async def _acompletion(                                                                                          â”‚
           â”‚    820 â”‚   â”‚   self, model: str, messages: List[Dict[str, str]], **kwargs                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:793 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    790 â”‚   â”‚   â”‚   if request_priority is not None and isinstance(request_priority, int):                                   â”‚
           â”‚    791 â”‚   â”‚   â”‚   â”‚   response = await self.schedule_acompletion(**kwargs)                                                 â”‚
           â”‚    792 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â±  793 â”‚   â”‚   â”‚   â”‚   response = await self.async_function_with_fallbacks(**kwargs)                                        â”‚
           â”‚    794 â”‚   â”‚   â”‚   end_time = time.time()                                                                                   â”‚
           â”‚    795 â”‚   â”‚   â”‚   _duration = end_time - start_time                                                                        â”‚
           â”‚    796 â”‚   â”‚   â”‚   asyncio.create_task(                                                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2795 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2792 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚   2793 â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                                â”‚
           â”‚   2794 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2795 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2796 â”‚                                                                                                                    â”‚
           â”‚   2797 â”‚   def _handle_mock_testing_fallbacks(                                                                              â”‚
           â”‚   2798 â”‚   â”‚   self,                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2631 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2628 â”‚   â”‚   â”‚   â”‚   content_policy_fallbacks=content_policy_fallbacks,                                                   â”‚
           â”‚   2629 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2630 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2631 â”‚   â”‚   â”‚   response = await self.async_function_with_retries(*args, **kwargs)                                       â”‚
           â”‚   2632 â”‚   â”‚   â”‚   verbose_router_logger.debug(f"Async Response: {response}")                                               â”‚
           â”‚   2633 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2634 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2967 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2964 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "max_retries", num_retries)                                              â”‚
           â”‚   2965 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "num_retries", current_attempt)                                          â”‚
           â”‚   2966 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2967 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2968 â”‚                                                                                                                    â”‚
           â”‚   2969 â”‚   async def make_call(self, original_function: Any, *args, **kwargs):                                              â”‚
           â”‚   2970 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2879 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2876 â”‚   â”‚   â”‚   â”‚   model_group=model_group, kwargs=kwargs                                                               â”‚
           â”‚   2877 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2878 â”‚   â”‚   â”‚   # if the function call is successful, no exception will be raised and we'll                              â”‚
           â”‚        break out of the loop                                                                                                â”‚
           â”‚ â± 2879 â”‚   â”‚   â”‚   response = await self.make_call(original_function, *args, **kwargs)                                      â”‚
           â”‚   2880 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   2881 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2882 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2976 in make_call                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2973 â”‚   â”‚   model_group = kwargs.get("model")                                                                            â”‚
           â”‚   2974 â”‚   â”‚   response = original_function(*args, **kwargs)                                                                â”‚
           â”‚   2975 â”‚   â”‚   if inspect.iscoroutinefunction(response) or inspect.isawaitable(response):                                   â”‚
           â”‚ â± 2976 â”‚   â”‚   â”‚   response = await response                                                                                â”‚
           â”‚   2977 â”‚   â”‚   ## PROCESS RESPONSE HEADERS                                                                                  â”‚
           â”‚   2978 â”‚   â”‚   await self.set_response_headers(response=response, model_group=model_group)                                  â”‚
           â”‚   2979                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:947 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    944 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚    945 â”‚   â”‚   â”‚   if model_name is not None:                                                                               â”‚
           â”‚    946 â”‚   â”‚   â”‚   â”‚   self.fail_calls[model_name] += 1                                                                     â”‚
           â”‚ â±  947 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    948 â”‚                                                                                                                    â”‚
           â”‚    949 â”‚   def _update_kwargs_before_fallbacks(self, model: str, kwargs: dict) -> None:                                     â”‚
           â”‚    950 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:915 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    912 â”‚   â”‚   â”‚   â”‚   â”‚   parent_otel_span=parent_otel_span,                                                               â”‚
           â”‚    913 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    914 â”‚   â”‚   â”‚   â”‚                                                                                                        â”‚
           â”‚ â±  915 â”‚   â”‚   â”‚   â”‚   response = await _response                                                                           â”‚
           â”‚    916 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚    917 â”‚   â”‚   â”‚   ## CHECK CONTENT FILTER ERROR ##                                                                         â”‚
           â”‚    918 â”‚   â”‚   â”‚   if isinstance(response, ModelResponse):                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1175 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1172 â”‚   â”‚   â”‚   â”‚   â”‚   else:                                                                                            â”‚
           â”‚   1173 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   kwargs["model"] = context_window_fallback_dict[model]                                        â”‚
           â”‚   1174 â”‚   â”‚   â”‚   â”‚   â”‚   return await original_function(*args, **kwargs)                                                  â”‚
           â”‚ â± 1175 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   1176 â”‚                                                                                                                    â”‚
           â”‚   1177 â”‚   is_coroutine = inspect.iscoroutinefunction(original_function)                                                    â”‚
           â”‚   1178                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1031 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1028 â”‚   â”‚   â”‚   â”‚   return _caching_handler_response.final_embedding_cached_response                                     â”‚
           â”‚   1029 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1030 â”‚   â”‚   â”‚   # MODEL CALL                                                                                             â”‚
           â”‚ â± 1031 â”‚   â”‚   â”‚   result = await original_function(*args, **kwargs)                                                        â”‚
           â”‚   1032 â”‚   â”‚   â”‚   end_time = datetime.datetime.now()                                                                       â”‚
           â”‚   1033 â”‚   â”‚   â”‚   if "stream" in kwargs and kwargs["stream"] is True:                                                      â”‚
           â”‚   1034 â”‚   â”‚   â”‚   â”‚   if (                                                                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:499 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    496 â”‚   â”‚   return response                                                                                              â”‚
           â”‚    497 â”‚   except Exception as e:                                                                                           â”‚
           â”‚    498 â”‚   â”‚   custom_llm_provider = custom_llm_provider or "openai"                                                        â”‚
           â”‚ â±  499 â”‚   â”‚   raise exception_type(                                                                                        â”‚
           â”‚    500 â”‚   â”‚   â”‚   model=model,                                                                                             â”‚
           â”‚    501 â”‚   â”‚   â”‚   custom_llm_provider=custom_llm_provider,                                                                 â”‚
           â”‚    502 â”‚   â”‚   â”‚   original_exception=e,                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:212 â”‚
           â”‚ 5 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2122 â”‚   â”‚   # don't let an error with mapping interrupt the user from receiving an error                                 â”‚
           â”‚        from the llm api calls                                                                                               â”‚
           â”‚   2123 â”‚   â”‚   if exception_mapping_worked:                                                                                 â”‚
           â”‚   2124 â”‚   â”‚   â”‚   setattr(e, "litellm_response_headers", litellm_response_headers)                                         â”‚
           â”‚ â± 2125 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   2126 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   2127 â”‚   â”‚   â”‚   for error_type in litellm.LITELLM_EXCEPTION_TYPES:                                                       â”‚
           â”‚   2128 â”‚   â”‚   â”‚   â”‚   if isinstance(e, error_type):                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:210 â”‚
           â”‚ 1 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2098 â”‚   â”‚   â”‚   â”‚   â”‚   request=original_exception.request,                                                              â”‚
           â”‚   2099 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚   2100 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â± 2101 â”‚   â”‚   â”‚   â”‚   raise APIConnectionError(                                                                            â”‚
           â”‚   2102 â”‚   â”‚   â”‚   â”‚   â”‚   message="{}\n{}".format(                                                                         â”‚
           â”‚   2103 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   str(original_exception), traceback.format_exc()                                              â”‚
           â”‚   2104 â”‚   â”‚   â”‚   â”‚   â”‚   ),                                                                                               â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           APIConnectionError: litellm.APIConnectionError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1109, in                 
           _wrap_create_connection                                                                                                        
               sock = await aiohappyeyeballs.start_connection(                                                                            
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                            
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py", line 123, in              
           start_connection                                                                                                               
               raise OSError(first_errno, msg)                                                                                            
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py", line 477, in acompletion           
               response = await init_response                                                                                             
                          ^^^^^^^^^^^^^^^^^^^                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 566, in                
           ollama_acompletion                                                                                                             
               raise e  # don't use verbose_logger.exception, if exception is raised                                                      
               ^^^^^^^                                                                                                                    
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 507, in                
           ollama_acompletion                                                                                                             
               resp = await session.post(url, json=data)                                                                                  
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                  
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py", line 696, in _request            
               conn = await self._connector.connect(                                                                                      
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 544, in connect          
               proto = await self._create_connection(req, traces, timeout)                                                                
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1050, in                 
           _create_connection                                                                                                             
               _, proto = await self._create_direct_connection(req, traces, timeout)                                                      
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1394, in                 
           _create_direct_connection                                                                                                      
               raise last_exc                                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1363, in                 
           _create_direct_connection                                                                                                      
               transp, proto = await self._wrap_create_connection(                                                                        
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                        
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1124, in                 
           _wrap_create_connection                                                                                                        
               raise client_error(req.connection_key, exc) from exc                                                                       
           aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
                                                                                                                                          
           Received Model Group=ollama/llama3.2                                                                                           
           Available Model Group Fallbacks=None LiteLLM Retried: 2 times, LiteLLM Max Retries: 3                                          
[00:56:12] Answer:                                                                                                                        


 ANSWERING QUESTION: sciqag_question_65.json
 ----------------------------- 



[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.

[00:56:33] Trajectory failed.                                                                                                             
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1109 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1106 â”‚   â”‚   â”‚   async with ceil_timeout(                                                                                 â”‚
           â”‚   1107 â”‚   â”‚   â”‚   â”‚   timeout.sock_connect, ceil_threshold=timeout.ceil_threshold                                          â”‚
           â”‚   1108 â”‚   â”‚   â”‚   ):                                                                                                       â”‚
           â”‚ â± 1109 â”‚   â”‚   â”‚   â”‚   sock = await aiohappyeyeballs.start_connection(                                                      â”‚
           â”‚   1110 â”‚   â”‚   â”‚   â”‚   â”‚   addr_infos=addr_infos,                                                                           â”‚
           â”‚   1111 â”‚   â”‚   â”‚   â”‚   â”‚   local_addr_infos=self._local_addr_infos,                                                         â”‚
           â”‚   1112 â”‚   â”‚   â”‚   â”‚   â”‚   happy_eyeballs_delay=self._happy_eyeballs_delay,                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py:123 in start_connection          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   120 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, OSError) and exc.errno == first_errno                                         â”‚
           â”‚   121 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   for exc in all_exceptions                                                                     â”‚
           â”‚   122 â”‚   â”‚   â”‚   â”‚   â”‚   ):                                                                                                â”‚
           â”‚ â± 123 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   raise OSError(first_errno, msg)                                                               â”‚
           â”‚   124 â”‚   â”‚   â”‚   â”‚   elif isinstance(first_exception, RuntimeError) and all(                                               â”‚
           â”‚   125 â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, RuntimeError) for exc in all_exceptions                                           â”‚
           â”‚   126 â”‚   â”‚   â”‚   â”‚   ):                                                                                                    â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:477 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    474 â”‚   â”‚   â”‚   â”‚   â”‚   response = ModelResponse(**init_response)                                                        â”‚
           â”‚    475 â”‚   â”‚   â”‚   â”‚   response = init_response                                                                             â”‚
           â”‚    476 â”‚   â”‚   â”‚   elif asyncio.iscoroutine(init_response):                                                                 â”‚
           â”‚ â±  477 â”‚   â”‚   â”‚   â”‚   response = await init_response                                                                       â”‚
           â”‚    478 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚    479 â”‚   â”‚   â”‚   â”‚   response = init_response  # type: ignore                                                             â”‚
           â”‚    480                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:566 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   563 â”‚   â”‚   â”‚   )                                                                                                         â”‚
           â”‚   564 â”‚   â”‚   â”‚   return model_response                                                                                     â”‚
           â”‚   565 â”‚   except Exception as e:                                                                                            â”‚
           â”‚ â± 566 â”‚   â”‚   raise e  # don't use verbose_logger.exception, if exception is raised                                         â”‚
           â”‚   567                                                                                                                       â”‚
           â”‚   568                                                                                                                       â”‚
           â”‚   569 async def ollama_aembeddings(                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:507 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   504 â”‚   try:                                                                                                              â”‚
           â”‚   505 â”‚   â”‚   timeout = aiohttp.ClientTimeout(total=litellm.request_timeout)  # 10 minutes                                  â”‚
           â”‚   506 â”‚   â”‚   async with aiohttp.ClientSession(timeout=timeout) as session:                                                 â”‚
           â”‚ â± 507 â”‚   â”‚   â”‚   resp = await session.post(url, json=data)                                                                 â”‚
           â”‚   508 â”‚   â”‚   â”‚                                                                                                             â”‚
           â”‚   509 â”‚   â”‚   â”‚   if resp.status != 200:                                                                                    â”‚
           â”‚   510 â”‚   â”‚   â”‚   â”‚   text = await resp.text()                                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py:696 in _request                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚    693 â”‚   â”‚   â”‚   â”‚   â”‚                                                                                                    â”‚
           â”‚    694 â”‚   â”‚   â”‚   â”‚   â”‚   # connection timeout                                                                             â”‚
           â”‚    695 â”‚   â”‚   â”‚   â”‚   â”‚   try:                                                                                             â”‚
           â”‚ â±  696 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   conn = await self._connector.connect(                                                        â”‚
           â”‚    697 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   req, traces=traces, timeout=real_timeout                                                 â”‚
           â”‚    698 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚    699 â”‚   â”‚   â”‚   â”‚   â”‚   except asyncio.TimeoutError as exc:                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:544 in connect                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚    541 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    542 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    543 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_start()                                                   â”‚
           â”‚ â±  544 â”‚   â”‚   â”‚   â”‚   proto = await self._create_connection(req, traces, timeout)                                          â”‚
           â”‚    545 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    546 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    547 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_end()                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1050 in _create_connection           â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1047 â”‚   â”‚   if req.proxy:                                                                                                â”‚
           â”‚   1048 â”‚   â”‚   â”‚   _, proto = await self._create_proxy_connection(req, traces, timeout)                                     â”‚
           â”‚   1049 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚ â± 1050 â”‚   â”‚   â”‚   _, proto = await self._create_direct_connection(req, traces, timeout)                                    â”‚
           â”‚   1051 â”‚   â”‚                                                                                                                â”‚
           â”‚   1052 â”‚   â”‚   return proto                                                                                                 â”‚
           â”‚   1053                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1394 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1391 â”‚   â”‚   â”‚   return transp, proto                                                                                     â”‚
           â”‚   1392 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   1393 â”‚   â”‚   â”‚   assert last_exc is not None                                                                              â”‚
           â”‚ â± 1394 â”‚   â”‚   â”‚   raise last_exc                                                                                           â”‚
           â”‚   1395 â”‚                                                                                                                    â”‚
           â”‚   1396 â”‚   async def _create_proxy_connection(                                                                              â”‚
           â”‚   1397 â”‚   â”‚   self, req: ClientRequest, traces: List["Trace"], timeout: "ClientTimeout"                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1363 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1360 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   1361 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1362 â”‚   â”‚   â”‚   try:                                                                                                     â”‚
           â”‚ â± 1363 â”‚   â”‚   â”‚   â”‚   transp, proto = await self._wrap_create_connection(                                                  â”‚
           â”‚   1364 â”‚   â”‚   â”‚   â”‚   â”‚   self._factory,                                                                                   â”‚
           â”‚   1365 â”‚   â”‚   â”‚   â”‚   â”‚   timeout=timeout,                                                                                 â”‚
           â”‚   1366 â”‚   â”‚   â”‚   â”‚   â”‚   ssl=sslcontext,                                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1124 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1121 â”‚   â”‚   except OSError as exc:                                                                                       â”‚
           â”‚   1122 â”‚   â”‚   â”‚   if exc.errno is None and isinstance(exc, asyncio.TimeoutError):                                          â”‚
           â”‚   1123 â”‚   â”‚   â”‚   â”‚   raise                                                                                                â”‚
           â”‚ â± 1124 â”‚   â”‚   â”‚   raise client_error(req.connection_key, exc) from exc                                                     â”‚
           â”‚   1125 â”‚                                                                                                                    â”‚
           â”‚   1126 â”‚   async def _wrap_existing_connection(                                                                             â”‚
           â”‚   1127 â”‚   â”‚   self,                                                                                                        â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno 111] Connect call failed 
           ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                                                    
                                                                                                                                          
           During handling of the above exception, another exception occurred:                                                            
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:276 in _run_with_timeout_failure                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   273 ) -> tuple[PQASession, AgentStatus]:                                                                                  â”‚
           â”‚   274 â”‚   try:                                                                                                              â”‚
           â”‚   275 â”‚   â”‚   async with asyncio.timeout(query.settings.agent.timeout):                                                     â”‚
           â”‚ â± 276 â”‚   â”‚   â”‚   status = await rollout()                                                                                  â”‚
           â”‚   277 â”‚   except TimeoutError:                                                                                              â”‚
           â”‚   278 â”‚   â”‚   logger.warning(                                                                                               â”‚
           â”‚   279 â”‚   â”‚   â”‚   f"Agent timeout after {query.settings.agent.timeout}-sec, just answering."                                â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:410 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   407 â”‚   â”‚   â”‚   â”‚   )                                                                                                     â”‚
           â”‚   408 â”‚   â”‚   â”‚   â”‚   return AgentStatus.TRUNCATED                                                                          â”‚
           â”‚   409 â”‚   â”‚   â”‚   agent_state.messages += obs                                                                               â”‚
           â”‚ â± 410 â”‚   â”‚   â”‚   for attempt in Retrying(                                                                                  â”‚
           â”‚   411 â”‚   â”‚   â”‚   â”‚   stop=stop_after_attempt(5),                                                                           â”‚
           â”‚   412 â”‚   â”‚   â”‚   â”‚   retry=retry_if_exception_type(MalformedMessageError),                                                 â”‚
           â”‚   413 â”‚   â”‚   â”‚   â”‚   before_sleep=before_sleep_log(logger, logging.WARNING),                                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:443 in __iter__                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   440 â”‚   â”‚                                                                                                                 â”‚
           â”‚   441 â”‚   â”‚   retry_state = RetryCallState(self, fn=None, args=(), kwargs={})                                               â”‚
           â”‚   442 â”‚   â”‚   while True:                                                                                                   â”‚
           â”‚ â± 443 â”‚   â”‚   â”‚   do = self.iter(retry_state=retry_state)                                                                   â”‚
           â”‚   444 â”‚   â”‚   â”‚   if isinstance(do, DoAttempt):                                                                             â”‚
           â”‚   445 â”‚   â”‚   â”‚   â”‚   yield AttemptManager(retry_state=retry_state)                                                         â”‚
           â”‚   446 â”‚   â”‚   â”‚   elif isinstance(do, DoSleep):                                                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:376 in iter                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   373 â”‚   â”‚   self._begin_iter(retry_state)                                                                                 â”‚
           â”‚   374 â”‚   â”‚   result = None                                                                                                 â”‚
           â”‚   375 â”‚   â”‚   for action in self.iter_state.actions:                                                                        â”‚
           â”‚ â± 376 â”‚   â”‚   â”‚   result = action(retry_state)                                                                              â”‚
           â”‚   377 â”‚   â”‚   return result                                                                                                 â”‚
           â”‚   378 â”‚                                                                                                                     â”‚
           â”‚   379 â”‚   def _begin_iter(self, retry_state: "RetryCallState") -> None:  # noqa                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:398 in <lambda>                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   395 â”‚                                                                                                                     â”‚
           â”‚   396 â”‚   def _post_retry_check_actions(self, retry_state: "RetryCallState") -> None:                                       â”‚
           â”‚   397 â”‚   â”‚   if not (self.iter_state.is_explicit_retry or self.iter_state.retry_run_result):                               â”‚
           â”‚ â± 398 â”‚   â”‚   â”‚   self._add_action_func(lambda rs: rs.outcome.result())                                                     â”‚
           â”‚   399 â”‚   â”‚   â”‚   return                                                                                                    â”‚
           â”‚   400 â”‚   â”‚                                                                                                                 â”‚
           â”‚   401 â”‚   â”‚   if self.after is not None:                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:449 in result                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚   446 â”‚   â”‚   â”‚   â”‚   if self._state in [CANCELLED, CANCELLED_AND_NOTIFIED]:                                                â”‚
           â”‚   447 â”‚   â”‚   â”‚   â”‚   â”‚   raise CancelledError()                                                                            â”‚
           â”‚   448 â”‚   â”‚   â”‚   â”‚   elif self._state == FINISHED:                                                                         â”‚
           â”‚ â± 449 â”‚   â”‚   â”‚   â”‚   â”‚   return self.__get_result()                                                                        â”‚
           â”‚   450 â”‚   â”‚   â”‚   â”‚                                                                                                         â”‚
           â”‚   451 â”‚   â”‚   â”‚   â”‚   self._condition.wait(timeout)                                                                         â”‚
           â”‚   452                                                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:401 in __get_result                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   398 â”‚   def __get_result(self):                                                                                           â”‚
           â”‚   399 â”‚   â”‚   if self._exception:                                                                                           â”‚
           â”‚   400 â”‚   â”‚   â”‚   try:                                                                                                      â”‚
           â”‚ â± 401 â”‚   â”‚   â”‚   â”‚   raise self._exception                                                                                 â”‚
           â”‚   402 â”‚   â”‚   â”‚   finally:                                                                                                  â”‚
           â”‚   403 â”‚   â”‚   â”‚   â”‚   # Break a reference cycle with the exception in self._exception                                       â”‚
           â”‚   404 â”‚   â”‚   â”‚   â”‚   self = None                                                                                           â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:417 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   414 â”‚   â”‚   â”‚   â”‚   reraise=True,                                                                                         â”‚
           â”‚   415 â”‚   â”‚   â”‚   ):                                                                                                        â”‚
           â”‚   416 â”‚   â”‚   â”‚   â”‚   with attempt:  # Retrying if ToolSelector fails to select a tool                                      â”‚
           â”‚ â± 417 â”‚   â”‚   â”‚   â”‚   â”‚   action = await agent(agent_state.messages, tools)                                                 â”‚
           â”‚   418 â”‚   â”‚   â”‚   agent_state.messages = [*agent_state.messages, action]                                                    â”‚
           â”‚   419 â”‚   â”‚   â”‚   if on_agent_action_callback:                                                                              â”‚
           â”‚   420 â”‚   â”‚   â”‚   â”‚   await on_agent_action_callback(action, agent_state)                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aviary/tools/utils.py:182 in __call__                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   179 â”‚   â”‚   â”‚   self._ledger.messages.extend(messages)                                                                    â”‚
           â”‚   180 â”‚   â”‚   â”‚   messages = self._ledger.messages                                                                          â”‚
           â”‚   181 â”‚   â”‚                                                                                                                 â”‚
           â”‚ â± 182 â”‚   â”‚   model_response = await self._bound_acompletion(                                                               â”‚
           â”‚   183 â”‚   â”‚   â”‚   messages=MessagesAdapter.dump_python(                                                                     â”‚
           â”‚   184 â”‚   â”‚   â”‚   â”‚   messages, exclude_none=True, by_alias=True                                                            â”‚
           â”‚   185 â”‚   â”‚   â”‚   ),                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:817 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    814 â”‚   â”‚   â”‚   â”‚   â”‚   original_exception=e,                                                                            â”‚
           â”‚    815 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    816 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚ â±  817 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    818 â”‚                                                                                                                    â”‚
           â”‚    819 â”‚   async def _acompletion(                                                                                          â”‚
           â”‚    820 â”‚   â”‚   self, model: str, messages: List[Dict[str, str]], **kwargs                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:793 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    790 â”‚   â”‚   â”‚   if request_priority is not None and isinstance(request_priority, int):                                   â”‚
           â”‚    791 â”‚   â”‚   â”‚   â”‚   response = await self.schedule_acompletion(**kwargs)                                                 â”‚
           â”‚    792 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â±  793 â”‚   â”‚   â”‚   â”‚   response = await self.async_function_with_fallbacks(**kwargs)                                        â”‚
           â”‚    794 â”‚   â”‚   â”‚   end_time = time.time()                                                                                   â”‚
           â”‚    795 â”‚   â”‚   â”‚   _duration = end_time - start_time                                                                        â”‚
           â”‚    796 â”‚   â”‚   â”‚   asyncio.create_task(                                                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2795 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2792 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚   2793 â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                                â”‚
           â”‚   2794 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2795 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2796 â”‚                                                                                                                    â”‚
           â”‚   2797 â”‚   def _handle_mock_testing_fallbacks(                                                                              â”‚
           â”‚   2798 â”‚   â”‚   self,                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2631 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2628 â”‚   â”‚   â”‚   â”‚   content_policy_fallbacks=content_policy_fallbacks,                                                   â”‚
           â”‚   2629 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2630 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2631 â”‚   â”‚   â”‚   response = await self.async_function_with_retries(*args, **kwargs)                                       â”‚
           â”‚   2632 â”‚   â”‚   â”‚   verbose_router_logger.debug(f"Async Response: {response}")                                               â”‚
           â”‚   2633 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2634 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2967 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2964 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "max_retries", num_retries)                                              â”‚
           â”‚   2965 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "num_retries", current_attempt)                                          â”‚
           â”‚   2966 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2967 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2968 â”‚                                                                                                                    â”‚
           â”‚   2969 â”‚   async def make_call(self, original_function: Any, *args, **kwargs):                                              â”‚
           â”‚   2970 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2879 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2876 â”‚   â”‚   â”‚   â”‚   model_group=model_group, kwargs=kwargs                                                               â”‚
           â”‚   2877 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2878 â”‚   â”‚   â”‚   # if the function call is successful, no exception will be raised and we'll                              â”‚
           â”‚        break out of the loop                                                                                                â”‚
           â”‚ â± 2879 â”‚   â”‚   â”‚   response = await self.make_call(original_function, *args, **kwargs)                                      â”‚
           â”‚   2880 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   2881 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2882 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2976 in make_call                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2973 â”‚   â”‚   model_group = kwargs.get("model")                                                                            â”‚
           â”‚   2974 â”‚   â”‚   response = original_function(*args, **kwargs)                                                                â”‚
           â”‚   2975 â”‚   â”‚   if inspect.iscoroutinefunction(response) or inspect.isawaitable(response):                                   â”‚
           â”‚ â± 2976 â”‚   â”‚   â”‚   response = await response                                                                                â”‚
           â”‚   2977 â”‚   â”‚   ## PROCESS RESPONSE HEADERS                                                                                  â”‚
           â”‚   2978 â”‚   â”‚   await self.set_response_headers(response=response, model_group=model_group)                                  â”‚
           â”‚   2979                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:947 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    944 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚    945 â”‚   â”‚   â”‚   if model_name is not None:                                                                               â”‚
           â”‚    946 â”‚   â”‚   â”‚   â”‚   self.fail_calls[model_name] += 1                                                                     â”‚
           â”‚ â±  947 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    948 â”‚                                                                                                                    â”‚
           â”‚    949 â”‚   def _update_kwargs_before_fallbacks(self, model: str, kwargs: dict) -> None:                                     â”‚
           â”‚    950 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:915 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    912 â”‚   â”‚   â”‚   â”‚   â”‚   parent_otel_span=parent_otel_span,                                                               â”‚
           â”‚    913 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    914 â”‚   â”‚   â”‚   â”‚                                                                                                        â”‚
           â”‚ â±  915 â”‚   â”‚   â”‚   â”‚   response = await _response                                                                           â”‚
           â”‚    916 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚    917 â”‚   â”‚   â”‚   ## CHECK CONTENT FILTER ERROR ##                                                                         â”‚
           â”‚    918 â”‚   â”‚   â”‚   if isinstance(response, ModelResponse):                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1175 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1172 â”‚   â”‚   â”‚   â”‚   â”‚   else:                                                                                            â”‚
           â”‚   1173 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   kwargs["model"] = context_window_fallback_dict[model]                                        â”‚
           â”‚   1174 â”‚   â”‚   â”‚   â”‚   â”‚   return await original_function(*args, **kwargs)                                                  â”‚
           â”‚ â± 1175 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   1176 â”‚                                                                                                                    â”‚
           â”‚   1177 â”‚   is_coroutine = inspect.iscoroutinefunction(original_function)                                                    â”‚
           â”‚   1178                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1031 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1028 â”‚   â”‚   â”‚   â”‚   return _caching_handler_response.final_embedding_cached_response                                     â”‚
           â”‚   1029 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1030 â”‚   â”‚   â”‚   # MODEL CALL                                                                                             â”‚
           â”‚ â± 1031 â”‚   â”‚   â”‚   result = await original_function(*args, **kwargs)                                                        â”‚
           â”‚   1032 â”‚   â”‚   â”‚   end_time = datetime.datetime.now()                                                                       â”‚
           â”‚   1033 â”‚   â”‚   â”‚   if "stream" in kwargs and kwargs["stream"] is True:                                                      â”‚
           â”‚   1034 â”‚   â”‚   â”‚   â”‚   if (                                                                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:499 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    496 â”‚   â”‚   return response                                                                                              â”‚
           â”‚    497 â”‚   except Exception as e:                                                                                           â”‚
           â”‚    498 â”‚   â”‚   custom_llm_provider = custom_llm_provider or "openai"                                                        â”‚
           â”‚ â±  499 â”‚   â”‚   raise exception_type(                                                                                        â”‚
           â”‚    500 â”‚   â”‚   â”‚   model=model,                                                                                             â”‚
           â”‚    501 â”‚   â”‚   â”‚   custom_llm_provider=custom_llm_provider,                                                                 â”‚
           â”‚    502 â”‚   â”‚   â”‚   original_exception=e,                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:212 â”‚
           â”‚ 5 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2122 â”‚   â”‚   # don't let an error with mapping interrupt the user from receiving an error                                 â”‚
           â”‚        from the llm api calls                                                                                               â”‚
           â”‚   2123 â”‚   â”‚   if exception_mapping_worked:                                                                                 â”‚
           â”‚   2124 â”‚   â”‚   â”‚   setattr(e, "litellm_response_headers", litellm_response_headers)                                         â”‚
           â”‚ â± 2125 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   2126 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   2127 â”‚   â”‚   â”‚   for error_type in litellm.LITELLM_EXCEPTION_TYPES:                                                       â”‚
           â”‚   2128 â”‚   â”‚   â”‚   â”‚   if isinstance(e, error_type):                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:210 â”‚
           â”‚ 1 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2098 â”‚   â”‚   â”‚   â”‚   â”‚   request=original_exception.request,                                                              â”‚
           â”‚   2099 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚   2100 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â± 2101 â”‚   â”‚   â”‚   â”‚   raise APIConnectionError(                                                                            â”‚
           â”‚   2102 â”‚   â”‚   â”‚   â”‚   â”‚   message="{}\n{}".format(                                                                         â”‚
           â”‚   2103 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   str(original_exception), traceback.format_exc()                                              â”‚
           â”‚   2104 â”‚   â”‚   â”‚   â”‚   â”‚   ),                                                                                               â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           APIConnectionError: litellm.APIConnectionError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1109, in                 
           _wrap_create_connection                                                                                                        
               sock = await aiohappyeyeballs.start_connection(                                                                            
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                            
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py", line 123, in              
           start_connection                                                                                                               
               raise OSError(first_errno, msg)                                                                                            
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py", line 477, in acompletion           
               response = await init_response                                                                                             
                          ^^^^^^^^^^^^^^^^^^^                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 566, in                
           ollama_acompletion                                                                                                             
               raise e  # don't use verbose_logger.exception, if exception is raised                                                      
               ^^^^^^^                                                                                                                    
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 507, in                
           ollama_acompletion                                                                                                             
               resp = await session.post(url, json=data)                                                                                  
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                  
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py", line 696, in _request            
               conn = await self._connector.connect(                                                                                      
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 544, in connect          
               proto = await self._create_connection(req, traces, timeout)                                                                
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1050, in                 
           _create_connection                                                                                                             
               _, proto = await self._create_direct_connection(req, traces, timeout)                                                      
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1394, in                 
           _create_direct_connection                                                                                                      
               raise last_exc                                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1363, in                 
           _create_direct_connection                                                                                                      
               transp, proto = await self._wrap_create_connection(                                                                        
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                        
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1124, in                 
           _wrap_create_connection                                                                                                        
               raise client_error(req.connection_key, exc) from exc                                                                       
           aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
                                                                                                                                          
           Received Model Group=ollama/llama3.2                                                                                           
           Available Model Group Fallbacks=None LiteLLM Retried: 2 times, LiteLLM Max Retries: 3                                          
[00:56:35] Answer:                                                                                                                        

 Skipping sciqag_question_66.json as sciqag_answer_66.json already exists. 


 Skipping sciqag_question_67.json as sciqag_answer_67.json already exists. 



 ANSWERING QUESTION: sciqag_question_68.json
 ----------------------------- 



[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.

[00:56:55] Trajectory failed.                                                                                                             
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1109 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1106 â”‚   â”‚   â”‚   async with ceil_timeout(                                                                                 â”‚
           â”‚   1107 â”‚   â”‚   â”‚   â”‚   timeout.sock_connect, ceil_threshold=timeout.ceil_threshold                                          â”‚
           â”‚   1108 â”‚   â”‚   â”‚   ):                                                                                                       â”‚
           â”‚ â± 1109 â”‚   â”‚   â”‚   â”‚   sock = await aiohappyeyeballs.start_connection(                                                      â”‚
           â”‚   1110 â”‚   â”‚   â”‚   â”‚   â”‚   addr_infos=addr_infos,                                                                           â”‚
           â”‚   1111 â”‚   â”‚   â”‚   â”‚   â”‚   local_addr_infos=self._local_addr_infos,                                                         â”‚
           â”‚   1112 â”‚   â”‚   â”‚   â”‚   â”‚   happy_eyeballs_delay=self._happy_eyeballs_delay,                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py:123 in start_connection          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   120 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, OSError) and exc.errno == first_errno                                         â”‚
           â”‚   121 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   for exc in all_exceptions                                                                     â”‚
           â”‚   122 â”‚   â”‚   â”‚   â”‚   â”‚   ):                                                                                                â”‚
           â”‚ â± 123 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   raise OSError(first_errno, msg)                                                               â”‚
           â”‚   124 â”‚   â”‚   â”‚   â”‚   elif isinstance(first_exception, RuntimeError) and all(                                               â”‚
           â”‚   125 â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, RuntimeError) for exc in all_exceptions                                           â”‚
           â”‚   126 â”‚   â”‚   â”‚   â”‚   ):                                                                                                    â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:477 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    474 â”‚   â”‚   â”‚   â”‚   â”‚   response = ModelResponse(**init_response)                                                        â”‚
           â”‚    475 â”‚   â”‚   â”‚   â”‚   response = init_response                                                                             â”‚
           â”‚    476 â”‚   â”‚   â”‚   elif asyncio.iscoroutine(init_response):                                                                 â”‚
           â”‚ â±  477 â”‚   â”‚   â”‚   â”‚   response = await init_response                                                                       â”‚
           â”‚    478 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚    479 â”‚   â”‚   â”‚   â”‚   response = init_response  # type: ignore                                                             â”‚
           â”‚    480                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:566 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   563 â”‚   â”‚   â”‚   )                                                                                                         â”‚
           â”‚   564 â”‚   â”‚   â”‚   return model_response                                                                                     â”‚
           â”‚   565 â”‚   except Exception as e:                                                                                            â”‚
           â”‚ â± 566 â”‚   â”‚   raise e  # don't use verbose_logger.exception, if exception is raised                                         â”‚
           â”‚   567                                                                                                                       â”‚
           â”‚   568                                                                                                                       â”‚
           â”‚   569 async def ollama_aembeddings(                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:507 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   504 â”‚   try:                                                                                                              â”‚
           â”‚   505 â”‚   â”‚   timeout = aiohttp.ClientTimeout(total=litellm.request_timeout)  # 10 minutes                                  â”‚
           â”‚   506 â”‚   â”‚   async with aiohttp.ClientSession(timeout=timeout) as session:                                                 â”‚
           â”‚ â± 507 â”‚   â”‚   â”‚   resp = await session.post(url, json=data)                                                                 â”‚
           â”‚   508 â”‚   â”‚   â”‚                                                                                                             â”‚
           â”‚   509 â”‚   â”‚   â”‚   if resp.status != 200:                                                                                    â”‚
           â”‚   510 â”‚   â”‚   â”‚   â”‚   text = await resp.text()                                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py:696 in _request                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚    693 â”‚   â”‚   â”‚   â”‚   â”‚                                                                                                    â”‚
           â”‚    694 â”‚   â”‚   â”‚   â”‚   â”‚   # connection timeout                                                                             â”‚
           â”‚    695 â”‚   â”‚   â”‚   â”‚   â”‚   try:                                                                                             â”‚
           â”‚ â±  696 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   conn = await self._connector.connect(                                                        â”‚
           â”‚    697 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   req, traces=traces, timeout=real_timeout                                                 â”‚
           â”‚    698 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚    699 â”‚   â”‚   â”‚   â”‚   â”‚   except asyncio.TimeoutError as exc:                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:544 in connect                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚    541 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    542 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    543 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_start()                                                   â”‚
           â”‚ â±  544 â”‚   â”‚   â”‚   â”‚   proto = await self._create_connection(req, traces, timeout)                                          â”‚
           â”‚    545 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    546 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    547 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_end()                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1050 in _create_connection           â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1047 â”‚   â”‚   if req.proxy:                                                                                                â”‚
           â”‚   1048 â”‚   â”‚   â”‚   _, proto = await self._create_proxy_connection(req, traces, timeout)                                     â”‚
           â”‚   1049 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚ â± 1050 â”‚   â”‚   â”‚   _, proto = await self._create_direct_connection(req, traces, timeout)                                    â”‚
           â”‚   1051 â”‚   â”‚                                                                                                                â”‚
           â”‚   1052 â”‚   â”‚   return proto                                                                                                 â”‚
           â”‚   1053                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1394 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1391 â”‚   â”‚   â”‚   return transp, proto                                                                                     â”‚
           â”‚   1392 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   1393 â”‚   â”‚   â”‚   assert last_exc is not None                                                                              â”‚
           â”‚ â± 1394 â”‚   â”‚   â”‚   raise last_exc                                                                                           â”‚
           â”‚   1395 â”‚                                                                                                                    â”‚
           â”‚   1396 â”‚   async def _create_proxy_connection(                                                                              â”‚
           â”‚   1397 â”‚   â”‚   self, req: ClientRequest, traces: List["Trace"], timeout: "ClientTimeout"                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1363 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1360 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   1361 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1362 â”‚   â”‚   â”‚   try:                                                                                                     â”‚
           â”‚ â± 1363 â”‚   â”‚   â”‚   â”‚   transp, proto = await self._wrap_create_connection(                                                  â”‚
           â”‚   1364 â”‚   â”‚   â”‚   â”‚   â”‚   self._factory,                                                                                   â”‚
           â”‚   1365 â”‚   â”‚   â”‚   â”‚   â”‚   timeout=timeout,                                                                                 â”‚
           â”‚   1366 â”‚   â”‚   â”‚   â”‚   â”‚   ssl=sslcontext,                                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1124 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1121 â”‚   â”‚   except OSError as exc:                                                                                       â”‚
           â”‚   1122 â”‚   â”‚   â”‚   if exc.errno is None and isinstance(exc, asyncio.TimeoutError):                                          â”‚
           â”‚   1123 â”‚   â”‚   â”‚   â”‚   raise                                                                                                â”‚
           â”‚ â± 1124 â”‚   â”‚   â”‚   raise client_error(req.connection_key, exc) from exc                                                     â”‚
           â”‚   1125 â”‚                                                                                                                    â”‚
           â”‚   1126 â”‚   async def _wrap_existing_connection(                                                                             â”‚
           â”‚   1127 â”‚   â”‚   self,                                                                                                        â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno 111] Connect call failed 
           ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                                                    
                                                                                                                                          
           During handling of the above exception, another exception occurred:                                                            
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:276 in _run_with_timeout_failure                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   273 ) -> tuple[PQASession, AgentStatus]:                                                                                  â”‚
           â”‚   274 â”‚   try:                                                                                                              â”‚
           â”‚   275 â”‚   â”‚   async with asyncio.timeout(query.settings.agent.timeout):                                                     â”‚
           â”‚ â± 276 â”‚   â”‚   â”‚   status = await rollout()                                                                                  â”‚
           â”‚   277 â”‚   except TimeoutError:                                                                                              â”‚
           â”‚   278 â”‚   â”‚   logger.warning(                                                                                               â”‚
           â”‚   279 â”‚   â”‚   â”‚   f"Agent timeout after {query.settings.agent.timeout}-sec, just answering."                                â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:410 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   407 â”‚   â”‚   â”‚   â”‚   )                                                                                                     â”‚
           â”‚   408 â”‚   â”‚   â”‚   â”‚   return AgentStatus.TRUNCATED                                                                          â”‚
           â”‚   409 â”‚   â”‚   â”‚   agent_state.messages += obs                                                                               â”‚
           â”‚ â± 410 â”‚   â”‚   â”‚   for attempt in Retrying(                                                                                  â”‚
           â”‚   411 â”‚   â”‚   â”‚   â”‚   stop=stop_after_attempt(5),                                                                           â”‚
           â”‚   412 â”‚   â”‚   â”‚   â”‚   retry=retry_if_exception_type(MalformedMessageError),                                                 â”‚
           â”‚   413 â”‚   â”‚   â”‚   â”‚   before_sleep=before_sleep_log(logger, logging.WARNING),                                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:443 in __iter__                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   440 â”‚   â”‚                                                                                                                 â”‚
           â”‚   441 â”‚   â”‚   retry_state = RetryCallState(self, fn=None, args=(), kwargs={})                                               â”‚
           â”‚   442 â”‚   â”‚   while True:                                                                                                   â”‚
           â”‚ â± 443 â”‚   â”‚   â”‚   do = self.iter(retry_state=retry_state)                                                                   â”‚
           â”‚   444 â”‚   â”‚   â”‚   if isinstance(do, DoAttempt):                                                                             â”‚
           â”‚   445 â”‚   â”‚   â”‚   â”‚   yield AttemptManager(retry_state=retry_state)                                                         â”‚
           â”‚   446 â”‚   â”‚   â”‚   elif isinstance(do, DoSleep):                                                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:376 in iter                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   373 â”‚   â”‚   self._begin_iter(retry_state)                                                                                 â”‚
           â”‚   374 â”‚   â”‚   result = None                                                                                                 â”‚
           â”‚   375 â”‚   â”‚   for action in self.iter_state.actions:                                                                        â”‚
           â”‚ â± 376 â”‚   â”‚   â”‚   result = action(retry_state)                                                                              â”‚
           â”‚   377 â”‚   â”‚   return result                                                                                                 â”‚
           â”‚   378 â”‚                                                                                                                     â”‚
           â”‚   379 â”‚   def _begin_iter(self, retry_state: "RetryCallState") -> None:  # noqa                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:398 in <lambda>                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   395 â”‚                                                                                                                     â”‚
           â”‚   396 â”‚   def _post_retry_check_actions(self, retry_state: "RetryCallState") -> None:                                       â”‚
           â”‚   397 â”‚   â”‚   if not (self.iter_state.is_explicit_retry or self.iter_state.retry_run_result):                               â”‚
           â”‚ â± 398 â”‚   â”‚   â”‚   self._add_action_func(lambda rs: rs.outcome.result())                                                     â”‚
           â”‚   399 â”‚   â”‚   â”‚   return                                                                                                    â”‚
           â”‚   400 â”‚   â”‚                                                                                                                 â”‚
           â”‚   401 â”‚   â”‚   if self.after is not None:                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:449 in result                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚   446 â”‚   â”‚   â”‚   â”‚   if self._state in [CANCELLED, CANCELLED_AND_NOTIFIED]:                                                â”‚
           â”‚   447 â”‚   â”‚   â”‚   â”‚   â”‚   raise CancelledError()                                                                            â”‚
           â”‚   448 â”‚   â”‚   â”‚   â”‚   elif self._state == FINISHED:                                                                         â”‚
           â”‚ â± 449 â”‚   â”‚   â”‚   â”‚   â”‚   return self.__get_result()                                                                        â”‚
           â”‚   450 â”‚   â”‚   â”‚   â”‚                                                                                                         â”‚
           â”‚   451 â”‚   â”‚   â”‚   â”‚   self._condition.wait(timeout)                                                                         â”‚
           â”‚   452                                                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:401 in __get_result                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   398 â”‚   def __get_result(self):                                                                                           â”‚
           â”‚   399 â”‚   â”‚   if self._exception:                                                                                           â”‚
           â”‚   400 â”‚   â”‚   â”‚   try:                                                                                                      â”‚
           â”‚ â± 401 â”‚   â”‚   â”‚   â”‚   raise self._exception                                                                                 â”‚
           â”‚   402 â”‚   â”‚   â”‚   finally:                                                                                                  â”‚
           â”‚   403 â”‚   â”‚   â”‚   â”‚   # Break a reference cycle with the exception in self._exception                                       â”‚
           â”‚   404 â”‚   â”‚   â”‚   â”‚   self = None                                                                                           â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:417 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   414 â”‚   â”‚   â”‚   â”‚   reraise=True,                                                                                         â”‚
           â”‚   415 â”‚   â”‚   â”‚   ):                                                                                                        â”‚
           â”‚   416 â”‚   â”‚   â”‚   â”‚   with attempt:  # Retrying if ToolSelector fails to select a tool                                      â”‚
           â”‚ â± 417 â”‚   â”‚   â”‚   â”‚   â”‚   action = await agent(agent_state.messages, tools)                                                 â”‚
           â”‚   418 â”‚   â”‚   â”‚   agent_state.messages = [*agent_state.messages, action]                                                    â”‚
           â”‚   419 â”‚   â”‚   â”‚   if on_agent_action_callback:                                                                              â”‚
           â”‚   420 â”‚   â”‚   â”‚   â”‚   await on_agent_action_callback(action, agent_state)                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aviary/tools/utils.py:182 in __call__                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   179 â”‚   â”‚   â”‚   self._ledger.messages.extend(messages)                                                                    â”‚
           â”‚   180 â”‚   â”‚   â”‚   messages = self._ledger.messages                                                                          â”‚
           â”‚   181 â”‚   â”‚                                                                                                                 â”‚
           â”‚ â± 182 â”‚   â”‚   model_response = await self._bound_acompletion(                                                               â”‚
           â”‚   183 â”‚   â”‚   â”‚   messages=MessagesAdapter.dump_python(                                                                     â”‚
           â”‚   184 â”‚   â”‚   â”‚   â”‚   messages, exclude_none=True, by_alias=True                                                            â”‚
           â”‚   185 â”‚   â”‚   â”‚   ),                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:817 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    814 â”‚   â”‚   â”‚   â”‚   â”‚   original_exception=e,                                                                            â”‚
           â”‚    815 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    816 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚ â±  817 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    818 â”‚                                                                                                                    â”‚
           â”‚    819 â”‚   async def _acompletion(                                                                                          â”‚
           â”‚    820 â”‚   â”‚   self, model: str, messages: List[Dict[str, str]], **kwargs                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:793 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    790 â”‚   â”‚   â”‚   if request_priority is not None and isinstance(request_priority, int):                                   â”‚
           â”‚    791 â”‚   â”‚   â”‚   â”‚   response = await self.schedule_acompletion(**kwargs)                                                 â”‚
           â”‚    792 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â±  793 â”‚   â”‚   â”‚   â”‚   response = await self.async_function_with_fallbacks(**kwargs)                                        â”‚
           â”‚    794 â”‚   â”‚   â”‚   end_time = time.time()                                                                                   â”‚
           â”‚    795 â”‚   â”‚   â”‚   _duration = end_time - start_time                                                                        â”‚
           â”‚    796 â”‚   â”‚   â”‚   asyncio.create_task(                                                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2795 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2792 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚   2793 â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                                â”‚
           â”‚   2794 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2795 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2796 â”‚                                                                                                                    â”‚
           â”‚   2797 â”‚   def _handle_mock_testing_fallbacks(                                                                              â”‚
           â”‚   2798 â”‚   â”‚   self,                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2631 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2628 â”‚   â”‚   â”‚   â”‚   content_policy_fallbacks=content_policy_fallbacks,                                                   â”‚
           â”‚   2629 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2630 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2631 â”‚   â”‚   â”‚   response = await self.async_function_with_retries(*args, **kwargs)                                       â”‚
           â”‚   2632 â”‚   â”‚   â”‚   verbose_router_logger.debug(f"Async Response: {response}")                                               â”‚
           â”‚   2633 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2634 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2967 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2964 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "max_retries", num_retries)                                              â”‚
           â”‚   2965 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "num_retries", current_attempt)                                          â”‚
           â”‚   2966 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2967 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2968 â”‚                                                                                                                    â”‚
           â”‚   2969 â”‚   async def make_call(self, original_function: Any, *args, **kwargs):                                              â”‚
           â”‚   2970 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2879 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2876 â”‚   â”‚   â”‚   â”‚   model_group=model_group, kwargs=kwargs                                                               â”‚
           â”‚   2877 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2878 â”‚   â”‚   â”‚   # if the function call is successful, no exception will be raised and we'll                              â”‚
           â”‚        break out of the loop                                                                                                â”‚
           â”‚ â± 2879 â”‚   â”‚   â”‚   response = await self.make_call(original_function, *args, **kwargs)                                      â”‚
           â”‚   2880 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   2881 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2882 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2976 in make_call                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2973 â”‚   â”‚   model_group = kwargs.get("model")                                                                            â”‚
           â”‚   2974 â”‚   â”‚   response = original_function(*args, **kwargs)                                                                â”‚
           â”‚   2975 â”‚   â”‚   if inspect.iscoroutinefunction(response) or inspect.isawaitable(response):                                   â”‚
           â”‚ â± 2976 â”‚   â”‚   â”‚   response = await response                                                                                â”‚
           â”‚   2977 â”‚   â”‚   ## PROCESS RESPONSE HEADERS                                                                                  â”‚
           â”‚   2978 â”‚   â”‚   await self.set_response_headers(response=response, model_group=model_group)                                  â”‚
           â”‚   2979                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:947 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    944 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚    945 â”‚   â”‚   â”‚   if model_name is not None:                                                                               â”‚
           â”‚    946 â”‚   â”‚   â”‚   â”‚   self.fail_calls[model_name] += 1                                                                     â”‚
           â”‚ â±  947 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    948 â”‚                                                                                                                    â”‚
           â”‚    949 â”‚   def _update_kwargs_before_fallbacks(self, model: str, kwargs: dict) -> None:                                     â”‚
           â”‚    950 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:915 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    912 â”‚   â”‚   â”‚   â”‚   â”‚   parent_otel_span=parent_otel_span,                                                               â”‚
           â”‚    913 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    914 â”‚   â”‚   â”‚   â”‚                                                                                                        â”‚
           â”‚ â±  915 â”‚   â”‚   â”‚   â”‚   response = await _response                                                                           â”‚
           â”‚    916 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚    917 â”‚   â”‚   â”‚   ## CHECK CONTENT FILTER ERROR ##                                                                         â”‚
           â”‚    918 â”‚   â”‚   â”‚   if isinstance(response, ModelResponse):                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1175 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1172 â”‚   â”‚   â”‚   â”‚   â”‚   else:                                                                                            â”‚
           â”‚   1173 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   kwargs["model"] = context_window_fallback_dict[model]                                        â”‚
           â”‚   1174 â”‚   â”‚   â”‚   â”‚   â”‚   return await original_function(*args, **kwargs)                                                  â”‚
           â”‚ â± 1175 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   1176 â”‚                                                                                                                    â”‚
           â”‚   1177 â”‚   is_coroutine = inspect.iscoroutinefunction(original_function)                                                    â”‚
           â”‚   1178                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1031 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1028 â”‚   â”‚   â”‚   â”‚   return _caching_handler_response.final_embedding_cached_response                                     â”‚
           â”‚   1029 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1030 â”‚   â”‚   â”‚   # MODEL CALL                                                                                             â”‚
           â”‚ â± 1031 â”‚   â”‚   â”‚   result = await original_function(*args, **kwargs)                                                        â”‚
           â”‚   1032 â”‚   â”‚   â”‚   end_time = datetime.datetime.now()                                                                       â”‚
           â”‚   1033 â”‚   â”‚   â”‚   if "stream" in kwargs and kwargs["stream"] is True:                                                      â”‚
           â”‚   1034 â”‚   â”‚   â”‚   â”‚   if (                                                                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:499 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    496 â”‚   â”‚   return response                                                                                              â”‚
           â”‚    497 â”‚   except Exception as e:                                                                                           â”‚
           â”‚    498 â”‚   â”‚   custom_llm_provider = custom_llm_provider or "openai"                                                        â”‚
           â”‚ â±  499 â”‚   â”‚   raise exception_type(                                                                                        â”‚
           â”‚    500 â”‚   â”‚   â”‚   model=model,                                                                                             â”‚
           â”‚    501 â”‚   â”‚   â”‚   custom_llm_provider=custom_llm_provider,                                                                 â”‚
           â”‚    502 â”‚   â”‚   â”‚   original_exception=e,                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:212 â”‚
           â”‚ 5 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2122 â”‚   â”‚   # don't let an error with mapping interrupt the user from receiving an error                                 â”‚
           â”‚        from the llm api calls                                                                                               â”‚
           â”‚   2123 â”‚   â”‚   if exception_mapping_worked:                                                                                 â”‚
           â”‚   2124 â”‚   â”‚   â”‚   setattr(e, "litellm_response_headers", litellm_response_headers)                                         â”‚
           â”‚ â± 2125 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   2126 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   2127 â”‚   â”‚   â”‚   for error_type in litellm.LITELLM_EXCEPTION_TYPES:                                                       â”‚
           â”‚   2128 â”‚   â”‚   â”‚   â”‚   if isinstance(e, error_type):                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:210 â”‚
           â”‚ 1 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2098 â”‚   â”‚   â”‚   â”‚   â”‚   request=original_exception.request,                                                              â”‚
           â”‚   2099 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚   2100 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â± 2101 â”‚   â”‚   â”‚   â”‚   raise APIConnectionError(                                                                            â”‚
           â”‚   2102 â”‚   â”‚   â”‚   â”‚   â”‚   message="{}\n{}".format(                                                                         â”‚
           â”‚   2103 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   str(original_exception), traceback.format_exc()                                              â”‚
           â”‚   2104 â”‚   â”‚   â”‚   â”‚   â”‚   ),                                                                                               â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           APIConnectionError: litellm.APIConnectionError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1109, in                 
           _wrap_create_connection                                                                                                        
               sock = await aiohappyeyeballs.start_connection(                                                                            
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                            
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py", line 123, in              
           start_connection                                                                                                               
               raise OSError(first_errno, msg)                                                                                            
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py", line 477, in acompletion           
               response = await init_response                                                                                             
                          ^^^^^^^^^^^^^^^^^^^                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 566, in                
           ollama_acompletion                                                                                                             
               raise e  # don't use verbose_logger.exception, if exception is raised                                                      
               ^^^^^^^                                                                                                                    
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 507, in                
           ollama_acompletion                                                                                                             
               resp = await session.post(url, json=data)                                                                                  
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                  
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py", line 696, in _request            
               conn = await self._connector.connect(                                                                                      
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 544, in connect          
               proto = await self._create_connection(req, traces, timeout)                                                                
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1050, in                 
           _create_connection                                                                                                             
               _, proto = await self._create_direct_connection(req, traces, timeout)                                                      
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1394, in                 
           _create_direct_connection                                                                                                      
               raise last_exc                                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1363, in                 
           _create_direct_connection                                                                                                      
               transp, proto = await self._wrap_create_connection(                                                                        
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                        
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1124, in                 
           _wrap_create_connection                                                                                                        
               raise client_error(req.connection_key, exc) from exc                                                                       
           aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
                                                                                                                                          
           Received Model Group=ollama/llama3.2                                                                                           
           Available Model Group Fallbacks=None LiteLLM Retried: 2 times, LiteLLM Max Retries: 3                                          
[00:56:57] Answer:                                                                                                                        


 ANSWERING QUESTION: sciqag_question_69.json
 ----------------------------- 



[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.

[00:57:17] Trajectory failed.                                                                                                             
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1109 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1106 â”‚   â”‚   â”‚   async with ceil_timeout(                                                                                 â”‚
           â”‚   1107 â”‚   â”‚   â”‚   â”‚   timeout.sock_connect, ceil_threshold=timeout.ceil_threshold                                          â”‚
           â”‚   1108 â”‚   â”‚   â”‚   ):                                                                                                       â”‚
           â”‚ â± 1109 â”‚   â”‚   â”‚   â”‚   sock = await aiohappyeyeballs.start_connection(                                                      â”‚
           â”‚   1110 â”‚   â”‚   â”‚   â”‚   â”‚   addr_infos=addr_infos,                                                                           â”‚
           â”‚   1111 â”‚   â”‚   â”‚   â”‚   â”‚   local_addr_infos=self._local_addr_infos,                                                         â”‚
           â”‚   1112 â”‚   â”‚   â”‚   â”‚   â”‚   happy_eyeballs_delay=self._happy_eyeballs_delay,                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py:123 in start_connection          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   120 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, OSError) and exc.errno == first_errno                                         â”‚
           â”‚   121 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   for exc in all_exceptions                                                                     â”‚
           â”‚   122 â”‚   â”‚   â”‚   â”‚   â”‚   ):                                                                                                â”‚
           â”‚ â± 123 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   raise OSError(first_errno, msg)                                                               â”‚
           â”‚   124 â”‚   â”‚   â”‚   â”‚   elif isinstance(first_exception, RuntimeError) and all(                                               â”‚
           â”‚   125 â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, RuntimeError) for exc in all_exceptions                                           â”‚
           â”‚   126 â”‚   â”‚   â”‚   â”‚   ):                                                                                                    â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:477 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    474 â”‚   â”‚   â”‚   â”‚   â”‚   response = ModelResponse(**init_response)                                                        â”‚
           â”‚    475 â”‚   â”‚   â”‚   â”‚   response = init_response                                                                             â”‚
           â”‚    476 â”‚   â”‚   â”‚   elif asyncio.iscoroutine(init_response):                                                                 â”‚
           â”‚ â±  477 â”‚   â”‚   â”‚   â”‚   response = await init_response                                                                       â”‚
           â”‚    478 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚    479 â”‚   â”‚   â”‚   â”‚   response = init_response  # type: ignore                                                             â”‚
           â”‚    480                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:566 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   563 â”‚   â”‚   â”‚   )                                                                                                         â”‚
           â”‚   564 â”‚   â”‚   â”‚   return model_response                                                                                     â”‚
           â”‚   565 â”‚   except Exception as e:                                                                                            â”‚
           â”‚ â± 566 â”‚   â”‚   raise e  # don't use verbose_logger.exception, if exception is raised                                         â”‚
           â”‚   567                                                                                                                       â”‚
           â”‚   568                                                                                                                       â”‚
           â”‚   569 async def ollama_aembeddings(                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:507 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   504 â”‚   try:                                                                                                              â”‚
           â”‚   505 â”‚   â”‚   timeout = aiohttp.ClientTimeout(total=litellm.request_timeout)  # 10 minutes                                  â”‚
           â”‚   506 â”‚   â”‚   async with aiohttp.ClientSession(timeout=timeout) as session:                                                 â”‚
           â”‚ â± 507 â”‚   â”‚   â”‚   resp = await session.post(url, json=data)                                                                 â”‚
           â”‚   508 â”‚   â”‚   â”‚                                                                                                             â”‚
           â”‚   509 â”‚   â”‚   â”‚   if resp.status != 200:                                                                                    â”‚
           â”‚   510 â”‚   â”‚   â”‚   â”‚   text = await resp.text()                                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py:696 in _request                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚    693 â”‚   â”‚   â”‚   â”‚   â”‚                                                                                                    â”‚
           â”‚    694 â”‚   â”‚   â”‚   â”‚   â”‚   # connection timeout                                                                             â”‚
           â”‚    695 â”‚   â”‚   â”‚   â”‚   â”‚   try:                                                                                             â”‚
           â”‚ â±  696 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   conn = await self._connector.connect(                                                        â”‚
           â”‚    697 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   req, traces=traces, timeout=real_timeout                                                 â”‚
           â”‚    698 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚    699 â”‚   â”‚   â”‚   â”‚   â”‚   except asyncio.TimeoutError as exc:                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:544 in connect                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚    541 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    542 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    543 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_start()                                                   â”‚
           â”‚ â±  544 â”‚   â”‚   â”‚   â”‚   proto = await self._create_connection(req, traces, timeout)                                          â”‚
           â”‚    545 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    546 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    547 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_end()                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1050 in _create_connection           â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1047 â”‚   â”‚   if req.proxy:                                                                                                â”‚
           â”‚   1048 â”‚   â”‚   â”‚   _, proto = await self._create_proxy_connection(req, traces, timeout)                                     â”‚
           â”‚   1049 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚ â± 1050 â”‚   â”‚   â”‚   _, proto = await self._create_direct_connection(req, traces, timeout)                                    â”‚
           â”‚   1051 â”‚   â”‚                                                                                                                â”‚
           â”‚   1052 â”‚   â”‚   return proto                                                                                                 â”‚
           â”‚   1053                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1394 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1391 â”‚   â”‚   â”‚   return transp, proto                                                                                     â”‚
           â”‚   1392 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   1393 â”‚   â”‚   â”‚   assert last_exc is not None                                                                              â”‚
           â”‚ â± 1394 â”‚   â”‚   â”‚   raise last_exc                                                                                           â”‚
           â”‚   1395 â”‚                                                                                                                    â”‚
           â”‚   1396 â”‚   async def _create_proxy_connection(                                                                              â”‚
           â”‚   1397 â”‚   â”‚   self, req: ClientRequest, traces: List["Trace"], timeout: "ClientTimeout"                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1363 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1360 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   1361 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1362 â”‚   â”‚   â”‚   try:                                                                                                     â”‚
           â”‚ â± 1363 â”‚   â”‚   â”‚   â”‚   transp, proto = await self._wrap_create_connection(                                                  â”‚
           â”‚   1364 â”‚   â”‚   â”‚   â”‚   â”‚   self._factory,                                                                                   â”‚
           â”‚   1365 â”‚   â”‚   â”‚   â”‚   â”‚   timeout=timeout,                                                                                 â”‚
           â”‚   1366 â”‚   â”‚   â”‚   â”‚   â”‚   ssl=sslcontext,                                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1124 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1121 â”‚   â”‚   except OSError as exc:                                                                                       â”‚
           â”‚   1122 â”‚   â”‚   â”‚   if exc.errno is None and isinstance(exc, asyncio.TimeoutError):                                          â”‚
           â”‚   1123 â”‚   â”‚   â”‚   â”‚   raise                                                                                                â”‚
           â”‚ â± 1124 â”‚   â”‚   â”‚   raise client_error(req.connection_key, exc) from exc                                                     â”‚
           â”‚   1125 â”‚                                                                                                                    â”‚
           â”‚   1126 â”‚   async def _wrap_existing_connection(                                                                             â”‚
           â”‚   1127 â”‚   â”‚   self,                                                                                                        â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno 111] Connect call failed 
           ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                                                    
                                                                                                                                          
           During handling of the above exception, another exception occurred:                                                            
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:276 in _run_with_timeout_failure                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   273 ) -> tuple[PQASession, AgentStatus]:                                                                                  â”‚
           â”‚   274 â”‚   try:                                                                                                              â”‚
           â”‚   275 â”‚   â”‚   async with asyncio.timeout(query.settings.agent.timeout):                                                     â”‚
           â”‚ â± 276 â”‚   â”‚   â”‚   status = await rollout()                                                                                  â”‚
           â”‚   277 â”‚   except TimeoutError:                                                                                              â”‚
           â”‚   278 â”‚   â”‚   logger.warning(                                                                                               â”‚
           â”‚   279 â”‚   â”‚   â”‚   f"Agent timeout after {query.settings.agent.timeout}-sec, just answering."                                â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:410 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   407 â”‚   â”‚   â”‚   â”‚   )                                                                                                     â”‚
           â”‚   408 â”‚   â”‚   â”‚   â”‚   return AgentStatus.TRUNCATED                                                                          â”‚
           â”‚   409 â”‚   â”‚   â”‚   agent_state.messages += obs                                                                               â”‚
           â”‚ â± 410 â”‚   â”‚   â”‚   for attempt in Retrying(                                                                                  â”‚
           â”‚   411 â”‚   â”‚   â”‚   â”‚   stop=stop_after_attempt(5),                                                                           â”‚
           â”‚   412 â”‚   â”‚   â”‚   â”‚   retry=retry_if_exception_type(MalformedMessageError),                                                 â”‚
           â”‚   413 â”‚   â”‚   â”‚   â”‚   before_sleep=before_sleep_log(logger, logging.WARNING),                                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:443 in __iter__                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   440 â”‚   â”‚                                                                                                                 â”‚
           â”‚   441 â”‚   â”‚   retry_state = RetryCallState(self, fn=None, args=(), kwargs={})                                               â”‚
           â”‚   442 â”‚   â”‚   while True:                                                                                                   â”‚
           â”‚ â± 443 â”‚   â”‚   â”‚   do = self.iter(retry_state=retry_state)                                                                   â”‚
           â”‚   444 â”‚   â”‚   â”‚   if isinstance(do, DoAttempt):                                                                             â”‚
           â”‚   445 â”‚   â”‚   â”‚   â”‚   yield AttemptManager(retry_state=retry_state)                                                         â”‚
           â”‚   446 â”‚   â”‚   â”‚   elif isinstance(do, DoSleep):                                                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:376 in iter                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   373 â”‚   â”‚   self._begin_iter(retry_state)                                                                                 â”‚
           â”‚   374 â”‚   â”‚   result = None                                                                                                 â”‚
           â”‚   375 â”‚   â”‚   for action in self.iter_state.actions:                                                                        â”‚
           â”‚ â± 376 â”‚   â”‚   â”‚   result = action(retry_state)                                                                              â”‚
           â”‚   377 â”‚   â”‚   return result                                                                                                 â”‚
           â”‚   378 â”‚                                                                                                                     â”‚
           â”‚   379 â”‚   def _begin_iter(self, retry_state: "RetryCallState") -> None:  # noqa                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:398 in <lambda>                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   395 â”‚                                                                                                                     â”‚
           â”‚   396 â”‚   def _post_retry_check_actions(self, retry_state: "RetryCallState") -> None:                                       â”‚
           â”‚   397 â”‚   â”‚   if not (self.iter_state.is_explicit_retry or self.iter_state.retry_run_result):                               â”‚
           â”‚ â± 398 â”‚   â”‚   â”‚   self._add_action_func(lambda rs: rs.outcome.result())                                                     â”‚
           â”‚   399 â”‚   â”‚   â”‚   return                                                                                                    â”‚
           â”‚   400 â”‚   â”‚                                                                                                                 â”‚
           â”‚   401 â”‚   â”‚   if self.after is not None:                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:449 in result                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚   446 â”‚   â”‚   â”‚   â”‚   if self._state in [CANCELLED, CANCELLED_AND_NOTIFIED]:                                                â”‚
           â”‚   447 â”‚   â”‚   â”‚   â”‚   â”‚   raise CancelledError()                                                                            â”‚
           â”‚   448 â”‚   â”‚   â”‚   â”‚   elif self._state == FINISHED:                                                                         â”‚
           â”‚ â± 449 â”‚   â”‚   â”‚   â”‚   â”‚   return self.__get_result()                                                                        â”‚
           â”‚   450 â”‚   â”‚   â”‚   â”‚                                                                                                         â”‚
           â”‚   451 â”‚   â”‚   â”‚   â”‚   self._condition.wait(timeout)                                                                         â”‚
           â”‚   452                                                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:401 in __get_result                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   398 â”‚   def __get_result(self):                                                                                           â”‚
           â”‚   399 â”‚   â”‚   if self._exception:                                                                                           â”‚
           â”‚   400 â”‚   â”‚   â”‚   try:                                                                                                      â”‚
           â”‚ â± 401 â”‚   â”‚   â”‚   â”‚   raise self._exception                                                                                 â”‚
           â”‚   402 â”‚   â”‚   â”‚   finally:                                                                                                  â”‚
           â”‚   403 â”‚   â”‚   â”‚   â”‚   # Break a reference cycle with the exception in self._exception                                       â”‚
           â”‚   404 â”‚   â”‚   â”‚   â”‚   self = None                                                                                           â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:417 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   414 â”‚   â”‚   â”‚   â”‚   reraise=True,                                                                                         â”‚
           â”‚   415 â”‚   â”‚   â”‚   ):                                                                                                        â”‚
           â”‚   416 â”‚   â”‚   â”‚   â”‚   with attempt:  # Retrying if ToolSelector fails to select a tool                                      â”‚
           â”‚ â± 417 â”‚   â”‚   â”‚   â”‚   â”‚   action = await agent(agent_state.messages, tools)                                                 â”‚
           â”‚   418 â”‚   â”‚   â”‚   agent_state.messages = [*agent_state.messages, action]                                                    â”‚
           â”‚   419 â”‚   â”‚   â”‚   if on_agent_action_callback:                                                                              â”‚
           â”‚   420 â”‚   â”‚   â”‚   â”‚   await on_agent_action_callback(action, agent_state)                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aviary/tools/utils.py:182 in __call__                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   179 â”‚   â”‚   â”‚   self._ledger.messages.extend(messages)                                                                    â”‚
           â”‚   180 â”‚   â”‚   â”‚   messages = self._ledger.messages                                                                          â”‚
           â”‚   181 â”‚   â”‚                                                                                                                 â”‚
           â”‚ â± 182 â”‚   â”‚   model_response = await self._bound_acompletion(                                                               â”‚
           â”‚   183 â”‚   â”‚   â”‚   messages=MessagesAdapter.dump_python(                                                                     â”‚
           â”‚   184 â”‚   â”‚   â”‚   â”‚   messages, exclude_none=True, by_alias=True                                                            â”‚
           â”‚   185 â”‚   â”‚   â”‚   ),                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:817 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    814 â”‚   â”‚   â”‚   â”‚   â”‚   original_exception=e,                                                                            â”‚
           â”‚    815 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    816 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚ â±  817 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    818 â”‚                                                                                                                    â”‚
           â”‚    819 â”‚   async def _acompletion(                                                                                          â”‚
           â”‚    820 â”‚   â”‚   self, model: str, messages: List[Dict[str, str]], **kwargs                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:793 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    790 â”‚   â”‚   â”‚   if request_priority is not None and isinstance(request_priority, int):                                   â”‚
           â”‚    791 â”‚   â”‚   â”‚   â”‚   response = await self.schedule_acompletion(**kwargs)                                                 â”‚
           â”‚    792 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â±  793 â”‚   â”‚   â”‚   â”‚   response = await self.async_function_with_fallbacks(**kwargs)                                        â”‚
           â”‚    794 â”‚   â”‚   â”‚   end_time = time.time()                                                                                   â”‚
           â”‚    795 â”‚   â”‚   â”‚   _duration = end_time - start_time                                                                        â”‚
           â”‚    796 â”‚   â”‚   â”‚   asyncio.create_task(                                                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2795 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2792 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚   2793 â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                                â”‚
           â”‚   2794 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2795 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2796 â”‚                                                                                                                    â”‚
           â”‚   2797 â”‚   def _handle_mock_testing_fallbacks(                                                                              â”‚
           â”‚   2798 â”‚   â”‚   self,                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2631 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2628 â”‚   â”‚   â”‚   â”‚   content_policy_fallbacks=content_policy_fallbacks,                                                   â”‚
           â”‚   2629 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2630 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2631 â”‚   â”‚   â”‚   response = await self.async_function_with_retries(*args, **kwargs)                                       â”‚
           â”‚   2632 â”‚   â”‚   â”‚   verbose_router_logger.debug(f"Async Response: {response}")                                               â”‚
           â”‚   2633 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2634 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2967 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2964 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "max_retries", num_retries)                                              â”‚
           â”‚   2965 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "num_retries", current_attempt)                                          â”‚
           â”‚   2966 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2967 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2968 â”‚                                                                                                                    â”‚
           â”‚   2969 â”‚   async def make_call(self, original_function: Any, *args, **kwargs):                                              â”‚
           â”‚   2970 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2879 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2876 â”‚   â”‚   â”‚   â”‚   model_group=model_group, kwargs=kwargs                                                               â”‚
           â”‚   2877 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2878 â”‚   â”‚   â”‚   # if the function call is successful, no exception will be raised and we'll                              â”‚
           â”‚        break out of the loop                                                                                                â”‚
           â”‚ â± 2879 â”‚   â”‚   â”‚   response = await self.make_call(original_function, *args, **kwargs)                                      â”‚
           â”‚   2880 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   2881 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2882 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2976 in make_call                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2973 â”‚   â”‚   model_group = kwargs.get("model")                                                                            â”‚
           â”‚   2974 â”‚   â”‚   response = original_function(*args, **kwargs)                                                                â”‚
           â”‚   2975 â”‚   â”‚   if inspect.iscoroutinefunction(response) or inspect.isawaitable(response):                                   â”‚
           â”‚ â± 2976 â”‚   â”‚   â”‚   response = await response                                                                                â”‚
           â”‚   2977 â”‚   â”‚   ## PROCESS RESPONSE HEADERS                                                                                  â”‚
           â”‚   2978 â”‚   â”‚   await self.set_response_headers(response=response, model_group=model_group)                                  â”‚
           â”‚   2979                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:947 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    944 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚    945 â”‚   â”‚   â”‚   if model_name is not None:                                                                               â”‚
           â”‚    946 â”‚   â”‚   â”‚   â”‚   self.fail_calls[model_name] += 1                                                                     â”‚
           â”‚ â±  947 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    948 â”‚                                                                                                                    â”‚
           â”‚    949 â”‚   def _update_kwargs_before_fallbacks(self, model: str, kwargs: dict) -> None:                                     â”‚
           â”‚    950 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:915 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    912 â”‚   â”‚   â”‚   â”‚   â”‚   parent_otel_span=parent_otel_span,                                                               â”‚
           â”‚    913 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    914 â”‚   â”‚   â”‚   â”‚                                                                                                        â”‚
           â”‚ â±  915 â”‚   â”‚   â”‚   â”‚   response = await _response                                                                           â”‚
           â”‚    916 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚    917 â”‚   â”‚   â”‚   ## CHECK CONTENT FILTER ERROR ##                                                                         â”‚
           â”‚    918 â”‚   â”‚   â”‚   if isinstance(response, ModelResponse):                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1175 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1172 â”‚   â”‚   â”‚   â”‚   â”‚   else:                                                                                            â”‚
           â”‚   1173 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   kwargs["model"] = context_window_fallback_dict[model]                                        â”‚
           â”‚   1174 â”‚   â”‚   â”‚   â”‚   â”‚   return await original_function(*args, **kwargs)                                                  â”‚
           â”‚ â± 1175 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   1176 â”‚                                                                                                                    â”‚
           â”‚   1177 â”‚   is_coroutine = inspect.iscoroutinefunction(original_function)                                                    â”‚
           â”‚   1178                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1031 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1028 â”‚   â”‚   â”‚   â”‚   return _caching_handler_response.final_embedding_cached_response                                     â”‚
           â”‚   1029 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1030 â”‚   â”‚   â”‚   # MODEL CALL                                                                                             â”‚
           â”‚ â± 1031 â”‚   â”‚   â”‚   result = await original_function(*args, **kwargs)                                                        â”‚
           â”‚   1032 â”‚   â”‚   â”‚   end_time = datetime.datetime.now()                                                                       â”‚
           â”‚   1033 â”‚   â”‚   â”‚   if "stream" in kwargs and kwargs["stream"] is True:                                                      â”‚
           â”‚   1034 â”‚   â”‚   â”‚   â”‚   if (                                                                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:499 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    496 â”‚   â”‚   return response                                                                                              â”‚
           â”‚    497 â”‚   except Exception as e:                                                                                           â”‚
           â”‚    498 â”‚   â”‚   custom_llm_provider = custom_llm_provider or "openai"                                                        â”‚
           â”‚ â±  499 â”‚   â”‚   raise exception_type(                                                                                        â”‚
           â”‚    500 â”‚   â”‚   â”‚   model=model,                                                                                             â”‚
           â”‚    501 â”‚   â”‚   â”‚   custom_llm_provider=custom_llm_provider,                                                                 â”‚
           â”‚    502 â”‚   â”‚   â”‚   original_exception=e,                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:212 â”‚
           â”‚ 5 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2122 â”‚   â”‚   # don't let an error with mapping interrupt the user from receiving an error                                 â”‚
           â”‚        from the llm api calls                                                                                               â”‚
           â”‚   2123 â”‚   â”‚   if exception_mapping_worked:                                                                                 â”‚
           â”‚   2124 â”‚   â”‚   â”‚   setattr(e, "litellm_response_headers", litellm_response_headers)                                         â”‚
           â”‚ â± 2125 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   2126 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   2127 â”‚   â”‚   â”‚   for error_type in litellm.LITELLM_EXCEPTION_TYPES:                                                       â”‚
           â”‚   2128 â”‚   â”‚   â”‚   â”‚   if isinstance(e, error_type):                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:210 â”‚
           â”‚ 1 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2098 â”‚   â”‚   â”‚   â”‚   â”‚   request=original_exception.request,                                                              â”‚
           â”‚   2099 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚   2100 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â± 2101 â”‚   â”‚   â”‚   â”‚   raise APIConnectionError(                                                                            â”‚
           â”‚   2102 â”‚   â”‚   â”‚   â”‚   â”‚   message="{}\n{}".format(                                                                         â”‚
           â”‚   2103 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   str(original_exception), traceback.format_exc()                                              â”‚
           â”‚   2104 â”‚   â”‚   â”‚   â”‚   â”‚   ),                                                                                               â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           APIConnectionError: litellm.APIConnectionError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1109, in                 
           _wrap_create_connection                                                                                                        
               sock = await aiohappyeyeballs.start_connection(                                                                            
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                            
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py", line 123, in              
           start_connection                                                                                                               
               raise OSError(first_errno, msg)                                                                                            
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py", line 477, in acompletion           
               response = await init_response                                                                                             
                          ^^^^^^^^^^^^^^^^^^^                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 566, in                
           ollama_acompletion                                                                                                             
               raise e  # don't use verbose_logger.exception, if exception is raised                                                      
               ^^^^^^^                                                                                                                    
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 507, in                
           ollama_acompletion                                                                                                             
               resp = await session.post(url, json=data)                                                                                  
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                  
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py", line 696, in _request            
               conn = await self._connector.connect(                                                                                      
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 544, in connect          
               proto = await self._create_connection(req, traces, timeout)                                                                
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1050, in                 
           _create_connection                                                                                                             
               _, proto = await self._create_direct_connection(req, traces, timeout)                                                      
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1394, in                 
           _create_direct_connection                                                                                                      
               raise last_exc                                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1363, in                 
           _create_direct_connection                                                                                                      
               transp, proto = await self._wrap_create_connection(                                                                        
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                        
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1124, in                 
           _wrap_create_connection                                                                                                        
               raise client_error(req.connection_key, exc) from exc                                                                       
           aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
                                                                                                                                          
           Received Model Group=ollama/llama3.2                                                                                           
           Available Model Group Fallbacks=None LiteLLM Retried: 2 times, LiteLLM Max Retries: 3                                          
[00:57:19] Answer:                                                                                                                        


 ANSWERING QUESTION: sciqag_question_7.json
 ----------------------------- 



[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.

[00:57:40] Trajectory failed.                                                                                                             
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1109 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1106 â”‚   â”‚   â”‚   async with ceil_timeout(                                                                                 â”‚
           â”‚   1107 â”‚   â”‚   â”‚   â”‚   timeout.sock_connect, ceil_threshold=timeout.ceil_threshold                                          â”‚
           â”‚   1108 â”‚   â”‚   â”‚   ):                                                                                                       â”‚
           â”‚ â± 1109 â”‚   â”‚   â”‚   â”‚   sock = await aiohappyeyeballs.start_connection(                                                      â”‚
           â”‚   1110 â”‚   â”‚   â”‚   â”‚   â”‚   addr_infos=addr_infos,                                                                           â”‚
           â”‚   1111 â”‚   â”‚   â”‚   â”‚   â”‚   local_addr_infos=self._local_addr_infos,                                                         â”‚
           â”‚   1112 â”‚   â”‚   â”‚   â”‚   â”‚   happy_eyeballs_delay=self._happy_eyeballs_delay,                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py:123 in start_connection          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   120 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, OSError) and exc.errno == first_errno                                         â”‚
           â”‚   121 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   for exc in all_exceptions                                                                     â”‚
           â”‚   122 â”‚   â”‚   â”‚   â”‚   â”‚   ):                                                                                                â”‚
           â”‚ â± 123 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   raise OSError(first_errno, msg)                                                               â”‚
           â”‚   124 â”‚   â”‚   â”‚   â”‚   elif isinstance(first_exception, RuntimeError) and all(                                               â”‚
           â”‚   125 â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, RuntimeError) for exc in all_exceptions                                           â”‚
           â”‚   126 â”‚   â”‚   â”‚   â”‚   ):                                                                                                    â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:477 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    474 â”‚   â”‚   â”‚   â”‚   â”‚   response = ModelResponse(**init_response)                                                        â”‚
           â”‚    475 â”‚   â”‚   â”‚   â”‚   response = init_response                                                                             â”‚
           â”‚    476 â”‚   â”‚   â”‚   elif asyncio.iscoroutine(init_response):                                                                 â”‚
           â”‚ â±  477 â”‚   â”‚   â”‚   â”‚   response = await init_response                                                                       â”‚
           â”‚    478 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚    479 â”‚   â”‚   â”‚   â”‚   response = init_response  # type: ignore                                                             â”‚
           â”‚    480                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:566 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   563 â”‚   â”‚   â”‚   )                                                                                                         â”‚
           â”‚   564 â”‚   â”‚   â”‚   return model_response                                                                                     â”‚
           â”‚   565 â”‚   except Exception as e:                                                                                            â”‚
           â”‚ â± 566 â”‚   â”‚   raise e  # don't use verbose_logger.exception, if exception is raised                                         â”‚
           â”‚   567                                                                                                                       â”‚
           â”‚   568                                                                                                                       â”‚
           â”‚   569 async def ollama_aembeddings(                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:507 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   504 â”‚   try:                                                                                                              â”‚
           â”‚   505 â”‚   â”‚   timeout = aiohttp.ClientTimeout(total=litellm.request_timeout)  # 10 minutes                                  â”‚
           â”‚   506 â”‚   â”‚   async with aiohttp.ClientSession(timeout=timeout) as session:                                                 â”‚
           â”‚ â± 507 â”‚   â”‚   â”‚   resp = await session.post(url, json=data)                                                                 â”‚
           â”‚   508 â”‚   â”‚   â”‚                                                                                                             â”‚
           â”‚   509 â”‚   â”‚   â”‚   if resp.status != 200:                                                                                    â”‚
           â”‚   510 â”‚   â”‚   â”‚   â”‚   text = await resp.text()                                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py:696 in _request                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚    693 â”‚   â”‚   â”‚   â”‚   â”‚                                                                                                    â”‚
           â”‚    694 â”‚   â”‚   â”‚   â”‚   â”‚   # connection timeout                                                                             â”‚
           â”‚    695 â”‚   â”‚   â”‚   â”‚   â”‚   try:                                                                                             â”‚
           â”‚ â±  696 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   conn = await self._connector.connect(                                                        â”‚
           â”‚    697 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   req, traces=traces, timeout=real_timeout                                                 â”‚
           â”‚    698 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚    699 â”‚   â”‚   â”‚   â”‚   â”‚   except asyncio.TimeoutError as exc:                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:544 in connect                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚    541 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    542 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    543 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_start()                                                   â”‚
           â”‚ â±  544 â”‚   â”‚   â”‚   â”‚   proto = await self._create_connection(req, traces, timeout)                                          â”‚
           â”‚    545 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    546 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    547 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_end()                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1050 in _create_connection           â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1047 â”‚   â”‚   if req.proxy:                                                                                                â”‚
           â”‚   1048 â”‚   â”‚   â”‚   _, proto = await self._create_proxy_connection(req, traces, timeout)                                     â”‚
           â”‚   1049 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚ â± 1050 â”‚   â”‚   â”‚   _, proto = await self._create_direct_connection(req, traces, timeout)                                    â”‚
           â”‚   1051 â”‚   â”‚                                                                                                                â”‚
           â”‚   1052 â”‚   â”‚   return proto                                                                                                 â”‚
           â”‚   1053                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1394 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1391 â”‚   â”‚   â”‚   return transp, proto                                                                                     â”‚
           â”‚   1392 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   1393 â”‚   â”‚   â”‚   assert last_exc is not None                                                                              â”‚
           â”‚ â± 1394 â”‚   â”‚   â”‚   raise last_exc                                                                                           â”‚
           â”‚   1395 â”‚                                                                                                                    â”‚
           â”‚   1396 â”‚   async def _create_proxy_connection(                                                                              â”‚
           â”‚   1397 â”‚   â”‚   self, req: ClientRequest, traces: List["Trace"], timeout: "ClientTimeout"                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1363 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1360 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   1361 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1362 â”‚   â”‚   â”‚   try:                                                                                                     â”‚
           â”‚ â± 1363 â”‚   â”‚   â”‚   â”‚   transp, proto = await self._wrap_create_connection(                                                  â”‚
           â”‚   1364 â”‚   â”‚   â”‚   â”‚   â”‚   self._factory,                                                                                   â”‚
           â”‚   1365 â”‚   â”‚   â”‚   â”‚   â”‚   timeout=timeout,                                                                                 â”‚
           â”‚   1366 â”‚   â”‚   â”‚   â”‚   â”‚   ssl=sslcontext,                                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1124 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1121 â”‚   â”‚   except OSError as exc:                                                                                       â”‚
           â”‚   1122 â”‚   â”‚   â”‚   if exc.errno is None and isinstance(exc, asyncio.TimeoutError):                                          â”‚
           â”‚   1123 â”‚   â”‚   â”‚   â”‚   raise                                                                                                â”‚
           â”‚ â± 1124 â”‚   â”‚   â”‚   raise client_error(req.connection_key, exc) from exc                                                     â”‚
           â”‚   1125 â”‚                                                                                                                    â”‚
           â”‚   1126 â”‚   async def _wrap_existing_connection(                                                                             â”‚
           â”‚   1127 â”‚   â”‚   self,                                                                                                        â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno 111] Connect call failed 
           ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                                                    
                                                                                                                                          
           During handling of the above exception, another exception occurred:                                                            
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:276 in _run_with_timeout_failure                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   273 ) -> tuple[PQASession, AgentStatus]:                                                                                  â”‚
           â”‚   274 â”‚   try:                                                                                                              â”‚
           â”‚   275 â”‚   â”‚   async with asyncio.timeout(query.settings.agent.timeout):                                                     â”‚
           â”‚ â± 276 â”‚   â”‚   â”‚   status = await rollout()                                                                                  â”‚
           â”‚   277 â”‚   except TimeoutError:                                                                                              â”‚
           â”‚   278 â”‚   â”‚   logger.warning(                                                                                               â”‚
           â”‚   279 â”‚   â”‚   â”‚   f"Agent timeout after {query.settings.agent.timeout}-sec, just answering."                                â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:410 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   407 â”‚   â”‚   â”‚   â”‚   )                                                                                                     â”‚
           â”‚   408 â”‚   â”‚   â”‚   â”‚   return AgentStatus.TRUNCATED                                                                          â”‚
           â”‚   409 â”‚   â”‚   â”‚   agent_state.messages += obs                                                                               â”‚
           â”‚ â± 410 â”‚   â”‚   â”‚   for attempt in Retrying(                                                                                  â”‚
           â”‚   411 â”‚   â”‚   â”‚   â”‚   stop=stop_after_attempt(5),                                                                           â”‚
           â”‚   412 â”‚   â”‚   â”‚   â”‚   retry=retry_if_exception_type(MalformedMessageError),                                                 â”‚
           â”‚   413 â”‚   â”‚   â”‚   â”‚   before_sleep=before_sleep_log(logger, logging.WARNING),                                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:443 in __iter__                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   440 â”‚   â”‚                                                                                                                 â”‚
           â”‚   441 â”‚   â”‚   retry_state = RetryCallState(self, fn=None, args=(), kwargs={})                                               â”‚
           â”‚   442 â”‚   â”‚   while True:                                                                                                   â”‚
           â”‚ â± 443 â”‚   â”‚   â”‚   do = self.iter(retry_state=retry_state)                                                                   â”‚
           â”‚   444 â”‚   â”‚   â”‚   if isinstance(do, DoAttempt):                                                                             â”‚
           â”‚   445 â”‚   â”‚   â”‚   â”‚   yield AttemptManager(retry_state=retry_state)                                                         â”‚
           â”‚   446 â”‚   â”‚   â”‚   elif isinstance(do, DoSleep):                                                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:376 in iter                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   373 â”‚   â”‚   self._begin_iter(retry_state)                                                                                 â”‚
           â”‚   374 â”‚   â”‚   result = None                                                                                                 â”‚
           â”‚   375 â”‚   â”‚   for action in self.iter_state.actions:                                                                        â”‚
           â”‚ â± 376 â”‚   â”‚   â”‚   result = action(retry_state)                                                                              â”‚
           â”‚   377 â”‚   â”‚   return result                                                                                                 â”‚
           â”‚   378 â”‚                                                                                                                     â”‚
           â”‚   379 â”‚   def _begin_iter(self, retry_state: "RetryCallState") -> None:  # noqa                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:398 in <lambda>                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   395 â”‚                                                                                                                     â”‚
           â”‚   396 â”‚   def _post_retry_check_actions(self, retry_state: "RetryCallState") -> None:                                       â”‚
           â”‚   397 â”‚   â”‚   if not (self.iter_state.is_explicit_retry or self.iter_state.retry_run_result):                               â”‚
           â”‚ â± 398 â”‚   â”‚   â”‚   self._add_action_func(lambda rs: rs.outcome.result())                                                     â”‚
           â”‚   399 â”‚   â”‚   â”‚   return                                                                                                    â”‚
           â”‚   400 â”‚   â”‚                                                                                                                 â”‚
           â”‚   401 â”‚   â”‚   if self.after is not None:                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:449 in result                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚   446 â”‚   â”‚   â”‚   â”‚   if self._state in [CANCELLED, CANCELLED_AND_NOTIFIED]:                                                â”‚
           â”‚   447 â”‚   â”‚   â”‚   â”‚   â”‚   raise CancelledError()                                                                            â”‚
           â”‚   448 â”‚   â”‚   â”‚   â”‚   elif self._state == FINISHED:                                                                         â”‚
           â”‚ â± 449 â”‚   â”‚   â”‚   â”‚   â”‚   return self.__get_result()                                                                        â”‚
           â”‚   450 â”‚   â”‚   â”‚   â”‚                                                                                                         â”‚
           â”‚   451 â”‚   â”‚   â”‚   â”‚   self._condition.wait(timeout)                                                                         â”‚
           â”‚   452                                                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:401 in __get_result                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   398 â”‚   def __get_result(self):                                                                                           â”‚
           â”‚   399 â”‚   â”‚   if self._exception:                                                                                           â”‚
           â”‚   400 â”‚   â”‚   â”‚   try:                                                                                                      â”‚
           â”‚ â± 401 â”‚   â”‚   â”‚   â”‚   raise self._exception                                                                                 â”‚
           â”‚   402 â”‚   â”‚   â”‚   finally:                                                                                                  â”‚
           â”‚   403 â”‚   â”‚   â”‚   â”‚   # Break a reference cycle with the exception in self._exception                                       â”‚
           â”‚   404 â”‚   â”‚   â”‚   â”‚   self = None                                                                                           â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:417 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   414 â”‚   â”‚   â”‚   â”‚   reraise=True,                                                                                         â”‚
           â”‚   415 â”‚   â”‚   â”‚   ):                                                                                                        â”‚
           â”‚   416 â”‚   â”‚   â”‚   â”‚   with attempt:  # Retrying if ToolSelector fails to select a tool                                      â”‚
           â”‚ â± 417 â”‚   â”‚   â”‚   â”‚   â”‚   action = await agent(agent_state.messages, tools)                                                 â”‚
           â”‚   418 â”‚   â”‚   â”‚   agent_state.messages = [*agent_state.messages, action]                                                    â”‚
           â”‚   419 â”‚   â”‚   â”‚   if on_agent_action_callback:                                                                              â”‚
           â”‚   420 â”‚   â”‚   â”‚   â”‚   await on_agent_action_callback(action, agent_state)                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aviary/tools/utils.py:182 in __call__                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   179 â”‚   â”‚   â”‚   self._ledger.messages.extend(messages)                                                                    â”‚
           â”‚   180 â”‚   â”‚   â”‚   messages = self._ledger.messages                                                                          â”‚
           â”‚   181 â”‚   â”‚                                                                                                                 â”‚
           â”‚ â± 182 â”‚   â”‚   model_response = await self._bound_acompletion(                                                               â”‚
           â”‚   183 â”‚   â”‚   â”‚   messages=MessagesAdapter.dump_python(                                                                     â”‚
           â”‚   184 â”‚   â”‚   â”‚   â”‚   messages, exclude_none=True, by_alias=True                                                            â”‚
           â”‚   185 â”‚   â”‚   â”‚   ),                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:817 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    814 â”‚   â”‚   â”‚   â”‚   â”‚   original_exception=e,                                                                            â”‚
           â”‚    815 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    816 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚ â±  817 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    818 â”‚                                                                                                                    â”‚
           â”‚    819 â”‚   async def _acompletion(                                                                                          â”‚
           â”‚    820 â”‚   â”‚   self, model: str, messages: List[Dict[str, str]], **kwargs                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:793 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    790 â”‚   â”‚   â”‚   if request_priority is not None and isinstance(request_priority, int):                                   â”‚
           â”‚    791 â”‚   â”‚   â”‚   â”‚   response = await self.schedule_acompletion(**kwargs)                                                 â”‚
           â”‚    792 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â±  793 â”‚   â”‚   â”‚   â”‚   response = await self.async_function_with_fallbacks(**kwargs)                                        â”‚
           â”‚    794 â”‚   â”‚   â”‚   end_time = time.time()                                                                                   â”‚
           â”‚    795 â”‚   â”‚   â”‚   _duration = end_time - start_time                                                                        â”‚
           â”‚    796 â”‚   â”‚   â”‚   asyncio.create_task(                                                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2795 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2792 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚   2793 â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                                â”‚
           â”‚   2794 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2795 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2796 â”‚                                                                                                                    â”‚
           â”‚   2797 â”‚   def _handle_mock_testing_fallbacks(                                                                              â”‚
           â”‚   2798 â”‚   â”‚   self,                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2631 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2628 â”‚   â”‚   â”‚   â”‚   content_policy_fallbacks=content_policy_fallbacks,                                                   â”‚
           â”‚   2629 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2630 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2631 â”‚   â”‚   â”‚   response = await self.async_function_with_retries(*args, **kwargs)                                       â”‚
           â”‚   2632 â”‚   â”‚   â”‚   verbose_router_logger.debug(f"Async Response: {response}")                                               â”‚
           â”‚   2633 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2634 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2967 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2964 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "max_retries", num_retries)                                              â”‚
           â”‚   2965 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "num_retries", current_attempt)                                          â”‚
           â”‚   2966 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2967 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2968 â”‚                                                                                                                    â”‚
           â”‚   2969 â”‚   async def make_call(self, original_function: Any, *args, **kwargs):                                              â”‚
           â”‚   2970 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2879 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2876 â”‚   â”‚   â”‚   â”‚   model_group=model_group, kwargs=kwargs                                                               â”‚
           â”‚   2877 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2878 â”‚   â”‚   â”‚   # if the function call is successful, no exception will be raised and we'll                              â”‚
           â”‚        break out of the loop                                                                                                â”‚
           â”‚ â± 2879 â”‚   â”‚   â”‚   response = await self.make_call(original_function, *args, **kwargs)                                      â”‚
           â”‚   2880 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   2881 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2882 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2976 in make_call                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2973 â”‚   â”‚   model_group = kwargs.get("model")                                                                            â”‚
           â”‚   2974 â”‚   â”‚   response = original_function(*args, **kwargs)                                                                â”‚
           â”‚   2975 â”‚   â”‚   if inspect.iscoroutinefunction(response) or inspect.isawaitable(response):                                   â”‚
           â”‚ â± 2976 â”‚   â”‚   â”‚   response = await response                                                                                â”‚
           â”‚   2977 â”‚   â”‚   ## PROCESS RESPONSE HEADERS                                                                                  â”‚
           â”‚   2978 â”‚   â”‚   await self.set_response_headers(response=response, model_group=model_group)                                  â”‚
           â”‚   2979                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:947 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    944 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚    945 â”‚   â”‚   â”‚   if model_name is not None:                                                                               â”‚
           â”‚    946 â”‚   â”‚   â”‚   â”‚   self.fail_calls[model_name] += 1                                                                     â”‚
           â”‚ â±  947 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    948 â”‚                                                                                                                    â”‚
           â”‚    949 â”‚   def _update_kwargs_before_fallbacks(self, model: str, kwargs: dict) -> None:                                     â”‚
           â”‚    950 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:915 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    912 â”‚   â”‚   â”‚   â”‚   â”‚   parent_otel_span=parent_otel_span,                                                               â”‚
           â”‚    913 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    914 â”‚   â”‚   â”‚   â”‚                                                                                                        â”‚
           â”‚ â±  915 â”‚   â”‚   â”‚   â”‚   response = await _response                                                                           â”‚
           â”‚    916 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚    917 â”‚   â”‚   â”‚   ## CHECK CONTENT FILTER ERROR ##                                                                         â”‚
           â”‚    918 â”‚   â”‚   â”‚   if isinstance(response, ModelResponse):                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1175 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1172 â”‚   â”‚   â”‚   â”‚   â”‚   else:                                                                                            â”‚
           â”‚   1173 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   kwargs["model"] = context_window_fallback_dict[model]                                        â”‚
           â”‚   1174 â”‚   â”‚   â”‚   â”‚   â”‚   return await original_function(*args, **kwargs)                                                  â”‚
           â”‚ â± 1175 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   1176 â”‚                                                                                                                    â”‚
           â”‚   1177 â”‚   is_coroutine = inspect.iscoroutinefunction(original_function)                                                    â”‚
           â”‚   1178                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1031 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1028 â”‚   â”‚   â”‚   â”‚   return _caching_handler_response.final_embedding_cached_response                                     â”‚
           â”‚   1029 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1030 â”‚   â”‚   â”‚   # MODEL CALL                                                                                             â”‚
           â”‚ â± 1031 â”‚   â”‚   â”‚   result = await original_function(*args, **kwargs)                                                        â”‚
           â”‚   1032 â”‚   â”‚   â”‚   end_time = datetime.datetime.now()                                                                       â”‚
           â”‚   1033 â”‚   â”‚   â”‚   if "stream" in kwargs and kwargs["stream"] is True:                                                      â”‚
           â”‚   1034 â”‚   â”‚   â”‚   â”‚   if (                                                                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:499 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    496 â”‚   â”‚   return response                                                                                              â”‚
           â”‚    497 â”‚   except Exception as e:                                                                                           â”‚
           â”‚    498 â”‚   â”‚   custom_llm_provider = custom_llm_provider or "openai"                                                        â”‚
           â”‚ â±  499 â”‚   â”‚   raise exception_type(                                                                                        â”‚
           â”‚    500 â”‚   â”‚   â”‚   model=model,                                                                                             â”‚
           â”‚    501 â”‚   â”‚   â”‚   custom_llm_provider=custom_llm_provider,                                                                 â”‚
           â”‚    502 â”‚   â”‚   â”‚   original_exception=e,                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:212 â”‚
           â”‚ 5 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2122 â”‚   â”‚   # don't let an error with mapping interrupt the user from receiving an error                                 â”‚
           â”‚        from the llm api calls                                                                                               â”‚
           â”‚   2123 â”‚   â”‚   if exception_mapping_worked:                                                                                 â”‚
           â”‚   2124 â”‚   â”‚   â”‚   setattr(e, "litellm_response_headers", litellm_response_headers)                                         â”‚
           â”‚ â± 2125 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   2126 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   2127 â”‚   â”‚   â”‚   for error_type in litellm.LITELLM_EXCEPTION_TYPES:                                                       â”‚
           â”‚   2128 â”‚   â”‚   â”‚   â”‚   if isinstance(e, error_type):                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:210 â”‚
           â”‚ 1 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2098 â”‚   â”‚   â”‚   â”‚   â”‚   request=original_exception.request,                                                              â”‚
           â”‚   2099 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚   2100 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â± 2101 â”‚   â”‚   â”‚   â”‚   raise APIConnectionError(                                                                            â”‚
           â”‚   2102 â”‚   â”‚   â”‚   â”‚   â”‚   message="{}\n{}".format(                                                                         â”‚
           â”‚   2103 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   str(original_exception), traceback.format_exc()                                              â”‚
           â”‚   2104 â”‚   â”‚   â”‚   â”‚   â”‚   ),                                                                                               â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           APIConnectionError: litellm.APIConnectionError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1109, in                 
           _wrap_create_connection                                                                                                        
               sock = await aiohappyeyeballs.start_connection(                                                                            
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                            
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py", line 123, in              
           start_connection                                                                                                               
               raise OSError(first_errno, msg)                                                                                            
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py", line 477, in acompletion           
               response = await init_response                                                                                             
                          ^^^^^^^^^^^^^^^^^^^                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 566, in                
           ollama_acompletion                                                                                                             
               raise e  # don't use verbose_logger.exception, if exception is raised                                                      
               ^^^^^^^                                                                                                                    
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 507, in                
           ollama_acompletion                                                                                                             
               resp = await session.post(url, json=data)                                                                                  
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                  
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py", line 696, in _request            
               conn = await self._connector.connect(                                                                                      
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 544, in connect          
               proto = await self._create_connection(req, traces, timeout)                                                                
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1050, in                 
           _create_connection                                                                                                             
               _, proto = await self._create_direct_connection(req, traces, timeout)                                                      
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1394, in                 
           _create_direct_connection                                                                                                      
               raise last_exc                                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1363, in                 
           _create_direct_connection                                                                                                      
               transp, proto = await self._wrap_create_connection(                                                                        
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                        
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1124, in                 
           _wrap_create_connection                                                                                                        
               raise client_error(req.connection_key, exc) from exc                                                                       
           aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
                                                                                                                                          
           Received Model Group=ollama/llama3.2                                                                                           
           Available Model Group Fallbacks=None LiteLLM Retried: 2 times, LiteLLM Max Retries: 3                                          
[00:57:42] Answer:                                                                                                                        


 ANSWERING QUESTION: sciqag_question_70.json
 ----------------------------- 



[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.

[00:58:02] Trajectory failed.                                                                                                             
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1109 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1106 â”‚   â”‚   â”‚   async with ceil_timeout(                                                                                 â”‚
           â”‚   1107 â”‚   â”‚   â”‚   â”‚   timeout.sock_connect, ceil_threshold=timeout.ceil_threshold                                          â”‚
           â”‚   1108 â”‚   â”‚   â”‚   ):                                                                                                       â”‚
           â”‚ â± 1109 â”‚   â”‚   â”‚   â”‚   sock = await aiohappyeyeballs.start_connection(                                                      â”‚
           â”‚   1110 â”‚   â”‚   â”‚   â”‚   â”‚   addr_infos=addr_infos,                                                                           â”‚
           â”‚   1111 â”‚   â”‚   â”‚   â”‚   â”‚   local_addr_infos=self._local_addr_infos,                                                         â”‚
           â”‚   1112 â”‚   â”‚   â”‚   â”‚   â”‚   happy_eyeballs_delay=self._happy_eyeballs_delay,                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py:123 in start_connection          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   120 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, OSError) and exc.errno == first_errno                                         â”‚
           â”‚   121 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   for exc in all_exceptions                                                                     â”‚
           â”‚   122 â”‚   â”‚   â”‚   â”‚   â”‚   ):                                                                                                â”‚
           â”‚ â± 123 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   raise OSError(first_errno, msg)                                                               â”‚
           â”‚   124 â”‚   â”‚   â”‚   â”‚   elif isinstance(first_exception, RuntimeError) and all(                                               â”‚
           â”‚   125 â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, RuntimeError) for exc in all_exceptions                                           â”‚
           â”‚   126 â”‚   â”‚   â”‚   â”‚   ):                                                                                                    â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:477 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    474 â”‚   â”‚   â”‚   â”‚   â”‚   response = ModelResponse(**init_response)                                                        â”‚
           â”‚    475 â”‚   â”‚   â”‚   â”‚   response = init_response                                                                             â”‚
           â”‚    476 â”‚   â”‚   â”‚   elif asyncio.iscoroutine(init_response):                                                                 â”‚
           â”‚ â±  477 â”‚   â”‚   â”‚   â”‚   response = await init_response                                                                       â”‚
           â”‚    478 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚    479 â”‚   â”‚   â”‚   â”‚   response = init_response  # type: ignore                                                             â”‚
           â”‚    480                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:566 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   563 â”‚   â”‚   â”‚   )                                                                                                         â”‚
           â”‚   564 â”‚   â”‚   â”‚   return model_response                                                                                     â”‚
           â”‚   565 â”‚   except Exception as e:                                                                                            â”‚
           â”‚ â± 566 â”‚   â”‚   raise e  # don't use verbose_logger.exception, if exception is raised                                         â”‚
           â”‚   567                                                                                                                       â”‚
           â”‚   568                                                                                                                       â”‚
           â”‚   569 async def ollama_aembeddings(                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:507 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   504 â”‚   try:                                                                                                              â”‚
           â”‚   505 â”‚   â”‚   timeout = aiohttp.ClientTimeout(total=litellm.request_timeout)  # 10 minutes                                  â”‚
           â”‚   506 â”‚   â”‚   async with aiohttp.ClientSession(timeout=timeout) as session:                                                 â”‚
           â”‚ â± 507 â”‚   â”‚   â”‚   resp = await session.post(url, json=data)                                                                 â”‚
           â”‚   508 â”‚   â”‚   â”‚                                                                                                             â”‚
           â”‚   509 â”‚   â”‚   â”‚   if resp.status != 200:                                                                                    â”‚
           â”‚   510 â”‚   â”‚   â”‚   â”‚   text = await resp.text()                                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py:696 in _request                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚    693 â”‚   â”‚   â”‚   â”‚   â”‚                                                                                                    â”‚
           â”‚    694 â”‚   â”‚   â”‚   â”‚   â”‚   # connection timeout                                                                             â”‚
           â”‚    695 â”‚   â”‚   â”‚   â”‚   â”‚   try:                                                                                             â”‚
           â”‚ â±  696 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   conn = await self._connector.connect(                                                        â”‚
           â”‚    697 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   req, traces=traces, timeout=real_timeout                                                 â”‚
           â”‚    698 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚    699 â”‚   â”‚   â”‚   â”‚   â”‚   except asyncio.TimeoutError as exc:                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:544 in connect                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚    541 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    542 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    543 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_start()                                                   â”‚
           â”‚ â±  544 â”‚   â”‚   â”‚   â”‚   proto = await self._create_connection(req, traces, timeout)                                          â”‚
           â”‚    545 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    546 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    547 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_end()                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1050 in _create_connection           â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1047 â”‚   â”‚   if req.proxy:                                                                                                â”‚
           â”‚   1048 â”‚   â”‚   â”‚   _, proto = await self._create_proxy_connection(req, traces, timeout)                                     â”‚
           â”‚   1049 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚ â± 1050 â”‚   â”‚   â”‚   _, proto = await self._create_direct_connection(req, traces, timeout)                                    â”‚
           â”‚   1051 â”‚   â”‚                                                                                                                â”‚
           â”‚   1052 â”‚   â”‚   return proto                                                                                                 â”‚
           â”‚   1053                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1394 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1391 â”‚   â”‚   â”‚   return transp, proto                                                                                     â”‚
           â”‚   1392 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   1393 â”‚   â”‚   â”‚   assert last_exc is not None                                                                              â”‚
           â”‚ â± 1394 â”‚   â”‚   â”‚   raise last_exc                                                                                           â”‚
           â”‚   1395 â”‚                                                                                                                    â”‚
           â”‚   1396 â”‚   async def _create_proxy_connection(                                                                              â”‚
           â”‚   1397 â”‚   â”‚   self, req: ClientRequest, traces: List["Trace"], timeout: "ClientTimeout"                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1363 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1360 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   1361 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1362 â”‚   â”‚   â”‚   try:                                                                                                     â”‚
           â”‚ â± 1363 â”‚   â”‚   â”‚   â”‚   transp, proto = await self._wrap_create_connection(                                                  â”‚
           â”‚   1364 â”‚   â”‚   â”‚   â”‚   â”‚   self._factory,                                                                                   â”‚
           â”‚   1365 â”‚   â”‚   â”‚   â”‚   â”‚   timeout=timeout,                                                                                 â”‚
           â”‚   1366 â”‚   â”‚   â”‚   â”‚   â”‚   ssl=sslcontext,                                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1124 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1121 â”‚   â”‚   except OSError as exc:                                                                                       â”‚
           â”‚   1122 â”‚   â”‚   â”‚   if exc.errno is None and isinstance(exc, asyncio.TimeoutError):                                          â”‚
           â”‚   1123 â”‚   â”‚   â”‚   â”‚   raise                                                                                                â”‚
           â”‚ â± 1124 â”‚   â”‚   â”‚   raise client_error(req.connection_key, exc) from exc                                                     â”‚
           â”‚   1125 â”‚                                                                                                                    â”‚
           â”‚   1126 â”‚   async def _wrap_existing_connection(                                                                             â”‚
           â”‚   1127 â”‚   â”‚   self,                                                                                                        â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno 111] Connect call failed 
           ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                                                    
                                                                                                                                          
           During handling of the above exception, another exception occurred:                                                            
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:276 in _run_with_timeout_failure                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   273 ) -> tuple[PQASession, AgentStatus]:                                                                                  â”‚
           â”‚   274 â”‚   try:                                                                                                              â”‚
           â”‚   275 â”‚   â”‚   async with asyncio.timeout(query.settings.agent.timeout):                                                     â”‚
           â”‚ â± 276 â”‚   â”‚   â”‚   status = await rollout()                                                                                  â”‚
           â”‚   277 â”‚   except TimeoutError:                                                                                              â”‚
           â”‚   278 â”‚   â”‚   logger.warning(                                                                                               â”‚
           â”‚   279 â”‚   â”‚   â”‚   f"Agent timeout after {query.settings.agent.timeout}-sec, just answering."                                â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:410 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   407 â”‚   â”‚   â”‚   â”‚   )                                                                                                     â”‚
           â”‚   408 â”‚   â”‚   â”‚   â”‚   return AgentStatus.TRUNCATED                                                                          â”‚
           â”‚   409 â”‚   â”‚   â”‚   agent_state.messages += obs                                                                               â”‚
           â”‚ â± 410 â”‚   â”‚   â”‚   for attempt in Retrying(                                                                                  â”‚
           â”‚   411 â”‚   â”‚   â”‚   â”‚   stop=stop_after_attempt(5),                                                                           â”‚
           â”‚   412 â”‚   â”‚   â”‚   â”‚   retry=retry_if_exception_type(MalformedMessageError),                                                 â”‚
           â”‚   413 â”‚   â”‚   â”‚   â”‚   before_sleep=before_sleep_log(logger, logging.WARNING),                                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:443 in __iter__                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   440 â”‚   â”‚                                                                                                                 â”‚
           â”‚   441 â”‚   â”‚   retry_state = RetryCallState(self, fn=None, args=(), kwargs={})                                               â”‚
           â”‚   442 â”‚   â”‚   while True:                                                                                                   â”‚
           â”‚ â± 443 â”‚   â”‚   â”‚   do = self.iter(retry_state=retry_state)                                                                   â”‚
           â”‚   444 â”‚   â”‚   â”‚   if isinstance(do, DoAttempt):                                                                             â”‚
           â”‚   445 â”‚   â”‚   â”‚   â”‚   yield AttemptManager(retry_state=retry_state)                                                         â”‚
           â”‚   446 â”‚   â”‚   â”‚   elif isinstance(do, DoSleep):                                                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:376 in iter                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   373 â”‚   â”‚   self._begin_iter(retry_state)                                                                                 â”‚
           â”‚   374 â”‚   â”‚   result = None                                                                                                 â”‚
           â”‚   375 â”‚   â”‚   for action in self.iter_state.actions:                                                                        â”‚
           â”‚ â± 376 â”‚   â”‚   â”‚   result = action(retry_state)                                                                              â”‚
           â”‚   377 â”‚   â”‚   return result                                                                                                 â”‚
           â”‚   378 â”‚                                                                                                                     â”‚
           â”‚   379 â”‚   def _begin_iter(self, retry_state: "RetryCallState") -> None:  # noqa                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:398 in <lambda>                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   395 â”‚                                                                                                                     â”‚
           â”‚   396 â”‚   def _post_retry_check_actions(self, retry_state: "RetryCallState") -> None:                                       â”‚
           â”‚   397 â”‚   â”‚   if not (self.iter_state.is_explicit_retry or self.iter_state.retry_run_result):                               â”‚
           â”‚ â± 398 â”‚   â”‚   â”‚   self._add_action_func(lambda rs: rs.outcome.result())                                                     â”‚
           â”‚   399 â”‚   â”‚   â”‚   return                                                                                                    â”‚
           â”‚   400 â”‚   â”‚                                                                                                                 â”‚
           â”‚   401 â”‚   â”‚   if self.after is not None:                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:449 in result                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚   446 â”‚   â”‚   â”‚   â”‚   if self._state in [CANCELLED, CANCELLED_AND_NOTIFIED]:                                                â”‚
           â”‚   447 â”‚   â”‚   â”‚   â”‚   â”‚   raise CancelledError()                                                                            â”‚
           â”‚   448 â”‚   â”‚   â”‚   â”‚   elif self._state == FINISHED:                                                                         â”‚
           â”‚ â± 449 â”‚   â”‚   â”‚   â”‚   â”‚   return self.__get_result()                                                                        â”‚
           â”‚   450 â”‚   â”‚   â”‚   â”‚                                                                                                         â”‚
           â”‚   451 â”‚   â”‚   â”‚   â”‚   self._condition.wait(timeout)                                                                         â”‚
           â”‚   452                                                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:401 in __get_result                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   398 â”‚   def __get_result(self):                                                                                           â”‚
           â”‚   399 â”‚   â”‚   if self._exception:                                                                                           â”‚
           â”‚   400 â”‚   â”‚   â”‚   try:                                                                                                      â”‚
           â”‚ â± 401 â”‚   â”‚   â”‚   â”‚   raise self._exception                                                                                 â”‚
           â”‚   402 â”‚   â”‚   â”‚   finally:                                                                                                  â”‚
           â”‚   403 â”‚   â”‚   â”‚   â”‚   # Break a reference cycle with the exception in self._exception                                       â”‚
           â”‚   404 â”‚   â”‚   â”‚   â”‚   self = None                                                                                           â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:417 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   414 â”‚   â”‚   â”‚   â”‚   reraise=True,                                                                                         â”‚
           â”‚   415 â”‚   â”‚   â”‚   ):                                                                                                        â”‚
           â”‚   416 â”‚   â”‚   â”‚   â”‚   with attempt:  # Retrying if ToolSelector fails to select a tool                                      â”‚
           â”‚ â± 417 â”‚   â”‚   â”‚   â”‚   â”‚   action = await agent(agent_state.messages, tools)                                                 â”‚
           â”‚   418 â”‚   â”‚   â”‚   agent_state.messages = [*agent_state.messages, action]                                                    â”‚
           â”‚   419 â”‚   â”‚   â”‚   if on_agent_action_callback:                                                                              â”‚
           â”‚   420 â”‚   â”‚   â”‚   â”‚   await on_agent_action_callback(action, agent_state)                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aviary/tools/utils.py:182 in __call__                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   179 â”‚   â”‚   â”‚   self._ledger.messages.extend(messages)                                                                    â”‚
           â”‚   180 â”‚   â”‚   â”‚   messages = self._ledger.messages                                                                          â”‚
           â”‚   181 â”‚   â”‚                                                                                                                 â”‚
           â”‚ â± 182 â”‚   â”‚   model_response = await self._bound_acompletion(                                                               â”‚
           â”‚   183 â”‚   â”‚   â”‚   messages=MessagesAdapter.dump_python(                                                                     â”‚
           â”‚   184 â”‚   â”‚   â”‚   â”‚   messages, exclude_none=True, by_alias=True                                                            â”‚
           â”‚   185 â”‚   â”‚   â”‚   ),                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:817 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    814 â”‚   â”‚   â”‚   â”‚   â”‚   original_exception=e,                                                                            â”‚
           â”‚    815 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    816 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚ â±  817 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    818 â”‚                                                                                                                    â”‚
           â”‚    819 â”‚   async def _acompletion(                                                                                          â”‚
           â”‚    820 â”‚   â”‚   self, model: str, messages: List[Dict[str, str]], **kwargs                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:793 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    790 â”‚   â”‚   â”‚   if request_priority is not None and isinstance(request_priority, int):                                   â”‚
           â”‚    791 â”‚   â”‚   â”‚   â”‚   response = await self.schedule_acompletion(**kwargs)                                                 â”‚
           â”‚    792 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â±  793 â”‚   â”‚   â”‚   â”‚   response = await self.async_function_with_fallbacks(**kwargs)                                        â”‚
           â”‚    794 â”‚   â”‚   â”‚   end_time = time.time()                                                                                   â”‚
           â”‚    795 â”‚   â”‚   â”‚   _duration = end_time - start_time                                                                        â”‚
           â”‚    796 â”‚   â”‚   â”‚   asyncio.create_task(                                                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2795 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2792 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚   2793 â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                                â”‚
           â”‚   2794 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2795 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2796 â”‚                                                                                                                    â”‚
           â”‚   2797 â”‚   def _handle_mock_testing_fallbacks(                                                                              â”‚
           â”‚   2798 â”‚   â”‚   self,                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2631 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2628 â”‚   â”‚   â”‚   â”‚   content_policy_fallbacks=content_policy_fallbacks,                                                   â”‚
           â”‚   2629 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2630 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2631 â”‚   â”‚   â”‚   response = await self.async_function_with_retries(*args, **kwargs)                                       â”‚
           â”‚   2632 â”‚   â”‚   â”‚   verbose_router_logger.debug(f"Async Response: {response}")                                               â”‚
           â”‚   2633 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2634 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2967 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2964 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "max_retries", num_retries)                                              â”‚
           â”‚   2965 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "num_retries", current_attempt)                                          â”‚
           â”‚   2966 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2967 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2968 â”‚                                                                                                                    â”‚
           â”‚   2969 â”‚   async def make_call(self, original_function: Any, *args, **kwargs):                                              â”‚
           â”‚   2970 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2879 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2876 â”‚   â”‚   â”‚   â”‚   model_group=model_group, kwargs=kwargs                                                               â”‚
           â”‚   2877 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2878 â”‚   â”‚   â”‚   # if the function call is successful, no exception will be raised and we'll                              â”‚
           â”‚        break out of the loop                                                                                                â”‚
           â”‚ â± 2879 â”‚   â”‚   â”‚   response = await self.make_call(original_function, *args, **kwargs)                                      â”‚
           â”‚   2880 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   2881 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2882 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2976 in make_call                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2973 â”‚   â”‚   model_group = kwargs.get("model")                                                                            â”‚
           â”‚   2974 â”‚   â”‚   response = original_function(*args, **kwargs)                                                                â”‚
           â”‚   2975 â”‚   â”‚   if inspect.iscoroutinefunction(response) or inspect.isawaitable(response):                                   â”‚
           â”‚ â± 2976 â”‚   â”‚   â”‚   response = await response                                                                                â”‚
           â”‚   2977 â”‚   â”‚   ## PROCESS RESPONSE HEADERS                                                                                  â”‚
           â”‚   2978 â”‚   â”‚   await self.set_response_headers(response=response, model_group=model_group)                                  â”‚
           â”‚   2979                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:947 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    944 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚    945 â”‚   â”‚   â”‚   if model_name is not None:                                                                               â”‚
           â”‚    946 â”‚   â”‚   â”‚   â”‚   self.fail_calls[model_name] += 1                                                                     â”‚
           â”‚ â±  947 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    948 â”‚                                                                                                                    â”‚
           â”‚    949 â”‚   def _update_kwargs_before_fallbacks(self, model: str, kwargs: dict) -> None:                                     â”‚
           â”‚    950 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:915 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    912 â”‚   â”‚   â”‚   â”‚   â”‚   parent_otel_span=parent_otel_span,                                                               â”‚
           â”‚    913 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    914 â”‚   â”‚   â”‚   â”‚                                                                                                        â”‚
           â”‚ â±  915 â”‚   â”‚   â”‚   â”‚   response = await _response                                                                           â”‚
           â”‚    916 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚    917 â”‚   â”‚   â”‚   ## CHECK CONTENT FILTER ERROR ##                                                                         â”‚
           â”‚    918 â”‚   â”‚   â”‚   if isinstance(response, ModelResponse):                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1175 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1172 â”‚   â”‚   â”‚   â”‚   â”‚   else:                                                                                            â”‚
           â”‚   1173 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   kwargs["model"] = context_window_fallback_dict[model]                                        â”‚
           â”‚   1174 â”‚   â”‚   â”‚   â”‚   â”‚   return await original_function(*args, **kwargs)                                                  â”‚
           â”‚ â± 1175 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   1176 â”‚                                                                                                                    â”‚
           â”‚   1177 â”‚   is_coroutine = inspect.iscoroutinefunction(original_function)                                                    â”‚
           â”‚   1178                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1031 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1028 â”‚   â”‚   â”‚   â”‚   return _caching_handler_response.final_embedding_cached_response                                     â”‚
           â”‚   1029 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1030 â”‚   â”‚   â”‚   # MODEL CALL                                                                                             â”‚
           â”‚ â± 1031 â”‚   â”‚   â”‚   result = await original_function(*args, **kwargs)                                                        â”‚
           â”‚   1032 â”‚   â”‚   â”‚   end_time = datetime.datetime.now()                                                                       â”‚
           â”‚   1033 â”‚   â”‚   â”‚   if "stream" in kwargs and kwargs["stream"] is True:                                                      â”‚
           â”‚   1034 â”‚   â”‚   â”‚   â”‚   if (                                                                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:499 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    496 â”‚   â”‚   return response                                                                                              â”‚
           â”‚    497 â”‚   except Exception as e:                                                                                           â”‚
           â”‚    498 â”‚   â”‚   custom_llm_provider = custom_llm_provider or "openai"                                                        â”‚
           â”‚ â±  499 â”‚   â”‚   raise exception_type(                                                                                        â”‚
           â”‚    500 â”‚   â”‚   â”‚   model=model,                                                                                             â”‚
           â”‚    501 â”‚   â”‚   â”‚   custom_llm_provider=custom_llm_provider,                                                                 â”‚
           â”‚    502 â”‚   â”‚   â”‚   original_exception=e,                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:212 â”‚
           â”‚ 5 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2122 â”‚   â”‚   # don't let an error with mapping interrupt the user from receiving an error                                 â”‚
           â”‚        from the llm api calls                                                                                               â”‚
           â”‚   2123 â”‚   â”‚   if exception_mapping_worked:                                                                                 â”‚
           â”‚   2124 â”‚   â”‚   â”‚   setattr(e, "litellm_response_headers", litellm_response_headers)                                         â”‚
           â”‚ â± 2125 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   2126 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   2127 â”‚   â”‚   â”‚   for error_type in litellm.LITELLM_EXCEPTION_TYPES:                                                       â”‚
           â”‚   2128 â”‚   â”‚   â”‚   â”‚   if isinstance(e, error_type):                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:210 â”‚
           â”‚ 1 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2098 â”‚   â”‚   â”‚   â”‚   â”‚   request=original_exception.request,                                                              â”‚
           â”‚   2099 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚   2100 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â± 2101 â”‚   â”‚   â”‚   â”‚   raise APIConnectionError(                                                                            â”‚
           â”‚   2102 â”‚   â”‚   â”‚   â”‚   â”‚   message="{}\n{}".format(                                                                         â”‚
           â”‚   2103 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   str(original_exception), traceback.format_exc()                                              â”‚
           â”‚   2104 â”‚   â”‚   â”‚   â”‚   â”‚   ),                                                                                               â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           APIConnectionError: litellm.APIConnectionError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1109, in                 
           _wrap_create_connection                                                                                                        
               sock = await aiohappyeyeballs.start_connection(                                                                            
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                            
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py", line 123, in              
           start_connection                                                                                                               
               raise OSError(first_errno, msg)                                                                                            
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py", line 477, in acompletion           
               response = await init_response                                                                                             
                          ^^^^^^^^^^^^^^^^^^^                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 566, in                
           ollama_acompletion                                                                                                             
               raise e  # don't use verbose_logger.exception, if exception is raised                                                      
               ^^^^^^^                                                                                                                    
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 507, in                
           ollama_acompletion                                                                                                             
               resp = await session.post(url, json=data)                                                                                  
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                  
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py", line 696, in _request            
               conn = await self._connector.connect(                                                                                      
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 544, in connect          
               proto = await self._create_connection(req, traces, timeout)                                                                
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1050, in                 
           _create_connection                                                                                                             
               _, proto = await self._create_direct_connection(req, traces, timeout)                                                      
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1394, in                 
           _create_direct_connection                                                                                                      
               raise last_exc                                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1363, in                 
           _create_direct_connection                                                                                                      
               transp, proto = await self._wrap_create_connection(                                                                        
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                        
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1124, in                 
           _wrap_create_connection                                                                                                        
               raise client_error(req.connection_key, exc) from exc                                                                       
           aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
                                                                                                                                          
           Received Model Group=ollama/llama3.2                                                                                           
           Available Model Group Fallbacks=None LiteLLM Retried: 2 times, LiteLLM Max Retries: 3                                          
[00:58:04] Answer:                                                                                                                        


 ANSWERING QUESTION: sciqag_question_71.json
 ----------------------------- 



[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.

[00:58:25] Trajectory failed.                                                                                                             
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1109 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1106 â”‚   â”‚   â”‚   async with ceil_timeout(                                                                                 â”‚
           â”‚   1107 â”‚   â”‚   â”‚   â”‚   timeout.sock_connect, ceil_threshold=timeout.ceil_threshold                                          â”‚
           â”‚   1108 â”‚   â”‚   â”‚   ):                                                                                                       â”‚
           â”‚ â± 1109 â”‚   â”‚   â”‚   â”‚   sock = await aiohappyeyeballs.start_connection(                                                      â”‚
           â”‚   1110 â”‚   â”‚   â”‚   â”‚   â”‚   addr_infos=addr_infos,                                                                           â”‚
           â”‚   1111 â”‚   â”‚   â”‚   â”‚   â”‚   local_addr_infos=self._local_addr_infos,                                                         â”‚
           â”‚   1112 â”‚   â”‚   â”‚   â”‚   â”‚   happy_eyeballs_delay=self._happy_eyeballs_delay,                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py:123 in start_connection          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   120 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, OSError) and exc.errno == first_errno                                         â”‚
           â”‚   121 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   for exc in all_exceptions                                                                     â”‚
           â”‚   122 â”‚   â”‚   â”‚   â”‚   â”‚   ):                                                                                                â”‚
           â”‚ â± 123 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   raise OSError(first_errno, msg)                                                               â”‚
           â”‚   124 â”‚   â”‚   â”‚   â”‚   elif isinstance(first_exception, RuntimeError) and all(                                               â”‚
           â”‚   125 â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, RuntimeError) for exc in all_exceptions                                           â”‚
           â”‚   126 â”‚   â”‚   â”‚   â”‚   ):                                                                                                    â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:477 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    474 â”‚   â”‚   â”‚   â”‚   â”‚   response = ModelResponse(**init_response)                                                        â”‚
           â”‚    475 â”‚   â”‚   â”‚   â”‚   response = init_response                                                                             â”‚
           â”‚    476 â”‚   â”‚   â”‚   elif asyncio.iscoroutine(init_response):                                                                 â”‚
           â”‚ â±  477 â”‚   â”‚   â”‚   â”‚   response = await init_response                                                                       â”‚
           â”‚    478 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚    479 â”‚   â”‚   â”‚   â”‚   response = init_response  # type: ignore                                                             â”‚
           â”‚    480                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:566 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   563 â”‚   â”‚   â”‚   )                                                                                                         â”‚
           â”‚   564 â”‚   â”‚   â”‚   return model_response                                                                                     â”‚
           â”‚   565 â”‚   except Exception as e:                                                                                            â”‚
           â”‚ â± 566 â”‚   â”‚   raise e  # don't use verbose_logger.exception, if exception is raised                                         â”‚
           â”‚   567                                                                                                                       â”‚
           â”‚   568                                                                                                                       â”‚
           â”‚   569 async def ollama_aembeddings(                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:507 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   504 â”‚   try:                                                                                                              â”‚
           â”‚   505 â”‚   â”‚   timeout = aiohttp.ClientTimeout(total=litellm.request_timeout)  # 10 minutes                                  â”‚
           â”‚   506 â”‚   â”‚   async with aiohttp.ClientSession(timeout=timeout) as session:                                                 â”‚
           â”‚ â± 507 â”‚   â”‚   â”‚   resp = await session.post(url, json=data)                                                                 â”‚
           â”‚   508 â”‚   â”‚   â”‚                                                                                                             â”‚
           â”‚   509 â”‚   â”‚   â”‚   if resp.status != 200:                                                                                    â”‚
           â”‚   510 â”‚   â”‚   â”‚   â”‚   text = await resp.text()                                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py:696 in _request                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚    693 â”‚   â”‚   â”‚   â”‚   â”‚                                                                                                    â”‚
           â”‚    694 â”‚   â”‚   â”‚   â”‚   â”‚   # connection timeout                                                                             â”‚
           â”‚    695 â”‚   â”‚   â”‚   â”‚   â”‚   try:                                                                                             â”‚
           â”‚ â±  696 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   conn = await self._connector.connect(                                                        â”‚
           â”‚    697 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   req, traces=traces, timeout=real_timeout                                                 â”‚
           â”‚    698 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚    699 â”‚   â”‚   â”‚   â”‚   â”‚   except asyncio.TimeoutError as exc:                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:544 in connect                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚    541 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    542 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    543 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_start()                                                   â”‚
           â”‚ â±  544 â”‚   â”‚   â”‚   â”‚   proto = await self._create_connection(req, traces, timeout)                                          â”‚
           â”‚    545 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    546 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    547 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_end()                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1050 in _create_connection           â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1047 â”‚   â”‚   if req.proxy:                                                                                                â”‚
           â”‚   1048 â”‚   â”‚   â”‚   _, proto = await self._create_proxy_connection(req, traces, timeout)                                     â”‚
           â”‚   1049 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚ â± 1050 â”‚   â”‚   â”‚   _, proto = await self._create_direct_connection(req, traces, timeout)                                    â”‚
           â”‚   1051 â”‚   â”‚                                                                                                                â”‚
           â”‚   1052 â”‚   â”‚   return proto                                                                                                 â”‚
           â”‚   1053                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1394 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1391 â”‚   â”‚   â”‚   return transp, proto                                                                                     â”‚
           â”‚   1392 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   1393 â”‚   â”‚   â”‚   assert last_exc is not None                                                                              â”‚
           â”‚ â± 1394 â”‚   â”‚   â”‚   raise last_exc                                                                                           â”‚
           â”‚   1395 â”‚                                                                                                                    â”‚
           â”‚   1396 â”‚   async def _create_proxy_connection(                                                                              â”‚
           â”‚   1397 â”‚   â”‚   self, req: ClientRequest, traces: List["Trace"], timeout: "ClientTimeout"                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1363 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1360 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   1361 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1362 â”‚   â”‚   â”‚   try:                                                                                                     â”‚
           â”‚ â± 1363 â”‚   â”‚   â”‚   â”‚   transp, proto = await self._wrap_create_connection(                                                  â”‚
           â”‚   1364 â”‚   â”‚   â”‚   â”‚   â”‚   self._factory,                                                                                   â”‚
           â”‚   1365 â”‚   â”‚   â”‚   â”‚   â”‚   timeout=timeout,                                                                                 â”‚
           â”‚   1366 â”‚   â”‚   â”‚   â”‚   â”‚   ssl=sslcontext,                                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1124 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1121 â”‚   â”‚   except OSError as exc:                                                                                       â”‚
           â”‚   1122 â”‚   â”‚   â”‚   if exc.errno is None and isinstance(exc, asyncio.TimeoutError):                                          â”‚
           â”‚   1123 â”‚   â”‚   â”‚   â”‚   raise                                                                                                â”‚
           â”‚ â± 1124 â”‚   â”‚   â”‚   raise client_error(req.connection_key, exc) from exc                                                     â”‚
           â”‚   1125 â”‚                                                                                                                    â”‚
           â”‚   1126 â”‚   async def _wrap_existing_connection(                                                                             â”‚
           â”‚   1127 â”‚   â”‚   self,                                                                                                        â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno 111] Connect call failed 
           ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                                                    
                                                                                                                                          
           During handling of the above exception, another exception occurred:                                                            
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:276 in _run_with_timeout_failure                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   273 ) -> tuple[PQASession, AgentStatus]:                                                                                  â”‚
           â”‚   274 â”‚   try:                                                                                                              â”‚
           â”‚   275 â”‚   â”‚   async with asyncio.timeout(query.settings.agent.timeout):                                                     â”‚
           â”‚ â± 276 â”‚   â”‚   â”‚   status = await rollout()                                                                                  â”‚
           â”‚   277 â”‚   except TimeoutError:                                                                                              â”‚
           â”‚   278 â”‚   â”‚   logger.warning(                                                                                               â”‚
           â”‚   279 â”‚   â”‚   â”‚   f"Agent timeout after {query.settings.agent.timeout}-sec, just answering."                                â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:410 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   407 â”‚   â”‚   â”‚   â”‚   )                                                                                                     â”‚
           â”‚   408 â”‚   â”‚   â”‚   â”‚   return AgentStatus.TRUNCATED                                                                          â”‚
           â”‚   409 â”‚   â”‚   â”‚   agent_state.messages += obs                                                                               â”‚
           â”‚ â± 410 â”‚   â”‚   â”‚   for attempt in Retrying(                                                                                  â”‚
           â”‚   411 â”‚   â”‚   â”‚   â”‚   stop=stop_after_attempt(5),                                                                           â”‚
           â”‚   412 â”‚   â”‚   â”‚   â”‚   retry=retry_if_exception_type(MalformedMessageError),                                                 â”‚
           â”‚   413 â”‚   â”‚   â”‚   â”‚   before_sleep=before_sleep_log(logger, logging.WARNING),                                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:443 in __iter__                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   440 â”‚   â”‚                                                                                                                 â”‚
           â”‚   441 â”‚   â”‚   retry_state = RetryCallState(self, fn=None, args=(), kwargs={})                                               â”‚
           â”‚   442 â”‚   â”‚   while True:                                                                                                   â”‚
           â”‚ â± 443 â”‚   â”‚   â”‚   do = self.iter(retry_state=retry_state)                                                                   â”‚
           â”‚   444 â”‚   â”‚   â”‚   if isinstance(do, DoAttempt):                                                                             â”‚
           â”‚   445 â”‚   â”‚   â”‚   â”‚   yield AttemptManager(retry_state=retry_state)                                                         â”‚
           â”‚   446 â”‚   â”‚   â”‚   elif isinstance(do, DoSleep):                                                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:376 in iter                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   373 â”‚   â”‚   self._begin_iter(retry_state)                                                                                 â”‚
           â”‚   374 â”‚   â”‚   result = None                                                                                                 â”‚
           â”‚   375 â”‚   â”‚   for action in self.iter_state.actions:                                                                        â”‚
           â”‚ â± 376 â”‚   â”‚   â”‚   result = action(retry_state)                                                                              â”‚
           â”‚   377 â”‚   â”‚   return result                                                                                                 â”‚
           â”‚   378 â”‚                                                                                                                     â”‚
           â”‚   379 â”‚   def _begin_iter(self, retry_state: "RetryCallState") -> None:  # noqa                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:398 in <lambda>                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   395 â”‚                                                                                                                     â”‚
           â”‚   396 â”‚   def _post_retry_check_actions(self, retry_state: "RetryCallState") -> None:                                       â”‚
           â”‚   397 â”‚   â”‚   if not (self.iter_state.is_explicit_retry or self.iter_state.retry_run_result):                               â”‚
           â”‚ â± 398 â”‚   â”‚   â”‚   self._add_action_func(lambda rs: rs.outcome.result())                                                     â”‚
           â”‚   399 â”‚   â”‚   â”‚   return                                                                                                    â”‚
           â”‚   400 â”‚   â”‚                                                                                                                 â”‚
           â”‚   401 â”‚   â”‚   if self.after is not None:                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:449 in result                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚   446 â”‚   â”‚   â”‚   â”‚   if self._state in [CANCELLED, CANCELLED_AND_NOTIFIED]:                                                â”‚
           â”‚   447 â”‚   â”‚   â”‚   â”‚   â”‚   raise CancelledError()                                                                            â”‚
           â”‚   448 â”‚   â”‚   â”‚   â”‚   elif self._state == FINISHED:                                                                         â”‚
           â”‚ â± 449 â”‚   â”‚   â”‚   â”‚   â”‚   return self.__get_result()                                                                        â”‚
           â”‚   450 â”‚   â”‚   â”‚   â”‚                                                                                                         â”‚
           â”‚   451 â”‚   â”‚   â”‚   â”‚   self._condition.wait(timeout)                                                                         â”‚
           â”‚   452                                                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:401 in __get_result                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   398 â”‚   def __get_result(self):                                                                                           â”‚
           â”‚   399 â”‚   â”‚   if self._exception:                                                                                           â”‚
           â”‚   400 â”‚   â”‚   â”‚   try:                                                                                                      â”‚
           â”‚ â± 401 â”‚   â”‚   â”‚   â”‚   raise self._exception                                                                                 â”‚
           â”‚   402 â”‚   â”‚   â”‚   finally:                                                                                                  â”‚
           â”‚   403 â”‚   â”‚   â”‚   â”‚   # Break a reference cycle with the exception in self._exception                                       â”‚
           â”‚   404 â”‚   â”‚   â”‚   â”‚   self = None                                                                                           â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:417 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   414 â”‚   â”‚   â”‚   â”‚   reraise=True,                                                                                         â”‚
           â”‚   415 â”‚   â”‚   â”‚   ):                                                                                                        â”‚
           â”‚   416 â”‚   â”‚   â”‚   â”‚   with attempt:  # Retrying if ToolSelector fails to select a tool                                      â”‚
           â”‚ â± 417 â”‚   â”‚   â”‚   â”‚   â”‚   action = await agent(agent_state.messages, tools)                                                 â”‚
           â”‚   418 â”‚   â”‚   â”‚   agent_state.messages = [*agent_state.messages, action]                                                    â”‚
           â”‚   419 â”‚   â”‚   â”‚   if on_agent_action_callback:                                                                              â”‚
           â”‚   420 â”‚   â”‚   â”‚   â”‚   await on_agent_action_callback(action, agent_state)                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aviary/tools/utils.py:182 in __call__                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   179 â”‚   â”‚   â”‚   self._ledger.messages.extend(messages)                                                                    â”‚
           â”‚   180 â”‚   â”‚   â”‚   messages = self._ledger.messages                                                                          â”‚
           â”‚   181 â”‚   â”‚                                                                                                                 â”‚
           â”‚ â± 182 â”‚   â”‚   model_response = await self._bound_acompletion(                                                               â”‚
           â”‚   183 â”‚   â”‚   â”‚   messages=MessagesAdapter.dump_python(                                                                     â”‚
           â”‚   184 â”‚   â”‚   â”‚   â”‚   messages, exclude_none=True, by_alias=True                                                            â”‚
           â”‚   185 â”‚   â”‚   â”‚   ),                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:817 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    814 â”‚   â”‚   â”‚   â”‚   â”‚   original_exception=e,                                                                            â”‚
           â”‚    815 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    816 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚ â±  817 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    818 â”‚                                                                                                                    â”‚
           â”‚    819 â”‚   async def _acompletion(                                                                                          â”‚
           â”‚    820 â”‚   â”‚   self, model: str, messages: List[Dict[str, str]], **kwargs                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:793 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    790 â”‚   â”‚   â”‚   if request_priority is not None and isinstance(request_priority, int):                                   â”‚
           â”‚    791 â”‚   â”‚   â”‚   â”‚   response = await self.schedule_acompletion(**kwargs)                                                 â”‚
           â”‚    792 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â±  793 â”‚   â”‚   â”‚   â”‚   response = await self.async_function_with_fallbacks(**kwargs)                                        â”‚
           â”‚    794 â”‚   â”‚   â”‚   end_time = time.time()                                                                                   â”‚
           â”‚    795 â”‚   â”‚   â”‚   _duration = end_time - start_time                                                                        â”‚
           â”‚    796 â”‚   â”‚   â”‚   asyncio.create_task(                                                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2795 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2792 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚   2793 â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                                â”‚
           â”‚   2794 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2795 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2796 â”‚                                                                                                                    â”‚
           â”‚   2797 â”‚   def _handle_mock_testing_fallbacks(                                                                              â”‚
           â”‚   2798 â”‚   â”‚   self,                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2631 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2628 â”‚   â”‚   â”‚   â”‚   content_policy_fallbacks=content_policy_fallbacks,                                                   â”‚
           â”‚   2629 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2630 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2631 â”‚   â”‚   â”‚   response = await self.async_function_with_retries(*args, **kwargs)                                       â”‚
           â”‚   2632 â”‚   â”‚   â”‚   verbose_router_logger.debug(f"Async Response: {response}")                                               â”‚
           â”‚   2633 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2634 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2967 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2964 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "max_retries", num_retries)                                              â”‚
           â”‚   2965 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "num_retries", current_attempt)                                          â”‚
           â”‚   2966 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2967 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2968 â”‚                                                                                                                    â”‚
           â”‚   2969 â”‚   async def make_call(self, original_function: Any, *args, **kwargs):                                              â”‚
           â”‚   2970 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2879 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2876 â”‚   â”‚   â”‚   â”‚   model_group=model_group, kwargs=kwargs                                                               â”‚
           â”‚   2877 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2878 â”‚   â”‚   â”‚   # if the function call is successful, no exception will be raised and we'll                              â”‚
           â”‚        break out of the loop                                                                                                â”‚
           â”‚ â± 2879 â”‚   â”‚   â”‚   response = await self.make_call(original_function, *args, **kwargs)                                      â”‚
           â”‚   2880 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   2881 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2882 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2976 in make_call                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2973 â”‚   â”‚   model_group = kwargs.get("model")                                                                            â”‚
           â”‚   2974 â”‚   â”‚   response = original_function(*args, **kwargs)                                                                â”‚
           â”‚   2975 â”‚   â”‚   if inspect.iscoroutinefunction(response) or inspect.isawaitable(response):                                   â”‚
           â”‚ â± 2976 â”‚   â”‚   â”‚   response = await response                                                                                â”‚
           â”‚   2977 â”‚   â”‚   ## PROCESS RESPONSE HEADERS                                                                                  â”‚
           â”‚   2978 â”‚   â”‚   await self.set_response_headers(response=response, model_group=model_group)                                  â”‚
           â”‚   2979                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:947 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    944 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚    945 â”‚   â”‚   â”‚   if model_name is not None:                                                                               â”‚
           â”‚    946 â”‚   â”‚   â”‚   â”‚   self.fail_calls[model_name] += 1                                                                     â”‚
           â”‚ â±  947 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    948 â”‚                                                                                                                    â”‚
           â”‚    949 â”‚   def _update_kwargs_before_fallbacks(self, model: str, kwargs: dict) -> None:                                     â”‚
           â”‚    950 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:915 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    912 â”‚   â”‚   â”‚   â”‚   â”‚   parent_otel_span=parent_otel_span,                                                               â”‚
           â”‚    913 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    914 â”‚   â”‚   â”‚   â”‚                                                                                                        â”‚
           â”‚ â±  915 â”‚   â”‚   â”‚   â”‚   response = await _response                                                                           â”‚
           â”‚    916 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚    917 â”‚   â”‚   â”‚   ## CHECK CONTENT FILTER ERROR ##                                                                         â”‚
           â”‚    918 â”‚   â”‚   â”‚   if isinstance(response, ModelResponse):                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1175 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1172 â”‚   â”‚   â”‚   â”‚   â”‚   else:                                                                                            â”‚
           â”‚   1173 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   kwargs["model"] = context_window_fallback_dict[model]                                        â”‚
           â”‚   1174 â”‚   â”‚   â”‚   â”‚   â”‚   return await original_function(*args, **kwargs)                                                  â”‚
           â”‚ â± 1175 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   1176 â”‚                                                                                                                    â”‚
           â”‚   1177 â”‚   is_coroutine = inspect.iscoroutinefunction(original_function)                                                    â”‚
           â”‚   1178                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1031 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1028 â”‚   â”‚   â”‚   â”‚   return _caching_handler_response.final_embedding_cached_response                                     â”‚
           â”‚   1029 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1030 â”‚   â”‚   â”‚   # MODEL CALL                                                                                             â”‚
           â”‚ â± 1031 â”‚   â”‚   â”‚   result = await original_function(*args, **kwargs)                                                        â”‚
           â”‚   1032 â”‚   â”‚   â”‚   end_time = datetime.datetime.now()                                                                       â”‚
           â”‚   1033 â”‚   â”‚   â”‚   if "stream" in kwargs and kwargs["stream"] is True:                                                      â”‚
           â”‚   1034 â”‚   â”‚   â”‚   â”‚   if (                                                                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:499 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    496 â”‚   â”‚   return response                                                                                              â”‚
           â”‚    497 â”‚   except Exception as e:                                                                                           â”‚
           â”‚    498 â”‚   â”‚   custom_llm_provider = custom_llm_provider or "openai"                                                        â”‚
           â”‚ â±  499 â”‚   â”‚   raise exception_type(                                                                                        â”‚
           â”‚    500 â”‚   â”‚   â”‚   model=model,                                                                                             â”‚
           â”‚    501 â”‚   â”‚   â”‚   custom_llm_provider=custom_llm_provider,                                                                 â”‚
           â”‚    502 â”‚   â”‚   â”‚   original_exception=e,                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:212 â”‚
           â”‚ 5 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2122 â”‚   â”‚   # don't let an error with mapping interrupt the user from receiving an error                                 â”‚
           â”‚        from the llm api calls                                                                                               â”‚
           â”‚   2123 â”‚   â”‚   if exception_mapping_worked:                                                                                 â”‚
           â”‚   2124 â”‚   â”‚   â”‚   setattr(e, "litellm_response_headers", litellm_response_headers)                                         â”‚
           â”‚ â± 2125 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   2126 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   2127 â”‚   â”‚   â”‚   for error_type in litellm.LITELLM_EXCEPTION_TYPES:                                                       â”‚
           â”‚   2128 â”‚   â”‚   â”‚   â”‚   if isinstance(e, error_type):                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:210 â”‚
           â”‚ 1 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2098 â”‚   â”‚   â”‚   â”‚   â”‚   request=original_exception.request,                                                              â”‚
           â”‚   2099 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚   2100 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â± 2101 â”‚   â”‚   â”‚   â”‚   raise APIConnectionError(                                                                            â”‚
           â”‚   2102 â”‚   â”‚   â”‚   â”‚   â”‚   message="{}\n{}".format(                                                                         â”‚
           â”‚   2103 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   str(original_exception), traceback.format_exc()                                              â”‚
           â”‚   2104 â”‚   â”‚   â”‚   â”‚   â”‚   ),                                                                                               â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           APIConnectionError: litellm.APIConnectionError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1109, in                 
           _wrap_create_connection                                                                                                        
               sock = await aiohappyeyeballs.start_connection(                                                                            
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                            
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py", line 123, in              
           start_connection                                                                                                               
               raise OSError(first_errno, msg)                                                                                            
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py", line 477, in acompletion           
               response = await init_response                                                                                             
                          ^^^^^^^^^^^^^^^^^^^                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 566, in                
           ollama_acompletion                                                                                                             
               raise e  # don't use verbose_logger.exception, if exception is raised                                                      
               ^^^^^^^                                                                                                                    
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 507, in                
           ollama_acompletion                                                                                                             
               resp = await session.post(url, json=data)                                                                                  
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                  
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py", line 696, in _request            
               conn = await self._connector.connect(                                                                                      
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 544, in connect          
               proto = await self._create_connection(req, traces, timeout)                                                                
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1050, in                 
           _create_connection                                                                                                             
               _, proto = await self._create_direct_connection(req, traces, timeout)                                                      
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1394, in                 
           _create_direct_connection                                                                                                      
               raise last_exc                                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1363, in                 
           _create_direct_connection                                                                                                      
               transp, proto = await self._wrap_create_connection(                                                                        
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                        
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1124, in                 
           _wrap_create_connection                                                                                                        
               raise client_error(req.connection_key, exc) from exc                                                                       
           aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
                                                                                                                                          
           Received Model Group=ollama/llama3.2                                                                                           
           Available Model Group Fallbacks=None LiteLLM Retried: 2 times, LiteLLM Max Retries: 3                                          
[00:58:27] Answer:                                                                                                                        


 ANSWERING QUESTION: sciqag_question_72.json
 ----------------------------- 



[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.

[00:58:48] Trajectory failed.                                                                                                             
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1109 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1106 â”‚   â”‚   â”‚   async with ceil_timeout(                                                                                 â”‚
           â”‚   1107 â”‚   â”‚   â”‚   â”‚   timeout.sock_connect, ceil_threshold=timeout.ceil_threshold                                          â”‚
           â”‚   1108 â”‚   â”‚   â”‚   ):                                                                                                       â”‚
           â”‚ â± 1109 â”‚   â”‚   â”‚   â”‚   sock = await aiohappyeyeballs.start_connection(                                                      â”‚
           â”‚   1110 â”‚   â”‚   â”‚   â”‚   â”‚   addr_infos=addr_infos,                                                                           â”‚
           â”‚   1111 â”‚   â”‚   â”‚   â”‚   â”‚   local_addr_infos=self._local_addr_infos,                                                         â”‚
           â”‚   1112 â”‚   â”‚   â”‚   â”‚   â”‚   happy_eyeballs_delay=self._happy_eyeballs_delay,                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py:123 in start_connection          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   120 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, OSError) and exc.errno == first_errno                                         â”‚
           â”‚   121 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   for exc in all_exceptions                                                                     â”‚
           â”‚   122 â”‚   â”‚   â”‚   â”‚   â”‚   ):                                                                                                â”‚
           â”‚ â± 123 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   raise OSError(first_errno, msg)                                                               â”‚
           â”‚   124 â”‚   â”‚   â”‚   â”‚   elif isinstance(first_exception, RuntimeError) and all(                                               â”‚
           â”‚   125 â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, RuntimeError) for exc in all_exceptions                                           â”‚
           â”‚   126 â”‚   â”‚   â”‚   â”‚   ):                                                                                                    â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:477 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    474 â”‚   â”‚   â”‚   â”‚   â”‚   response = ModelResponse(**init_response)                                                        â”‚
           â”‚    475 â”‚   â”‚   â”‚   â”‚   response = init_response                                                                             â”‚
           â”‚    476 â”‚   â”‚   â”‚   elif asyncio.iscoroutine(init_response):                                                                 â”‚
           â”‚ â±  477 â”‚   â”‚   â”‚   â”‚   response = await init_response                                                                       â”‚
           â”‚    478 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚    479 â”‚   â”‚   â”‚   â”‚   response = init_response  # type: ignore                                                             â”‚
           â”‚    480                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:566 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   563 â”‚   â”‚   â”‚   )                                                                                                         â”‚
           â”‚   564 â”‚   â”‚   â”‚   return model_response                                                                                     â”‚
           â”‚   565 â”‚   except Exception as e:                                                                                            â”‚
           â”‚ â± 566 â”‚   â”‚   raise e  # don't use verbose_logger.exception, if exception is raised                                         â”‚
           â”‚   567                                                                                                                       â”‚
           â”‚   568                                                                                                                       â”‚
           â”‚   569 async def ollama_aembeddings(                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:507 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   504 â”‚   try:                                                                                                              â”‚
           â”‚   505 â”‚   â”‚   timeout = aiohttp.ClientTimeout(total=litellm.request_timeout)  # 10 minutes                                  â”‚
           â”‚   506 â”‚   â”‚   async with aiohttp.ClientSession(timeout=timeout) as session:                                                 â”‚
           â”‚ â± 507 â”‚   â”‚   â”‚   resp = await session.post(url, json=data)                                                                 â”‚
           â”‚   508 â”‚   â”‚   â”‚                                                                                                             â”‚
           â”‚   509 â”‚   â”‚   â”‚   if resp.status != 200:                                                                                    â”‚
           â”‚   510 â”‚   â”‚   â”‚   â”‚   text = await resp.text()                                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py:696 in _request                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚    693 â”‚   â”‚   â”‚   â”‚   â”‚                                                                                                    â”‚
           â”‚    694 â”‚   â”‚   â”‚   â”‚   â”‚   # connection timeout                                                                             â”‚
           â”‚    695 â”‚   â”‚   â”‚   â”‚   â”‚   try:                                                                                             â”‚
           â”‚ â±  696 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   conn = await self._connector.connect(                                                        â”‚
           â”‚    697 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   req, traces=traces, timeout=real_timeout                                                 â”‚
           â”‚    698 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚    699 â”‚   â”‚   â”‚   â”‚   â”‚   except asyncio.TimeoutError as exc:                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:544 in connect                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚    541 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    542 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    543 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_start()                                                   â”‚
           â”‚ â±  544 â”‚   â”‚   â”‚   â”‚   proto = await self._create_connection(req, traces, timeout)                                          â”‚
           â”‚    545 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    546 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    547 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_end()                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1050 in _create_connection           â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1047 â”‚   â”‚   if req.proxy:                                                                                                â”‚
           â”‚   1048 â”‚   â”‚   â”‚   _, proto = await self._create_proxy_connection(req, traces, timeout)                                     â”‚
           â”‚   1049 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚ â± 1050 â”‚   â”‚   â”‚   _, proto = await self._create_direct_connection(req, traces, timeout)                                    â”‚
           â”‚   1051 â”‚   â”‚                                                                                                                â”‚
           â”‚   1052 â”‚   â”‚   return proto                                                                                                 â”‚
           â”‚   1053                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1394 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1391 â”‚   â”‚   â”‚   return transp, proto                                                                                     â”‚
           â”‚   1392 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   1393 â”‚   â”‚   â”‚   assert last_exc is not None                                                                              â”‚
           â”‚ â± 1394 â”‚   â”‚   â”‚   raise last_exc                                                                                           â”‚
           â”‚   1395 â”‚                                                                                                                    â”‚
           â”‚   1396 â”‚   async def _create_proxy_connection(                                                                              â”‚
           â”‚   1397 â”‚   â”‚   self, req: ClientRequest, traces: List["Trace"], timeout: "ClientTimeout"                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1363 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1360 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   1361 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1362 â”‚   â”‚   â”‚   try:                                                                                                     â”‚
           â”‚ â± 1363 â”‚   â”‚   â”‚   â”‚   transp, proto = await self._wrap_create_connection(                                                  â”‚
           â”‚   1364 â”‚   â”‚   â”‚   â”‚   â”‚   self._factory,                                                                                   â”‚
           â”‚   1365 â”‚   â”‚   â”‚   â”‚   â”‚   timeout=timeout,                                                                                 â”‚
           â”‚   1366 â”‚   â”‚   â”‚   â”‚   â”‚   ssl=sslcontext,                                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1124 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1121 â”‚   â”‚   except OSError as exc:                                                                                       â”‚
           â”‚   1122 â”‚   â”‚   â”‚   if exc.errno is None and isinstance(exc, asyncio.TimeoutError):                                          â”‚
           â”‚   1123 â”‚   â”‚   â”‚   â”‚   raise                                                                                                â”‚
           â”‚ â± 1124 â”‚   â”‚   â”‚   raise client_error(req.connection_key, exc) from exc                                                     â”‚
           â”‚   1125 â”‚                                                                                                                    â”‚
           â”‚   1126 â”‚   async def _wrap_existing_connection(                                                                             â”‚
           â”‚   1127 â”‚   â”‚   self,                                                                                                        â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno 111] Connect call failed 
           ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                                                    
                                                                                                                                          
           During handling of the above exception, another exception occurred:                                                            
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:276 in _run_with_timeout_failure                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   273 ) -> tuple[PQASession, AgentStatus]:                                                                                  â”‚
           â”‚   274 â”‚   try:                                                                                                              â”‚
           â”‚   275 â”‚   â”‚   async with asyncio.timeout(query.settings.agent.timeout):                                                     â”‚
           â”‚ â± 276 â”‚   â”‚   â”‚   status = await rollout()                                                                                  â”‚
           â”‚   277 â”‚   except TimeoutError:                                                                                              â”‚
           â”‚   278 â”‚   â”‚   logger.warning(                                                                                               â”‚
           â”‚   279 â”‚   â”‚   â”‚   f"Agent timeout after {query.settings.agent.timeout}-sec, just answering."                                â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:410 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   407 â”‚   â”‚   â”‚   â”‚   )                                                                                                     â”‚
           â”‚   408 â”‚   â”‚   â”‚   â”‚   return AgentStatus.TRUNCATED                                                                          â”‚
           â”‚   409 â”‚   â”‚   â”‚   agent_state.messages += obs                                                                               â”‚
           â”‚ â± 410 â”‚   â”‚   â”‚   for attempt in Retrying(                                                                                  â”‚
           â”‚   411 â”‚   â”‚   â”‚   â”‚   stop=stop_after_attempt(5),                                                                           â”‚
           â”‚   412 â”‚   â”‚   â”‚   â”‚   retry=retry_if_exception_type(MalformedMessageError),                                                 â”‚
           â”‚   413 â”‚   â”‚   â”‚   â”‚   before_sleep=before_sleep_log(logger, logging.WARNING),                                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:443 in __iter__                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   440 â”‚   â”‚                                                                                                                 â”‚
           â”‚   441 â”‚   â”‚   retry_state = RetryCallState(self, fn=None, args=(), kwargs={})                                               â”‚
           â”‚   442 â”‚   â”‚   while True:                                                                                                   â”‚
           â”‚ â± 443 â”‚   â”‚   â”‚   do = self.iter(retry_state=retry_state)                                                                   â”‚
           â”‚   444 â”‚   â”‚   â”‚   if isinstance(do, DoAttempt):                                                                             â”‚
           â”‚   445 â”‚   â”‚   â”‚   â”‚   yield AttemptManager(retry_state=retry_state)                                                         â”‚
           â”‚   446 â”‚   â”‚   â”‚   elif isinstance(do, DoSleep):                                                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:376 in iter                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   373 â”‚   â”‚   self._begin_iter(retry_state)                                                                                 â”‚
           â”‚   374 â”‚   â”‚   result = None                                                                                                 â”‚
           â”‚   375 â”‚   â”‚   for action in self.iter_state.actions:                                                                        â”‚
           â”‚ â± 376 â”‚   â”‚   â”‚   result = action(retry_state)                                                                              â”‚
           â”‚   377 â”‚   â”‚   return result                                                                                                 â”‚
           â”‚   378 â”‚                                                                                                                     â”‚
           â”‚   379 â”‚   def _begin_iter(self, retry_state: "RetryCallState") -> None:  # noqa                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:398 in <lambda>                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   395 â”‚                                                                                                                     â”‚
           â”‚   396 â”‚   def _post_retry_check_actions(self, retry_state: "RetryCallState") -> None:                                       â”‚
           â”‚   397 â”‚   â”‚   if not (self.iter_state.is_explicit_retry or self.iter_state.retry_run_result):                               â”‚
           â”‚ â± 398 â”‚   â”‚   â”‚   self._add_action_func(lambda rs: rs.outcome.result())                                                     â”‚
           â”‚   399 â”‚   â”‚   â”‚   return                                                                                                    â”‚
           â”‚   400 â”‚   â”‚                                                                                                                 â”‚
           â”‚   401 â”‚   â”‚   if self.after is not None:                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:449 in result                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚   446 â”‚   â”‚   â”‚   â”‚   if self._state in [CANCELLED, CANCELLED_AND_NOTIFIED]:                                                â”‚
           â”‚   447 â”‚   â”‚   â”‚   â”‚   â”‚   raise CancelledError()                                                                            â”‚
           â”‚   448 â”‚   â”‚   â”‚   â”‚   elif self._state == FINISHED:                                                                         â”‚
           â”‚ â± 449 â”‚   â”‚   â”‚   â”‚   â”‚   return self.__get_result()                                                                        â”‚
           â”‚   450 â”‚   â”‚   â”‚   â”‚                                                                                                         â”‚
           â”‚   451 â”‚   â”‚   â”‚   â”‚   self._condition.wait(timeout)                                                                         â”‚
           â”‚   452                                                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:401 in __get_result                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   398 â”‚   def __get_result(self):                                                                                           â”‚
           â”‚   399 â”‚   â”‚   if self._exception:                                                                                           â”‚
           â”‚   400 â”‚   â”‚   â”‚   try:                                                                                                      â”‚
           â”‚ â± 401 â”‚   â”‚   â”‚   â”‚   raise self._exception                                                                                 â”‚
           â”‚   402 â”‚   â”‚   â”‚   finally:                                                                                                  â”‚
           â”‚   403 â”‚   â”‚   â”‚   â”‚   # Break a reference cycle with the exception in self._exception                                       â”‚
           â”‚   404 â”‚   â”‚   â”‚   â”‚   self = None                                                                                           â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:417 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   414 â”‚   â”‚   â”‚   â”‚   reraise=True,                                                                                         â”‚
           â”‚   415 â”‚   â”‚   â”‚   ):                                                                                                        â”‚
           â”‚   416 â”‚   â”‚   â”‚   â”‚   with attempt:  # Retrying if ToolSelector fails to select a tool                                      â”‚
           â”‚ â± 417 â”‚   â”‚   â”‚   â”‚   â”‚   action = await agent(agent_state.messages, tools)                                                 â”‚
           â”‚   418 â”‚   â”‚   â”‚   agent_state.messages = [*agent_state.messages, action]                                                    â”‚
           â”‚   419 â”‚   â”‚   â”‚   if on_agent_action_callback:                                                                              â”‚
           â”‚   420 â”‚   â”‚   â”‚   â”‚   await on_agent_action_callback(action, agent_state)                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aviary/tools/utils.py:182 in __call__                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   179 â”‚   â”‚   â”‚   self._ledger.messages.extend(messages)                                                                    â”‚
           â”‚   180 â”‚   â”‚   â”‚   messages = self._ledger.messages                                                                          â”‚
           â”‚   181 â”‚   â”‚                                                                                                                 â”‚
           â”‚ â± 182 â”‚   â”‚   model_response = await self._bound_acompletion(                                                               â”‚
           â”‚   183 â”‚   â”‚   â”‚   messages=MessagesAdapter.dump_python(                                                                     â”‚
           â”‚   184 â”‚   â”‚   â”‚   â”‚   messages, exclude_none=True, by_alias=True                                                            â”‚
           â”‚   185 â”‚   â”‚   â”‚   ),                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:817 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    814 â”‚   â”‚   â”‚   â”‚   â”‚   original_exception=e,                                                                            â”‚
           â”‚    815 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    816 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚ â±  817 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    818 â”‚                                                                                                                    â”‚
           â”‚    819 â”‚   async def _acompletion(                                                                                          â”‚
           â”‚    820 â”‚   â”‚   self, model: str, messages: List[Dict[str, str]], **kwargs                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:793 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    790 â”‚   â”‚   â”‚   if request_priority is not None and isinstance(request_priority, int):                                   â”‚
           â”‚    791 â”‚   â”‚   â”‚   â”‚   response = await self.schedule_acompletion(**kwargs)                                                 â”‚
           â”‚    792 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â±  793 â”‚   â”‚   â”‚   â”‚   response = await self.async_function_with_fallbacks(**kwargs)                                        â”‚
           â”‚    794 â”‚   â”‚   â”‚   end_time = time.time()                                                                                   â”‚
           â”‚    795 â”‚   â”‚   â”‚   _duration = end_time - start_time                                                                        â”‚
           â”‚    796 â”‚   â”‚   â”‚   asyncio.create_task(                                                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2795 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2792 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚   2793 â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                                â”‚
           â”‚   2794 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2795 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2796 â”‚                                                                                                                    â”‚
           â”‚   2797 â”‚   def _handle_mock_testing_fallbacks(                                                                              â”‚
           â”‚   2798 â”‚   â”‚   self,                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2631 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2628 â”‚   â”‚   â”‚   â”‚   content_policy_fallbacks=content_policy_fallbacks,                                                   â”‚
           â”‚   2629 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2630 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2631 â”‚   â”‚   â”‚   response = await self.async_function_with_retries(*args, **kwargs)                                       â”‚
           â”‚   2632 â”‚   â”‚   â”‚   verbose_router_logger.debug(f"Async Response: {response}")                                               â”‚
           â”‚   2633 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2634 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2967 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2964 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "max_retries", num_retries)                                              â”‚
           â”‚   2965 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "num_retries", current_attempt)                                          â”‚
           â”‚   2966 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2967 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2968 â”‚                                                                                                                    â”‚
           â”‚   2969 â”‚   async def make_call(self, original_function: Any, *args, **kwargs):                                              â”‚
           â”‚   2970 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2879 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2876 â”‚   â”‚   â”‚   â”‚   model_group=model_group, kwargs=kwargs                                                               â”‚
           â”‚   2877 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2878 â”‚   â”‚   â”‚   # if the function call is successful, no exception will be raised and we'll                              â”‚
           â”‚        break out of the loop                                                                                                â”‚
           â”‚ â± 2879 â”‚   â”‚   â”‚   response = await self.make_call(original_function, *args, **kwargs)                                      â”‚
           â”‚   2880 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   2881 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2882 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2976 in make_call                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2973 â”‚   â”‚   model_group = kwargs.get("model")                                                                            â”‚
           â”‚   2974 â”‚   â”‚   response = original_function(*args, **kwargs)                                                                â”‚
           â”‚   2975 â”‚   â”‚   if inspect.iscoroutinefunction(response) or inspect.isawaitable(response):                                   â”‚
           â”‚ â± 2976 â”‚   â”‚   â”‚   response = await response                                                                                â”‚
           â”‚   2977 â”‚   â”‚   ## PROCESS RESPONSE HEADERS                                                                                  â”‚
           â”‚   2978 â”‚   â”‚   await self.set_response_headers(response=response, model_group=model_group)                                  â”‚
           â”‚   2979                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:947 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    944 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚    945 â”‚   â”‚   â”‚   if model_name is not None:                                                                               â”‚
           â”‚    946 â”‚   â”‚   â”‚   â”‚   self.fail_calls[model_name] += 1                                                                     â”‚
           â”‚ â±  947 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    948 â”‚                                                                                                                    â”‚
           â”‚    949 â”‚   def _update_kwargs_before_fallbacks(self, model: str, kwargs: dict) -> None:                                     â”‚
           â”‚    950 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:915 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    912 â”‚   â”‚   â”‚   â”‚   â”‚   parent_otel_span=parent_otel_span,                                                               â”‚
           â”‚    913 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    914 â”‚   â”‚   â”‚   â”‚                                                                                                        â”‚
           â”‚ â±  915 â”‚   â”‚   â”‚   â”‚   response = await _response                                                                           â”‚
           â”‚    916 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚    917 â”‚   â”‚   â”‚   ## CHECK CONTENT FILTER ERROR ##                                                                         â”‚
           â”‚    918 â”‚   â”‚   â”‚   if isinstance(response, ModelResponse):                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1175 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1172 â”‚   â”‚   â”‚   â”‚   â”‚   else:                                                                                            â”‚
           â”‚   1173 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   kwargs["model"] = context_window_fallback_dict[model]                                        â”‚
           â”‚   1174 â”‚   â”‚   â”‚   â”‚   â”‚   return await original_function(*args, **kwargs)                                                  â”‚
           â”‚ â± 1175 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   1176 â”‚                                                                                                                    â”‚
           â”‚   1177 â”‚   is_coroutine = inspect.iscoroutinefunction(original_function)                                                    â”‚
           â”‚   1178                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1031 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1028 â”‚   â”‚   â”‚   â”‚   return _caching_handler_response.final_embedding_cached_response                                     â”‚
           â”‚   1029 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1030 â”‚   â”‚   â”‚   # MODEL CALL                                                                                             â”‚
           â”‚ â± 1031 â”‚   â”‚   â”‚   result = await original_function(*args, **kwargs)                                                        â”‚
           â”‚   1032 â”‚   â”‚   â”‚   end_time = datetime.datetime.now()                                                                       â”‚
           â”‚   1033 â”‚   â”‚   â”‚   if "stream" in kwargs and kwargs["stream"] is True:                                                      â”‚
           â”‚   1034 â”‚   â”‚   â”‚   â”‚   if (                                                                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:499 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    496 â”‚   â”‚   return response                                                                                              â”‚
           â”‚    497 â”‚   except Exception as e:                                                                                           â”‚
           â”‚    498 â”‚   â”‚   custom_llm_provider = custom_llm_provider or "openai"                                                        â”‚
           â”‚ â±  499 â”‚   â”‚   raise exception_type(                                                                                        â”‚
           â”‚    500 â”‚   â”‚   â”‚   model=model,                                                                                             â”‚
           â”‚    501 â”‚   â”‚   â”‚   custom_llm_provider=custom_llm_provider,                                                                 â”‚
           â”‚    502 â”‚   â”‚   â”‚   original_exception=e,                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:212 â”‚
           â”‚ 5 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2122 â”‚   â”‚   # don't let an error with mapping interrupt the user from receiving an error                                 â”‚
           â”‚        from the llm api calls                                                                                               â”‚
           â”‚   2123 â”‚   â”‚   if exception_mapping_worked:                                                                                 â”‚
           â”‚   2124 â”‚   â”‚   â”‚   setattr(e, "litellm_response_headers", litellm_response_headers)                                         â”‚
           â”‚ â± 2125 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   2126 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   2127 â”‚   â”‚   â”‚   for error_type in litellm.LITELLM_EXCEPTION_TYPES:                                                       â”‚
           â”‚   2128 â”‚   â”‚   â”‚   â”‚   if isinstance(e, error_type):                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:210 â”‚
           â”‚ 1 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2098 â”‚   â”‚   â”‚   â”‚   â”‚   request=original_exception.request,                                                              â”‚
           â”‚   2099 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚   2100 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â± 2101 â”‚   â”‚   â”‚   â”‚   raise APIConnectionError(                                                                            â”‚
           â”‚   2102 â”‚   â”‚   â”‚   â”‚   â”‚   message="{}\n{}".format(                                                                         â”‚
           â”‚   2103 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   str(original_exception), traceback.format_exc()                                              â”‚
           â”‚   2104 â”‚   â”‚   â”‚   â”‚   â”‚   ),                                                                                               â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           APIConnectionError: litellm.APIConnectionError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1109, in                 
           _wrap_create_connection                                                                                                        
               sock = await aiohappyeyeballs.start_connection(                                                                            
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                            
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py", line 123, in              
           start_connection                                                                                                               
               raise OSError(first_errno, msg)                                                                                            
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py", line 477, in acompletion           
               response = await init_response                                                                                             
                          ^^^^^^^^^^^^^^^^^^^                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 566, in                
           ollama_acompletion                                                                                                             
               raise e  # don't use verbose_logger.exception, if exception is raised                                                      
               ^^^^^^^                                                                                                                    
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 507, in                
           ollama_acompletion                                                                                                             
               resp = await session.post(url, json=data)                                                                                  
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                  
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py", line 696, in _request            
               conn = await self._connector.connect(                                                                                      
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 544, in connect          
               proto = await self._create_connection(req, traces, timeout)                                                                
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1050, in                 
           _create_connection                                                                                                             
               _, proto = await self._create_direct_connection(req, traces, timeout)                                                      
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1394, in                 
           _create_direct_connection                                                                                                      
               raise last_exc                                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1363, in                 
           _create_direct_connection                                                                                                      
               transp, proto = await self._wrap_create_connection(                                                                        
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                        
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1124, in                 
           _wrap_create_connection                                                                                                        
               raise client_error(req.connection_key, exc) from exc                                                                       
           aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
                                                                                                                                          
           Received Model Group=ollama/llama3.2                                                                                           
           Available Model Group Fallbacks=None LiteLLM Retried: 2 times, LiteLLM Max Retries: 3                                          
[00:58:50] Answer:                                                                                                                        


 ANSWERING QUESTION: sciqag_question_73.json
 ----------------------------- 



[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.

[00:59:10] Trajectory failed.                                                                                                             
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1109 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1106 â”‚   â”‚   â”‚   async with ceil_timeout(                                                                                 â”‚
           â”‚   1107 â”‚   â”‚   â”‚   â”‚   timeout.sock_connect, ceil_threshold=timeout.ceil_threshold                                          â”‚
           â”‚   1108 â”‚   â”‚   â”‚   ):                                                                                                       â”‚
           â”‚ â± 1109 â”‚   â”‚   â”‚   â”‚   sock = await aiohappyeyeballs.start_connection(                                                      â”‚
           â”‚   1110 â”‚   â”‚   â”‚   â”‚   â”‚   addr_infos=addr_infos,                                                                           â”‚
           â”‚   1111 â”‚   â”‚   â”‚   â”‚   â”‚   local_addr_infos=self._local_addr_infos,                                                         â”‚
           â”‚   1112 â”‚   â”‚   â”‚   â”‚   â”‚   happy_eyeballs_delay=self._happy_eyeballs_delay,                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py:123 in start_connection          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   120 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, OSError) and exc.errno == first_errno                                         â”‚
           â”‚   121 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   for exc in all_exceptions                                                                     â”‚
           â”‚   122 â”‚   â”‚   â”‚   â”‚   â”‚   ):                                                                                                â”‚
           â”‚ â± 123 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   raise OSError(first_errno, msg)                                                               â”‚
           â”‚   124 â”‚   â”‚   â”‚   â”‚   elif isinstance(first_exception, RuntimeError) and all(                                               â”‚
           â”‚   125 â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, RuntimeError) for exc in all_exceptions                                           â”‚
           â”‚   126 â”‚   â”‚   â”‚   â”‚   ):                                                                                                    â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:477 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    474 â”‚   â”‚   â”‚   â”‚   â”‚   response = ModelResponse(**init_response)                                                        â”‚
           â”‚    475 â”‚   â”‚   â”‚   â”‚   response = init_response                                                                             â”‚
           â”‚    476 â”‚   â”‚   â”‚   elif asyncio.iscoroutine(init_response):                                                                 â”‚
           â”‚ â±  477 â”‚   â”‚   â”‚   â”‚   response = await init_response                                                                       â”‚
           â”‚    478 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚    479 â”‚   â”‚   â”‚   â”‚   response = init_response  # type: ignore                                                             â”‚
           â”‚    480                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:566 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   563 â”‚   â”‚   â”‚   )                                                                                                         â”‚
           â”‚   564 â”‚   â”‚   â”‚   return model_response                                                                                     â”‚
           â”‚   565 â”‚   except Exception as e:                                                                                            â”‚
           â”‚ â± 566 â”‚   â”‚   raise e  # don't use verbose_logger.exception, if exception is raised                                         â”‚
           â”‚   567                                                                                                                       â”‚
           â”‚   568                                                                                                                       â”‚
           â”‚   569 async def ollama_aembeddings(                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:507 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   504 â”‚   try:                                                                                                              â”‚
           â”‚   505 â”‚   â”‚   timeout = aiohttp.ClientTimeout(total=litellm.request_timeout)  # 10 minutes                                  â”‚
           â”‚   506 â”‚   â”‚   async with aiohttp.ClientSession(timeout=timeout) as session:                                                 â”‚
           â”‚ â± 507 â”‚   â”‚   â”‚   resp = await session.post(url, json=data)                                                                 â”‚
           â”‚   508 â”‚   â”‚   â”‚                                                                                                             â”‚
           â”‚   509 â”‚   â”‚   â”‚   if resp.status != 200:                                                                                    â”‚
           â”‚   510 â”‚   â”‚   â”‚   â”‚   text = await resp.text()                                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py:696 in _request                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚    693 â”‚   â”‚   â”‚   â”‚   â”‚                                                                                                    â”‚
           â”‚    694 â”‚   â”‚   â”‚   â”‚   â”‚   # connection timeout                                                                             â”‚
           â”‚    695 â”‚   â”‚   â”‚   â”‚   â”‚   try:                                                                                             â”‚
           â”‚ â±  696 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   conn = await self._connector.connect(                                                        â”‚
           â”‚    697 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   req, traces=traces, timeout=real_timeout                                                 â”‚
           â”‚    698 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚    699 â”‚   â”‚   â”‚   â”‚   â”‚   except asyncio.TimeoutError as exc:                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:544 in connect                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚    541 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    542 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    543 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_start()                                                   â”‚
           â”‚ â±  544 â”‚   â”‚   â”‚   â”‚   proto = await self._create_connection(req, traces, timeout)                                          â”‚
           â”‚    545 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    546 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    547 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_end()                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1050 in _create_connection           â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1047 â”‚   â”‚   if req.proxy:                                                                                                â”‚
           â”‚   1048 â”‚   â”‚   â”‚   _, proto = await self._create_proxy_connection(req, traces, timeout)                                     â”‚
           â”‚   1049 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚ â± 1050 â”‚   â”‚   â”‚   _, proto = await self._create_direct_connection(req, traces, timeout)                                    â”‚
           â”‚   1051 â”‚   â”‚                                                                                                                â”‚
           â”‚   1052 â”‚   â”‚   return proto                                                                                                 â”‚
           â”‚   1053                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1394 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1391 â”‚   â”‚   â”‚   return transp, proto                                                                                     â”‚
           â”‚   1392 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   1393 â”‚   â”‚   â”‚   assert last_exc is not None                                                                              â”‚
           â”‚ â± 1394 â”‚   â”‚   â”‚   raise last_exc                                                                                           â”‚
           â”‚   1395 â”‚                                                                                                                    â”‚
           â”‚   1396 â”‚   async def _create_proxy_connection(                                                                              â”‚
           â”‚   1397 â”‚   â”‚   self, req: ClientRequest, traces: List["Trace"], timeout: "ClientTimeout"                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1363 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1360 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   1361 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1362 â”‚   â”‚   â”‚   try:                                                                                                     â”‚
           â”‚ â± 1363 â”‚   â”‚   â”‚   â”‚   transp, proto = await self._wrap_create_connection(                                                  â”‚
           â”‚   1364 â”‚   â”‚   â”‚   â”‚   â”‚   self._factory,                                                                                   â”‚
           â”‚   1365 â”‚   â”‚   â”‚   â”‚   â”‚   timeout=timeout,                                                                                 â”‚
           â”‚   1366 â”‚   â”‚   â”‚   â”‚   â”‚   ssl=sslcontext,                                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1124 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1121 â”‚   â”‚   except OSError as exc:                                                                                       â”‚
           â”‚   1122 â”‚   â”‚   â”‚   if exc.errno is None and isinstance(exc, asyncio.TimeoutError):                                          â”‚
           â”‚   1123 â”‚   â”‚   â”‚   â”‚   raise                                                                                                â”‚
           â”‚ â± 1124 â”‚   â”‚   â”‚   raise client_error(req.connection_key, exc) from exc                                                     â”‚
           â”‚   1125 â”‚                                                                                                                    â”‚
           â”‚   1126 â”‚   async def _wrap_existing_connection(                                                                             â”‚
           â”‚   1127 â”‚   â”‚   self,                                                                                                        â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno 111] Connect call failed 
           ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                                                    
                                                                                                                                          
           During handling of the above exception, another exception occurred:                                                            
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:276 in _run_with_timeout_failure                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   273 ) -> tuple[PQASession, AgentStatus]:                                                                                  â”‚
           â”‚   274 â”‚   try:                                                                                                              â”‚
           â”‚   275 â”‚   â”‚   async with asyncio.timeout(query.settings.agent.timeout):                                                     â”‚
           â”‚ â± 276 â”‚   â”‚   â”‚   status = await rollout()                                                                                  â”‚
           â”‚   277 â”‚   except TimeoutError:                                                                                              â”‚
           â”‚   278 â”‚   â”‚   logger.warning(                                                                                               â”‚
           â”‚   279 â”‚   â”‚   â”‚   f"Agent timeout after {query.settings.agent.timeout}-sec, just answering."                                â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:410 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   407 â”‚   â”‚   â”‚   â”‚   )                                                                                                     â”‚
           â”‚   408 â”‚   â”‚   â”‚   â”‚   return AgentStatus.TRUNCATED                                                                          â”‚
           â”‚   409 â”‚   â”‚   â”‚   agent_state.messages += obs                                                                               â”‚
           â”‚ â± 410 â”‚   â”‚   â”‚   for attempt in Retrying(                                                                                  â”‚
           â”‚   411 â”‚   â”‚   â”‚   â”‚   stop=stop_after_attempt(5),                                                                           â”‚
           â”‚   412 â”‚   â”‚   â”‚   â”‚   retry=retry_if_exception_type(MalformedMessageError),                                                 â”‚
           â”‚   413 â”‚   â”‚   â”‚   â”‚   before_sleep=before_sleep_log(logger, logging.WARNING),                                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:443 in __iter__                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   440 â”‚   â”‚                                                                                                                 â”‚
           â”‚   441 â”‚   â”‚   retry_state = RetryCallState(self, fn=None, args=(), kwargs={})                                               â”‚
           â”‚   442 â”‚   â”‚   while True:                                                                                                   â”‚
           â”‚ â± 443 â”‚   â”‚   â”‚   do = self.iter(retry_state=retry_state)                                                                   â”‚
           â”‚   444 â”‚   â”‚   â”‚   if isinstance(do, DoAttempt):                                                                             â”‚
           â”‚   445 â”‚   â”‚   â”‚   â”‚   yield AttemptManager(retry_state=retry_state)                                                         â”‚
           â”‚   446 â”‚   â”‚   â”‚   elif isinstance(do, DoSleep):                                                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:376 in iter                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   373 â”‚   â”‚   self._begin_iter(retry_state)                                                                                 â”‚
           â”‚   374 â”‚   â”‚   result = None                                                                                                 â”‚
           â”‚   375 â”‚   â”‚   for action in self.iter_state.actions:                                                                        â”‚
           â”‚ â± 376 â”‚   â”‚   â”‚   result = action(retry_state)                                                                              â”‚
           â”‚   377 â”‚   â”‚   return result                                                                                                 â”‚
           â”‚   378 â”‚                                                                                                                     â”‚
           â”‚   379 â”‚   def _begin_iter(self, retry_state: "RetryCallState") -> None:  # noqa                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:398 in <lambda>                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   395 â”‚                                                                                                                     â”‚
           â”‚   396 â”‚   def _post_retry_check_actions(self, retry_state: "RetryCallState") -> None:                                       â”‚
           â”‚   397 â”‚   â”‚   if not (self.iter_state.is_explicit_retry or self.iter_state.retry_run_result):                               â”‚
           â”‚ â± 398 â”‚   â”‚   â”‚   self._add_action_func(lambda rs: rs.outcome.result())                                                     â”‚
           â”‚   399 â”‚   â”‚   â”‚   return                                                                                                    â”‚
           â”‚   400 â”‚   â”‚                                                                                                                 â”‚
           â”‚   401 â”‚   â”‚   if self.after is not None:                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:449 in result                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚   446 â”‚   â”‚   â”‚   â”‚   if self._state in [CANCELLED, CANCELLED_AND_NOTIFIED]:                                                â”‚
           â”‚   447 â”‚   â”‚   â”‚   â”‚   â”‚   raise CancelledError()                                                                            â”‚
           â”‚   448 â”‚   â”‚   â”‚   â”‚   elif self._state == FINISHED:                                                                         â”‚
           â”‚ â± 449 â”‚   â”‚   â”‚   â”‚   â”‚   return self.__get_result()                                                                        â”‚
           â”‚   450 â”‚   â”‚   â”‚   â”‚                                                                                                         â”‚
           â”‚   451 â”‚   â”‚   â”‚   â”‚   self._condition.wait(timeout)                                                                         â”‚
           â”‚   452                                                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:401 in __get_result                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   398 â”‚   def __get_result(self):                                                                                           â”‚
           â”‚   399 â”‚   â”‚   if self._exception:                                                                                           â”‚
           â”‚   400 â”‚   â”‚   â”‚   try:                                                                                                      â”‚
           â”‚ â± 401 â”‚   â”‚   â”‚   â”‚   raise self._exception                                                                                 â”‚
           â”‚   402 â”‚   â”‚   â”‚   finally:                                                                                                  â”‚
           â”‚   403 â”‚   â”‚   â”‚   â”‚   # Break a reference cycle with the exception in self._exception                                       â”‚
           â”‚   404 â”‚   â”‚   â”‚   â”‚   self = None                                                                                           â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:417 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   414 â”‚   â”‚   â”‚   â”‚   reraise=True,                                                                                         â”‚
           â”‚   415 â”‚   â”‚   â”‚   ):                                                                                                        â”‚
           â”‚   416 â”‚   â”‚   â”‚   â”‚   with attempt:  # Retrying if ToolSelector fails to select a tool                                      â”‚
           â”‚ â± 417 â”‚   â”‚   â”‚   â”‚   â”‚   action = await agent(agent_state.messages, tools)                                                 â”‚
           â”‚   418 â”‚   â”‚   â”‚   agent_state.messages = [*agent_state.messages, action]                                                    â”‚
           â”‚   419 â”‚   â”‚   â”‚   if on_agent_action_callback:                                                                              â”‚
           â”‚   420 â”‚   â”‚   â”‚   â”‚   await on_agent_action_callback(action, agent_state)                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aviary/tools/utils.py:182 in __call__                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   179 â”‚   â”‚   â”‚   self._ledger.messages.extend(messages)                                                                    â”‚
           â”‚   180 â”‚   â”‚   â”‚   messages = self._ledger.messages                                                                          â”‚
           â”‚   181 â”‚   â”‚                                                                                                                 â”‚
           â”‚ â± 182 â”‚   â”‚   model_response = await self._bound_acompletion(                                                               â”‚
           â”‚   183 â”‚   â”‚   â”‚   messages=MessagesAdapter.dump_python(                                                                     â”‚
           â”‚   184 â”‚   â”‚   â”‚   â”‚   messages, exclude_none=True, by_alias=True                                                            â”‚
           â”‚   185 â”‚   â”‚   â”‚   ),                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:817 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    814 â”‚   â”‚   â”‚   â”‚   â”‚   original_exception=e,                                                                            â”‚
           â”‚    815 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    816 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚ â±  817 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    818 â”‚                                                                                                                    â”‚
           â”‚    819 â”‚   async def _acompletion(                                                                                          â”‚
           â”‚    820 â”‚   â”‚   self, model: str, messages: List[Dict[str, str]], **kwargs                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:793 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    790 â”‚   â”‚   â”‚   if request_priority is not None and isinstance(request_priority, int):                                   â”‚
           â”‚    791 â”‚   â”‚   â”‚   â”‚   response = await self.schedule_acompletion(**kwargs)                                                 â”‚
           â”‚    792 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â±  793 â”‚   â”‚   â”‚   â”‚   response = await self.async_function_with_fallbacks(**kwargs)                                        â”‚
           â”‚    794 â”‚   â”‚   â”‚   end_time = time.time()                                                                                   â”‚
           â”‚    795 â”‚   â”‚   â”‚   _duration = end_time - start_time                                                                        â”‚
           â”‚    796 â”‚   â”‚   â”‚   asyncio.create_task(                                                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2795 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2792 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚   2793 â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                                â”‚
           â”‚   2794 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2795 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2796 â”‚                                                                                                                    â”‚
           â”‚   2797 â”‚   def _handle_mock_testing_fallbacks(                                                                              â”‚
           â”‚   2798 â”‚   â”‚   self,                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2631 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2628 â”‚   â”‚   â”‚   â”‚   content_policy_fallbacks=content_policy_fallbacks,                                                   â”‚
           â”‚   2629 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2630 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2631 â”‚   â”‚   â”‚   response = await self.async_function_with_retries(*args, **kwargs)                                       â”‚
           â”‚   2632 â”‚   â”‚   â”‚   verbose_router_logger.debug(f"Async Response: {response}")                                               â”‚
           â”‚   2633 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2634 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2967 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2964 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "max_retries", num_retries)                                              â”‚
           â”‚   2965 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "num_retries", current_attempt)                                          â”‚
           â”‚   2966 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2967 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2968 â”‚                                                                                                                    â”‚
           â”‚   2969 â”‚   async def make_call(self, original_function: Any, *args, **kwargs):                                              â”‚
           â”‚   2970 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2879 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2876 â”‚   â”‚   â”‚   â”‚   model_group=model_group, kwargs=kwargs                                                               â”‚
           â”‚   2877 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2878 â”‚   â”‚   â”‚   # if the function call is successful, no exception will be raised and we'll                              â”‚
           â”‚        break out of the loop                                                                                                â”‚
           â”‚ â± 2879 â”‚   â”‚   â”‚   response = await self.make_call(original_function, *args, **kwargs)                                      â”‚
           â”‚   2880 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   2881 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2882 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2976 in make_call                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2973 â”‚   â”‚   model_group = kwargs.get("model")                                                                            â”‚
           â”‚   2974 â”‚   â”‚   response = original_function(*args, **kwargs)                                                                â”‚
           â”‚   2975 â”‚   â”‚   if inspect.iscoroutinefunction(response) or inspect.isawaitable(response):                                   â”‚
           â”‚ â± 2976 â”‚   â”‚   â”‚   response = await response                                                                                â”‚
           â”‚   2977 â”‚   â”‚   ## PROCESS RESPONSE HEADERS                                                                                  â”‚
           â”‚   2978 â”‚   â”‚   await self.set_response_headers(response=response, model_group=model_group)                                  â”‚
           â”‚   2979                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:947 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    944 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚    945 â”‚   â”‚   â”‚   if model_name is not None:                                                                               â”‚
           â”‚    946 â”‚   â”‚   â”‚   â”‚   self.fail_calls[model_name] += 1                                                                     â”‚
           â”‚ â±  947 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    948 â”‚                                                                                                                    â”‚
           â”‚    949 â”‚   def _update_kwargs_before_fallbacks(self, model: str, kwargs: dict) -> None:                                     â”‚
           â”‚    950 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:915 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    912 â”‚   â”‚   â”‚   â”‚   â”‚   parent_otel_span=parent_otel_span,                                                               â”‚
           â”‚    913 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    914 â”‚   â”‚   â”‚   â”‚                                                                                                        â”‚
           â”‚ â±  915 â”‚   â”‚   â”‚   â”‚   response = await _response                                                                           â”‚
           â”‚    916 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚    917 â”‚   â”‚   â”‚   ## CHECK CONTENT FILTER ERROR ##                                                                         â”‚
           â”‚    918 â”‚   â”‚   â”‚   if isinstance(response, ModelResponse):                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1175 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1172 â”‚   â”‚   â”‚   â”‚   â”‚   else:                                                                                            â”‚
           â”‚   1173 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   kwargs["model"] = context_window_fallback_dict[model]                                        â”‚
           â”‚   1174 â”‚   â”‚   â”‚   â”‚   â”‚   return await original_function(*args, **kwargs)                                                  â”‚
           â”‚ â± 1175 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   1176 â”‚                                                                                                                    â”‚
           â”‚   1177 â”‚   is_coroutine = inspect.iscoroutinefunction(original_function)                                                    â”‚
           â”‚   1178                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1031 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1028 â”‚   â”‚   â”‚   â”‚   return _caching_handler_response.final_embedding_cached_response                                     â”‚
           â”‚   1029 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1030 â”‚   â”‚   â”‚   # MODEL CALL                                                                                             â”‚
           â”‚ â± 1031 â”‚   â”‚   â”‚   result = await original_function(*args, **kwargs)                                                        â”‚
           â”‚   1032 â”‚   â”‚   â”‚   end_time = datetime.datetime.now()                                                                       â”‚
           â”‚   1033 â”‚   â”‚   â”‚   if "stream" in kwargs and kwargs["stream"] is True:                                                      â”‚
           â”‚   1034 â”‚   â”‚   â”‚   â”‚   if (                                                                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:499 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    496 â”‚   â”‚   return response                                                                                              â”‚
           â”‚    497 â”‚   except Exception as e:                                                                                           â”‚
           â”‚    498 â”‚   â”‚   custom_llm_provider = custom_llm_provider or "openai"                                                        â”‚
           â”‚ â±  499 â”‚   â”‚   raise exception_type(                                                                                        â”‚
           â”‚    500 â”‚   â”‚   â”‚   model=model,                                                                                             â”‚
           â”‚    501 â”‚   â”‚   â”‚   custom_llm_provider=custom_llm_provider,                                                                 â”‚
           â”‚    502 â”‚   â”‚   â”‚   original_exception=e,                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:212 â”‚
           â”‚ 5 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2122 â”‚   â”‚   # don't let an error with mapping interrupt the user from receiving an error                                 â”‚
           â”‚        from the llm api calls                                                                                               â”‚
           â”‚   2123 â”‚   â”‚   if exception_mapping_worked:                                                                                 â”‚
           â”‚   2124 â”‚   â”‚   â”‚   setattr(e, "litellm_response_headers", litellm_response_headers)                                         â”‚
           â”‚ â± 2125 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   2126 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   2127 â”‚   â”‚   â”‚   for error_type in litellm.LITELLM_EXCEPTION_TYPES:                                                       â”‚
           â”‚   2128 â”‚   â”‚   â”‚   â”‚   if isinstance(e, error_type):                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:210 â”‚
           â”‚ 1 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2098 â”‚   â”‚   â”‚   â”‚   â”‚   request=original_exception.request,                                                              â”‚
           â”‚   2099 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚   2100 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â± 2101 â”‚   â”‚   â”‚   â”‚   raise APIConnectionError(                                                                            â”‚
           â”‚   2102 â”‚   â”‚   â”‚   â”‚   â”‚   message="{}\n{}".format(                                                                         â”‚
           â”‚   2103 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   str(original_exception), traceback.format_exc()                                              â”‚
           â”‚   2104 â”‚   â”‚   â”‚   â”‚   â”‚   ),                                                                                               â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           APIConnectionError: litellm.APIConnectionError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1109, in                 
           _wrap_create_connection                                                                                                        
               sock = await aiohappyeyeballs.start_connection(                                                                            
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                            
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py", line 123, in              
           start_connection                                                                                                               
               raise OSError(first_errno, msg)                                                                                            
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py", line 477, in acompletion           
               response = await init_response                                                                                             
                          ^^^^^^^^^^^^^^^^^^^                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 566, in                
           ollama_acompletion                                                                                                             
               raise e  # don't use verbose_logger.exception, if exception is raised                                                      
               ^^^^^^^                                                                                                                    
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 507, in                
           ollama_acompletion                                                                                                             
               resp = await session.post(url, json=data)                                                                                  
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                  
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py", line 696, in _request            
               conn = await self._connector.connect(                                                                                      
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 544, in connect          
               proto = await self._create_connection(req, traces, timeout)                                                                
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1050, in                 
           _create_connection                                                                                                             
               _, proto = await self._create_direct_connection(req, traces, timeout)                                                      
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1394, in                 
           _create_direct_connection                                                                                                      
               raise last_exc                                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1363, in                 
           _create_direct_connection                                                                                                      
               transp, proto = await self._wrap_create_connection(                                                                        
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                        
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1124, in                 
           _wrap_create_connection                                                                                                        
               raise client_error(req.connection_key, exc) from exc                                                                       
           aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
                                                                                                                                          
           Received Model Group=ollama/llama3.2                                                                                           
           Available Model Group Fallbacks=None LiteLLM Retried: 2 times, LiteLLM Max Retries: 3                                          
[00:59:12] Answer:                                                                                                                        


 ANSWERING QUESTION: sciqag_question_74.json
 ----------------------------- 



[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.

[00:59:33] Trajectory failed.                                                                                                             
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1109 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1106 â”‚   â”‚   â”‚   async with ceil_timeout(                                                                                 â”‚
           â”‚   1107 â”‚   â”‚   â”‚   â”‚   timeout.sock_connect, ceil_threshold=timeout.ceil_threshold                                          â”‚
           â”‚   1108 â”‚   â”‚   â”‚   ):                                                                                                       â”‚
           â”‚ â± 1109 â”‚   â”‚   â”‚   â”‚   sock = await aiohappyeyeballs.start_connection(                                                      â”‚
           â”‚   1110 â”‚   â”‚   â”‚   â”‚   â”‚   addr_infos=addr_infos,                                                                           â”‚
           â”‚   1111 â”‚   â”‚   â”‚   â”‚   â”‚   local_addr_infos=self._local_addr_infos,                                                         â”‚
           â”‚   1112 â”‚   â”‚   â”‚   â”‚   â”‚   happy_eyeballs_delay=self._happy_eyeballs_delay,                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py:123 in start_connection          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   120 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, OSError) and exc.errno == first_errno                                         â”‚
           â”‚   121 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   for exc in all_exceptions                                                                     â”‚
           â”‚   122 â”‚   â”‚   â”‚   â”‚   â”‚   ):                                                                                                â”‚
           â”‚ â± 123 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   raise OSError(first_errno, msg)                                                               â”‚
           â”‚   124 â”‚   â”‚   â”‚   â”‚   elif isinstance(first_exception, RuntimeError) and all(                                               â”‚
           â”‚   125 â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, RuntimeError) for exc in all_exceptions                                           â”‚
           â”‚   126 â”‚   â”‚   â”‚   â”‚   ):                                                                                                    â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:477 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    474 â”‚   â”‚   â”‚   â”‚   â”‚   response = ModelResponse(**init_response)                                                        â”‚
           â”‚    475 â”‚   â”‚   â”‚   â”‚   response = init_response                                                                             â”‚
           â”‚    476 â”‚   â”‚   â”‚   elif asyncio.iscoroutine(init_response):                                                                 â”‚
           â”‚ â±  477 â”‚   â”‚   â”‚   â”‚   response = await init_response                                                                       â”‚
           â”‚    478 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚    479 â”‚   â”‚   â”‚   â”‚   response = init_response  # type: ignore                                                             â”‚
           â”‚    480                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:566 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   563 â”‚   â”‚   â”‚   )                                                                                                         â”‚
           â”‚   564 â”‚   â”‚   â”‚   return model_response                                                                                     â”‚
           â”‚   565 â”‚   except Exception as e:                                                                                            â”‚
           â”‚ â± 566 â”‚   â”‚   raise e  # don't use verbose_logger.exception, if exception is raised                                         â”‚
           â”‚   567                                                                                                                       â”‚
           â”‚   568                                                                                                                       â”‚
           â”‚   569 async def ollama_aembeddings(                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:507 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   504 â”‚   try:                                                                                                              â”‚
           â”‚   505 â”‚   â”‚   timeout = aiohttp.ClientTimeout(total=litellm.request_timeout)  # 10 minutes                                  â”‚
           â”‚   506 â”‚   â”‚   async with aiohttp.ClientSession(timeout=timeout) as session:                                                 â”‚
           â”‚ â± 507 â”‚   â”‚   â”‚   resp = await session.post(url, json=data)                                                                 â”‚
           â”‚   508 â”‚   â”‚   â”‚                                                                                                             â”‚
           â”‚   509 â”‚   â”‚   â”‚   if resp.status != 200:                                                                                    â”‚
           â”‚   510 â”‚   â”‚   â”‚   â”‚   text = await resp.text()                                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py:696 in _request                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚    693 â”‚   â”‚   â”‚   â”‚   â”‚                                                                                                    â”‚
           â”‚    694 â”‚   â”‚   â”‚   â”‚   â”‚   # connection timeout                                                                             â”‚
           â”‚    695 â”‚   â”‚   â”‚   â”‚   â”‚   try:                                                                                             â”‚
           â”‚ â±  696 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   conn = await self._connector.connect(                                                        â”‚
           â”‚    697 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   req, traces=traces, timeout=real_timeout                                                 â”‚
           â”‚    698 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚    699 â”‚   â”‚   â”‚   â”‚   â”‚   except asyncio.TimeoutError as exc:                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:544 in connect                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚    541 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    542 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    543 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_start()                                                   â”‚
           â”‚ â±  544 â”‚   â”‚   â”‚   â”‚   proto = await self._create_connection(req, traces, timeout)                                          â”‚
           â”‚    545 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    546 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    547 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_end()                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1050 in _create_connection           â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1047 â”‚   â”‚   if req.proxy:                                                                                                â”‚
           â”‚   1048 â”‚   â”‚   â”‚   _, proto = await self._create_proxy_connection(req, traces, timeout)                                     â”‚
           â”‚   1049 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚ â± 1050 â”‚   â”‚   â”‚   _, proto = await self._create_direct_connection(req, traces, timeout)                                    â”‚
           â”‚   1051 â”‚   â”‚                                                                                                                â”‚
           â”‚   1052 â”‚   â”‚   return proto                                                                                                 â”‚
           â”‚   1053                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1394 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1391 â”‚   â”‚   â”‚   return transp, proto                                                                                     â”‚
           â”‚   1392 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   1393 â”‚   â”‚   â”‚   assert last_exc is not None                                                                              â”‚
           â”‚ â± 1394 â”‚   â”‚   â”‚   raise last_exc                                                                                           â”‚
           â”‚   1395 â”‚                                                                                                                    â”‚
           â”‚   1396 â”‚   async def _create_proxy_connection(                                                                              â”‚
           â”‚   1397 â”‚   â”‚   self, req: ClientRequest, traces: List["Trace"], timeout: "ClientTimeout"                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1363 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1360 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   1361 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1362 â”‚   â”‚   â”‚   try:                                                                                                     â”‚
           â”‚ â± 1363 â”‚   â”‚   â”‚   â”‚   transp, proto = await self._wrap_create_connection(                                                  â”‚
           â”‚   1364 â”‚   â”‚   â”‚   â”‚   â”‚   self._factory,                                                                                   â”‚
           â”‚   1365 â”‚   â”‚   â”‚   â”‚   â”‚   timeout=timeout,                                                                                 â”‚
           â”‚   1366 â”‚   â”‚   â”‚   â”‚   â”‚   ssl=sslcontext,                                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1124 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1121 â”‚   â”‚   except OSError as exc:                                                                                       â”‚
           â”‚   1122 â”‚   â”‚   â”‚   if exc.errno is None and isinstance(exc, asyncio.TimeoutError):                                          â”‚
           â”‚   1123 â”‚   â”‚   â”‚   â”‚   raise                                                                                                â”‚
           â”‚ â± 1124 â”‚   â”‚   â”‚   raise client_error(req.connection_key, exc) from exc                                                     â”‚
           â”‚   1125 â”‚                                                                                                                    â”‚
           â”‚   1126 â”‚   async def _wrap_existing_connection(                                                                             â”‚
           â”‚   1127 â”‚   â”‚   self,                                                                                                        â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno 111] Connect call failed 
           ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                                                    
                                                                                                                                          
           During handling of the above exception, another exception occurred:                                                            
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:276 in _run_with_timeout_failure                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   273 ) -> tuple[PQASession, AgentStatus]:                                                                                  â”‚
           â”‚   274 â”‚   try:                                                                                                              â”‚
           â”‚   275 â”‚   â”‚   async with asyncio.timeout(query.settings.agent.timeout):                                                     â”‚
           â”‚ â± 276 â”‚   â”‚   â”‚   status = await rollout()                                                                                  â”‚
           â”‚   277 â”‚   except TimeoutError:                                                                                              â”‚
           â”‚   278 â”‚   â”‚   logger.warning(                                                                                               â”‚
           â”‚   279 â”‚   â”‚   â”‚   f"Agent timeout after {query.settings.agent.timeout}-sec, just answering."                                â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:410 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   407 â”‚   â”‚   â”‚   â”‚   )                                                                                                     â”‚
           â”‚   408 â”‚   â”‚   â”‚   â”‚   return AgentStatus.TRUNCATED                                                                          â”‚
           â”‚   409 â”‚   â”‚   â”‚   agent_state.messages += obs                                                                               â”‚
           â”‚ â± 410 â”‚   â”‚   â”‚   for attempt in Retrying(                                                                                  â”‚
           â”‚   411 â”‚   â”‚   â”‚   â”‚   stop=stop_after_attempt(5),                                                                           â”‚
           â”‚   412 â”‚   â”‚   â”‚   â”‚   retry=retry_if_exception_type(MalformedMessageError),                                                 â”‚
           â”‚   413 â”‚   â”‚   â”‚   â”‚   before_sleep=before_sleep_log(logger, logging.WARNING),                                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:443 in __iter__                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   440 â”‚   â”‚                                                                                                                 â”‚
           â”‚   441 â”‚   â”‚   retry_state = RetryCallState(self, fn=None, args=(), kwargs={})                                               â”‚
           â”‚   442 â”‚   â”‚   while True:                                                                                                   â”‚
           â”‚ â± 443 â”‚   â”‚   â”‚   do = self.iter(retry_state=retry_state)                                                                   â”‚
           â”‚   444 â”‚   â”‚   â”‚   if isinstance(do, DoAttempt):                                                                             â”‚
           â”‚   445 â”‚   â”‚   â”‚   â”‚   yield AttemptManager(retry_state=retry_state)                                                         â”‚
           â”‚   446 â”‚   â”‚   â”‚   elif isinstance(do, DoSleep):                                                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:376 in iter                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   373 â”‚   â”‚   self._begin_iter(retry_state)                                                                                 â”‚
           â”‚   374 â”‚   â”‚   result = None                                                                                                 â”‚
           â”‚   375 â”‚   â”‚   for action in self.iter_state.actions:                                                                        â”‚
           â”‚ â± 376 â”‚   â”‚   â”‚   result = action(retry_state)                                                                              â”‚
           â”‚   377 â”‚   â”‚   return result                                                                                                 â”‚
           â”‚   378 â”‚                                                                                                                     â”‚
           â”‚   379 â”‚   def _begin_iter(self, retry_state: "RetryCallState") -> None:  # noqa                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:398 in <lambda>                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   395 â”‚                                                                                                                     â”‚
           â”‚   396 â”‚   def _post_retry_check_actions(self, retry_state: "RetryCallState") -> None:                                       â”‚
           â”‚   397 â”‚   â”‚   if not (self.iter_state.is_explicit_retry or self.iter_state.retry_run_result):                               â”‚
           â”‚ â± 398 â”‚   â”‚   â”‚   self._add_action_func(lambda rs: rs.outcome.result())                                                     â”‚
           â”‚   399 â”‚   â”‚   â”‚   return                                                                                                    â”‚
           â”‚   400 â”‚   â”‚                                                                                                                 â”‚
           â”‚   401 â”‚   â”‚   if self.after is not None:                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:449 in result                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚   446 â”‚   â”‚   â”‚   â”‚   if self._state in [CANCELLED, CANCELLED_AND_NOTIFIED]:                                                â”‚
           â”‚   447 â”‚   â”‚   â”‚   â”‚   â”‚   raise CancelledError()                                                                            â”‚
           â”‚   448 â”‚   â”‚   â”‚   â”‚   elif self._state == FINISHED:                                                                         â”‚
           â”‚ â± 449 â”‚   â”‚   â”‚   â”‚   â”‚   return self.__get_result()                                                                        â”‚
           â”‚   450 â”‚   â”‚   â”‚   â”‚                                                                                                         â”‚
           â”‚   451 â”‚   â”‚   â”‚   â”‚   self._condition.wait(timeout)                                                                         â”‚
           â”‚   452                                                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:401 in __get_result                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   398 â”‚   def __get_result(self):                                                                                           â”‚
           â”‚   399 â”‚   â”‚   if self._exception:                                                                                           â”‚
           â”‚   400 â”‚   â”‚   â”‚   try:                                                                                                      â”‚
           â”‚ â± 401 â”‚   â”‚   â”‚   â”‚   raise self._exception                                                                                 â”‚
           â”‚   402 â”‚   â”‚   â”‚   finally:                                                                                                  â”‚
           â”‚   403 â”‚   â”‚   â”‚   â”‚   # Break a reference cycle with the exception in self._exception                                       â”‚
           â”‚   404 â”‚   â”‚   â”‚   â”‚   self = None                                                                                           â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:417 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   414 â”‚   â”‚   â”‚   â”‚   reraise=True,                                                                                         â”‚
           â”‚   415 â”‚   â”‚   â”‚   ):                                                                                                        â”‚
           â”‚   416 â”‚   â”‚   â”‚   â”‚   with attempt:  # Retrying if ToolSelector fails to select a tool                                      â”‚
           â”‚ â± 417 â”‚   â”‚   â”‚   â”‚   â”‚   action = await agent(agent_state.messages, tools)                                                 â”‚
           â”‚   418 â”‚   â”‚   â”‚   agent_state.messages = [*agent_state.messages, action]                                                    â”‚
           â”‚   419 â”‚   â”‚   â”‚   if on_agent_action_callback:                                                                              â”‚
           â”‚   420 â”‚   â”‚   â”‚   â”‚   await on_agent_action_callback(action, agent_state)                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aviary/tools/utils.py:182 in __call__                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   179 â”‚   â”‚   â”‚   self._ledger.messages.extend(messages)                                                                    â”‚
           â”‚   180 â”‚   â”‚   â”‚   messages = self._ledger.messages                                                                          â”‚
           â”‚   181 â”‚   â”‚                                                                                                                 â”‚
           â”‚ â± 182 â”‚   â”‚   model_response = await self._bound_acompletion(                                                               â”‚
           â”‚   183 â”‚   â”‚   â”‚   messages=MessagesAdapter.dump_python(                                                                     â”‚
           â”‚   184 â”‚   â”‚   â”‚   â”‚   messages, exclude_none=True, by_alias=True                                                            â”‚
           â”‚   185 â”‚   â”‚   â”‚   ),                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:817 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    814 â”‚   â”‚   â”‚   â”‚   â”‚   original_exception=e,                                                                            â”‚
           â”‚    815 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    816 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚ â±  817 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    818 â”‚                                                                                                                    â”‚
           â”‚    819 â”‚   async def _acompletion(                                                                                          â”‚
           â”‚    820 â”‚   â”‚   self, model: str, messages: List[Dict[str, str]], **kwargs                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:793 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    790 â”‚   â”‚   â”‚   if request_priority is not None and isinstance(request_priority, int):                                   â”‚
           â”‚    791 â”‚   â”‚   â”‚   â”‚   response = await self.schedule_acompletion(**kwargs)                                                 â”‚
           â”‚    792 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â±  793 â”‚   â”‚   â”‚   â”‚   response = await self.async_function_with_fallbacks(**kwargs)                                        â”‚
           â”‚    794 â”‚   â”‚   â”‚   end_time = time.time()                                                                                   â”‚
           â”‚    795 â”‚   â”‚   â”‚   _duration = end_time - start_time                                                                        â”‚
           â”‚    796 â”‚   â”‚   â”‚   asyncio.create_task(                                                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2795 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2792 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚   2793 â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                                â”‚
           â”‚   2794 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2795 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2796 â”‚                                                                                                                    â”‚
           â”‚   2797 â”‚   def _handle_mock_testing_fallbacks(                                                                              â”‚
           â”‚   2798 â”‚   â”‚   self,                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2631 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2628 â”‚   â”‚   â”‚   â”‚   content_policy_fallbacks=content_policy_fallbacks,                                                   â”‚
           â”‚   2629 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2630 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2631 â”‚   â”‚   â”‚   response = await self.async_function_with_retries(*args, **kwargs)                                       â”‚
           â”‚   2632 â”‚   â”‚   â”‚   verbose_router_logger.debug(f"Async Response: {response}")                                               â”‚
           â”‚   2633 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2634 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2967 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2964 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "max_retries", num_retries)                                              â”‚
           â”‚   2965 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "num_retries", current_attempt)                                          â”‚
           â”‚   2966 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2967 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2968 â”‚                                                                                                                    â”‚
           â”‚   2969 â”‚   async def make_call(self, original_function: Any, *args, **kwargs):                                              â”‚
           â”‚   2970 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2879 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2876 â”‚   â”‚   â”‚   â”‚   model_group=model_group, kwargs=kwargs                                                               â”‚
           â”‚   2877 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2878 â”‚   â”‚   â”‚   # if the function call is successful, no exception will be raised and we'll                              â”‚
           â”‚        break out of the loop                                                                                                â”‚
           â”‚ â± 2879 â”‚   â”‚   â”‚   response = await self.make_call(original_function, *args, **kwargs)                                      â”‚
           â”‚   2880 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   2881 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2882 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2976 in make_call                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2973 â”‚   â”‚   model_group = kwargs.get("model")                                                                            â”‚
           â”‚   2974 â”‚   â”‚   response = original_function(*args, **kwargs)                                                                â”‚
           â”‚   2975 â”‚   â”‚   if inspect.iscoroutinefunction(response) or inspect.isawaitable(response):                                   â”‚
           â”‚ â± 2976 â”‚   â”‚   â”‚   response = await response                                                                                â”‚
           â”‚   2977 â”‚   â”‚   ## PROCESS RESPONSE HEADERS                                                                                  â”‚
           â”‚   2978 â”‚   â”‚   await self.set_response_headers(response=response, model_group=model_group)                                  â”‚
           â”‚   2979                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:947 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    944 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚    945 â”‚   â”‚   â”‚   if model_name is not None:                                                                               â”‚
           â”‚    946 â”‚   â”‚   â”‚   â”‚   self.fail_calls[model_name] += 1                                                                     â”‚
           â”‚ â±  947 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    948 â”‚                                                                                                                    â”‚
           â”‚    949 â”‚   def _update_kwargs_before_fallbacks(self, model: str, kwargs: dict) -> None:                                     â”‚
           â”‚    950 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:915 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    912 â”‚   â”‚   â”‚   â”‚   â”‚   parent_otel_span=parent_otel_span,                                                               â”‚
           â”‚    913 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    914 â”‚   â”‚   â”‚   â”‚                                                                                                        â”‚
           â”‚ â±  915 â”‚   â”‚   â”‚   â”‚   response = await _response                                                                           â”‚
           â”‚    916 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚    917 â”‚   â”‚   â”‚   ## CHECK CONTENT FILTER ERROR ##                                                                         â”‚
           â”‚    918 â”‚   â”‚   â”‚   if isinstance(response, ModelResponse):                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1175 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1172 â”‚   â”‚   â”‚   â”‚   â”‚   else:                                                                                            â”‚
           â”‚   1173 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   kwargs["model"] = context_window_fallback_dict[model]                                        â”‚
           â”‚   1174 â”‚   â”‚   â”‚   â”‚   â”‚   return await original_function(*args, **kwargs)                                                  â”‚
           â”‚ â± 1175 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   1176 â”‚                                                                                                                    â”‚
           â”‚   1177 â”‚   is_coroutine = inspect.iscoroutinefunction(original_function)                                                    â”‚
           â”‚   1178                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1031 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1028 â”‚   â”‚   â”‚   â”‚   return _caching_handler_response.final_embedding_cached_response                                     â”‚
           â”‚   1029 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1030 â”‚   â”‚   â”‚   # MODEL CALL                                                                                             â”‚
           â”‚ â± 1031 â”‚   â”‚   â”‚   result = await original_function(*args, **kwargs)                                                        â”‚
           â”‚   1032 â”‚   â”‚   â”‚   end_time = datetime.datetime.now()                                                                       â”‚
           â”‚   1033 â”‚   â”‚   â”‚   if "stream" in kwargs and kwargs["stream"] is True:                                                      â”‚
           â”‚   1034 â”‚   â”‚   â”‚   â”‚   if (                                                                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:499 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    496 â”‚   â”‚   return response                                                                                              â”‚
           â”‚    497 â”‚   except Exception as e:                                                                                           â”‚
           â”‚    498 â”‚   â”‚   custom_llm_provider = custom_llm_provider or "openai"                                                        â”‚
           â”‚ â±  499 â”‚   â”‚   raise exception_type(                                                                                        â”‚
           â”‚    500 â”‚   â”‚   â”‚   model=model,                                                                                             â”‚
           â”‚    501 â”‚   â”‚   â”‚   custom_llm_provider=custom_llm_provider,                                                                 â”‚
           â”‚    502 â”‚   â”‚   â”‚   original_exception=e,                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:212 â”‚
           â”‚ 5 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2122 â”‚   â”‚   # don't let an error with mapping interrupt the user from receiving an error                                 â”‚
           â”‚        from the llm api calls                                                                                               â”‚
           â”‚   2123 â”‚   â”‚   if exception_mapping_worked:                                                                                 â”‚
           â”‚   2124 â”‚   â”‚   â”‚   setattr(e, "litellm_response_headers", litellm_response_headers)                                         â”‚
           â”‚ â± 2125 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   2126 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   2127 â”‚   â”‚   â”‚   for error_type in litellm.LITELLM_EXCEPTION_TYPES:                                                       â”‚
           â”‚   2128 â”‚   â”‚   â”‚   â”‚   if isinstance(e, error_type):                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:210 â”‚
           â”‚ 1 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2098 â”‚   â”‚   â”‚   â”‚   â”‚   request=original_exception.request,                                                              â”‚
           â”‚   2099 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚   2100 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â± 2101 â”‚   â”‚   â”‚   â”‚   raise APIConnectionError(                                                                            â”‚
           â”‚   2102 â”‚   â”‚   â”‚   â”‚   â”‚   message="{}\n{}".format(                                                                         â”‚
           â”‚   2103 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   str(original_exception), traceback.format_exc()                                              â”‚
           â”‚   2104 â”‚   â”‚   â”‚   â”‚   â”‚   ),                                                                                               â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           APIConnectionError: litellm.APIConnectionError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1109, in                 
           _wrap_create_connection                                                                                                        
               sock = await aiohappyeyeballs.start_connection(                                                                            
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                            
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py", line 123, in              
           start_connection                                                                                                               
               raise OSError(first_errno, msg)                                                                                            
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py", line 477, in acompletion           
               response = await init_response                                                                                             
                          ^^^^^^^^^^^^^^^^^^^                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 566, in                
           ollama_acompletion                                                                                                             
               raise e  # don't use verbose_logger.exception, if exception is raised                                                      
               ^^^^^^^                                                                                                                    
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 507, in                
           ollama_acompletion                                                                                                             
               resp = await session.post(url, json=data)                                                                                  
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                  
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py", line 696, in _request            
               conn = await self._connector.connect(                                                                                      
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 544, in connect          
               proto = await self._create_connection(req, traces, timeout)                                                                
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1050, in                 
           _create_connection                                                                                                             
               _, proto = await self._create_direct_connection(req, traces, timeout)                                                      
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1394, in                 
           _create_direct_connection                                                                                                      
               raise last_exc                                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1363, in                 
           _create_direct_connection                                                                                                      
               transp, proto = await self._wrap_create_connection(                                                                        
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                        
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1124, in                 
           _wrap_create_connection                                                                                                        
               raise client_error(req.connection_key, exc) from exc                                                                       
           aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
                                                                                                                                          
           Received Model Group=ollama/llama3.2                                                                                           
           Available Model Group Fallbacks=None LiteLLM Retried: 2 times, LiteLLM Max Retries: 3                                          
[00:59:35] Answer:                                                                                                                        


 ANSWERING QUESTION: sciqag_question_75.json
 ----------------------------- 



[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.

[00:59:56] Trajectory failed.                                                                                                             
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1109 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1106 â”‚   â”‚   â”‚   async with ceil_timeout(                                                                                 â”‚
           â”‚   1107 â”‚   â”‚   â”‚   â”‚   timeout.sock_connect, ceil_threshold=timeout.ceil_threshold                                          â”‚
           â”‚   1108 â”‚   â”‚   â”‚   ):                                                                                                       â”‚
           â”‚ â± 1109 â”‚   â”‚   â”‚   â”‚   sock = await aiohappyeyeballs.start_connection(                                                      â”‚
           â”‚   1110 â”‚   â”‚   â”‚   â”‚   â”‚   addr_infos=addr_infos,                                                                           â”‚
           â”‚   1111 â”‚   â”‚   â”‚   â”‚   â”‚   local_addr_infos=self._local_addr_infos,                                                         â”‚
           â”‚   1112 â”‚   â”‚   â”‚   â”‚   â”‚   happy_eyeballs_delay=self._happy_eyeballs_delay,                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py:123 in start_connection          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   120 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, OSError) and exc.errno == first_errno                                         â”‚
           â”‚   121 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   for exc in all_exceptions                                                                     â”‚
           â”‚   122 â”‚   â”‚   â”‚   â”‚   â”‚   ):                                                                                                â”‚
           â”‚ â± 123 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   raise OSError(first_errno, msg)                                                               â”‚
           â”‚   124 â”‚   â”‚   â”‚   â”‚   elif isinstance(first_exception, RuntimeError) and all(                                               â”‚
           â”‚   125 â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, RuntimeError) for exc in all_exceptions                                           â”‚
           â”‚   126 â”‚   â”‚   â”‚   â”‚   ):                                                                                                    â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:477 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    474 â”‚   â”‚   â”‚   â”‚   â”‚   response = ModelResponse(**init_response)                                                        â”‚
           â”‚    475 â”‚   â”‚   â”‚   â”‚   response = init_response                                                                             â”‚
           â”‚    476 â”‚   â”‚   â”‚   elif asyncio.iscoroutine(init_response):                                                                 â”‚
           â”‚ â±  477 â”‚   â”‚   â”‚   â”‚   response = await init_response                                                                       â”‚
           â”‚    478 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚    479 â”‚   â”‚   â”‚   â”‚   response = init_response  # type: ignore                                                             â”‚
           â”‚    480                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:566 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   563 â”‚   â”‚   â”‚   )                                                                                                         â”‚
           â”‚   564 â”‚   â”‚   â”‚   return model_response                                                                                     â”‚
           â”‚   565 â”‚   except Exception as e:                                                                                            â”‚
           â”‚ â± 566 â”‚   â”‚   raise e  # don't use verbose_logger.exception, if exception is raised                                         â”‚
           â”‚   567                                                                                                                       â”‚
           â”‚   568                                                                                                                       â”‚
           â”‚   569 async def ollama_aembeddings(                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:507 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   504 â”‚   try:                                                                                                              â”‚
           â”‚   505 â”‚   â”‚   timeout = aiohttp.ClientTimeout(total=litellm.request_timeout)  # 10 minutes                                  â”‚
           â”‚   506 â”‚   â”‚   async with aiohttp.ClientSession(timeout=timeout) as session:                                                 â”‚
           â”‚ â± 507 â”‚   â”‚   â”‚   resp = await session.post(url, json=data)                                                                 â”‚
           â”‚   508 â”‚   â”‚   â”‚                                                                                                             â”‚
           â”‚   509 â”‚   â”‚   â”‚   if resp.status != 200:                                                                                    â”‚
           â”‚   510 â”‚   â”‚   â”‚   â”‚   text = await resp.text()                                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py:696 in _request                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚    693 â”‚   â”‚   â”‚   â”‚   â”‚                                                                                                    â”‚
           â”‚    694 â”‚   â”‚   â”‚   â”‚   â”‚   # connection timeout                                                                             â”‚
           â”‚    695 â”‚   â”‚   â”‚   â”‚   â”‚   try:                                                                                             â”‚
           â”‚ â±  696 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   conn = await self._connector.connect(                                                        â”‚
           â”‚    697 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   req, traces=traces, timeout=real_timeout                                                 â”‚
           â”‚    698 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚    699 â”‚   â”‚   â”‚   â”‚   â”‚   except asyncio.TimeoutError as exc:                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:544 in connect                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚    541 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    542 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    543 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_start()                                                   â”‚
           â”‚ â±  544 â”‚   â”‚   â”‚   â”‚   proto = await self._create_connection(req, traces, timeout)                                          â”‚
           â”‚    545 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    546 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    547 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_end()                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1050 in _create_connection           â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1047 â”‚   â”‚   if req.proxy:                                                                                                â”‚
           â”‚   1048 â”‚   â”‚   â”‚   _, proto = await self._create_proxy_connection(req, traces, timeout)                                     â”‚
           â”‚   1049 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚ â± 1050 â”‚   â”‚   â”‚   _, proto = await self._create_direct_connection(req, traces, timeout)                                    â”‚
           â”‚   1051 â”‚   â”‚                                                                                                                â”‚
           â”‚   1052 â”‚   â”‚   return proto                                                                                                 â”‚
           â”‚   1053                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1394 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1391 â”‚   â”‚   â”‚   return transp, proto                                                                                     â”‚
           â”‚   1392 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   1393 â”‚   â”‚   â”‚   assert last_exc is not None                                                                              â”‚
           â”‚ â± 1394 â”‚   â”‚   â”‚   raise last_exc                                                                                           â”‚
           â”‚   1395 â”‚                                                                                                                    â”‚
           â”‚   1396 â”‚   async def _create_proxy_connection(                                                                              â”‚
           â”‚   1397 â”‚   â”‚   self, req: ClientRequest, traces: List["Trace"], timeout: "ClientTimeout"                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1363 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1360 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   1361 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1362 â”‚   â”‚   â”‚   try:                                                                                                     â”‚
           â”‚ â± 1363 â”‚   â”‚   â”‚   â”‚   transp, proto = await self._wrap_create_connection(                                                  â”‚
           â”‚   1364 â”‚   â”‚   â”‚   â”‚   â”‚   self._factory,                                                                                   â”‚
           â”‚   1365 â”‚   â”‚   â”‚   â”‚   â”‚   timeout=timeout,                                                                                 â”‚
           â”‚   1366 â”‚   â”‚   â”‚   â”‚   â”‚   ssl=sslcontext,                                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1124 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1121 â”‚   â”‚   except OSError as exc:                                                                                       â”‚
           â”‚   1122 â”‚   â”‚   â”‚   if exc.errno is None and isinstance(exc, asyncio.TimeoutError):                                          â”‚
           â”‚   1123 â”‚   â”‚   â”‚   â”‚   raise                                                                                                â”‚
           â”‚ â± 1124 â”‚   â”‚   â”‚   raise client_error(req.connection_key, exc) from exc                                                     â”‚
           â”‚   1125 â”‚                                                                                                                    â”‚
           â”‚   1126 â”‚   async def _wrap_existing_connection(                                                                             â”‚
           â”‚   1127 â”‚   â”‚   self,                                                                                                        â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno 111] Connect call failed 
           ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                                                    
                                                                                                                                          
           During handling of the above exception, another exception occurred:                                                            
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:276 in _run_with_timeout_failure                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   273 ) -> tuple[PQASession, AgentStatus]:                                                                                  â”‚
           â”‚   274 â”‚   try:                                                                                                              â”‚
           â”‚   275 â”‚   â”‚   async with asyncio.timeout(query.settings.agent.timeout):                                                     â”‚
           â”‚ â± 276 â”‚   â”‚   â”‚   status = await rollout()                                                                                  â”‚
           â”‚   277 â”‚   except TimeoutError:                                                                                              â”‚
           â”‚   278 â”‚   â”‚   logger.warning(                                                                                               â”‚
           â”‚   279 â”‚   â”‚   â”‚   f"Agent timeout after {query.settings.agent.timeout}-sec, just answering."                                â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:410 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   407 â”‚   â”‚   â”‚   â”‚   )                                                                                                     â”‚
           â”‚   408 â”‚   â”‚   â”‚   â”‚   return AgentStatus.TRUNCATED                                                                          â”‚
           â”‚   409 â”‚   â”‚   â”‚   agent_state.messages += obs                                                                               â”‚
           â”‚ â± 410 â”‚   â”‚   â”‚   for attempt in Retrying(                                                                                  â”‚
           â”‚   411 â”‚   â”‚   â”‚   â”‚   stop=stop_after_attempt(5),                                                                           â”‚
           â”‚   412 â”‚   â”‚   â”‚   â”‚   retry=retry_if_exception_type(MalformedMessageError),                                                 â”‚
           â”‚   413 â”‚   â”‚   â”‚   â”‚   before_sleep=before_sleep_log(logger, logging.WARNING),                                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:443 in __iter__                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   440 â”‚   â”‚                                                                                                                 â”‚
           â”‚   441 â”‚   â”‚   retry_state = RetryCallState(self, fn=None, args=(), kwargs={})                                               â”‚
           â”‚   442 â”‚   â”‚   while True:                                                                                                   â”‚
           â”‚ â± 443 â”‚   â”‚   â”‚   do = self.iter(retry_state=retry_state)                                                                   â”‚
           â”‚   444 â”‚   â”‚   â”‚   if isinstance(do, DoAttempt):                                                                             â”‚
           â”‚   445 â”‚   â”‚   â”‚   â”‚   yield AttemptManager(retry_state=retry_state)                                                         â”‚
           â”‚   446 â”‚   â”‚   â”‚   elif isinstance(do, DoSleep):                                                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:376 in iter                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   373 â”‚   â”‚   self._begin_iter(retry_state)                                                                                 â”‚
           â”‚   374 â”‚   â”‚   result = None                                                                                                 â”‚
           â”‚   375 â”‚   â”‚   for action in self.iter_state.actions:                                                                        â”‚
           â”‚ â± 376 â”‚   â”‚   â”‚   result = action(retry_state)                                                                              â”‚
           â”‚   377 â”‚   â”‚   return result                                                                                                 â”‚
           â”‚   378 â”‚                                                                                                                     â”‚
           â”‚   379 â”‚   def _begin_iter(self, retry_state: "RetryCallState") -> None:  # noqa                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:398 in <lambda>                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   395 â”‚                                                                                                                     â”‚
           â”‚   396 â”‚   def _post_retry_check_actions(self, retry_state: "RetryCallState") -> None:                                       â”‚
           â”‚   397 â”‚   â”‚   if not (self.iter_state.is_explicit_retry or self.iter_state.retry_run_result):                               â”‚
           â”‚ â± 398 â”‚   â”‚   â”‚   self._add_action_func(lambda rs: rs.outcome.result())                                                     â”‚
           â”‚   399 â”‚   â”‚   â”‚   return                                                                                                    â”‚
           â”‚   400 â”‚   â”‚                                                                                                                 â”‚
           â”‚   401 â”‚   â”‚   if self.after is not None:                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:449 in result                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚   446 â”‚   â”‚   â”‚   â”‚   if self._state in [CANCELLED, CANCELLED_AND_NOTIFIED]:                                                â”‚
           â”‚   447 â”‚   â”‚   â”‚   â”‚   â”‚   raise CancelledError()                                                                            â”‚
           â”‚   448 â”‚   â”‚   â”‚   â”‚   elif self._state == FINISHED:                                                                         â”‚
           â”‚ â± 449 â”‚   â”‚   â”‚   â”‚   â”‚   return self.__get_result()                                                                        â”‚
           â”‚   450 â”‚   â”‚   â”‚   â”‚                                                                                                         â”‚
           â”‚   451 â”‚   â”‚   â”‚   â”‚   self._condition.wait(timeout)                                                                         â”‚
           â”‚   452                                                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:401 in __get_result                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   398 â”‚   def __get_result(self):                                                                                           â”‚
           â”‚   399 â”‚   â”‚   if self._exception:                                                                                           â”‚
           â”‚   400 â”‚   â”‚   â”‚   try:                                                                                                      â”‚
           â”‚ â± 401 â”‚   â”‚   â”‚   â”‚   raise self._exception                                                                                 â”‚
           â”‚   402 â”‚   â”‚   â”‚   finally:                                                                                                  â”‚
           â”‚   403 â”‚   â”‚   â”‚   â”‚   # Break a reference cycle with the exception in self._exception                                       â”‚
           â”‚   404 â”‚   â”‚   â”‚   â”‚   self = None                                                                                           â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:417 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   414 â”‚   â”‚   â”‚   â”‚   reraise=True,                                                                                         â”‚
           â”‚   415 â”‚   â”‚   â”‚   ):                                                                                                        â”‚
           â”‚   416 â”‚   â”‚   â”‚   â”‚   with attempt:  # Retrying if ToolSelector fails to select a tool                                      â”‚
           â”‚ â± 417 â”‚   â”‚   â”‚   â”‚   â”‚   action = await agent(agent_state.messages, tools)                                                 â”‚
           â”‚   418 â”‚   â”‚   â”‚   agent_state.messages = [*agent_state.messages, action]                                                    â”‚
           â”‚   419 â”‚   â”‚   â”‚   if on_agent_action_callback:                                                                              â”‚
           â”‚   420 â”‚   â”‚   â”‚   â”‚   await on_agent_action_callback(action, agent_state)                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aviary/tools/utils.py:182 in __call__                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   179 â”‚   â”‚   â”‚   self._ledger.messages.extend(messages)                                                                    â”‚
           â”‚   180 â”‚   â”‚   â”‚   messages = self._ledger.messages                                                                          â”‚
           â”‚   181 â”‚   â”‚                                                                                                                 â”‚
           â”‚ â± 182 â”‚   â”‚   model_response = await self._bound_acompletion(                                                               â”‚
           â”‚   183 â”‚   â”‚   â”‚   messages=MessagesAdapter.dump_python(                                                                     â”‚
           â”‚   184 â”‚   â”‚   â”‚   â”‚   messages, exclude_none=True, by_alias=True                                                            â”‚
           â”‚   185 â”‚   â”‚   â”‚   ),                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:817 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    814 â”‚   â”‚   â”‚   â”‚   â”‚   original_exception=e,                                                                            â”‚
           â”‚    815 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    816 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚ â±  817 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    818 â”‚                                                                                                                    â”‚
           â”‚    819 â”‚   async def _acompletion(                                                                                          â”‚
           â”‚    820 â”‚   â”‚   self, model: str, messages: List[Dict[str, str]], **kwargs                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:793 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    790 â”‚   â”‚   â”‚   if request_priority is not None and isinstance(request_priority, int):                                   â”‚
           â”‚    791 â”‚   â”‚   â”‚   â”‚   response = await self.schedule_acompletion(**kwargs)                                                 â”‚
           â”‚    792 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â±  793 â”‚   â”‚   â”‚   â”‚   response = await self.async_function_with_fallbacks(**kwargs)                                        â”‚
           â”‚    794 â”‚   â”‚   â”‚   end_time = time.time()                                                                                   â”‚
           â”‚    795 â”‚   â”‚   â”‚   _duration = end_time - start_time                                                                        â”‚
           â”‚    796 â”‚   â”‚   â”‚   asyncio.create_task(                                                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2795 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2792 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚   2793 â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                                â”‚
           â”‚   2794 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2795 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2796 â”‚                                                                                                                    â”‚
           â”‚   2797 â”‚   def _handle_mock_testing_fallbacks(                                                                              â”‚
           â”‚   2798 â”‚   â”‚   self,                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2631 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2628 â”‚   â”‚   â”‚   â”‚   content_policy_fallbacks=content_policy_fallbacks,                                                   â”‚
           â”‚   2629 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2630 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2631 â”‚   â”‚   â”‚   response = await self.async_function_with_retries(*args, **kwargs)                                       â”‚
           â”‚   2632 â”‚   â”‚   â”‚   verbose_router_logger.debug(f"Async Response: {response}")                                               â”‚
           â”‚   2633 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2634 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2967 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2964 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "max_retries", num_retries)                                              â”‚
           â”‚   2965 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "num_retries", current_attempt)                                          â”‚
           â”‚   2966 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2967 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2968 â”‚                                                                                                                    â”‚
           â”‚   2969 â”‚   async def make_call(self, original_function: Any, *args, **kwargs):                                              â”‚
           â”‚   2970 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2879 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2876 â”‚   â”‚   â”‚   â”‚   model_group=model_group, kwargs=kwargs                                                               â”‚
           â”‚   2877 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2878 â”‚   â”‚   â”‚   # if the function call is successful, no exception will be raised and we'll                              â”‚
           â”‚        break out of the loop                                                                                                â”‚
           â”‚ â± 2879 â”‚   â”‚   â”‚   response = await self.make_call(original_function, *args, **kwargs)                                      â”‚
           â”‚   2880 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   2881 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2882 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2976 in make_call                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2973 â”‚   â”‚   model_group = kwargs.get("model")                                                                            â”‚
           â”‚   2974 â”‚   â”‚   response = original_function(*args, **kwargs)                                                                â”‚
           â”‚   2975 â”‚   â”‚   if inspect.iscoroutinefunction(response) or inspect.isawaitable(response):                                   â”‚
           â”‚ â± 2976 â”‚   â”‚   â”‚   response = await response                                                                                â”‚
           â”‚   2977 â”‚   â”‚   ## PROCESS RESPONSE HEADERS                                                                                  â”‚
           â”‚   2978 â”‚   â”‚   await self.set_response_headers(response=response, model_group=model_group)                                  â”‚
           â”‚   2979                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:947 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    944 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚    945 â”‚   â”‚   â”‚   if model_name is not None:                                                                               â”‚
           â”‚    946 â”‚   â”‚   â”‚   â”‚   self.fail_calls[model_name] += 1                                                                     â”‚
           â”‚ â±  947 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    948 â”‚                                                                                                                    â”‚
           â”‚    949 â”‚   def _update_kwargs_before_fallbacks(self, model: str, kwargs: dict) -> None:                                     â”‚
           â”‚    950 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:915 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    912 â”‚   â”‚   â”‚   â”‚   â”‚   parent_otel_span=parent_otel_span,                                                               â”‚
           â”‚    913 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    914 â”‚   â”‚   â”‚   â”‚                                                                                                        â”‚
           â”‚ â±  915 â”‚   â”‚   â”‚   â”‚   response = await _response                                                                           â”‚
           â”‚    916 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚    917 â”‚   â”‚   â”‚   ## CHECK CONTENT FILTER ERROR ##                                                                         â”‚
           â”‚    918 â”‚   â”‚   â”‚   if isinstance(response, ModelResponse):                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1175 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1172 â”‚   â”‚   â”‚   â”‚   â”‚   else:                                                                                            â”‚
           â”‚   1173 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   kwargs["model"] = context_window_fallback_dict[model]                                        â”‚
           â”‚   1174 â”‚   â”‚   â”‚   â”‚   â”‚   return await original_function(*args, **kwargs)                                                  â”‚
           â”‚ â± 1175 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   1176 â”‚                                                                                                                    â”‚
           â”‚   1177 â”‚   is_coroutine = inspect.iscoroutinefunction(original_function)                                                    â”‚
           â”‚   1178                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1031 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1028 â”‚   â”‚   â”‚   â”‚   return _caching_handler_response.final_embedding_cached_response                                     â”‚
           â”‚   1029 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1030 â”‚   â”‚   â”‚   # MODEL CALL                                                                                             â”‚
           â”‚ â± 1031 â”‚   â”‚   â”‚   result = await original_function(*args, **kwargs)                                                        â”‚
           â”‚   1032 â”‚   â”‚   â”‚   end_time = datetime.datetime.now()                                                                       â”‚
           â”‚   1033 â”‚   â”‚   â”‚   if "stream" in kwargs and kwargs["stream"] is True:                                                      â”‚
           â”‚   1034 â”‚   â”‚   â”‚   â”‚   if (                                                                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:499 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    496 â”‚   â”‚   return response                                                                                              â”‚
           â”‚    497 â”‚   except Exception as e:                                                                                           â”‚
           â”‚    498 â”‚   â”‚   custom_llm_provider = custom_llm_provider or "openai"                                                        â”‚
           â”‚ â±  499 â”‚   â”‚   raise exception_type(                                                                                        â”‚
           â”‚    500 â”‚   â”‚   â”‚   model=model,                                                                                             â”‚
           â”‚    501 â”‚   â”‚   â”‚   custom_llm_provider=custom_llm_provider,                                                                 â”‚
           â”‚    502 â”‚   â”‚   â”‚   original_exception=e,                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:212 â”‚
           â”‚ 5 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2122 â”‚   â”‚   # don't let an error with mapping interrupt the user from receiving an error                                 â”‚
           â”‚        from the llm api calls                                                                                               â”‚
           â”‚   2123 â”‚   â”‚   if exception_mapping_worked:                                                                                 â”‚
           â”‚   2124 â”‚   â”‚   â”‚   setattr(e, "litellm_response_headers", litellm_response_headers)                                         â”‚
           â”‚ â± 2125 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   2126 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   2127 â”‚   â”‚   â”‚   for error_type in litellm.LITELLM_EXCEPTION_TYPES:                                                       â”‚
           â”‚   2128 â”‚   â”‚   â”‚   â”‚   if isinstance(e, error_type):                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:210 â”‚
           â”‚ 1 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2098 â”‚   â”‚   â”‚   â”‚   â”‚   request=original_exception.request,                                                              â”‚
           â”‚   2099 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚   2100 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â± 2101 â”‚   â”‚   â”‚   â”‚   raise APIConnectionError(                                                                            â”‚
           â”‚   2102 â”‚   â”‚   â”‚   â”‚   â”‚   message="{}\n{}".format(                                                                         â”‚
           â”‚   2103 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   str(original_exception), traceback.format_exc()                                              â”‚
           â”‚   2104 â”‚   â”‚   â”‚   â”‚   â”‚   ),                                                                                               â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           APIConnectionError: litellm.APIConnectionError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1109, in                 
           _wrap_create_connection                                                                                                        
               sock = await aiohappyeyeballs.start_connection(                                                                            
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                            
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py", line 123, in              
           start_connection                                                                                                               
               raise OSError(first_errno, msg)                                                                                            
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py", line 477, in acompletion           
               response = await init_response                                                                                             
                          ^^^^^^^^^^^^^^^^^^^                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 566, in                
           ollama_acompletion                                                                                                             
               raise e  # don't use verbose_logger.exception, if exception is raised                                                      
               ^^^^^^^                                                                                                                    
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 507, in                
           ollama_acompletion                                                                                                             
               resp = await session.post(url, json=data)                                                                                  
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                  
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py", line 696, in _request            
               conn = await self._connector.connect(                                                                                      
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 544, in connect          
               proto = await self._create_connection(req, traces, timeout)                                                                
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1050, in                 
           _create_connection                                                                                                             
               _, proto = await self._create_direct_connection(req, traces, timeout)                                                      
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1394, in                 
           _create_direct_connection                                                                                                      
               raise last_exc                                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1363, in                 
           _create_direct_connection                                                                                                      
               transp, proto = await self._wrap_create_connection(                                                                        
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                        
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1124, in                 
           _wrap_create_connection                                                                                                        
               raise client_error(req.connection_key, exc) from exc                                                                       
           aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
                                                                                                                                          
           Received Model Group=ollama/llama3.2                                                                                           
           Available Model Group Fallbacks=None LiteLLM Retried: 2 times, LiteLLM Max Retries: 3                                          
[00:59:58] Answer:                                                                                                                        


 ANSWERING QUESTION: sciqag_question_76.json
 ----------------------------- 



[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.

[01:00:18] Trajectory failed.                                                                                                             
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1109 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1106 â”‚   â”‚   â”‚   async with ceil_timeout(                                                                                 â”‚
           â”‚   1107 â”‚   â”‚   â”‚   â”‚   timeout.sock_connect, ceil_threshold=timeout.ceil_threshold                                          â”‚
           â”‚   1108 â”‚   â”‚   â”‚   ):                                                                                                       â”‚
           â”‚ â± 1109 â”‚   â”‚   â”‚   â”‚   sock = await aiohappyeyeballs.start_connection(                                                      â”‚
           â”‚   1110 â”‚   â”‚   â”‚   â”‚   â”‚   addr_infos=addr_infos,                                                                           â”‚
           â”‚   1111 â”‚   â”‚   â”‚   â”‚   â”‚   local_addr_infos=self._local_addr_infos,                                                         â”‚
           â”‚   1112 â”‚   â”‚   â”‚   â”‚   â”‚   happy_eyeballs_delay=self._happy_eyeballs_delay,                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py:123 in start_connection          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   120 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, OSError) and exc.errno == first_errno                                         â”‚
           â”‚   121 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   for exc in all_exceptions                                                                     â”‚
           â”‚   122 â”‚   â”‚   â”‚   â”‚   â”‚   ):                                                                                                â”‚
           â”‚ â± 123 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   raise OSError(first_errno, msg)                                                               â”‚
           â”‚   124 â”‚   â”‚   â”‚   â”‚   elif isinstance(first_exception, RuntimeError) and all(                                               â”‚
           â”‚   125 â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, RuntimeError) for exc in all_exceptions                                           â”‚
           â”‚   126 â”‚   â”‚   â”‚   â”‚   ):                                                                                                    â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:477 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    474 â”‚   â”‚   â”‚   â”‚   â”‚   response = ModelResponse(**init_response)                                                        â”‚
           â”‚    475 â”‚   â”‚   â”‚   â”‚   response = init_response                                                                             â”‚
           â”‚    476 â”‚   â”‚   â”‚   elif asyncio.iscoroutine(init_response):                                                                 â”‚
           â”‚ â±  477 â”‚   â”‚   â”‚   â”‚   response = await init_response                                                                       â”‚
           â”‚    478 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚    479 â”‚   â”‚   â”‚   â”‚   response = init_response  # type: ignore                                                             â”‚
           â”‚    480                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:566 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   563 â”‚   â”‚   â”‚   )                                                                                                         â”‚
           â”‚   564 â”‚   â”‚   â”‚   return model_response                                                                                     â”‚
           â”‚   565 â”‚   except Exception as e:                                                                                            â”‚
           â”‚ â± 566 â”‚   â”‚   raise e  # don't use verbose_logger.exception, if exception is raised                                         â”‚
           â”‚   567                                                                                                                       â”‚
           â”‚   568                                                                                                                       â”‚
           â”‚   569 async def ollama_aembeddings(                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:507 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   504 â”‚   try:                                                                                                              â”‚
           â”‚   505 â”‚   â”‚   timeout = aiohttp.ClientTimeout(total=litellm.request_timeout)  # 10 minutes                                  â”‚
           â”‚   506 â”‚   â”‚   async with aiohttp.ClientSession(timeout=timeout) as session:                                                 â”‚
           â”‚ â± 507 â”‚   â”‚   â”‚   resp = await session.post(url, json=data)                                                                 â”‚
           â”‚   508 â”‚   â”‚   â”‚                                                                                                             â”‚
           â”‚   509 â”‚   â”‚   â”‚   if resp.status != 200:                                                                                    â”‚
           â”‚   510 â”‚   â”‚   â”‚   â”‚   text = await resp.text()                                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py:696 in _request                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚    693 â”‚   â”‚   â”‚   â”‚   â”‚                                                                                                    â”‚
           â”‚    694 â”‚   â”‚   â”‚   â”‚   â”‚   # connection timeout                                                                             â”‚
           â”‚    695 â”‚   â”‚   â”‚   â”‚   â”‚   try:                                                                                             â”‚
           â”‚ â±  696 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   conn = await self._connector.connect(                                                        â”‚
           â”‚    697 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   req, traces=traces, timeout=real_timeout                                                 â”‚
           â”‚    698 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚    699 â”‚   â”‚   â”‚   â”‚   â”‚   except asyncio.TimeoutError as exc:                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:544 in connect                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚    541 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    542 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    543 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_start()                                                   â”‚
           â”‚ â±  544 â”‚   â”‚   â”‚   â”‚   proto = await self._create_connection(req, traces, timeout)                                          â”‚
           â”‚    545 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    546 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    547 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_end()                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1050 in _create_connection           â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1047 â”‚   â”‚   if req.proxy:                                                                                                â”‚
           â”‚   1048 â”‚   â”‚   â”‚   _, proto = await self._create_proxy_connection(req, traces, timeout)                                     â”‚
           â”‚   1049 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚ â± 1050 â”‚   â”‚   â”‚   _, proto = await self._create_direct_connection(req, traces, timeout)                                    â”‚
           â”‚   1051 â”‚   â”‚                                                                                                                â”‚
           â”‚   1052 â”‚   â”‚   return proto                                                                                                 â”‚
           â”‚   1053                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1394 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1391 â”‚   â”‚   â”‚   return transp, proto                                                                                     â”‚
           â”‚   1392 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   1393 â”‚   â”‚   â”‚   assert last_exc is not None                                                                              â”‚
           â”‚ â± 1394 â”‚   â”‚   â”‚   raise last_exc                                                                                           â”‚
           â”‚   1395 â”‚                                                                                                                    â”‚
           â”‚   1396 â”‚   async def _create_proxy_connection(                                                                              â”‚
           â”‚   1397 â”‚   â”‚   self, req: ClientRequest, traces: List["Trace"], timeout: "ClientTimeout"                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1363 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1360 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   1361 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1362 â”‚   â”‚   â”‚   try:                                                                                                     â”‚
           â”‚ â± 1363 â”‚   â”‚   â”‚   â”‚   transp, proto = await self._wrap_create_connection(                                                  â”‚
           â”‚   1364 â”‚   â”‚   â”‚   â”‚   â”‚   self._factory,                                                                                   â”‚
           â”‚   1365 â”‚   â”‚   â”‚   â”‚   â”‚   timeout=timeout,                                                                                 â”‚
           â”‚   1366 â”‚   â”‚   â”‚   â”‚   â”‚   ssl=sslcontext,                                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1124 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1121 â”‚   â”‚   except OSError as exc:                                                                                       â”‚
           â”‚   1122 â”‚   â”‚   â”‚   if exc.errno is None and isinstance(exc, asyncio.TimeoutError):                                          â”‚
           â”‚   1123 â”‚   â”‚   â”‚   â”‚   raise                                                                                                â”‚
           â”‚ â± 1124 â”‚   â”‚   â”‚   raise client_error(req.connection_key, exc) from exc                                                     â”‚
           â”‚   1125 â”‚                                                                                                                    â”‚
           â”‚   1126 â”‚   async def _wrap_existing_connection(                                                                             â”‚
           â”‚   1127 â”‚   â”‚   self,                                                                                                        â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno 111] Connect call failed 
           ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                                                    
                                                                                                                                          
           During handling of the above exception, another exception occurred:                                                            
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:276 in _run_with_timeout_failure                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   273 ) -> tuple[PQASession, AgentStatus]:                                                                                  â”‚
           â”‚   274 â”‚   try:                                                                                                              â”‚
           â”‚   275 â”‚   â”‚   async with asyncio.timeout(query.settings.agent.timeout):                                                     â”‚
           â”‚ â± 276 â”‚   â”‚   â”‚   status = await rollout()                                                                                  â”‚
           â”‚   277 â”‚   except TimeoutError:                                                                                              â”‚
           â”‚   278 â”‚   â”‚   logger.warning(                                                                                               â”‚
           â”‚   279 â”‚   â”‚   â”‚   f"Agent timeout after {query.settings.agent.timeout}-sec, just answering."                                â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:410 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   407 â”‚   â”‚   â”‚   â”‚   )                                                                                                     â”‚
           â”‚   408 â”‚   â”‚   â”‚   â”‚   return AgentStatus.TRUNCATED                                                                          â”‚
           â”‚   409 â”‚   â”‚   â”‚   agent_state.messages += obs                                                                               â”‚
           â”‚ â± 410 â”‚   â”‚   â”‚   for attempt in Retrying(                                                                                  â”‚
           â”‚   411 â”‚   â”‚   â”‚   â”‚   stop=stop_after_attempt(5),                                                                           â”‚
           â”‚   412 â”‚   â”‚   â”‚   â”‚   retry=retry_if_exception_type(MalformedMessageError),                                                 â”‚
           â”‚   413 â”‚   â”‚   â”‚   â”‚   before_sleep=before_sleep_log(logger, logging.WARNING),                                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:443 in __iter__                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   440 â”‚   â”‚                                                                                                                 â”‚
           â”‚   441 â”‚   â”‚   retry_state = RetryCallState(self, fn=None, args=(), kwargs={})                                               â”‚
           â”‚   442 â”‚   â”‚   while True:                                                                                                   â”‚
           â”‚ â± 443 â”‚   â”‚   â”‚   do = self.iter(retry_state=retry_state)                                                                   â”‚
           â”‚   444 â”‚   â”‚   â”‚   if isinstance(do, DoAttempt):                                                                             â”‚
           â”‚   445 â”‚   â”‚   â”‚   â”‚   yield AttemptManager(retry_state=retry_state)                                                         â”‚
           â”‚   446 â”‚   â”‚   â”‚   elif isinstance(do, DoSleep):                                                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:376 in iter                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   373 â”‚   â”‚   self._begin_iter(retry_state)                                                                                 â”‚
           â”‚   374 â”‚   â”‚   result = None                                                                                                 â”‚
           â”‚   375 â”‚   â”‚   for action in self.iter_state.actions:                                                                        â”‚
           â”‚ â± 376 â”‚   â”‚   â”‚   result = action(retry_state)                                                                              â”‚
           â”‚   377 â”‚   â”‚   return result                                                                                                 â”‚
           â”‚   378 â”‚                                                                                                                     â”‚
           â”‚   379 â”‚   def _begin_iter(self, retry_state: "RetryCallState") -> None:  # noqa                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:398 in <lambda>                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   395 â”‚                                                                                                                     â”‚
           â”‚   396 â”‚   def _post_retry_check_actions(self, retry_state: "RetryCallState") -> None:                                       â”‚
           â”‚   397 â”‚   â”‚   if not (self.iter_state.is_explicit_retry or self.iter_state.retry_run_result):                               â”‚
           â”‚ â± 398 â”‚   â”‚   â”‚   self._add_action_func(lambda rs: rs.outcome.result())                                                     â”‚
           â”‚   399 â”‚   â”‚   â”‚   return                                                                                                    â”‚
           â”‚   400 â”‚   â”‚                                                                                                                 â”‚
           â”‚   401 â”‚   â”‚   if self.after is not None:                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:449 in result                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚   446 â”‚   â”‚   â”‚   â”‚   if self._state in [CANCELLED, CANCELLED_AND_NOTIFIED]:                                                â”‚
           â”‚   447 â”‚   â”‚   â”‚   â”‚   â”‚   raise CancelledError()                                                                            â”‚
           â”‚   448 â”‚   â”‚   â”‚   â”‚   elif self._state == FINISHED:                                                                         â”‚
           â”‚ â± 449 â”‚   â”‚   â”‚   â”‚   â”‚   return self.__get_result()                                                                        â”‚
           â”‚   450 â”‚   â”‚   â”‚   â”‚                                                                                                         â”‚
           â”‚   451 â”‚   â”‚   â”‚   â”‚   self._condition.wait(timeout)                                                                         â”‚
           â”‚   452                                                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:401 in __get_result                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   398 â”‚   def __get_result(self):                                                                                           â”‚
           â”‚   399 â”‚   â”‚   if self._exception:                                                                                           â”‚
           â”‚   400 â”‚   â”‚   â”‚   try:                                                                                                      â”‚
           â”‚ â± 401 â”‚   â”‚   â”‚   â”‚   raise self._exception                                                                                 â”‚
           â”‚   402 â”‚   â”‚   â”‚   finally:                                                                                                  â”‚
           â”‚   403 â”‚   â”‚   â”‚   â”‚   # Break a reference cycle with the exception in self._exception                                       â”‚
           â”‚   404 â”‚   â”‚   â”‚   â”‚   self = None                                                                                           â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:417 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   414 â”‚   â”‚   â”‚   â”‚   reraise=True,                                                                                         â”‚
           â”‚   415 â”‚   â”‚   â”‚   ):                                                                                                        â”‚
           â”‚   416 â”‚   â”‚   â”‚   â”‚   with attempt:  # Retrying if ToolSelector fails to select a tool                                      â”‚
           â”‚ â± 417 â”‚   â”‚   â”‚   â”‚   â”‚   action = await agent(agent_state.messages, tools)                                                 â”‚
           â”‚   418 â”‚   â”‚   â”‚   agent_state.messages = [*agent_state.messages, action]                                                    â”‚
           â”‚   419 â”‚   â”‚   â”‚   if on_agent_action_callback:                                                                              â”‚
           â”‚   420 â”‚   â”‚   â”‚   â”‚   await on_agent_action_callback(action, agent_state)                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aviary/tools/utils.py:182 in __call__                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   179 â”‚   â”‚   â”‚   self._ledger.messages.extend(messages)                                                                    â”‚
           â”‚   180 â”‚   â”‚   â”‚   messages = self._ledger.messages                                                                          â”‚
           â”‚   181 â”‚   â”‚                                                                                                                 â”‚
           â”‚ â± 182 â”‚   â”‚   model_response = await self._bound_acompletion(                                                               â”‚
           â”‚   183 â”‚   â”‚   â”‚   messages=MessagesAdapter.dump_python(                                                                     â”‚
           â”‚   184 â”‚   â”‚   â”‚   â”‚   messages, exclude_none=True, by_alias=True                                                            â”‚
           â”‚   185 â”‚   â”‚   â”‚   ),                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:817 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    814 â”‚   â”‚   â”‚   â”‚   â”‚   original_exception=e,                                                                            â”‚
           â”‚    815 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    816 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚ â±  817 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    818 â”‚                                                                                                                    â”‚
           â”‚    819 â”‚   async def _acompletion(                                                                                          â”‚
           â”‚    820 â”‚   â”‚   self, model: str, messages: List[Dict[str, str]], **kwargs                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:793 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    790 â”‚   â”‚   â”‚   if request_priority is not None and isinstance(request_priority, int):                                   â”‚
           â”‚    791 â”‚   â”‚   â”‚   â”‚   response = await self.schedule_acompletion(**kwargs)                                                 â”‚
           â”‚    792 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â±  793 â”‚   â”‚   â”‚   â”‚   response = await self.async_function_with_fallbacks(**kwargs)                                        â”‚
           â”‚    794 â”‚   â”‚   â”‚   end_time = time.time()                                                                                   â”‚
           â”‚    795 â”‚   â”‚   â”‚   _duration = end_time - start_time                                                                        â”‚
           â”‚    796 â”‚   â”‚   â”‚   asyncio.create_task(                                                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2795 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2792 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚   2793 â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                                â”‚
           â”‚   2794 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2795 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2796 â”‚                                                                                                                    â”‚
           â”‚   2797 â”‚   def _handle_mock_testing_fallbacks(                                                                              â”‚
           â”‚   2798 â”‚   â”‚   self,                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2631 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2628 â”‚   â”‚   â”‚   â”‚   content_policy_fallbacks=content_policy_fallbacks,                                                   â”‚
           â”‚   2629 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2630 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2631 â”‚   â”‚   â”‚   response = await self.async_function_with_retries(*args, **kwargs)                                       â”‚
           â”‚   2632 â”‚   â”‚   â”‚   verbose_router_logger.debug(f"Async Response: {response}")                                               â”‚
           â”‚   2633 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2634 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2967 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2964 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "max_retries", num_retries)                                              â”‚
           â”‚   2965 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "num_retries", current_attempt)                                          â”‚
           â”‚   2966 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2967 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2968 â”‚                                                                                                                    â”‚
           â”‚   2969 â”‚   async def make_call(self, original_function: Any, *args, **kwargs):                                              â”‚
           â”‚   2970 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2879 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2876 â”‚   â”‚   â”‚   â”‚   model_group=model_group, kwargs=kwargs                                                               â”‚
           â”‚   2877 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2878 â”‚   â”‚   â”‚   # if the function call is successful, no exception will be raised and we'll                              â”‚
           â”‚        break out of the loop                                                                                                â”‚
           â”‚ â± 2879 â”‚   â”‚   â”‚   response = await self.make_call(original_function, *args, **kwargs)                                      â”‚
           â”‚   2880 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   2881 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2882 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2976 in make_call                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2973 â”‚   â”‚   model_group = kwargs.get("model")                                                                            â”‚
           â”‚   2974 â”‚   â”‚   response = original_function(*args, **kwargs)                                                                â”‚
           â”‚   2975 â”‚   â”‚   if inspect.iscoroutinefunction(response) or inspect.isawaitable(response):                                   â”‚
           â”‚ â± 2976 â”‚   â”‚   â”‚   response = await response                                                                                â”‚
           â”‚   2977 â”‚   â”‚   ## PROCESS RESPONSE HEADERS                                                                                  â”‚
           â”‚   2978 â”‚   â”‚   await self.set_response_headers(response=response, model_group=model_group)                                  â”‚
           â”‚   2979                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:947 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    944 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚    945 â”‚   â”‚   â”‚   if model_name is not None:                                                                               â”‚
           â”‚    946 â”‚   â”‚   â”‚   â”‚   self.fail_calls[model_name] += 1                                                                     â”‚
           â”‚ â±  947 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    948 â”‚                                                                                                                    â”‚
           â”‚    949 â”‚   def _update_kwargs_before_fallbacks(self, model: str, kwargs: dict) -> None:                                     â”‚
           â”‚    950 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:915 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    912 â”‚   â”‚   â”‚   â”‚   â”‚   parent_otel_span=parent_otel_span,                                                               â”‚
           â”‚    913 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    914 â”‚   â”‚   â”‚   â”‚                                                                                                        â”‚
           â”‚ â±  915 â”‚   â”‚   â”‚   â”‚   response = await _response                                                                           â”‚
           â”‚    916 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚    917 â”‚   â”‚   â”‚   ## CHECK CONTENT FILTER ERROR ##                                                                         â”‚
           â”‚    918 â”‚   â”‚   â”‚   if isinstance(response, ModelResponse):                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1175 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1172 â”‚   â”‚   â”‚   â”‚   â”‚   else:                                                                                            â”‚
           â”‚   1173 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   kwargs["model"] = context_window_fallback_dict[model]                                        â”‚
           â”‚   1174 â”‚   â”‚   â”‚   â”‚   â”‚   return await original_function(*args, **kwargs)                                                  â”‚
           â”‚ â± 1175 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   1176 â”‚                                                                                                                    â”‚
           â”‚   1177 â”‚   is_coroutine = inspect.iscoroutinefunction(original_function)                                                    â”‚
           â”‚   1178                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1031 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1028 â”‚   â”‚   â”‚   â”‚   return _caching_handler_response.final_embedding_cached_response                                     â”‚
           â”‚   1029 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1030 â”‚   â”‚   â”‚   # MODEL CALL                                                                                             â”‚
           â”‚ â± 1031 â”‚   â”‚   â”‚   result = await original_function(*args, **kwargs)                                                        â”‚
           â”‚   1032 â”‚   â”‚   â”‚   end_time = datetime.datetime.now()                                                                       â”‚
           â”‚   1033 â”‚   â”‚   â”‚   if "stream" in kwargs and kwargs["stream"] is True:                                                      â”‚
           â”‚   1034 â”‚   â”‚   â”‚   â”‚   if (                                                                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:499 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    496 â”‚   â”‚   return response                                                                                              â”‚
           â”‚    497 â”‚   except Exception as e:                                                                                           â”‚
           â”‚    498 â”‚   â”‚   custom_llm_provider = custom_llm_provider or "openai"                                                        â”‚
           â”‚ â±  499 â”‚   â”‚   raise exception_type(                                                                                        â”‚
           â”‚    500 â”‚   â”‚   â”‚   model=model,                                                                                             â”‚
           â”‚    501 â”‚   â”‚   â”‚   custom_llm_provider=custom_llm_provider,                                                                 â”‚
           â”‚    502 â”‚   â”‚   â”‚   original_exception=e,                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:212 â”‚
           â”‚ 5 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2122 â”‚   â”‚   # don't let an error with mapping interrupt the user from receiving an error                                 â”‚
           â”‚        from the llm api calls                                                                                               â”‚
           â”‚   2123 â”‚   â”‚   if exception_mapping_worked:                                                                                 â”‚
           â”‚   2124 â”‚   â”‚   â”‚   setattr(e, "litellm_response_headers", litellm_response_headers)                                         â”‚
           â”‚ â± 2125 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   2126 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   2127 â”‚   â”‚   â”‚   for error_type in litellm.LITELLM_EXCEPTION_TYPES:                                                       â”‚
           â”‚   2128 â”‚   â”‚   â”‚   â”‚   if isinstance(e, error_type):                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:210 â”‚
           â”‚ 1 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2098 â”‚   â”‚   â”‚   â”‚   â”‚   request=original_exception.request,                                                              â”‚
           â”‚   2099 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚   2100 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â± 2101 â”‚   â”‚   â”‚   â”‚   raise APIConnectionError(                                                                            â”‚
           â”‚   2102 â”‚   â”‚   â”‚   â”‚   â”‚   message="{}\n{}".format(                                                                         â”‚
           â”‚   2103 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   str(original_exception), traceback.format_exc()                                              â”‚
           â”‚   2104 â”‚   â”‚   â”‚   â”‚   â”‚   ),                                                                                               â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           APIConnectionError: litellm.APIConnectionError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1109, in                 
           _wrap_create_connection                                                                                                        
               sock = await aiohappyeyeballs.start_connection(                                                                            
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                            
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py", line 123, in              
           start_connection                                                                                                               
               raise OSError(first_errno, msg)                                                                                            
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py", line 477, in acompletion           
               response = await init_response                                                                                             
                          ^^^^^^^^^^^^^^^^^^^                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 566, in                
           ollama_acompletion                                                                                                             
               raise e  # don't use verbose_logger.exception, if exception is raised                                                      
               ^^^^^^^                                                                                                                    
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 507, in                
           ollama_acompletion                                                                                                             
               resp = await session.post(url, json=data)                                                                                  
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                  
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py", line 696, in _request            
               conn = await self._connector.connect(                                                                                      
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 544, in connect          
               proto = await self._create_connection(req, traces, timeout)                                                                
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1050, in                 
           _create_connection                                                                                                             
               _, proto = await self._create_direct_connection(req, traces, timeout)                                                      
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1394, in                 
           _create_direct_connection                                                                                                      
               raise last_exc                                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1363, in                 
           _create_direct_connection                                                                                                      
               transp, proto = await self._wrap_create_connection(                                                                        
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                        
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1124, in                 
           _wrap_create_connection                                                                                                        
               raise client_error(req.connection_key, exc) from exc                                                                       
           aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
                                                                                                                                          
           Received Model Group=ollama/llama3.2                                                                                           
           Available Model Group Fallbacks=None LiteLLM Retried: 2 times, LiteLLM Max Retries: 3                                          
[01:00:20] Answer:                                                                                                                        


 ANSWERING QUESTION: sciqag_question_77.json
 ----------------------------- 



[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.

[01:00:41] Trajectory failed.                                                                                                             
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1109 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1106 â”‚   â”‚   â”‚   async with ceil_timeout(                                                                                 â”‚
           â”‚   1107 â”‚   â”‚   â”‚   â”‚   timeout.sock_connect, ceil_threshold=timeout.ceil_threshold                                          â”‚
           â”‚   1108 â”‚   â”‚   â”‚   ):                                                                                                       â”‚
           â”‚ â± 1109 â”‚   â”‚   â”‚   â”‚   sock = await aiohappyeyeballs.start_connection(                                                      â”‚
           â”‚   1110 â”‚   â”‚   â”‚   â”‚   â”‚   addr_infos=addr_infos,                                                                           â”‚
           â”‚   1111 â”‚   â”‚   â”‚   â”‚   â”‚   local_addr_infos=self._local_addr_infos,                                                         â”‚
           â”‚   1112 â”‚   â”‚   â”‚   â”‚   â”‚   happy_eyeballs_delay=self._happy_eyeballs_delay,                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py:123 in start_connection          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   120 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, OSError) and exc.errno == first_errno                                         â”‚
           â”‚   121 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   for exc in all_exceptions                                                                     â”‚
           â”‚   122 â”‚   â”‚   â”‚   â”‚   â”‚   ):                                                                                                â”‚
           â”‚ â± 123 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   raise OSError(first_errno, msg)                                                               â”‚
           â”‚   124 â”‚   â”‚   â”‚   â”‚   elif isinstance(first_exception, RuntimeError) and all(                                               â”‚
           â”‚   125 â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, RuntimeError) for exc in all_exceptions                                           â”‚
           â”‚   126 â”‚   â”‚   â”‚   â”‚   ):                                                                                                    â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:477 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    474 â”‚   â”‚   â”‚   â”‚   â”‚   response = ModelResponse(**init_response)                                                        â”‚
           â”‚    475 â”‚   â”‚   â”‚   â”‚   response = init_response                                                                             â”‚
           â”‚    476 â”‚   â”‚   â”‚   elif asyncio.iscoroutine(init_response):                                                                 â”‚
           â”‚ â±  477 â”‚   â”‚   â”‚   â”‚   response = await init_response                                                                       â”‚
           â”‚    478 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚    479 â”‚   â”‚   â”‚   â”‚   response = init_response  # type: ignore                                                             â”‚
           â”‚    480                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:566 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   563 â”‚   â”‚   â”‚   )                                                                                                         â”‚
           â”‚   564 â”‚   â”‚   â”‚   return model_response                                                                                     â”‚
           â”‚   565 â”‚   except Exception as e:                                                                                            â”‚
           â”‚ â± 566 â”‚   â”‚   raise e  # don't use verbose_logger.exception, if exception is raised                                         â”‚
           â”‚   567                                                                                                                       â”‚
           â”‚   568                                                                                                                       â”‚
           â”‚   569 async def ollama_aembeddings(                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:507 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   504 â”‚   try:                                                                                                              â”‚
           â”‚   505 â”‚   â”‚   timeout = aiohttp.ClientTimeout(total=litellm.request_timeout)  # 10 minutes                                  â”‚
           â”‚   506 â”‚   â”‚   async with aiohttp.ClientSession(timeout=timeout) as session:                                                 â”‚
           â”‚ â± 507 â”‚   â”‚   â”‚   resp = await session.post(url, json=data)                                                                 â”‚
           â”‚   508 â”‚   â”‚   â”‚                                                                                                             â”‚
           â”‚   509 â”‚   â”‚   â”‚   if resp.status != 200:                                                                                    â”‚
           â”‚   510 â”‚   â”‚   â”‚   â”‚   text = await resp.text()                                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py:696 in _request                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚    693 â”‚   â”‚   â”‚   â”‚   â”‚                                                                                                    â”‚
           â”‚    694 â”‚   â”‚   â”‚   â”‚   â”‚   # connection timeout                                                                             â”‚
           â”‚    695 â”‚   â”‚   â”‚   â”‚   â”‚   try:                                                                                             â”‚
           â”‚ â±  696 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   conn = await self._connector.connect(                                                        â”‚
           â”‚    697 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   req, traces=traces, timeout=real_timeout                                                 â”‚
           â”‚    698 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚    699 â”‚   â”‚   â”‚   â”‚   â”‚   except asyncio.TimeoutError as exc:                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:544 in connect                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚    541 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    542 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    543 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_start()                                                   â”‚
           â”‚ â±  544 â”‚   â”‚   â”‚   â”‚   proto = await self._create_connection(req, traces, timeout)                                          â”‚
           â”‚    545 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    546 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    547 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_end()                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1050 in _create_connection           â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1047 â”‚   â”‚   if req.proxy:                                                                                                â”‚
           â”‚   1048 â”‚   â”‚   â”‚   _, proto = await self._create_proxy_connection(req, traces, timeout)                                     â”‚
           â”‚   1049 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚ â± 1050 â”‚   â”‚   â”‚   _, proto = await self._create_direct_connection(req, traces, timeout)                                    â”‚
           â”‚   1051 â”‚   â”‚                                                                                                                â”‚
           â”‚   1052 â”‚   â”‚   return proto                                                                                                 â”‚
           â”‚   1053                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1394 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1391 â”‚   â”‚   â”‚   return transp, proto                                                                                     â”‚
           â”‚   1392 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   1393 â”‚   â”‚   â”‚   assert last_exc is not None                                                                              â”‚
           â”‚ â± 1394 â”‚   â”‚   â”‚   raise last_exc                                                                                           â”‚
           â”‚   1395 â”‚                                                                                                                    â”‚
           â”‚   1396 â”‚   async def _create_proxy_connection(                                                                              â”‚
           â”‚   1397 â”‚   â”‚   self, req: ClientRequest, traces: List["Trace"], timeout: "ClientTimeout"                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1363 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1360 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   1361 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1362 â”‚   â”‚   â”‚   try:                                                                                                     â”‚
           â”‚ â± 1363 â”‚   â”‚   â”‚   â”‚   transp, proto = await self._wrap_create_connection(                                                  â”‚
           â”‚   1364 â”‚   â”‚   â”‚   â”‚   â”‚   self._factory,                                                                                   â”‚
           â”‚   1365 â”‚   â”‚   â”‚   â”‚   â”‚   timeout=timeout,                                                                                 â”‚
           â”‚   1366 â”‚   â”‚   â”‚   â”‚   â”‚   ssl=sslcontext,                                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1124 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1121 â”‚   â”‚   except OSError as exc:                                                                                       â”‚
           â”‚   1122 â”‚   â”‚   â”‚   if exc.errno is None and isinstance(exc, asyncio.TimeoutError):                                          â”‚
           â”‚   1123 â”‚   â”‚   â”‚   â”‚   raise                                                                                                â”‚
           â”‚ â± 1124 â”‚   â”‚   â”‚   raise client_error(req.connection_key, exc) from exc                                                     â”‚
           â”‚   1125 â”‚                                                                                                                    â”‚
           â”‚   1126 â”‚   async def _wrap_existing_connection(                                                                             â”‚
           â”‚   1127 â”‚   â”‚   self,                                                                                                        â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno 111] Connect call failed 
           ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                                                    
                                                                                                                                          
           During handling of the above exception, another exception occurred:                                                            
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:276 in _run_with_timeout_failure                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   273 ) -> tuple[PQASession, AgentStatus]:                                                                                  â”‚
           â”‚   274 â”‚   try:                                                                                                              â”‚
           â”‚   275 â”‚   â”‚   async with asyncio.timeout(query.settings.agent.timeout):                                                     â”‚
           â”‚ â± 276 â”‚   â”‚   â”‚   status = await rollout()                                                                                  â”‚
           â”‚   277 â”‚   except TimeoutError:                                                                                              â”‚
           â”‚   278 â”‚   â”‚   logger.warning(                                                                                               â”‚
           â”‚   279 â”‚   â”‚   â”‚   f"Agent timeout after {query.settings.agent.timeout}-sec, just answering."                                â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:410 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   407 â”‚   â”‚   â”‚   â”‚   )                                                                                                     â”‚
           â”‚   408 â”‚   â”‚   â”‚   â”‚   return AgentStatus.TRUNCATED                                                                          â”‚
           â”‚   409 â”‚   â”‚   â”‚   agent_state.messages += obs                                                                               â”‚
           â”‚ â± 410 â”‚   â”‚   â”‚   for attempt in Retrying(                                                                                  â”‚
           â”‚   411 â”‚   â”‚   â”‚   â”‚   stop=stop_after_attempt(5),                                                                           â”‚
           â”‚   412 â”‚   â”‚   â”‚   â”‚   retry=retry_if_exception_type(MalformedMessageError),                                                 â”‚
           â”‚   413 â”‚   â”‚   â”‚   â”‚   before_sleep=before_sleep_log(logger, logging.WARNING),                                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:443 in __iter__                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   440 â”‚   â”‚                                                                                                                 â”‚
           â”‚   441 â”‚   â”‚   retry_state = RetryCallState(self, fn=None, args=(), kwargs={})                                               â”‚
           â”‚   442 â”‚   â”‚   while True:                                                                                                   â”‚
           â”‚ â± 443 â”‚   â”‚   â”‚   do = self.iter(retry_state=retry_state)                                                                   â”‚
           â”‚   444 â”‚   â”‚   â”‚   if isinstance(do, DoAttempt):                                                                             â”‚
           â”‚   445 â”‚   â”‚   â”‚   â”‚   yield AttemptManager(retry_state=retry_state)                                                         â”‚
           â”‚   446 â”‚   â”‚   â”‚   elif isinstance(do, DoSleep):                                                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:376 in iter                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   373 â”‚   â”‚   self._begin_iter(retry_state)                                                                                 â”‚
           â”‚   374 â”‚   â”‚   result = None                                                                                                 â”‚
           â”‚   375 â”‚   â”‚   for action in self.iter_state.actions:                                                                        â”‚
           â”‚ â± 376 â”‚   â”‚   â”‚   result = action(retry_state)                                                                              â”‚
           â”‚   377 â”‚   â”‚   return result                                                                                                 â”‚
           â”‚   378 â”‚                                                                                                                     â”‚
           â”‚   379 â”‚   def _begin_iter(self, retry_state: "RetryCallState") -> None:  # noqa                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:398 in <lambda>                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   395 â”‚                                                                                                                     â”‚
           â”‚   396 â”‚   def _post_retry_check_actions(self, retry_state: "RetryCallState") -> None:                                       â”‚
           â”‚   397 â”‚   â”‚   if not (self.iter_state.is_explicit_retry or self.iter_state.retry_run_result):                               â”‚
           â”‚ â± 398 â”‚   â”‚   â”‚   self._add_action_func(lambda rs: rs.outcome.result())                                                     â”‚
           â”‚   399 â”‚   â”‚   â”‚   return                                                                                                    â”‚
           â”‚   400 â”‚   â”‚                                                                                                                 â”‚
           â”‚   401 â”‚   â”‚   if self.after is not None:                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:449 in result                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚   446 â”‚   â”‚   â”‚   â”‚   if self._state in [CANCELLED, CANCELLED_AND_NOTIFIED]:                                                â”‚
           â”‚   447 â”‚   â”‚   â”‚   â”‚   â”‚   raise CancelledError()                                                                            â”‚
           â”‚   448 â”‚   â”‚   â”‚   â”‚   elif self._state == FINISHED:                                                                         â”‚
           â”‚ â± 449 â”‚   â”‚   â”‚   â”‚   â”‚   return self.__get_result()                                                                        â”‚
           â”‚   450 â”‚   â”‚   â”‚   â”‚                                                                                                         â”‚
           â”‚   451 â”‚   â”‚   â”‚   â”‚   self._condition.wait(timeout)                                                                         â”‚
           â”‚   452                                                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:401 in __get_result                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   398 â”‚   def __get_result(self):                                                                                           â”‚
           â”‚   399 â”‚   â”‚   if self._exception:                                                                                           â”‚
           â”‚   400 â”‚   â”‚   â”‚   try:                                                                                                      â”‚
           â”‚ â± 401 â”‚   â”‚   â”‚   â”‚   raise self._exception                                                                                 â”‚
           â”‚   402 â”‚   â”‚   â”‚   finally:                                                                                                  â”‚
           â”‚   403 â”‚   â”‚   â”‚   â”‚   # Break a reference cycle with the exception in self._exception                                       â”‚
           â”‚   404 â”‚   â”‚   â”‚   â”‚   self = None                                                                                           â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:417 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   414 â”‚   â”‚   â”‚   â”‚   reraise=True,                                                                                         â”‚
           â”‚   415 â”‚   â”‚   â”‚   ):                                                                                                        â”‚
           â”‚   416 â”‚   â”‚   â”‚   â”‚   with attempt:  # Retrying if ToolSelector fails to select a tool                                      â”‚
           â”‚ â± 417 â”‚   â”‚   â”‚   â”‚   â”‚   action = await agent(agent_state.messages, tools)                                                 â”‚
           â”‚   418 â”‚   â”‚   â”‚   agent_state.messages = [*agent_state.messages, action]                                                    â”‚
           â”‚   419 â”‚   â”‚   â”‚   if on_agent_action_callback:                                                                              â”‚
           â”‚   420 â”‚   â”‚   â”‚   â”‚   await on_agent_action_callback(action, agent_state)                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aviary/tools/utils.py:182 in __call__                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   179 â”‚   â”‚   â”‚   self._ledger.messages.extend(messages)                                                                    â”‚
           â”‚   180 â”‚   â”‚   â”‚   messages = self._ledger.messages                                                                          â”‚
           â”‚   181 â”‚   â”‚                                                                                                                 â”‚
           â”‚ â± 182 â”‚   â”‚   model_response = await self._bound_acompletion(                                                               â”‚
           â”‚   183 â”‚   â”‚   â”‚   messages=MessagesAdapter.dump_python(                                                                     â”‚
           â”‚   184 â”‚   â”‚   â”‚   â”‚   messages, exclude_none=True, by_alias=True                                                            â”‚
           â”‚   185 â”‚   â”‚   â”‚   ),                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:817 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    814 â”‚   â”‚   â”‚   â”‚   â”‚   original_exception=e,                                                                            â”‚
           â”‚    815 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    816 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚ â±  817 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    818 â”‚                                                                                                                    â”‚
           â”‚    819 â”‚   async def _acompletion(                                                                                          â”‚
           â”‚    820 â”‚   â”‚   self, model: str, messages: List[Dict[str, str]], **kwargs                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:793 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    790 â”‚   â”‚   â”‚   if request_priority is not None and isinstance(request_priority, int):                                   â”‚
           â”‚    791 â”‚   â”‚   â”‚   â”‚   response = await self.schedule_acompletion(**kwargs)                                                 â”‚
           â”‚    792 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â±  793 â”‚   â”‚   â”‚   â”‚   response = await self.async_function_with_fallbacks(**kwargs)                                        â”‚
           â”‚    794 â”‚   â”‚   â”‚   end_time = time.time()                                                                                   â”‚
           â”‚    795 â”‚   â”‚   â”‚   _duration = end_time - start_time                                                                        â”‚
           â”‚    796 â”‚   â”‚   â”‚   asyncio.create_task(                                                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2795 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2792 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚   2793 â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                                â”‚
           â”‚   2794 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2795 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2796 â”‚                                                                                                                    â”‚
           â”‚   2797 â”‚   def _handle_mock_testing_fallbacks(                                                                              â”‚
           â”‚   2798 â”‚   â”‚   self,                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2631 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2628 â”‚   â”‚   â”‚   â”‚   content_policy_fallbacks=content_policy_fallbacks,                                                   â”‚
           â”‚   2629 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2630 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2631 â”‚   â”‚   â”‚   response = await self.async_function_with_retries(*args, **kwargs)                                       â”‚
           â”‚   2632 â”‚   â”‚   â”‚   verbose_router_logger.debug(f"Async Response: {response}")                                               â”‚
           â”‚   2633 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2634 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2967 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2964 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "max_retries", num_retries)                                              â”‚
           â”‚   2965 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "num_retries", current_attempt)                                          â”‚
           â”‚   2966 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2967 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2968 â”‚                                                                                                                    â”‚
           â”‚   2969 â”‚   async def make_call(self, original_function: Any, *args, **kwargs):                                              â”‚
           â”‚   2970 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2879 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2876 â”‚   â”‚   â”‚   â”‚   model_group=model_group, kwargs=kwargs                                                               â”‚
           â”‚   2877 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2878 â”‚   â”‚   â”‚   # if the function call is successful, no exception will be raised and we'll                              â”‚
           â”‚        break out of the loop                                                                                                â”‚
           â”‚ â± 2879 â”‚   â”‚   â”‚   response = await self.make_call(original_function, *args, **kwargs)                                      â”‚
           â”‚   2880 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   2881 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2882 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2976 in make_call                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2973 â”‚   â”‚   model_group = kwargs.get("model")                                                                            â”‚
           â”‚   2974 â”‚   â”‚   response = original_function(*args, **kwargs)                                                                â”‚
           â”‚   2975 â”‚   â”‚   if inspect.iscoroutinefunction(response) or inspect.isawaitable(response):                                   â”‚
           â”‚ â± 2976 â”‚   â”‚   â”‚   response = await response                                                                                â”‚
           â”‚   2977 â”‚   â”‚   ## PROCESS RESPONSE HEADERS                                                                                  â”‚
           â”‚   2978 â”‚   â”‚   await self.set_response_headers(response=response, model_group=model_group)                                  â”‚
           â”‚   2979                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:947 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    944 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚    945 â”‚   â”‚   â”‚   if model_name is not None:                                                                               â”‚
           â”‚    946 â”‚   â”‚   â”‚   â”‚   self.fail_calls[model_name] += 1                                                                     â”‚
           â”‚ â±  947 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    948 â”‚                                                                                                                    â”‚
           â”‚    949 â”‚   def _update_kwargs_before_fallbacks(self, model: str, kwargs: dict) -> None:                                     â”‚
           â”‚    950 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:915 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    912 â”‚   â”‚   â”‚   â”‚   â”‚   parent_otel_span=parent_otel_span,                                                               â”‚
           â”‚    913 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    914 â”‚   â”‚   â”‚   â”‚                                                                                                        â”‚
           â”‚ â±  915 â”‚   â”‚   â”‚   â”‚   response = await _response                                                                           â”‚
           â”‚    916 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚    917 â”‚   â”‚   â”‚   ## CHECK CONTENT FILTER ERROR ##                                                                         â”‚
           â”‚    918 â”‚   â”‚   â”‚   if isinstance(response, ModelResponse):                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1175 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1172 â”‚   â”‚   â”‚   â”‚   â”‚   else:                                                                                            â”‚
           â”‚   1173 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   kwargs["model"] = context_window_fallback_dict[model]                                        â”‚
           â”‚   1174 â”‚   â”‚   â”‚   â”‚   â”‚   return await original_function(*args, **kwargs)                                                  â”‚
           â”‚ â± 1175 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   1176 â”‚                                                                                                                    â”‚
           â”‚   1177 â”‚   is_coroutine = inspect.iscoroutinefunction(original_function)                                                    â”‚
           â”‚   1178                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1031 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1028 â”‚   â”‚   â”‚   â”‚   return _caching_handler_response.final_embedding_cached_response                                     â”‚
           â”‚   1029 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1030 â”‚   â”‚   â”‚   # MODEL CALL                                                                                             â”‚
           â”‚ â± 1031 â”‚   â”‚   â”‚   result = await original_function(*args, **kwargs)                                                        â”‚
           â”‚   1032 â”‚   â”‚   â”‚   end_time = datetime.datetime.now()                                                                       â”‚
           â”‚   1033 â”‚   â”‚   â”‚   if "stream" in kwargs and kwargs["stream"] is True:                                                      â”‚
           â”‚   1034 â”‚   â”‚   â”‚   â”‚   if (                                                                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:499 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    496 â”‚   â”‚   return response                                                                                              â”‚
           â”‚    497 â”‚   except Exception as e:                                                                                           â”‚
           â”‚    498 â”‚   â”‚   custom_llm_provider = custom_llm_provider or "openai"                                                        â”‚
           â”‚ â±  499 â”‚   â”‚   raise exception_type(                                                                                        â”‚
           â”‚    500 â”‚   â”‚   â”‚   model=model,                                                                                             â”‚
           â”‚    501 â”‚   â”‚   â”‚   custom_llm_provider=custom_llm_provider,                                                                 â”‚
           â”‚    502 â”‚   â”‚   â”‚   original_exception=e,                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:212 â”‚
           â”‚ 5 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2122 â”‚   â”‚   # don't let an error with mapping interrupt the user from receiving an error                                 â”‚
           â”‚        from the llm api calls                                                                                               â”‚
           â”‚   2123 â”‚   â”‚   if exception_mapping_worked:                                                                                 â”‚
           â”‚   2124 â”‚   â”‚   â”‚   setattr(e, "litellm_response_headers", litellm_response_headers)                                         â”‚
           â”‚ â± 2125 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   2126 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   2127 â”‚   â”‚   â”‚   for error_type in litellm.LITELLM_EXCEPTION_TYPES:                                                       â”‚
           â”‚   2128 â”‚   â”‚   â”‚   â”‚   if isinstance(e, error_type):                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:210 â”‚
           â”‚ 1 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2098 â”‚   â”‚   â”‚   â”‚   â”‚   request=original_exception.request,                                                              â”‚
           â”‚   2099 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚   2100 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â± 2101 â”‚   â”‚   â”‚   â”‚   raise APIConnectionError(                                                                            â”‚
           â”‚   2102 â”‚   â”‚   â”‚   â”‚   â”‚   message="{}\n{}".format(                                                                         â”‚
           â”‚   2103 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   str(original_exception), traceback.format_exc()                                              â”‚
           â”‚   2104 â”‚   â”‚   â”‚   â”‚   â”‚   ),                                                                                               â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           APIConnectionError: litellm.APIConnectionError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1109, in                 
           _wrap_create_connection                                                                                                        
               sock = await aiohappyeyeballs.start_connection(                                                                            
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                            
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py", line 123, in              
           start_connection                                                                                                               
               raise OSError(first_errno, msg)                                                                                            
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py", line 477, in acompletion           
               response = await init_response                                                                                             
                          ^^^^^^^^^^^^^^^^^^^                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 566, in                
           ollama_acompletion                                                                                                             
               raise e  # don't use verbose_logger.exception, if exception is raised                                                      
               ^^^^^^^                                                                                                                    
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 507, in                
           ollama_acompletion                                                                                                             
               resp = await session.post(url, json=data)                                                                                  
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                  
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py", line 696, in _request            
               conn = await self._connector.connect(                                                                                      
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 544, in connect          
               proto = await self._create_connection(req, traces, timeout)                                                                
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1050, in                 
           _create_connection                                                                                                             
               _, proto = await self._create_direct_connection(req, traces, timeout)                                                      
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1394, in                 
           _create_direct_connection                                                                                                      
               raise last_exc                                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1363, in                 
           _create_direct_connection                                                                                                      
               transp, proto = await self._wrap_create_connection(                                                                        
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                        
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1124, in                 
           _wrap_create_connection                                                                                                        
               raise client_error(req.connection_key, exc) from exc                                                                       
           aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
                                                                                                                                          
           Received Model Group=ollama/llama3.2                                                                                           
           Available Model Group Fallbacks=None LiteLLM Retried: 2 times, LiteLLM Max Retries: 3                                          
[01:00:43] Answer:                                                                                                                        


 ANSWERING QUESTION: sciqag_question_78.json
 ----------------------------- 



[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.

[01:01:03] Trajectory failed.                                                                                                             
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1109 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1106 â”‚   â”‚   â”‚   async with ceil_timeout(                                                                                 â”‚
           â”‚   1107 â”‚   â”‚   â”‚   â”‚   timeout.sock_connect, ceil_threshold=timeout.ceil_threshold                                          â”‚
           â”‚   1108 â”‚   â”‚   â”‚   ):                                                                                                       â”‚
           â”‚ â± 1109 â”‚   â”‚   â”‚   â”‚   sock = await aiohappyeyeballs.start_connection(                                                      â”‚
           â”‚   1110 â”‚   â”‚   â”‚   â”‚   â”‚   addr_infos=addr_infos,                                                                           â”‚
           â”‚   1111 â”‚   â”‚   â”‚   â”‚   â”‚   local_addr_infos=self._local_addr_infos,                                                         â”‚
           â”‚   1112 â”‚   â”‚   â”‚   â”‚   â”‚   happy_eyeballs_delay=self._happy_eyeballs_delay,                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py:123 in start_connection          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   120 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, OSError) and exc.errno == first_errno                                         â”‚
           â”‚   121 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   for exc in all_exceptions                                                                     â”‚
           â”‚   122 â”‚   â”‚   â”‚   â”‚   â”‚   ):                                                                                                â”‚
           â”‚ â± 123 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   raise OSError(first_errno, msg)                                                               â”‚
           â”‚   124 â”‚   â”‚   â”‚   â”‚   elif isinstance(first_exception, RuntimeError) and all(                                               â”‚
           â”‚   125 â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, RuntimeError) for exc in all_exceptions                                           â”‚
           â”‚   126 â”‚   â”‚   â”‚   â”‚   ):                                                                                                    â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:477 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    474 â”‚   â”‚   â”‚   â”‚   â”‚   response = ModelResponse(**init_response)                                                        â”‚
           â”‚    475 â”‚   â”‚   â”‚   â”‚   response = init_response                                                                             â”‚
           â”‚    476 â”‚   â”‚   â”‚   elif asyncio.iscoroutine(init_response):                                                                 â”‚
           â”‚ â±  477 â”‚   â”‚   â”‚   â”‚   response = await init_response                                                                       â”‚
           â”‚    478 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚    479 â”‚   â”‚   â”‚   â”‚   response = init_response  # type: ignore                                                             â”‚
           â”‚    480                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:566 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   563 â”‚   â”‚   â”‚   )                                                                                                         â”‚
           â”‚   564 â”‚   â”‚   â”‚   return model_response                                                                                     â”‚
           â”‚   565 â”‚   except Exception as e:                                                                                            â”‚
           â”‚ â± 566 â”‚   â”‚   raise e  # don't use verbose_logger.exception, if exception is raised                                         â”‚
           â”‚   567                                                                                                                       â”‚
           â”‚   568                                                                                                                       â”‚
           â”‚   569 async def ollama_aembeddings(                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:507 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   504 â”‚   try:                                                                                                              â”‚
           â”‚   505 â”‚   â”‚   timeout = aiohttp.ClientTimeout(total=litellm.request_timeout)  # 10 minutes                                  â”‚
           â”‚   506 â”‚   â”‚   async with aiohttp.ClientSession(timeout=timeout) as session:                                                 â”‚
           â”‚ â± 507 â”‚   â”‚   â”‚   resp = await session.post(url, json=data)                                                                 â”‚
           â”‚   508 â”‚   â”‚   â”‚                                                                                                             â”‚
           â”‚   509 â”‚   â”‚   â”‚   if resp.status != 200:                                                                                    â”‚
           â”‚   510 â”‚   â”‚   â”‚   â”‚   text = await resp.text()                                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py:696 in _request                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚    693 â”‚   â”‚   â”‚   â”‚   â”‚                                                                                                    â”‚
           â”‚    694 â”‚   â”‚   â”‚   â”‚   â”‚   # connection timeout                                                                             â”‚
           â”‚    695 â”‚   â”‚   â”‚   â”‚   â”‚   try:                                                                                             â”‚
           â”‚ â±  696 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   conn = await self._connector.connect(                                                        â”‚
           â”‚    697 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   req, traces=traces, timeout=real_timeout                                                 â”‚
           â”‚    698 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚    699 â”‚   â”‚   â”‚   â”‚   â”‚   except asyncio.TimeoutError as exc:                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:544 in connect                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚    541 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    542 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    543 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_start()                                                   â”‚
           â”‚ â±  544 â”‚   â”‚   â”‚   â”‚   proto = await self._create_connection(req, traces, timeout)                                          â”‚
           â”‚    545 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    546 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    547 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_end()                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1050 in _create_connection           â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1047 â”‚   â”‚   if req.proxy:                                                                                                â”‚
           â”‚   1048 â”‚   â”‚   â”‚   _, proto = await self._create_proxy_connection(req, traces, timeout)                                     â”‚
           â”‚   1049 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚ â± 1050 â”‚   â”‚   â”‚   _, proto = await self._create_direct_connection(req, traces, timeout)                                    â”‚
           â”‚   1051 â”‚   â”‚                                                                                                                â”‚
           â”‚   1052 â”‚   â”‚   return proto                                                                                                 â”‚
           â”‚   1053                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1394 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1391 â”‚   â”‚   â”‚   return transp, proto                                                                                     â”‚
           â”‚   1392 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   1393 â”‚   â”‚   â”‚   assert last_exc is not None                                                                              â”‚
           â”‚ â± 1394 â”‚   â”‚   â”‚   raise last_exc                                                                                           â”‚
           â”‚   1395 â”‚                                                                                                                    â”‚
           â”‚   1396 â”‚   async def _create_proxy_connection(                                                                              â”‚
           â”‚   1397 â”‚   â”‚   self, req: ClientRequest, traces: List["Trace"], timeout: "ClientTimeout"                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1363 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1360 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   1361 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1362 â”‚   â”‚   â”‚   try:                                                                                                     â”‚
           â”‚ â± 1363 â”‚   â”‚   â”‚   â”‚   transp, proto = await self._wrap_create_connection(                                                  â”‚
           â”‚   1364 â”‚   â”‚   â”‚   â”‚   â”‚   self._factory,                                                                                   â”‚
           â”‚   1365 â”‚   â”‚   â”‚   â”‚   â”‚   timeout=timeout,                                                                                 â”‚
           â”‚   1366 â”‚   â”‚   â”‚   â”‚   â”‚   ssl=sslcontext,                                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1124 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1121 â”‚   â”‚   except OSError as exc:                                                                                       â”‚
           â”‚   1122 â”‚   â”‚   â”‚   if exc.errno is None and isinstance(exc, asyncio.TimeoutError):                                          â”‚
           â”‚   1123 â”‚   â”‚   â”‚   â”‚   raise                                                                                                â”‚
           â”‚ â± 1124 â”‚   â”‚   â”‚   raise client_error(req.connection_key, exc) from exc                                                     â”‚
           â”‚   1125 â”‚                                                                                                                    â”‚
           â”‚   1126 â”‚   async def _wrap_existing_connection(                                                                             â”‚
           â”‚   1127 â”‚   â”‚   self,                                                                                                        â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno 111] Connect call failed 
           ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                                                    
                                                                                                                                          
           During handling of the above exception, another exception occurred:                                                            
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:276 in _run_with_timeout_failure                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   273 ) -> tuple[PQASession, AgentStatus]:                                                                                  â”‚
           â”‚   274 â”‚   try:                                                                                                              â”‚
           â”‚   275 â”‚   â”‚   async with asyncio.timeout(query.settings.agent.timeout):                                                     â”‚
           â”‚ â± 276 â”‚   â”‚   â”‚   status = await rollout()                                                                                  â”‚
           â”‚   277 â”‚   except TimeoutError:                                                                                              â”‚
           â”‚   278 â”‚   â”‚   logger.warning(                                                                                               â”‚
           â”‚   279 â”‚   â”‚   â”‚   f"Agent timeout after {query.settings.agent.timeout}-sec, just answering."                                â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:410 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   407 â”‚   â”‚   â”‚   â”‚   )                                                                                                     â”‚
           â”‚   408 â”‚   â”‚   â”‚   â”‚   return AgentStatus.TRUNCATED                                                                          â”‚
           â”‚   409 â”‚   â”‚   â”‚   agent_state.messages += obs                                                                               â”‚
           â”‚ â± 410 â”‚   â”‚   â”‚   for attempt in Retrying(                                                                                  â”‚
           â”‚   411 â”‚   â”‚   â”‚   â”‚   stop=stop_after_attempt(5),                                                                           â”‚
           â”‚   412 â”‚   â”‚   â”‚   â”‚   retry=retry_if_exception_type(MalformedMessageError),                                                 â”‚
           â”‚   413 â”‚   â”‚   â”‚   â”‚   before_sleep=before_sleep_log(logger, logging.WARNING),                                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:443 in __iter__                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   440 â”‚   â”‚                                                                                                                 â”‚
           â”‚   441 â”‚   â”‚   retry_state = RetryCallState(self, fn=None, args=(), kwargs={})                                               â”‚
           â”‚   442 â”‚   â”‚   while True:                                                                                                   â”‚
           â”‚ â± 443 â”‚   â”‚   â”‚   do = self.iter(retry_state=retry_state)                                                                   â”‚
           â”‚   444 â”‚   â”‚   â”‚   if isinstance(do, DoAttempt):                                                                             â”‚
           â”‚   445 â”‚   â”‚   â”‚   â”‚   yield AttemptManager(retry_state=retry_state)                                                         â”‚
           â”‚   446 â”‚   â”‚   â”‚   elif isinstance(do, DoSleep):                                                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:376 in iter                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   373 â”‚   â”‚   self._begin_iter(retry_state)                                                                                 â”‚
           â”‚   374 â”‚   â”‚   result = None                                                                                                 â”‚
           â”‚   375 â”‚   â”‚   for action in self.iter_state.actions:                                                                        â”‚
           â”‚ â± 376 â”‚   â”‚   â”‚   result = action(retry_state)                                                                              â”‚
           â”‚   377 â”‚   â”‚   return result                                                                                                 â”‚
           â”‚   378 â”‚                                                                                                                     â”‚
           â”‚   379 â”‚   def _begin_iter(self, retry_state: "RetryCallState") -> None:  # noqa                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:398 in <lambda>                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   395 â”‚                                                                                                                     â”‚
           â”‚   396 â”‚   def _post_retry_check_actions(self, retry_state: "RetryCallState") -> None:                                       â”‚
           â”‚   397 â”‚   â”‚   if not (self.iter_state.is_explicit_retry or self.iter_state.retry_run_result):                               â”‚
           â”‚ â± 398 â”‚   â”‚   â”‚   self._add_action_func(lambda rs: rs.outcome.result())                                                     â”‚
           â”‚   399 â”‚   â”‚   â”‚   return                                                                                                    â”‚
           â”‚   400 â”‚   â”‚                                                                                                                 â”‚
           â”‚   401 â”‚   â”‚   if self.after is not None:                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:449 in result                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚   446 â”‚   â”‚   â”‚   â”‚   if self._state in [CANCELLED, CANCELLED_AND_NOTIFIED]:                                                â”‚
           â”‚   447 â”‚   â”‚   â”‚   â”‚   â”‚   raise CancelledError()                                                                            â”‚
           â”‚   448 â”‚   â”‚   â”‚   â”‚   elif self._state == FINISHED:                                                                         â”‚
           â”‚ â± 449 â”‚   â”‚   â”‚   â”‚   â”‚   return self.__get_result()                                                                        â”‚
           â”‚   450 â”‚   â”‚   â”‚   â”‚                                                                                                         â”‚
           â”‚   451 â”‚   â”‚   â”‚   â”‚   self._condition.wait(timeout)                                                                         â”‚
           â”‚   452                                                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:401 in __get_result                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   398 â”‚   def __get_result(self):                                                                                           â”‚
           â”‚   399 â”‚   â”‚   if self._exception:                                                                                           â”‚
           â”‚   400 â”‚   â”‚   â”‚   try:                                                                                                      â”‚
           â”‚ â± 401 â”‚   â”‚   â”‚   â”‚   raise self._exception                                                                                 â”‚
           â”‚   402 â”‚   â”‚   â”‚   finally:                                                                                                  â”‚
           â”‚   403 â”‚   â”‚   â”‚   â”‚   # Break a reference cycle with the exception in self._exception                                       â”‚
           â”‚   404 â”‚   â”‚   â”‚   â”‚   self = None                                                                                           â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:417 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   414 â”‚   â”‚   â”‚   â”‚   reraise=True,                                                                                         â”‚
           â”‚   415 â”‚   â”‚   â”‚   ):                                                                                                        â”‚
           â”‚   416 â”‚   â”‚   â”‚   â”‚   with attempt:  # Retrying if ToolSelector fails to select a tool                                      â”‚
           â”‚ â± 417 â”‚   â”‚   â”‚   â”‚   â”‚   action = await agent(agent_state.messages, tools)                                                 â”‚
           â”‚   418 â”‚   â”‚   â”‚   agent_state.messages = [*agent_state.messages, action]                                                    â”‚
           â”‚   419 â”‚   â”‚   â”‚   if on_agent_action_callback:                                                                              â”‚
           â”‚   420 â”‚   â”‚   â”‚   â”‚   await on_agent_action_callback(action, agent_state)                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aviary/tools/utils.py:182 in __call__                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   179 â”‚   â”‚   â”‚   self._ledger.messages.extend(messages)                                                                    â”‚
           â”‚   180 â”‚   â”‚   â”‚   messages = self._ledger.messages                                                                          â”‚
           â”‚   181 â”‚   â”‚                                                                                                                 â”‚
           â”‚ â± 182 â”‚   â”‚   model_response = await self._bound_acompletion(                                                               â”‚
           â”‚   183 â”‚   â”‚   â”‚   messages=MessagesAdapter.dump_python(                                                                     â”‚
           â”‚   184 â”‚   â”‚   â”‚   â”‚   messages, exclude_none=True, by_alias=True                                                            â”‚
           â”‚   185 â”‚   â”‚   â”‚   ),                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:817 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    814 â”‚   â”‚   â”‚   â”‚   â”‚   original_exception=e,                                                                            â”‚
           â”‚    815 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    816 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚ â±  817 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    818 â”‚                                                                                                                    â”‚
           â”‚    819 â”‚   async def _acompletion(                                                                                          â”‚
           â”‚    820 â”‚   â”‚   self, model: str, messages: List[Dict[str, str]], **kwargs                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:793 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    790 â”‚   â”‚   â”‚   if request_priority is not None and isinstance(request_priority, int):                                   â”‚
           â”‚    791 â”‚   â”‚   â”‚   â”‚   response = await self.schedule_acompletion(**kwargs)                                                 â”‚
           â”‚    792 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â±  793 â”‚   â”‚   â”‚   â”‚   response = await self.async_function_with_fallbacks(**kwargs)                                        â”‚
           â”‚    794 â”‚   â”‚   â”‚   end_time = time.time()                                                                                   â”‚
           â”‚    795 â”‚   â”‚   â”‚   _duration = end_time - start_time                                                                        â”‚
           â”‚    796 â”‚   â”‚   â”‚   asyncio.create_task(                                                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2795 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2792 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚   2793 â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                                â”‚
           â”‚   2794 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2795 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2796 â”‚                                                                                                                    â”‚
           â”‚   2797 â”‚   def _handle_mock_testing_fallbacks(                                                                              â”‚
           â”‚   2798 â”‚   â”‚   self,                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2631 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2628 â”‚   â”‚   â”‚   â”‚   content_policy_fallbacks=content_policy_fallbacks,                                                   â”‚
           â”‚   2629 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2630 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2631 â”‚   â”‚   â”‚   response = await self.async_function_with_retries(*args, **kwargs)                                       â”‚
           â”‚   2632 â”‚   â”‚   â”‚   verbose_router_logger.debug(f"Async Response: {response}")                                               â”‚
           â”‚   2633 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2634 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2967 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2964 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "max_retries", num_retries)                                              â”‚
           â”‚   2965 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "num_retries", current_attempt)                                          â”‚
           â”‚   2966 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2967 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2968 â”‚                                                                                                                    â”‚
           â”‚   2969 â”‚   async def make_call(self, original_function: Any, *args, **kwargs):                                              â”‚
           â”‚   2970 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2879 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2876 â”‚   â”‚   â”‚   â”‚   model_group=model_group, kwargs=kwargs                                                               â”‚
           â”‚   2877 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2878 â”‚   â”‚   â”‚   # if the function call is successful, no exception will be raised and we'll                              â”‚
           â”‚        break out of the loop                                                                                                â”‚
           â”‚ â± 2879 â”‚   â”‚   â”‚   response = await self.make_call(original_function, *args, **kwargs)                                      â”‚
           â”‚   2880 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   2881 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2882 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2976 in make_call                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2973 â”‚   â”‚   model_group = kwargs.get("model")                                                                            â”‚
           â”‚   2974 â”‚   â”‚   response = original_function(*args, **kwargs)                                                                â”‚
           â”‚   2975 â”‚   â”‚   if inspect.iscoroutinefunction(response) or inspect.isawaitable(response):                                   â”‚
           â”‚ â± 2976 â”‚   â”‚   â”‚   response = await response                                                                                â”‚
           â”‚   2977 â”‚   â”‚   ## PROCESS RESPONSE HEADERS                                                                                  â”‚
           â”‚   2978 â”‚   â”‚   await self.set_response_headers(response=response, model_group=model_group)                                  â”‚
           â”‚   2979                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:947 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    944 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚    945 â”‚   â”‚   â”‚   if model_name is not None:                                                                               â”‚
           â”‚    946 â”‚   â”‚   â”‚   â”‚   self.fail_calls[model_name] += 1                                                                     â”‚
           â”‚ â±  947 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    948 â”‚                                                                                                                    â”‚
           â”‚    949 â”‚   def _update_kwargs_before_fallbacks(self, model: str, kwargs: dict) -> None:                                     â”‚
           â”‚    950 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:915 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    912 â”‚   â”‚   â”‚   â”‚   â”‚   parent_otel_span=parent_otel_span,                                                               â”‚
           â”‚    913 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    914 â”‚   â”‚   â”‚   â”‚                                                                                                        â”‚
           â”‚ â±  915 â”‚   â”‚   â”‚   â”‚   response = await _response                                                                           â”‚
           â”‚    916 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚    917 â”‚   â”‚   â”‚   ## CHECK CONTENT FILTER ERROR ##                                                                         â”‚
           â”‚    918 â”‚   â”‚   â”‚   if isinstance(response, ModelResponse):                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1175 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1172 â”‚   â”‚   â”‚   â”‚   â”‚   else:                                                                                            â”‚
           â”‚   1173 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   kwargs["model"] = context_window_fallback_dict[model]                                        â”‚
           â”‚   1174 â”‚   â”‚   â”‚   â”‚   â”‚   return await original_function(*args, **kwargs)                                                  â”‚
           â”‚ â± 1175 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   1176 â”‚                                                                                                                    â”‚
           â”‚   1177 â”‚   is_coroutine = inspect.iscoroutinefunction(original_function)                                                    â”‚
           â”‚   1178                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1031 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1028 â”‚   â”‚   â”‚   â”‚   return _caching_handler_response.final_embedding_cached_response                                     â”‚
           â”‚   1029 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1030 â”‚   â”‚   â”‚   # MODEL CALL                                                                                             â”‚
           â”‚ â± 1031 â”‚   â”‚   â”‚   result = await original_function(*args, **kwargs)                                                        â”‚
           â”‚   1032 â”‚   â”‚   â”‚   end_time = datetime.datetime.now()                                                                       â”‚
           â”‚   1033 â”‚   â”‚   â”‚   if "stream" in kwargs and kwargs["stream"] is True:                                                      â”‚
           â”‚   1034 â”‚   â”‚   â”‚   â”‚   if (                                                                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:499 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    496 â”‚   â”‚   return response                                                                                              â”‚
           â”‚    497 â”‚   except Exception as e:                                                                                           â”‚
           â”‚    498 â”‚   â”‚   custom_llm_provider = custom_llm_provider or "openai"                                                        â”‚
           â”‚ â±  499 â”‚   â”‚   raise exception_type(                                                                                        â”‚
           â”‚    500 â”‚   â”‚   â”‚   model=model,                                                                                             â”‚
           â”‚    501 â”‚   â”‚   â”‚   custom_llm_provider=custom_llm_provider,                                                                 â”‚
           â”‚    502 â”‚   â”‚   â”‚   original_exception=e,                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:212 â”‚
           â”‚ 5 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2122 â”‚   â”‚   # don't let an error with mapping interrupt the user from receiving an error                                 â”‚
           â”‚        from the llm api calls                                                                                               â”‚
           â”‚   2123 â”‚   â”‚   if exception_mapping_worked:                                                                                 â”‚
           â”‚   2124 â”‚   â”‚   â”‚   setattr(e, "litellm_response_headers", litellm_response_headers)                                         â”‚
           â”‚ â± 2125 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   2126 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   2127 â”‚   â”‚   â”‚   for error_type in litellm.LITELLM_EXCEPTION_TYPES:                                                       â”‚
           â”‚   2128 â”‚   â”‚   â”‚   â”‚   if isinstance(e, error_type):                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:210 â”‚
           â”‚ 1 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2098 â”‚   â”‚   â”‚   â”‚   â”‚   request=original_exception.request,                                                              â”‚
           â”‚   2099 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚   2100 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â± 2101 â”‚   â”‚   â”‚   â”‚   raise APIConnectionError(                                                                            â”‚
           â”‚   2102 â”‚   â”‚   â”‚   â”‚   â”‚   message="{}\n{}".format(                                                                         â”‚
           â”‚   2103 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   str(original_exception), traceback.format_exc()                                              â”‚
           â”‚   2104 â”‚   â”‚   â”‚   â”‚   â”‚   ),                                                                                               â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           APIConnectionError: litellm.APIConnectionError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1109, in                 
           _wrap_create_connection                                                                                                        
               sock = await aiohappyeyeballs.start_connection(                                                                            
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                            
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py", line 123, in              
           start_connection                                                                                                               
               raise OSError(first_errno, msg)                                                                                            
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py", line 477, in acompletion           
               response = await init_response                                                                                             
                          ^^^^^^^^^^^^^^^^^^^                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 566, in                
           ollama_acompletion                                                                                                             
               raise e  # don't use verbose_logger.exception, if exception is raised                                                      
               ^^^^^^^                                                                                                                    
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 507, in                
           ollama_acompletion                                                                                                             
               resp = await session.post(url, json=data)                                                                                  
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                  
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py", line 696, in _request            
               conn = await self._connector.connect(                                                                                      
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 544, in connect          
               proto = await self._create_connection(req, traces, timeout)                                                                
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1050, in                 
           _create_connection                                                                                                             
               _, proto = await self._create_direct_connection(req, traces, timeout)                                                      
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1394, in                 
           _create_direct_connection                                                                                                      
               raise last_exc                                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1363, in                 
           _create_direct_connection                                                                                                      
               transp, proto = await self._wrap_create_connection(                                                                        
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                        
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1124, in                 
           _wrap_create_connection                                                                                                        
               raise client_error(req.connection_key, exc) from exc                                                                       
           aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
                                                                                                                                          
           Received Model Group=ollama/llama3.2                                                                                           
           Available Model Group Fallbacks=None LiteLLM Retried: 2 times, LiteLLM Max Retries: 3                                          
[01:01:06] Answer:                                                                                                                        


 ANSWERING QUESTION: sciqag_question_79.json
 ----------------------------- 



[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.

[01:01:26] Trajectory failed.                                                                                                             
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1109 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1106 â”‚   â”‚   â”‚   async with ceil_timeout(                                                                                 â”‚
           â”‚   1107 â”‚   â”‚   â”‚   â”‚   timeout.sock_connect, ceil_threshold=timeout.ceil_threshold                                          â”‚
           â”‚   1108 â”‚   â”‚   â”‚   ):                                                                                                       â”‚
           â”‚ â± 1109 â”‚   â”‚   â”‚   â”‚   sock = await aiohappyeyeballs.start_connection(                                                      â”‚
           â”‚   1110 â”‚   â”‚   â”‚   â”‚   â”‚   addr_infos=addr_infos,                                                                           â”‚
           â”‚   1111 â”‚   â”‚   â”‚   â”‚   â”‚   local_addr_infos=self._local_addr_infos,                                                         â”‚
           â”‚   1112 â”‚   â”‚   â”‚   â”‚   â”‚   happy_eyeballs_delay=self._happy_eyeballs_delay,                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py:123 in start_connection          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   120 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, OSError) and exc.errno == first_errno                                         â”‚
           â”‚   121 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   for exc in all_exceptions                                                                     â”‚
           â”‚   122 â”‚   â”‚   â”‚   â”‚   â”‚   ):                                                                                                â”‚
           â”‚ â± 123 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   raise OSError(first_errno, msg)                                                               â”‚
           â”‚   124 â”‚   â”‚   â”‚   â”‚   elif isinstance(first_exception, RuntimeError) and all(                                               â”‚
           â”‚   125 â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, RuntimeError) for exc in all_exceptions                                           â”‚
           â”‚   126 â”‚   â”‚   â”‚   â”‚   ):                                                                                                    â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:477 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    474 â”‚   â”‚   â”‚   â”‚   â”‚   response = ModelResponse(**init_response)                                                        â”‚
           â”‚    475 â”‚   â”‚   â”‚   â”‚   response = init_response                                                                             â”‚
           â”‚    476 â”‚   â”‚   â”‚   elif asyncio.iscoroutine(init_response):                                                                 â”‚
           â”‚ â±  477 â”‚   â”‚   â”‚   â”‚   response = await init_response                                                                       â”‚
           â”‚    478 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚    479 â”‚   â”‚   â”‚   â”‚   response = init_response  # type: ignore                                                             â”‚
           â”‚    480                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:566 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   563 â”‚   â”‚   â”‚   )                                                                                                         â”‚
           â”‚   564 â”‚   â”‚   â”‚   return model_response                                                                                     â”‚
           â”‚   565 â”‚   except Exception as e:                                                                                            â”‚
           â”‚ â± 566 â”‚   â”‚   raise e  # don't use verbose_logger.exception, if exception is raised                                         â”‚
           â”‚   567                                                                                                                       â”‚
           â”‚   568                                                                                                                       â”‚
           â”‚   569 async def ollama_aembeddings(                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:507 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   504 â”‚   try:                                                                                                              â”‚
           â”‚   505 â”‚   â”‚   timeout = aiohttp.ClientTimeout(total=litellm.request_timeout)  # 10 minutes                                  â”‚
           â”‚   506 â”‚   â”‚   async with aiohttp.ClientSession(timeout=timeout) as session:                                                 â”‚
           â”‚ â± 507 â”‚   â”‚   â”‚   resp = await session.post(url, json=data)                                                                 â”‚
           â”‚   508 â”‚   â”‚   â”‚                                                                                                             â”‚
           â”‚   509 â”‚   â”‚   â”‚   if resp.status != 200:                                                                                    â”‚
           â”‚   510 â”‚   â”‚   â”‚   â”‚   text = await resp.text()                                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py:696 in _request                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚    693 â”‚   â”‚   â”‚   â”‚   â”‚                                                                                                    â”‚
           â”‚    694 â”‚   â”‚   â”‚   â”‚   â”‚   # connection timeout                                                                             â”‚
           â”‚    695 â”‚   â”‚   â”‚   â”‚   â”‚   try:                                                                                             â”‚
           â”‚ â±  696 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   conn = await self._connector.connect(                                                        â”‚
           â”‚    697 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   req, traces=traces, timeout=real_timeout                                                 â”‚
           â”‚    698 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚    699 â”‚   â”‚   â”‚   â”‚   â”‚   except asyncio.TimeoutError as exc:                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:544 in connect                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚    541 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    542 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    543 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_start()                                                   â”‚
           â”‚ â±  544 â”‚   â”‚   â”‚   â”‚   proto = await self._create_connection(req, traces, timeout)                                          â”‚
           â”‚    545 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    546 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    547 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_end()                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1050 in _create_connection           â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1047 â”‚   â”‚   if req.proxy:                                                                                                â”‚
           â”‚   1048 â”‚   â”‚   â”‚   _, proto = await self._create_proxy_connection(req, traces, timeout)                                     â”‚
           â”‚   1049 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚ â± 1050 â”‚   â”‚   â”‚   _, proto = await self._create_direct_connection(req, traces, timeout)                                    â”‚
           â”‚   1051 â”‚   â”‚                                                                                                                â”‚
           â”‚   1052 â”‚   â”‚   return proto                                                                                                 â”‚
           â”‚   1053                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1394 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1391 â”‚   â”‚   â”‚   return transp, proto                                                                                     â”‚
           â”‚   1392 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   1393 â”‚   â”‚   â”‚   assert last_exc is not None                                                                              â”‚
           â”‚ â± 1394 â”‚   â”‚   â”‚   raise last_exc                                                                                           â”‚
           â”‚   1395 â”‚                                                                                                                    â”‚
           â”‚   1396 â”‚   async def _create_proxy_connection(                                                                              â”‚
           â”‚   1397 â”‚   â”‚   self, req: ClientRequest, traces: List["Trace"], timeout: "ClientTimeout"                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1363 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1360 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   1361 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1362 â”‚   â”‚   â”‚   try:                                                                                                     â”‚
           â”‚ â± 1363 â”‚   â”‚   â”‚   â”‚   transp, proto = await self._wrap_create_connection(                                                  â”‚
           â”‚   1364 â”‚   â”‚   â”‚   â”‚   â”‚   self._factory,                                                                                   â”‚
           â”‚   1365 â”‚   â”‚   â”‚   â”‚   â”‚   timeout=timeout,                                                                                 â”‚
           â”‚   1366 â”‚   â”‚   â”‚   â”‚   â”‚   ssl=sslcontext,                                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1124 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1121 â”‚   â”‚   except OSError as exc:                                                                                       â”‚
           â”‚   1122 â”‚   â”‚   â”‚   if exc.errno is None and isinstance(exc, asyncio.TimeoutError):                                          â”‚
           â”‚   1123 â”‚   â”‚   â”‚   â”‚   raise                                                                                                â”‚
           â”‚ â± 1124 â”‚   â”‚   â”‚   raise client_error(req.connection_key, exc) from exc                                                     â”‚
           â”‚   1125 â”‚                                                                                                                    â”‚
           â”‚   1126 â”‚   async def _wrap_existing_connection(                                                                             â”‚
           â”‚   1127 â”‚   â”‚   self,                                                                                                        â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno 111] Connect call failed 
           ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                                                    
                                                                                                                                          
           During handling of the above exception, another exception occurred:                                                            
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:276 in _run_with_timeout_failure                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   273 ) -> tuple[PQASession, AgentStatus]:                                                                                  â”‚
           â”‚   274 â”‚   try:                                                                                                              â”‚
           â”‚   275 â”‚   â”‚   async with asyncio.timeout(query.settings.agent.timeout):                                                     â”‚
           â”‚ â± 276 â”‚   â”‚   â”‚   status = await rollout()                                                                                  â”‚
           â”‚   277 â”‚   except TimeoutError:                                                                                              â”‚
           â”‚   278 â”‚   â”‚   logger.warning(                                                                                               â”‚
           â”‚   279 â”‚   â”‚   â”‚   f"Agent timeout after {query.settings.agent.timeout}-sec, just answering."                                â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:410 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   407 â”‚   â”‚   â”‚   â”‚   )                                                                                                     â”‚
           â”‚   408 â”‚   â”‚   â”‚   â”‚   return AgentStatus.TRUNCATED                                                                          â”‚
           â”‚   409 â”‚   â”‚   â”‚   agent_state.messages += obs                                                                               â”‚
           â”‚ â± 410 â”‚   â”‚   â”‚   for attempt in Retrying(                                                                                  â”‚
           â”‚   411 â”‚   â”‚   â”‚   â”‚   stop=stop_after_attempt(5),                                                                           â”‚
           â”‚   412 â”‚   â”‚   â”‚   â”‚   retry=retry_if_exception_type(MalformedMessageError),                                                 â”‚
           â”‚   413 â”‚   â”‚   â”‚   â”‚   before_sleep=before_sleep_log(logger, logging.WARNING),                                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:443 in __iter__                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   440 â”‚   â”‚                                                                                                                 â”‚
           â”‚   441 â”‚   â”‚   retry_state = RetryCallState(self, fn=None, args=(), kwargs={})                                               â”‚
           â”‚   442 â”‚   â”‚   while True:                                                                                                   â”‚
           â”‚ â± 443 â”‚   â”‚   â”‚   do = self.iter(retry_state=retry_state)                                                                   â”‚
           â”‚   444 â”‚   â”‚   â”‚   if isinstance(do, DoAttempt):                                                                             â”‚
           â”‚   445 â”‚   â”‚   â”‚   â”‚   yield AttemptManager(retry_state=retry_state)                                                         â”‚
           â”‚   446 â”‚   â”‚   â”‚   elif isinstance(do, DoSleep):                                                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:376 in iter                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   373 â”‚   â”‚   self._begin_iter(retry_state)                                                                                 â”‚
           â”‚   374 â”‚   â”‚   result = None                                                                                                 â”‚
           â”‚   375 â”‚   â”‚   for action in self.iter_state.actions:                                                                        â”‚
           â”‚ â± 376 â”‚   â”‚   â”‚   result = action(retry_state)                                                                              â”‚
           â”‚   377 â”‚   â”‚   return result                                                                                                 â”‚
           â”‚   378 â”‚                                                                                                                     â”‚
           â”‚   379 â”‚   def _begin_iter(self, retry_state: "RetryCallState") -> None:  # noqa                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:398 in <lambda>                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   395 â”‚                                                                                                                     â”‚
           â”‚   396 â”‚   def _post_retry_check_actions(self, retry_state: "RetryCallState") -> None:                                       â”‚
           â”‚   397 â”‚   â”‚   if not (self.iter_state.is_explicit_retry or self.iter_state.retry_run_result):                               â”‚
           â”‚ â± 398 â”‚   â”‚   â”‚   self._add_action_func(lambda rs: rs.outcome.result())                                                     â”‚
           â”‚   399 â”‚   â”‚   â”‚   return                                                                                                    â”‚
           â”‚   400 â”‚   â”‚                                                                                                                 â”‚
           â”‚   401 â”‚   â”‚   if self.after is not None:                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:449 in result                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚   446 â”‚   â”‚   â”‚   â”‚   if self._state in [CANCELLED, CANCELLED_AND_NOTIFIED]:                                                â”‚
           â”‚   447 â”‚   â”‚   â”‚   â”‚   â”‚   raise CancelledError()                                                                            â”‚
           â”‚   448 â”‚   â”‚   â”‚   â”‚   elif self._state == FINISHED:                                                                         â”‚
           â”‚ â± 449 â”‚   â”‚   â”‚   â”‚   â”‚   return self.__get_result()                                                                        â”‚
           â”‚   450 â”‚   â”‚   â”‚   â”‚                                                                                                         â”‚
           â”‚   451 â”‚   â”‚   â”‚   â”‚   self._condition.wait(timeout)                                                                         â”‚
           â”‚   452                                                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:401 in __get_result                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   398 â”‚   def __get_result(self):                                                                                           â”‚
           â”‚   399 â”‚   â”‚   if self._exception:                                                                                           â”‚
           â”‚   400 â”‚   â”‚   â”‚   try:                                                                                                      â”‚
           â”‚ â± 401 â”‚   â”‚   â”‚   â”‚   raise self._exception                                                                                 â”‚
           â”‚   402 â”‚   â”‚   â”‚   finally:                                                                                                  â”‚
           â”‚   403 â”‚   â”‚   â”‚   â”‚   # Break a reference cycle with the exception in self._exception                                       â”‚
           â”‚   404 â”‚   â”‚   â”‚   â”‚   self = None                                                                                           â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:417 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   414 â”‚   â”‚   â”‚   â”‚   reraise=True,                                                                                         â”‚
           â”‚   415 â”‚   â”‚   â”‚   ):                                                                                                        â”‚
           â”‚   416 â”‚   â”‚   â”‚   â”‚   with attempt:  # Retrying if ToolSelector fails to select a tool                                      â”‚
           â”‚ â± 417 â”‚   â”‚   â”‚   â”‚   â”‚   action = await agent(agent_state.messages, tools)                                                 â”‚
           â”‚   418 â”‚   â”‚   â”‚   agent_state.messages = [*agent_state.messages, action]                                                    â”‚
           â”‚   419 â”‚   â”‚   â”‚   if on_agent_action_callback:                                                                              â”‚
           â”‚   420 â”‚   â”‚   â”‚   â”‚   await on_agent_action_callback(action, agent_state)                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aviary/tools/utils.py:182 in __call__                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   179 â”‚   â”‚   â”‚   self._ledger.messages.extend(messages)                                                                    â”‚
           â”‚   180 â”‚   â”‚   â”‚   messages = self._ledger.messages                                                                          â”‚
           â”‚   181 â”‚   â”‚                                                                                                                 â”‚
           â”‚ â± 182 â”‚   â”‚   model_response = await self._bound_acompletion(                                                               â”‚
           â”‚   183 â”‚   â”‚   â”‚   messages=MessagesAdapter.dump_python(                                                                     â”‚
           â”‚   184 â”‚   â”‚   â”‚   â”‚   messages, exclude_none=True, by_alias=True                                                            â”‚
           â”‚   185 â”‚   â”‚   â”‚   ),                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:817 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    814 â”‚   â”‚   â”‚   â”‚   â”‚   original_exception=e,                                                                            â”‚
           â”‚    815 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    816 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚ â±  817 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    818 â”‚                                                                                                                    â”‚
           â”‚    819 â”‚   async def _acompletion(                                                                                          â”‚
           â”‚    820 â”‚   â”‚   self, model: str, messages: List[Dict[str, str]], **kwargs                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:793 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    790 â”‚   â”‚   â”‚   if request_priority is not None and isinstance(request_priority, int):                                   â”‚
           â”‚    791 â”‚   â”‚   â”‚   â”‚   response = await self.schedule_acompletion(**kwargs)                                                 â”‚
           â”‚    792 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â±  793 â”‚   â”‚   â”‚   â”‚   response = await self.async_function_with_fallbacks(**kwargs)                                        â”‚
           â”‚    794 â”‚   â”‚   â”‚   end_time = time.time()                                                                                   â”‚
           â”‚    795 â”‚   â”‚   â”‚   _duration = end_time - start_time                                                                        â”‚
           â”‚    796 â”‚   â”‚   â”‚   asyncio.create_task(                                                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2795 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2792 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚   2793 â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                                â”‚
           â”‚   2794 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2795 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2796 â”‚                                                                                                                    â”‚
           â”‚   2797 â”‚   def _handle_mock_testing_fallbacks(                                                                              â”‚
           â”‚   2798 â”‚   â”‚   self,                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2631 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2628 â”‚   â”‚   â”‚   â”‚   content_policy_fallbacks=content_policy_fallbacks,                                                   â”‚
           â”‚   2629 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2630 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2631 â”‚   â”‚   â”‚   response = await self.async_function_with_retries(*args, **kwargs)                                       â”‚
           â”‚   2632 â”‚   â”‚   â”‚   verbose_router_logger.debug(f"Async Response: {response}")                                               â”‚
           â”‚   2633 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2634 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2967 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2964 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "max_retries", num_retries)                                              â”‚
           â”‚   2965 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "num_retries", current_attempt)                                          â”‚
           â”‚   2966 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2967 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2968 â”‚                                                                                                                    â”‚
           â”‚   2969 â”‚   async def make_call(self, original_function: Any, *args, **kwargs):                                              â”‚
           â”‚   2970 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2879 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2876 â”‚   â”‚   â”‚   â”‚   model_group=model_group, kwargs=kwargs                                                               â”‚
           â”‚   2877 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2878 â”‚   â”‚   â”‚   # if the function call is successful, no exception will be raised and we'll                              â”‚
           â”‚        break out of the loop                                                                                                â”‚
           â”‚ â± 2879 â”‚   â”‚   â”‚   response = await self.make_call(original_function, *args, **kwargs)                                      â”‚
           â”‚   2880 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   2881 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2882 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2976 in make_call                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2973 â”‚   â”‚   model_group = kwargs.get("model")                                                                            â”‚
           â”‚   2974 â”‚   â”‚   response = original_function(*args, **kwargs)                                                                â”‚
           â”‚   2975 â”‚   â”‚   if inspect.iscoroutinefunction(response) or inspect.isawaitable(response):                                   â”‚
           â”‚ â± 2976 â”‚   â”‚   â”‚   response = await response                                                                                â”‚
           â”‚   2977 â”‚   â”‚   ## PROCESS RESPONSE HEADERS                                                                                  â”‚
           â”‚   2978 â”‚   â”‚   await self.set_response_headers(response=response, model_group=model_group)                                  â”‚
           â”‚   2979                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:947 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    944 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚    945 â”‚   â”‚   â”‚   if model_name is not None:                                                                               â”‚
           â”‚    946 â”‚   â”‚   â”‚   â”‚   self.fail_calls[model_name] += 1                                                                     â”‚
           â”‚ â±  947 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    948 â”‚                                                                                                                    â”‚
           â”‚    949 â”‚   def _update_kwargs_before_fallbacks(self, model: str, kwargs: dict) -> None:                                     â”‚
           â”‚    950 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:915 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    912 â”‚   â”‚   â”‚   â”‚   â”‚   parent_otel_span=parent_otel_span,                                                               â”‚
           â”‚    913 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    914 â”‚   â”‚   â”‚   â”‚                                                                                                        â”‚
           â”‚ â±  915 â”‚   â”‚   â”‚   â”‚   response = await _response                                                                           â”‚
           â”‚    916 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚    917 â”‚   â”‚   â”‚   ## CHECK CONTENT FILTER ERROR ##                                                                         â”‚
           â”‚    918 â”‚   â”‚   â”‚   if isinstance(response, ModelResponse):                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1175 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1172 â”‚   â”‚   â”‚   â”‚   â”‚   else:                                                                                            â”‚
           â”‚   1173 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   kwargs["model"] = context_window_fallback_dict[model]                                        â”‚
           â”‚   1174 â”‚   â”‚   â”‚   â”‚   â”‚   return await original_function(*args, **kwargs)                                                  â”‚
           â”‚ â± 1175 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   1176 â”‚                                                                                                                    â”‚
           â”‚   1177 â”‚   is_coroutine = inspect.iscoroutinefunction(original_function)                                                    â”‚
           â”‚   1178                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1031 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1028 â”‚   â”‚   â”‚   â”‚   return _caching_handler_response.final_embedding_cached_response                                     â”‚
           â”‚   1029 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1030 â”‚   â”‚   â”‚   # MODEL CALL                                                                                             â”‚
           â”‚ â± 1031 â”‚   â”‚   â”‚   result = await original_function(*args, **kwargs)                                                        â”‚
           â”‚   1032 â”‚   â”‚   â”‚   end_time = datetime.datetime.now()                                                                       â”‚
           â”‚   1033 â”‚   â”‚   â”‚   if "stream" in kwargs and kwargs["stream"] is True:                                                      â”‚
           â”‚   1034 â”‚   â”‚   â”‚   â”‚   if (                                                                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:499 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    496 â”‚   â”‚   return response                                                                                              â”‚
           â”‚    497 â”‚   except Exception as e:                                                                                           â”‚
           â”‚    498 â”‚   â”‚   custom_llm_provider = custom_llm_provider or "openai"                                                        â”‚
           â”‚ â±  499 â”‚   â”‚   raise exception_type(                                                                                        â”‚
           â”‚    500 â”‚   â”‚   â”‚   model=model,                                                                                             â”‚
           â”‚    501 â”‚   â”‚   â”‚   custom_llm_provider=custom_llm_provider,                                                                 â”‚
           â”‚    502 â”‚   â”‚   â”‚   original_exception=e,                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:212 â”‚
           â”‚ 5 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2122 â”‚   â”‚   # don't let an error with mapping interrupt the user from receiving an error                                 â”‚
           â”‚        from the llm api calls                                                                                               â”‚
           â”‚   2123 â”‚   â”‚   if exception_mapping_worked:                                                                                 â”‚
           â”‚   2124 â”‚   â”‚   â”‚   setattr(e, "litellm_response_headers", litellm_response_headers)                                         â”‚
           â”‚ â± 2125 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   2126 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   2127 â”‚   â”‚   â”‚   for error_type in litellm.LITELLM_EXCEPTION_TYPES:                                                       â”‚
           â”‚   2128 â”‚   â”‚   â”‚   â”‚   if isinstance(e, error_type):                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:210 â”‚
           â”‚ 1 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2098 â”‚   â”‚   â”‚   â”‚   â”‚   request=original_exception.request,                                                              â”‚
           â”‚   2099 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚   2100 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â± 2101 â”‚   â”‚   â”‚   â”‚   raise APIConnectionError(                                                                            â”‚
           â”‚   2102 â”‚   â”‚   â”‚   â”‚   â”‚   message="{}\n{}".format(                                                                         â”‚
           â”‚   2103 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   str(original_exception), traceback.format_exc()                                              â”‚
           â”‚   2104 â”‚   â”‚   â”‚   â”‚   â”‚   ),                                                                                               â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           APIConnectionError: litellm.APIConnectionError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1109, in                 
           _wrap_create_connection                                                                                                        
               sock = await aiohappyeyeballs.start_connection(                                                                            
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                            
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py", line 123, in              
           start_connection                                                                                                               
               raise OSError(first_errno, msg)                                                                                            
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py", line 477, in acompletion           
               response = await init_response                                                                                             
                          ^^^^^^^^^^^^^^^^^^^                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 566, in                
           ollama_acompletion                                                                                                             
               raise e  # don't use verbose_logger.exception, if exception is raised                                                      
               ^^^^^^^                                                                                                                    
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 507, in                
           ollama_acompletion                                                                                                             
               resp = await session.post(url, json=data)                                                                                  
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                  
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py", line 696, in _request            
               conn = await self._connector.connect(                                                                                      
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 544, in connect          
               proto = await self._create_connection(req, traces, timeout)                                                                
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1050, in                 
           _create_connection                                                                                                             
               _, proto = await self._create_direct_connection(req, traces, timeout)                                                      
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1394, in                 
           _create_direct_connection                                                                                                      
               raise last_exc                                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1363, in                 
           _create_direct_connection                                                                                                      
               transp, proto = await self._wrap_create_connection(                                                                        
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                        
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1124, in                 
           _wrap_create_connection                                                                                                        
               raise client_error(req.connection_key, exc) from exc                                                                       
           aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
                                                                                                                                          
           Received Model Group=ollama/llama3.2                                                                                           
           Available Model Group Fallbacks=None LiteLLM Retried: 2 times, LiteLLM Max Retries: 3                                          
[01:01:28] Answer:                                                                                                                        


 ANSWERING QUESTION: sciqag_question_8.json
 ----------------------------- 



[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.

[01:01:48] Trajectory failed.                                                                                                             
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1109 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1106 â”‚   â”‚   â”‚   async with ceil_timeout(                                                                                 â”‚
           â”‚   1107 â”‚   â”‚   â”‚   â”‚   timeout.sock_connect, ceil_threshold=timeout.ceil_threshold                                          â”‚
           â”‚   1108 â”‚   â”‚   â”‚   ):                                                                                                       â”‚
           â”‚ â± 1109 â”‚   â”‚   â”‚   â”‚   sock = await aiohappyeyeballs.start_connection(                                                      â”‚
           â”‚   1110 â”‚   â”‚   â”‚   â”‚   â”‚   addr_infos=addr_infos,                                                                           â”‚
           â”‚   1111 â”‚   â”‚   â”‚   â”‚   â”‚   local_addr_infos=self._local_addr_infos,                                                         â”‚
           â”‚   1112 â”‚   â”‚   â”‚   â”‚   â”‚   happy_eyeballs_delay=self._happy_eyeballs_delay,                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py:123 in start_connection          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   120 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, OSError) and exc.errno == first_errno                                         â”‚
           â”‚   121 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   for exc in all_exceptions                                                                     â”‚
           â”‚   122 â”‚   â”‚   â”‚   â”‚   â”‚   ):                                                                                                â”‚
           â”‚ â± 123 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   raise OSError(first_errno, msg)                                                               â”‚
           â”‚   124 â”‚   â”‚   â”‚   â”‚   elif isinstance(first_exception, RuntimeError) and all(                                               â”‚
           â”‚   125 â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, RuntimeError) for exc in all_exceptions                                           â”‚
           â”‚   126 â”‚   â”‚   â”‚   â”‚   ):                                                                                                    â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:477 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    474 â”‚   â”‚   â”‚   â”‚   â”‚   response = ModelResponse(**init_response)                                                        â”‚
           â”‚    475 â”‚   â”‚   â”‚   â”‚   response = init_response                                                                             â”‚
           â”‚    476 â”‚   â”‚   â”‚   elif asyncio.iscoroutine(init_response):                                                                 â”‚
           â”‚ â±  477 â”‚   â”‚   â”‚   â”‚   response = await init_response                                                                       â”‚
           â”‚    478 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚    479 â”‚   â”‚   â”‚   â”‚   response = init_response  # type: ignore                                                             â”‚
           â”‚    480                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:566 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   563 â”‚   â”‚   â”‚   )                                                                                                         â”‚
           â”‚   564 â”‚   â”‚   â”‚   return model_response                                                                                     â”‚
           â”‚   565 â”‚   except Exception as e:                                                                                            â”‚
           â”‚ â± 566 â”‚   â”‚   raise e  # don't use verbose_logger.exception, if exception is raised                                         â”‚
           â”‚   567                                                                                                                       â”‚
           â”‚   568                                                                                                                       â”‚
           â”‚   569 async def ollama_aembeddings(                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:507 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   504 â”‚   try:                                                                                                              â”‚
           â”‚   505 â”‚   â”‚   timeout = aiohttp.ClientTimeout(total=litellm.request_timeout)  # 10 minutes                                  â”‚
           â”‚   506 â”‚   â”‚   async with aiohttp.ClientSession(timeout=timeout) as session:                                                 â”‚
           â”‚ â± 507 â”‚   â”‚   â”‚   resp = await session.post(url, json=data)                                                                 â”‚
           â”‚   508 â”‚   â”‚   â”‚                                                                                                             â”‚
           â”‚   509 â”‚   â”‚   â”‚   if resp.status != 200:                                                                                    â”‚
           â”‚   510 â”‚   â”‚   â”‚   â”‚   text = await resp.text()                                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py:696 in _request                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚    693 â”‚   â”‚   â”‚   â”‚   â”‚                                                                                                    â”‚
           â”‚    694 â”‚   â”‚   â”‚   â”‚   â”‚   # connection timeout                                                                             â”‚
           â”‚    695 â”‚   â”‚   â”‚   â”‚   â”‚   try:                                                                                             â”‚
           â”‚ â±  696 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   conn = await self._connector.connect(                                                        â”‚
           â”‚    697 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   req, traces=traces, timeout=real_timeout                                                 â”‚
           â”‚    698 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚    699 â”‚   â”‚   â”‚   â”‚   â”‚   except asyncio.TimeoutError as exc:                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:544 in connect                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚    541 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    542 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    543 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_start()                                                   â”‚
           â”‚ â±  544 â”‚   â”‚   â”‚   â”‚   proto = await self._create_connection(req, traces, timeout)                                          â”‚
           â”‚    545 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    546 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    547 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_end()                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1050 in _create_connection           â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1047 â”‚   â”‚   if req.proxy:                                                                                                â”‚
           â”‚   1048 â”‚   â”‚   â”‚   _, proto = await self._create_proxy_connection(req, traces, timeout)                                     â”‚
           â”‚   1049 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚ â± 1050 â”‚   â”‚   â”‚   _, proto = await self._create_direct_connection(req, traces, timeout)                                    â”‚
           â”‚   1051 â”‚   â”‚                                                                                                                â”‚
           â”‚   1052 â”‚   â”‚   return proto                                                                                                 â”‚
           â”‚   1053                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1394 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1391 â”‚   â”‚   â”‚   return transp, proto                                                                                     â”‚
           â”‚   1392 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   1393 â”‚   â”‚   â”‚   assert last_exc is not None                                                                              â”‚
           â”‚ â± 1394 â”‚   â”‚   â”‚   raise last_exc                                                                                           â”‚
           â”‚   1395 â”‚                                                                                                                    â”‚
           â”‚   1396 â”‚   async def _create_proxy_connection(                                                                              â”‚
           â”‚   1397 â”‚   â”‚   self, req: ClientRequest, traces: List["Trace"], timeout: "ClientTimeout"                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1363 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1360 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   1361 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1362 â”‚   â”‚   â”‚   try:                                                                                                     â”‚
           â”‚ â± 1363 â”‚   â”‚   â”‚   â”‚   transp, proto = await self._wrap_create_connection(                                                  â”‚
           â”‚   1364 â”‚   â”‚   â”‚   â”‚   â”‚   self._factory,                                                                                   â”‚
           â”‚   1365 â”‚   â”‚   â”‚   â”‚   â”‚   timeout=timeout,                                                                                 â”‚
           â”‚   1366 â”‚   â”‚   â”‚   â”‚   â”‚   ssl=sslcontext,                                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1124 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1121 â”‚   â”‚   except OSError as exc:                                                                                       â”‚
           â”‚   1122 â”‚   â”‚   â”‚   if exc.errno is None and isinstance(exc, asyncio.TimeoutError):                                          â”‚
           â”‚   1123 â”‚   â”‚   â”‚   â”‚   raise                                                                                                â”‚
           â”‚ â± 1124 â”‚   â”‚   â”‚   raise client_error(req.connection_key, exc) from exc                                                     â”‚
           â”‚   1125 â”‚                                                                                                                    â”‚
           â”‚   1126 â”‚   async def _wrap_existing_connection(                                                                             â”‚
           â”‚   1127 â”‚   â”‚   self,                                                                                                        â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno 111] Connect call failed 
           ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                                                    
                                                                                                                                          
           During handling of the above exception, another exception occurred:                                                            
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:276 in _run_with_timeout_failure                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   273 ) -> tuple[PQASession, AgentStatus]:                                                                                  â”‚
           â”‚   274 â”‚   try:                                                                                                              â”‚
           â”‚   275 â”‚   â”‚   async with asyncio.timeout(query.settings.agent.timeout):                                                     â”‚
           â”‚ â± 276 â”‚   â”‚   â”‚   status = await rollout()                                                                                  â”‚
           â”‚   277 â”‚   except TimeoutError:                                                                                              â”‚
           â”‚   278 â”‚   â”‚   logger.warning(                                                                                               â”‚
           â”‚   279 â”‚   â”‚   â”‚   f"Agent timeout after {query.settings.agent.timeout}-sec, just answering."                                â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:410 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   407 â”‚   â”‚   â”‚   â”‚   )                                                                                                     â”‚
           â”‚   408 â”‚   â”‚   â”‚   â”‚   return AgentStatus.TRUNCATED                                                                          â”‚
           â”‚   409 â”‚   â”‚   â”‚   agent_state.messages += obs                                                                               â”‚
           â”‚ â± 410 â”‚   â”‚   â”‚   for attempt in Retrying(                                                                                  â”‚
           â”‚   411 â”‚   â”‚   â”‚   â”‚   stop=stop_after_attempt(5),                                                                           â”‚
           â”‚   412 â”‚   â”‚   â”‚   â”‚   retry=retry_if_exception_type(MalformedMessageError),                                                 â”‚
           â”‚   413 â”‚   â”‚   â”‚   â”‚   before_sleep=before_sleep_log(logger, logging.WARNING),                                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:443 in __iter__                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   440 â”‚   â”‚                                                                                                                 â”‚
           â”‚   441 â”‚   â”‚   retry_state = RetryCallState(self, fn=None, args=(), kwargs={})                                               â”‚
           â”‚   442 â”‚   â”‚   while True:                                                                                                   â”‚
           â”‚ â± 443 â”‚   â”‚   â”‚   do = self.iter(retry_state=retry_state)                                                                   â”‚
           â”‚   444 â”‚   â”‚   â”‚   if isinstance(do, DoAttempt):                                                                             â”‚
           â”‚   445 â”‚   â”‚   â”‚   â”‚   yield AttemptManager(retry_state=retry_state)                                                         â”‚
           â”‚   446 â”‚   â”‚   â”‚   elif isinstance(do, DoSleep):                                                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:376 in iter                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   373 â”‚   â”‚   self._begin_iter(retry_state)                                                                                 â”‚
           â”‚   374 â”‚   â”‚   result = None                                                                                                 â”‚
           â”‚   375 â”‚   â”‚   for action in self.iter_state.actions:                                                                        â”‚
           â”‚ â± 376 â”‚   â”‚   â”‚   result = action(retry_state)                                                                              â”‚
           â”‚   377 â”‚   â”‚   return result                                                                                                 â”‚
           â”‚   378 â”‚                                                                                                                     â”‚
           â”‚   379 â”‚   def _begin_iter(self, retry_state: "RetryCallState") -> None:  # noqa                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:398 in <lambda>                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   395 â”‚                                                                                                                     â”‚
           â”‚   396 â”‚   def _post_retry_check_actions(self, retry_state: "RetryCallState") -> None:                                       â”‚
           â”‚   397 â”‚   â”‚   if not (self.iter_state.is_explicit_retry or self.iter_state.retry_run_result):                               â”‚
           â”‚ â± 398 â”‚   â”‚   â”‚   self._add_action_func(lambda rs: rs.outcome.result())                                                     â”‚
           â”‚   399 â”‚   â”‚   â”‚   return                                                                                                    â”‚
           â”‚   400 â”‚   â”‚                                                                                                                 â”‚
           â”‚   401 â”‚   â”‚   if self.after is not None:                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:449 in result                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚   446 â”‚   â”‚   â”‚   â”‚   if self._state in [CANCELLED, CANCELLED_AND_NOTIFIED]:                                                â”‚
           â”‚   447 â”‚   â”‚   â”‚   â”‚   â”‚   raise CancelledError()                                                                            â”‚
           â”‚   448 â”‚   â”‚   â”‚   â”‚   elif self._state == FINISHED:                                                                         â”‚
           â”‚ â± 449 â”‚   â”‚   â”‚   â”‚   â”‚   return self.__get_result()                                                                        â”‚
           â”‚   450 â”‚   â”‚   â”‚   â”‚                                                                                                         â”‚
           â”‚   451 â”‚   â”‚   â”‚   â”‚   self._condition.wait(timeout)                                                                         â”‚
           â”‚   452                                                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:401 in __get_result                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   398 â”‚   def __get_result(self):                                                                                           â”‚
           â”‚   399 â”‚   â”‚   if self._exception:                                                                                           â”‚
           â”‚   400 â”‚   â”‚   â”‚   try:                                                                                                      â”‚
           â”‚ â± 401 â”‚   â”‚   â”‚   â”‚   raise self._exception                                                                                 â”‚
           â”‚   402 â”‚   â”‚   â”‚   finally:                                                                                                  â”‚
           â”‚   403 â”‚   â”‚   â”‚   â”‚   # Break a reference cycle with the exception in self._exception                                       â”‚
           â”‚   404 â”‚   â”‚   â”‚   â”‚   self = None                                                                                           â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:417 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   414 â”‚   â”‚   â”‚   â”‚   reraise=True,                                                                                         â”‚
           â”‚   415 â”‚   â”‚   â”‚   ):                                                                                                        â”‚
           â”‚   416 â”‚   â”‚   â”‚   â”‚   with attempt:  # Retrying if ToolSelector fails to select a tool                                      â”‚
           â”‚ â± 417 â”‚   â”‚   â”‚   â”‚   â”‚   action = await agent(agent_state.messages, tools)                                                 â”‚
           â”‚   418 â”‚   â”‚   â”‚   agent_state.messages = [*agent_state.messages, action]                                                    â”‚
           â”‚   419 â”‚   â”‚   â”‚   if on_agent_action_callback:                                                                              â”‚
           â”‚   420 â”‚   â”‚   â”‚   â”‚   await on_agent_action_callback(action, agent_state)                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aviary/tools/utils.py:182 in __call__                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   179 â”‚   â”‚   â”‚   self._ledger.messages.extend(messages)                                                                    â”‚
           â”‚   180 â”‚   â”‚   â”‚   messages = self._ledger.messages                                                                          â”‚
           â”‚   181 â”‚   â”‚                                                                                                                 â”‚
           â”‚ â± 182 â”‚   â”‚   model_response = await self._bound_acompletion(                                                               â”‚
           â”‚   183 â”‚   â”‚   â”‚   messages=MessagesAdapter.dump_python(                                                                     â”‚
           â”‚   184 â”‚   â”‚   â”‚   â”‚   messages, exclude_none=True, by_alias=True                                                            â”‚
           â”‚   185 â”‚   â”‚   â”‚   ),                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:817 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    814 â”‚   â”‚   â”‚   â”‚   â”‚   original_exception=e,                                                                            â”‚
           â”‚    815 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    816 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚ â±  817 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    818 â”‚                                                                                                                    â”‚
           â”‚    819 â”‚   async def _acompletion(                                                                                          â”‚
           â”‚    820 â”‚   â”‚   self, model: str, messages: List[Dict[str, str]], **kwargs                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:793 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    790 â”‚   â”‚   â”‚   if request_priority is not None and isinstance(request_priority, int):                                   â”‚
           â”‚    791 â”‚   â”‚   â”‚   â”‚   response = await self.schedule_acompletion(**kwargs)                                                 â”‚
           â”‚    792 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â±  793 â”‚   â”‚   â”‚   â”‚   response = await self.async_function_with_fallbacks(**kwargs)                                        â”‚
           â”‚    794 â”‚   â”‚   â”‚   end_time = time.time()                                                                                   â”‚
           â”‚    795 â”‚   â”‚   â”‚   _duration = end_time - start_time                                                                        â”‚
           â”‚    796 â”‚   â”‚   â”‚   asyncio.create_task(                                                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2795 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2792 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚   2793 â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                                â”‚
           â”‚   2794 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2795 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2796 â”‚                                                                                                                    â”‚
           â”‚   2797 â”‚   def _handle_mock_testing_fallbacks(                                                                              â”‚
           â”‚   2798 â”‚   â”‚   self,                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2631 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2628 â”‚   â”‚   â”‚   â”‚   content_policy_fallbacks=content_policy_fallbacks,                                                   â”‚
           â”‚   2629 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2630 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2631 â”‚   â”‚   â”‚   response = await self.async_function_with_retries(*args, **kwargs)                                       â”‚
           â”‚   2632 â”‚   â”‚   â”‚   verbose_router_logger.debug(f"Async Response: {response}")                                               â”‚
           â”‚   2633 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2634 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2967 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2964 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "max_retries", num_retries)                                              â”‚
           â”‚   2965 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "num_retries", current_attempt)                                          â”‚
           â”‚   2966 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2967 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2968 â”‚                                                                                                                    â”‚
           â”‚   2969 â”‚   async def make_call(self, original_function: Any, *args, **kwargs):                                              â”‚
           â”‚   2970 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2879 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2876 â”‚   â”‚   â”‚   â”‚   model_group=model_group, kwargs=kwargs                                                               â”‚
           â”‚   2877 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2878 â”‚   â”‚   â”‚   # if the function call is successful, no exception will be raised and we'll                              â”‚
           â”‚        break out of the loop                                                                                                â”‚
           â”‚ â± 2879 â”‚   â”‚   â”‚   response = await self.make_call(original_function, *args, **kwargs)                                      â”‚
           â”‚   2880 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   2881 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2882 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2976 in make_call                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2973 â”‚   â”‚   model_group = kwargs.get("model")                                                                            â”‚
           â”‚   2974 â”‚   â”‚   response = original_function(*args, **kwargs)                                                                â”‚
           â”‚   2975 â”‚   â”‚   if inspect.iscoroutinefunction(response) or inspect.isawaitable(response):                                   â”‚
           â”‚ â± 2976 â”‚   â”‚   â”‚   response = await response                                                                                â”‚
           â”‚   2977 â”‚   â”‚   ## PROCESS RESPONSE HEADERS                                                                                  â”‚
           â”‚   2978 â”‚   â”‚   await self.set_response_headers(response=response, model_group=model_group)                                  â”‚
           â”‚   2979                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:947 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    944 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚    945 â”‚   â”‚   â”‚   if model_name is not None:                                                                               â”‚
           â”‚    946 â”‚   â”‚   â”‚   â”‚   self.fail_calls[model_name] += 1                                                                     â”‚
           â”‚ â±  947 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    948 â”‚                                                                                                                    â”‚
           â”‚    949 â”‚   def _update_kwargs_before_fallbacks(self, model: str, kwargs: dict) -> None:                                     â”‚
           â”‚    950 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:915 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    912 â”‚   â”‚   â”‚   â”‚   â”‚   parent_otel_span=parent_otel_span,                                                               â”‚
           â”‚    913 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    914 â”‚   â”‚   â”‚   â”‚                                                                                                        â”‚
           â”‚ â±  915 â”‚   â”‚   â”‚   â”‚   response = await _response                                                                           â”‚
           â”‚    916 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚    917 â”‚   â”‚   â”‚   ## CHECK CONTENT FILTER ERROR ##                                                                         â”‚
           â”‚    918 â”‚   â”‚   â”‚   if isinstance(response, ModelResponse):                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1175 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1172 â”‚   â”‚   â”‚   â”‚   â”‚   else:                                                                                            â”‚
           â”‚   1173 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   kwargs["model"] = context_window_fallback_dict[model]                                        â”‚
           â”‚   1174 â”‚   â”‚   â”‚   â”‚   â”‚   return await original_function(*args, **kwargs)                                                  â”‚
           â”‚ â± 1175 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   1176 â”‚                                                                                                                    â”‚
           â”‚   1177 â”‚   is_coroutine = inspect.iscoroutinefunction(original_function)                                                    â”‚
           â”‚   1178                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1031 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1028 â”‚   â”‚   â”‚   â”‚   return _caching_handler_response.final_embedding_cached_response                                     â”‚
           â”‚   1029 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1030 â”‚   â”‚   â”‚   # MODEL CALL                                                                                             â”‚
           â”‚ â± 1031 â”‚   â”‚   â”‚   result = await original_function(*args, **kwargs)                                                        â”‚
           â”‚   1032 â”‚   â”‚   â”‚   end_time = datetime.datetime.now()                                                                       â”‚
           â”‚   1033 â”‚   â”‚   â”‚   if "stream" in kwargs and kwargs["stream"] is True:                                                      â”‚
           â”‚   1034 â”‚   â”‚   â”‚   â”‚   if (                                                                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:499 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    496 â”‚   â”‚   return response                                                                                              â”‚
           â”‚    497 â”‚   except Exception as e:                                                                                           â”‚
           â”‚    498 â”‚   â”‚   custom_llm_provider = custom_llm_provider or "openai"                                                        â”‚
           â”‚ â±  499 â”‚   â”‚   raise exception_type(                                                                                        â”‚
           â”‚    500 â”‚   â”‚   â”‚   model=model,                                                                                             â”‚
           â”‚    501 â”‚   â”‚   â”‚   custom_llm_provider=custom_llm_provider,                                                                 â”‚
           â”‚    502 â”‚   â”‚   â”‚   original_exception=e,                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:212 â”‚
           â”‚ 5 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2122 â”‚   â”‚   # don't let an error with mapping interrupt the user from receiving an error                                 â”‚
           â”‚        from the llm api calls                                                                                               â”‚
           â”‚   2123 â”‚   â”‚   if exception_mapping_worked:                                                                                 â”‚
           â”‚   2124 â”‚   â”‚   â”‚   setattr(e, "litellm_response_headers", litellm_response_headers)                                         â”‚
           â”‚ â± 2125 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   2126 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   2127 â”‚   â”‚   â”‚   for error_type in litellm.LITELLM_EXCEPTION_TYPES:                                                       â”‚
           â”‚   2128 â”‚   â”‚   â”‚   â”‚   if isinstance(e, error_type):                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:210 â”‚
           â”‚ 1 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2098 â”‚   â”‚   â”‚   â”‚   â”‚   request=original_exception.request,                                                              â”‚
           â”‚   2099 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚   2100 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â± 2101 â”‚   â”‚   â”‚   â”‚   raise APIConnectionError(                                                                            â”‚
           â”‚   2102 â”‚   â”‚   â”‚   â”‚   â”‚   message="{}\n{}".format(                                                                         â”‚
           â”‚   2103 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   str(original_exception), traceback.format_exc()                                              â”‚
           â”‚   2104 â”‚   â”‚   â”‚   â”‚   â”‚   ),                                                                                               â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           APIConnectionError: litellm.APIConnectionError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1109, in                 
           _wrap_create_connection                                                                                                        
               sock = await aiohappyeyeballs.start_connection(                                                                            
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                            
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py", line 123, in              
           start_connection                                                                                                               
               raise OSError(first_errno, msg)                                                                                            
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py", line 477, in acompletion           
               response = await init_response                                                                                             
                          ^^^^^^^^^^^^^^^^^^^                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 566, in                
           ollama_acompletion                                                                                                             
               raise e  # don't use verbose_logger.exception, if exception is raised                                                      
               ^^^^^^^                                                                                                                    
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 507, in                
           ollama_acompletion                                                                                                             
               resp = await session.post(url, json=data)                                                                                  
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                  
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py", line 696, in _request            
               conn = await self._connector.connect(                                                                                      
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 544, in connect          
               proto = await self._create_connection(req, traces, timeout)                                                                
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1050, in                 
           _create_connection                                                                                                             
               _, proto = await self._create_direct_connection(req, traces, timeout)                                                      
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1394, in                 
           _create_direct_connection                                                                                                      
               raise last_exc                                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1363, in                 
           _create_direct_connection                                                                                                      
               transp, proto = await self._wrap_create_connection(                                                                        
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                        
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1124, in                 
           _wrap_create_connection                                                                                                        
               raise client_error(req.connection_key, exc) from exc                                                                       
           aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
                                                                                                                                          
           Received Model Group=ollama/llama3.2                                                                                           
           Available Model Group Fallbacks=None LiteLLM Retried: 2 times, LiteLLM Max Retries: 3                                          
[01:01:51] Answer:                                                                                                                        


 ANSWERING QUESTION: sciqag_question_80.json
 ----------------------------- 



[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.

[01:02:11] Trajectory failed.                                                                                                             
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1109 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1106 â”‚   â”‚   â”‚   async with ceil_timeout(                                                                                 â”‚
           â”‚   1107 â”‚   â”‚   â”‚   â”‚   timeout.sock_connect, ceil_threshold=timeout.ceil_threshold                                          â”‚
           â”‚   1108 â”‚   â”‚   â”‚   ):                                                                                                       â”‚
           â”‚ â± 1109 â”‚   â”‚   â”‚   â”‚   sock = await aiohappyeyeballs.start_connection(                                                      â”‚
           â”‚   1110 â”‚   â”‚   â”‚   â”‚   â”‚   addr_infos=addr_infos,                                                                           â”‚
           â”‚   1111 â”‚   â”‚   â”‚   â”‚   â”‚   local_addr_infos=self._local_addr_infos,                                                         â”‚
           â”‚   1112 â”‚   â”‚   â”‚   â”‚   â”‚   happy_eyeballs_delay=self._happy_eyeballs_delay,                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py:123 in start_connection          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   120 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, OSError) and exc.errno == first_errno                                         â”‚
           â”‚   121 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   for exc in all_exceptions                                                                     â”‚
           â”‚   122 â”‚   â”‚   â”‚   â”‚   â”‚   ):                                                                                                â”‚
           â”‚ â± 123 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   raise OSError(first_errno, msg)                                                               â”‚
           â”‚   124 â”‚   â”‚   â”‚   â”‚   elif isinstance(first_exception, RuntimeError) and all(                                               â”‚
           â”‚   125 â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, RuntimeError) for exc in all_exceptions                                           â”‚
           â”‚   126 â”‚   â”‚   â”‚   â”‚   ):                                                                                                    â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:477 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    474 â”‚   â”‚   â”‚   â”‚   â”‚   response = ModelResponse(**init_response)                                                        â”‚
           â”‚    475 â”‚   â”‚   â”‚   â”‚   response = init_response                                                                             â”‚
           â”‚    476 â”‚   â”‚   â”‚   elif asyncio.iscoroutine(init_response):                                                                 â”‚
           â”‚ â±  477 â”‚   â”‚   â”‚   â”‚   response = await init_response                                                                       â”‚
           â”‚    478 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚    479 â”‚   â”‚   â”‚   â”‚   response = init_response  # type: ignore                                                             â”‚
           â”‚    480                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:566 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   563 â”‚   â”‚   â”‚   )                                                                                                         â”‚
           â”‚   564 â”‚   â”‚   â”‚   return model_response                                                                                     â”‚
           â”‚   565 â”‚   except Exception as e:                                                                                            â”‚
           â”‚ â± 566 â”‚   â”‚   raise e  # don't use verbose_logger.exception, if exception is raised                                         â”‚
           â”‚   567                                                                                                                       â”‚
           â”‚   568                                                                                                                       â”‚
           â”‚   569 async def ollama_aembeddings(                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:507 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   504 â”‚   try:                                                                                                              â”‚
           â”‚   505 â”‚   â”‚   timeout = aiohttp.ClientTimeout(total=litellm.request_timeout)  # 10 minutes                                  â”‚
           â”‚   506 â”‚   â”‚   async with aiohttp.ClientSession(timeout=timeout) as session:                                                 â”‚
           â”‚ â± 507 â”‚   â”‚   â”‚   resp = await session.post(url, json=data)                                                                 â”‚
           â”‚   508 â”‚   â”‚   â”‚                                                                                                             â”‚
           â”‚   509 â”‚   â”‚   â”‚   if resp.status != 200:                                                                                    â”‚
           â”‚   510 â”‚   â”‚   â”‚   â”‚   text = await resp.text()                                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py:696 in _request                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚    693 â”‚   â”‚   â”‚   â”‚   â”‚                                                                                                    â”‚
           â”‚    694 â”‚   â”‚   â”‚   â”‚   â”‚   # connection timeout                                                                             â”‚
           â”‚    695 â”‚   â”‚   â”‚   â”‚   â”‚   try:                                                                                             â”‚
           â”‚ â±  696 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   conn = await self._connector.connect(                                                        â”‚
           â”‚    697 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   req, traces=traces, timeout=real_timeout                                                 â”‚
           â”‚    698 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚    699 â”‚   â”‚   â”‚   â”‚   â”‚   except asyncio.TimeoutError as exc:                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:544 in connect                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚    541 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    542 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    543 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_start()                                                   â”‚
           â”‚ â±  544 â”‚   â”‚   â”‚   â”‚   proto = await self._create_connection(req, traces, timeout)                                          â”‚
           â”‚    545 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    546 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    547 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_end()                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1050 in _create_connection           â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1047 â”‚   â”‚   if req.proxy:                                                                                                â”‚
           â”‚   1048 â”‚   â”‚   â”‚   _, proto = await self._create_proxy_connection(req, traces, timeout)                                     â”‚
           â”‚   1049 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚ â± 1050 â”‚   â”‚   â”‚   _, proto = await self._create_direct_connection(req, traces, timeout)                                    â”‚
           â”‚   1051 â”‚   â”‚                                                                                                                â”‚
           â”‚   1052 â”‚   â”‚   return proto                                                                                                 â”‚
           â”‚   1053                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1394 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1391 â”‚   â”‚   â”‚   return transp, proto                                                                                     â”‚
           â”‚   1392 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   1393 â”‚   â”‚   â”‚   assert last_exc is not None                                                                              â”‚
           â”‚ â± 1394 â”‚   â”‚   â”‚   raise last_exc                                                                                           â”‚
           â”‚   1395 â”‚                                                                                                                    â”‚
           â”‚   1396 â”‚   async def _create_proxy_connection(                                                                              â”‚
           â”‚   1397 â”‚   â”‚   self, req: ClientRequest, traces: List["Trace"], timeout: "ClientTimeout"                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1363 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1360 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   1361 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1362 â”‚   â”‚   â”‚   try:                                                                                                     â”‚
           â”‚ â± 1363 â”‚   â”‚   â”‚   â”‚   transp, proto = await self._wrap_create_connection(                                                  â”‚
           â”‚   1364 â”‚   â”‚   â”‚   â”‚   â”‚   self._factory,                                                                                   â”‚
           â”‚   1365 â”‚   â”‚   â”‚   â”‚   â”‚   timeout=timeout,                                                                                 â”‚
           â”‚   1366 â”‚   â”‚   â”‚   â”‚   â”‚   ssl=sslcontext,                                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1124 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1121 â”‚   â”‚   except OSError as exc:                                                                                       â”‚
           â”‚   1122 â”‚   â”‚   â”‚   if exc.errno is None and isinstance(exc, asyncio.TimeoutError):                                          â”‚
           â”‚   1123 â”‚   â”‚   â”‚   â”‚   raise                                                                                                â”‚
           â”‚ â± 1124 â”‚   â”‚   â”‚   raise client_error(req.connection_key, exc) from exc                                                     â”‚
           â”‚   1125 â”‚                                                                                                                    â”‚
           â”‚   1126 â”‚   async def _wrap_existing_connection(                                                                             â”‚
           â”‚   1127 â”‚   â”‚   self,                                                                                                        â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno 111] Connect call failed 
           ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                                                    
                                                                                                                                          
           During handling of the above exception, another exception occurred:                                                            
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:276 in _run_with_timeout_failure                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   273 ) -> tuple[PQASession, AgentStatus]:                                                                                  â”‚
           â”‚   274 â”‚   try:                                                                                                              â”‚
           â”‚   275 â”‚   â”‚   async with asyncio.timeout(query.settings.agent.timeout):                                                     â”‚
           â”‚ â± 276 â”‚   â”‚   â”‚   status = await rollout()                                                                                  â”‚
           â”‚   277 â”‚   except TimeoutError:                                                                                              â”‚
           â”‚   278 â”‚   â”‚   logger.warning(                                                                                               â”‚
           â”‚   279 â”‚   â”‚   â”‚   f"Agent timeout after {query.settings.agent.timeout}-sec, just answering."                                â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:410 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   407 â”‚   â”‚   â”‚   â”‚   )                                                                                                     â”‚
           â”‚   408 â”‚   â”‚   â”‚   â”‚   return AgentStatus.TRUNCATED                                                                          â”‚
           â”‚   409 â”‚   â”‚   â”‚   agent_state.messages += obs                                                                               â”‚
           â”‚ â± 410 â”‚   â”‚   â”‚   for attempt in Retrying(                                                                                  â”‚
           â”‚   411 â”‚   â”‚   â”‚   â”‚   stop=stop_after_attempt(5),                                                                           â”‚
           â”‚   412 â”‚   â”‚   â”‚   â”‚   retry=retry_if_exception_type(MalformedMessageError),                                                 â”‚
           â”‚   413 â”‚   â”‚   â”‚   â”‚   before_sleep=before_sleep_log(logger, logging.WARNING),                                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:443 in __iter__                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   440 â”‚   â”‚                                                                                                                 â”‚
           â”‚   441 â”‚   â”‚   retry_state = RetryCallState(self, fn=None, args=(), kwargs={})                                               â”‚
           â”‚   442 â”‚   â”‚   while True:                                                                                                   â”‚
           â”‚ â± 443 â”‚   â”‚   â”‚   do = self.iter(retry_state=retry_state)                                                                   â”‚
           â”‚   444 â”‚   â”‚   â”‚   if isinstance(do, DoAttempt):                                                                             â”‚
           â”‚   445 â”‚   â”‚   â”‚   â”‚   yield AttemptManager(retry_state=retry_state)                                                         â”‚
           â”‚   446 â”‚   â”‚   â”‚   elif isinstance(do, DoSleep):                                                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:376 in iter                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   373 â”‚   â”‚   self._begin_iter(retry_state)                                                                                 â”‚
           â”‚   374 â”‚   â”‚   result = None                                                                                                 â”‚
           â”‚   375 â”‚   â”‚   for action in self.iter_state.actions:                                                                        â”‚
           â”‚ â± 376 â”‚   â”‚   â”‚   result = action(retry_state)                                                                              â”‚
           â”‚   377 â”‚   â”‚   return result                                                                                                 â”‚
           â”‚   378 â”‚                                                                                                                     â”‚
           â”‚   379 â”‚   def _begin_iter(self, retry_state: "RetryCallState") -> None:  # noqa                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:398 in <lambda>                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   395 â”‚                                                                                                                     â”‚
           â”‚   396 â”‚   def _post_retry_check_actions(self, retry_state: "RetryCallState") -> None:                                       â”‚
           â”‚   397 â”‚   â”‚   if not (self.iter_state.is_explicit_retry or self.iter_state.retry_run_result):                               â”‚
           â”‚ â± 398 â”‚   â”‚   â”‚   self._add_action_func(lambda rs: rs.outcome.result())                                                     â”‚
           â”‚   399 â”‚   â”‚   â”‚   return                                                                                                    â”‚
           â”‚   400 â”‚   â”‚                                                                                                                 â”‚
           â”‚   401 â”‚   â”‚   if self.after is not None:                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:449 in result                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚   446 â”‚   â”‚   â”‚   â”‚   if self._state in [CANCELLED, CANCELLED_AND_NOTIFIED]:                                                â”‚
           â”‚   447 â”‚   â”‚   â”‚   â”‚   â”‚   raise CancelledError()                                                                            â”‚
           â”‚   448 â”‚   â”‚   â”‚   â”‚   elif self._state == FINISHED:                                                                         â”‚
           â”‚ â± 449 â”‚   â”‚   â”‚   â”‚   â”‚   return self.__get_result()                                                                        â”‚
           â”‚   450 â”‚   â”‚   â”‚   â”‚                                                                                                         â”‚
           â”‚   451 â”‚   â”‚   â”‚   â”‚   self._condition.wait(timeout)                                                                         â”‚
           â”‚   452                                                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:401 in __get_result                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   398 â”‚   def __get_result(self):                                                                                           â”‚
           â”‚   399 â”‚   â”‚   if self._exception:                                                                                           â”‚
           â”‚   400 â”‚   â”‚   â”‚   try:                                                                                                      â”‚
           â”‚ â± 401 â”‚   â”‚   â”‚   â”‚   raise self._exception                                                                                 â”‚
           â”‚   402 â”‚   â”‚   â”‚   finally:                                                                                                  â”‚
           â”‚   403 â”‚   â”‚   â”‚   â”‚   # Break a reference cycle with the exception in self._exception                                       â”‚
           â”‚   404 â”‚   â”‚   â”‚   â”‚   self = None                                                                                           â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:417 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   414 â”‚   â”‚   â”‚   â”‚   reraise=True,                                                                                         â”‚
           â”‚   415 â”‚   â”‚   â”‚   ):                                                                                                        â”‚
           â”‚   416 â”‚   â”‚   â”‚   â”‚   with attempt:  # Retrying if ToolSelector fails to select a tool                                      â”‚
           â”‚ â± 417 â”‚   â”‚   â”‚   â”‚   â”‚   action = await agent(agent_state.messages, tools)                                                 â”‚
           â”‚   418 â”‚   â”‚   â”‚   agent_state.messages = [*agent_state.messages, action]                                                    â”‚
           â”‚   419 â”‚   â”‚   â”‚   if on_agent_action_callback:                                                                              â”‚
           â”‚   420 â”‚   â”‚   â”‚   â”‚   await on_agent_action_callback(action, agent_state)                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aviary/tools/utils.py:182 in __call__                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   179 â”‚   â”‚   â”‚   self._ledger.messages.extend(messages)                                                                    â”‚
           â”‚   180 â”‚   â”‚   â”‚   messages = self._ledger.messages                                                                          â”‚
           â”‚   181 â”‚   â”‚                                                                                                                 â”‚
           â”‚ â± 182 â”‚   â”‚   model_response = await self._bound_acompletion(                                                               â”‚
           â”‚   183 â”‚   â”‚   â”‚   messages=MessagesAdapter.dump_python(                                                                     â”‚
           â”‚   184 â”‚   â”‚   â”‚   â”‚   messages, exclude_none=True, by_alias=True                                                            â”‚
           â”‚   185 â”‚   â”‚   â”‚   ),                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:817 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    814 â”‚   â”‚   â”‚   â”‚   â”‚   original_exception=e,                                                                            â”‚
           â”‚    815 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    816 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚ â±  817 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    818 â”‚                                                                                                                    â”‚
           â”‚    819 â”‚   async def _acompletion(                                                                                          â”‚
           â”‚    820 â”‚   â”‚   self, model: str, messages: List[Dict[str, str]], **kwargs                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:793 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    790 â”‚   â”‚   â”‚   if request_priority is not None and isinstance(request_priority, int):                                   â”‚
           â”‚    791 â”‚   â”‚   â”‚   â”‚   response = await self.schedule_acompletion(**kwargs)                                                 â”‚
           â”‚    792 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â±  793 â”‚   â”‚   â”‚   â”‚   response = await self.async_function_with_fallbacks(**kwargs)                                        â”‚
           â”‚    794 â”‚   â”‚   â”‚   end_time = time.time()                                                                                   â”‚
           â”‚    795 â”‚   â”‚   â”‚   _duration = end_time - start_time                                                                        â”‚
           â”‚    796 â”‚   â”‚   â”‚   asyncio.create_task(                                                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2795 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2792 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚   2793 â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                                â”‚
           â”‚   2794 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2795 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2796 â”‚                                                                                                                    â”‚
           â”‚   2797 â”‚   def _handle_mock_testing_fallbacks(                                                                              â”‚
           â”‚   2798 â”‚   â”‚   self,                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2631 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2628 â”‚   â”‚   â”‚   â”‚   content_policy_fallbacks=content_policy_fallbacks,                                                   â”‚
           â”‚   2629 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2630 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2631 â”‚   â”‚   â”‚   response = await self.async_function_with_retries(*args, **kwargs)                                       â”‚
           â”‚   2632 â”‚   â”‚   â”‚   verbose_router_logger.debug(f"Async Response: {response}")                                               â”‚
           â”‚   2633 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2634 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2967 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2964 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "max_retries", num_retries)                                              â”‚
           â”‚   2965 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "num_retries", current_attempt)                                          â”‚
           â”‚   2966 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2967 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2968 â”‚                                                                                                                    â”‚
           â”‚   2969 â”‚   async def make_call(self, original_function: Any, *args, **kwargs):                                              â”‚
           â”‚   2970 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2879 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2876 â”‚   â”‚   â”‚   â”‚   model_group=model_group, kwargs=kwargs                                                               â”‚
           â”‚   2877 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2878 â”‚   â”‚   â”‚   # if the function call is successful, no exception will be raised and we'll                              â”‚
           â”‚        break out of the loop                                                                                                â”‚
           â”‚ â± 2879 â”‚   â”‚   â”‚   response = await self.make_call(original_function, *args, **kwargs)                                      â”‚
           â”‚   2880 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   2881 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2882 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2976 in make_call                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2973 â”‚   â”‚   model_group = kwargs.get("model")                                                                            â”‚
           â”‚   2974 â”‚   â”‚   response = original_function(*args, **kwargs)                                                                â”‚
           â”‚   2975 â”‚   â”‚   if inspect.iscoroutinefunction(response) or inspect.isawaitable(response):                                   â”‚
           â”‚ â± 2976 â”‚   â”‚   â”‚   response = await response                                                                                â”‚
           â”‚   2977 â”‚   â”‚   ## PROCESS RESPONSE HEADERS                                                                                  â”‚
           â”‚   2978 â”‚   â”‚   await self.set_response_headers(response=response, model_group=model_group)                                  â”‚
           â”‚   2979                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:947 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    944 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚    945 â”‚   â”‚   â”‚   if model_name is not None:                                                                               â”‚
           â”‚    946 â”‚   â”‚   â”‚   â”‚   self.fail_calls[model_name] += 1                                                                     â”‚
           â”‚ â±  947 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    948 â”‚                                                                                                                    â”‚
           â”‚    949 â”‚   def _update_kwargs_before_fallbacks(self, model: str, kwargs: dict) -> None:                                     â”‚
           â”‚    950 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:915 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    912 â”‚   â”‚   â”‚   â”‚   â”‚   parent_otel_span=parent_otel_span,                                                               â”‚
           â”‚    913 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    914 â”‚   â”‚   â”‚   â”‚                                                                                                        â”‚
           â”‚ â±  915 â”‚   â”‚   â”‚   â”‚   response = await _response                                                                           â”‚
           â”‚    916 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚    917 â”‚   â”‚   â”‚   ## CHECK CONTENT FILTER ERROR ##                                                                         â”‚
           â”‚    918 â”‚   â”‚   â”‚   if isinstance(response, ModelResponse):                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1175 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1172 â”‚   â”‚   â”‚   â”‚   â”‚   else:                                                                                            â”‚
           â”‚   1173 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   kwargs["model"] = context_window_fallback_dict[model]                                        â”‚
           â”‚   1174 â”‚   â”‚   â”‚   â”‚   â”‚   return await original_function(*args, **kwargs)                                                  â”‚
           â”‚ â± 1175 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   1176 â”‚                                                                                                                    â”‚
           â”‚   1177 â”‚   is_coroutine = inspect.iscoroutinefunction(original_function)                                                    â”‚
           â”‚   1178                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1031 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1028 â”‚   â”‚   â”‚   â”‚   return _caching_handler_response.final_embedding_cached_response                                     â”‚
           â”‚   1029 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1030 â”‚   â”‚   â”‚   # MODEL CALL                                                                                             â”‚
           â”‚ â± 1031 â”‚   â”‚   â”‚   result = await original_function(*args, **kwargs)                                                        â”‚
           â”‚   1032 â”‚   â”‚   â”‚   end_time = datetime.datetime.now()                                                                       â”‚
           â”‚   1033 â”‚   â”‚   â”‚   if "stream" in kwargs and kwargs["stream"] is True:                                                      â”‚
           â”‚   1034 â”‚   â”‚   â”‚   â”‚   if (                                                                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:499 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    496 â”‚   â”‚   return response                                                                                              â”‚
           â”‚    497 â”‚   except Exception as e:                                                                                           â”‚
           â”‚    498 â”‚   â”‚   custom_llm_provider = custom_llm_provider or "openai"                                                        â”‚
           â”‚ â±  499 â”‚   â”‚   raise exception_type(                                                                                        â”‚
           â”‚    500 â”‚   â”‚   â”‚   model=model,                                                                                             â”‚
           â”‚    501 â”‚   â”‚   â”‚   custom_llm_provider=custom_llm_provider,                                                                 â”‚
           â”‚    502 â”‚   â”‚   â”‚   original_exception=e,                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:212 â”‚
           â”‚ 5 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2122 â”‚   â”‚   # don't let an error with mapping interrupt the user from receiving an error                                 â”‚
           â”‚        from the llm api calls                                                                                               â”‚
           â”‚   2123 â”‚   â”‚   if exception_mapping_worked:                                                                                 â”‚
           â”‚   2124 â”‚   â”‚   â”‚   setattr(e, "litellm_response_headers", litellm_response_headers)                                         â”‚
           â”‚ â± 2125 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   2126 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   2127 â”‚   â”‚   â”‚   for error_type in litellm.LITELLM_EXCEPTION_TYPES:                                                       â”‚
           â”‚   2128 â”‚   â”‚   â”‚   â”‚   if isinstance(e, error_type):                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:210 â”‚
           â”‚ 1 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2098 â”‚   â”‚   â”‚   â”‚   â”‚   request=original_exception.request,                                                              â”‚
           â”‚   2099 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚   2100 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â± 2101 â”‚   â”‚   â”‚   â”‚   raise APIConnectionError(                                                                            â”‚
           â”‚   2102 â”‚   â”‚   â”‚   â”‚   â”‚   message="{}\n{}".format(                                                                         â”‚
           â”‚   2103 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   str(original_exception), traceback.format_exc()                                              â”‚
           â”‚   2104 â”‚   â”‚   â”‚   â”‚   â”‚   ),                                                                                               â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           APIConnectionError: litellm.APIConnectionError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1109, in                 
           _wrap_create_connection                                                                                                        
               sock = await aiohappyeyeballs.start_connection(                                                                            
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                            
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py", line 123, in              
           start_connection                                                                                                               
               raise OSError(first_errno, msg)                                                                                            
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py", line 477, in acompletion           
               response = await init_response                                                                                             
                          ^^^^^^^^^^^^^^^^^^^                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 566, in                
           ollama_acompletion                                                                                                             
               raise e  # don't use verbose_logger.exception, if exception is raised                                                      
               ^^^^^^^                                                                                                                    
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 507, in                
           ollama_acompletion                                                                                                             
               resp = await session.post(url, json=data)                                                                                  
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                  
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py", line 696, in _request            
               conn = await self._connector.connect(                                                                                      
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 544, in connect          
               proto = await self._create_connection(req, traces, timeout)                                                                
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1050, in                 
           _create_connection                                                                                                             
               _, proto = await self._create_direct_connection(req, traces, timeout)                                                      
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1394, in                 
           _create_direct_connection                                                                                                      
               raise last_exc                                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1363, in                 
           _create_direct_connection                                                                                                      
               transp, proto = await self._wrap_create_connection(                                                                        
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                        
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1124, in                 
           _wrap_create_connection                                                                                                        
               raise client_error(req.connection_key, exc) from exc                                                                       
           aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
                                                                                                                                          
           Received Model Group=ollama/llama3.2                                                                                           
           Available Model Group Fallbacks=None LiteLLM Retried: 2 times, LiteLLM Max Retries: 3                                          
[01:02:14] Answer:                                                                                                                        


 ANSWERING QUESTION: sciqag_question_81.json
 ----------------------------- 



[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.

[01:02:34] Trajectory failed.                                                                                                             
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1109 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1106 â”‚   â”‚   â”‚   async with ceil_timeout(                                                                                 â”‚
           â”‚   1107 â”‚   â”‚   â”‚   â”‚   timeout.sock_connect, ceil_threshold=timeout.ceil_threshold                                          â”‚
           â”‚   1108 â”‚   â”‚   â”‚   ):                                                                                                       â”‚
           â”‚ â± 1109 â”‚   â”‚   â”‚   â”‚   sock = await aiohappyeyeballs.start_connection(                                                      â”‚
           â”‚   1110 â”‚   â”‚   â”‚   â”‚   â”‚   addr_infos=addr_infos,                                                                           â”‚
           â”‚   1111 â”‚   â”‚   â”‚   â”‚   â”‚   local_addr_infos=self._local_addr_infos,                                                         â”‚
           â”‚   1112 â”‚   â”‚   â”‚   â”‚   â”‚   happy_eyeballs_delay=self._happy_eyeballs_delay,                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py:123 in start_connection          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   120 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, OSError) and exc.errno == first_errno                                         â”‚
           â”‚   121 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   for exc in all_exceptions                                                                     â”‚
           â”‚   122 â”‚   â”‚   â”‚   â”‚   â”‚   ):                                                                                                â”‚
           â”‚ â± 123 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   raise OSError(first_errno, msg)                                                               â”‚
           â”‚   124 â”‚   â”‚   â”‚   â”‚   elif isinstance(first_exception, RuntimeError) and all(                                               â”‚
           â”‚   125 â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, RuntimeError) for exc in all_exceptions                                           â”‚
           â”‚   126 â”‚   â”‚   â”‚   â”‚   ):                                                                                                    â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:477 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    474 â”‚   â”‚   â”‚   â”‚   â”‚   response = ModelResponse(**init_response)                                                        â”‚
           â”‚    475 â”‚   â”‚   â”‚   â”‚   response = init_response                                                                             â”‚
           â”‚    476 â”‚   â”‚   â”‚   elif asyncio.iscoroutine(init_response):                                                                 â”‚
           â”‚ â±  477 â”‚   â”‚   â”‚   â”‚   response = await init_response                                                                       â”‚
           â”‚    478 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚    479 â”‚   â”‚   â”‚   â”‚   response = init_response  # type: ignore                                                             â”‚
           â”‚    480                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:566 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   563 â”‚   â”‚   â”‚   )                                                                                                         â”‚
           â”‚   564 â”‚   â”‚   â”‚   return model_response                                                                                     â”‚
           â”‚   565 â”‚   except Exception as e:                                                                                            â”‚
           â”‚ â± 566 â”‚   â”‚   raise e  # don't use verbose_logger.exception, if exception is raised                                         â”‚
           â”‚   567                                                                                                                       â”‚
           â”‚   568                                                                                                                       â”‚
           â”‚   569 async def ollama_aembeddings(                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:507 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   504 â”‚   try:                                                                                                              â”‚
           â”‚   505 â”‚   â”‚   timeout = aiohttp.ClientTimeout(total=litellm.request_timeout)  # 10 minutes                                  â”‚
           â”‚   506 â”‚   â”‚   async with aiohttp.ClientSession(timeout=timeout) as session:                                                 â”‚
           â”‚ â± 507 â”‚   â”‚   â”‚   resp = await session.post(url, json=data)                                                                 â”‚
           â”‚   508 â”‚   â”‚   â”‚                                                                                                             â”‚
           â”‚   509 â”‚   â”‚   â”‚   if resp.status != 200:                                                                                    â”‚
           â”‚   510 â”‚   â”‚   â”‚   â”‚   text = await resp.text()                                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py:696 in _request                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚    693 â”‚   â”‚   â”‚   â”‚   â”‚                                                                                                    â”‚
           â”‚    694 â”‚   â”‚   â”‚   â”‚   â”‚   # connection timeout                                                                             â”‚
           â”‚    695 â”‚   â”‚   â”‚   â”‚   â”‚   try:                                                                                             â”‚
           â”‚ â±  696 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   conn = await self._connector.connect(                                                        â”‚
           â”‚    697 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   req, traces=traces, timeout=real_timeout                                                 â”‚
           â”‚    698 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚    699 â”‚   â”‚   â”‚   â”‚   â”‚   except asyncio.TimeoutError as exc:                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:544 in connect                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚    541 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    542 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    543 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_start()                                                   â”‚
           â”‚ â±  544 â”‚   â”‚   â”‚   â”‚   proto = await self._create_connection(req, traces, timeout)                                          â”‚
           â”‚    545 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    546 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    547 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_end()                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1050 in _create_connection           â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1047 â”‚   â”‚   if req.proxy:                                                                                                â”‚
           â”‚   1048 â”‚   â”‚   â”‚   _, proto = await self._create_proxy_connection(req, traces, timeout)                                     â”‚
           â”‚   1049 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚ â± 1050 â”‚   â”‚   â”‚   _, proto = await self._create_direct_connection(req, traces, timeout)                                    â”‚
           â”‚   1051 â”‚   â”‚                                                                                                                â”‚
           â”‚   1052 â”‚   â”‚   return proto                                                                                                 â”‚
           â”‚   1053                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1394 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1391 â”‚   â”‚   â”‚   return transp, proto                                                                                     â”‚
           â”‚   1392 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   1393 â”‚   â”‚   â”‚   assert last_exc is not None                                                                              â”‚
           â”‚ â± 1394 â”‚   â”‚   â”‚   raise last_exc                                                                                           â”‚
           â”‚   1395 â”‚                                                                                                                    â”‚
           â”‚   1396 â”‚   async def _create_proxy_connection(                                                                              â”‚
           â”‚   1397 â”‚   â”‚   self, req: ClientRequest, traces: List["Trace"], timeout: "ClientTimeout"                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1363 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1360 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   1361 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1362 â”‚   â”‚   â”‚   try:                                                                                                     â”‚
           â”‚ â± 1363 â”‚   â”‚   â”‚   â”‚   transp, proto = await self._wrap_create_connection(                                                  â”‚
           â”‚   1364 â”‚   â”‚   â”‚   â”‚   â”‚   self._factory,                                                                                   â”‚
           â”‚   1365 â”‚   â”‚   â”‚   â”‚   â”‚   timeout=timeout,                                                                                 â”‚
           â”‚   1366 â”‚   â”‚   â”‚   â”‚   â”‚   ssl=sslcontext,                                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1124 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1121 â”‚   â”‚   except OSError as exc:                                                                                       â”‚
           â”‚   1122 â”‚   â”‚   â”‚   if exc.errno is None and isinstance(exc, asyncio.TimeoutError):                                          â”‚
           â”‚   1123 â”‚   â”‚   â”‚   â”‚   raise                                                                                                â”‚
           â”‚ â± 1124 â”‚   â”‚   â”‚   raise client_error(req.connection_key, exc) from exc                                                     â”‚
           â”‚   1125 â”‚                                                                                                                    â”‚
           â”‚   1126 â”‚   async def _wrap_existing_connection(                                                                             â”‚
           â”‚   1127 â”‚   â”‚   self,                                                                                                        â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno 111] Connect call failed 
           ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                                                    
                                                                                                                                          
           During handling of the above exception, another exception occurred:                                                            
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:276 in _run_with_timeout_failure                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   273 ) -> tuple[PQASession, AgentStatus]:                                                                                  â”‚
           â”‚   274 â”‚   try:                                                                                                              â”‚
           â”‚   275 â”‚   â”‚   async with asyncio.timeout(query.settings.agent.timeout):                                                     â”‚
           â”‚ â± 276 â”‚   â”‚   â”‚   status = await rollout()                                                                                  â”‚
           â”‚   277 â”‚   except TimeoutError:                                                                                              â”‚
           â”‚   278 â”‚   â”‚   logger.warning(                                                                                               â”‚
           â”‚   279 â”‚   â”‚   â”‚   f"Agent timeout after {query.settings.agent.timeout}-sec, just answering."                                â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:410 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   407 â”‚   â”‚   â”‚   â”‚   )                                                                                                     â”‚
           â”‚   408 â”‚   â”‚   â”‚   â”‚   return AgentStatus.TRUNCATED                                                                          â”‚
           â”‚   409 â”‚   â”‚   â”‚   agent_state.messages += obs                                                                               â”‚
           â”‚ â± 410 â”‚   â”‚   â”‚   for attempt in Retrying(                                                                                  â”‚
           â”‚   411 â”‚   â”‚   â”‚   â”‚   stop=stop_after_attempt(5),                                                                           â”‚
           â”‚   412 â”‚   â”‚   â”‚   â”‚   retry=retry_if_exception_type(MalformedMessageError),                                                 â”‚
           â”‚   413 â”‚   â”‚   â”‚   â”‚   before_sleep=before_sleep_log(logger, logging.WARNING),                                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:443 in __iter__                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   440 â”‚   â”‚                                                                                                                 â”‚
           â”‚   441 â”‚   â”‚   retry_state = RetryCallState(self, fn=None, args=(), kwargs={})                                               â”‚
           â”‚   442 â”‚   â”‚   while True:                                                                                                   â”‚
           â”‚ â± 443 â”‚   â”‚   â”‚   do = self.iter(retry_state=retry_state)                                                                   â”‚
           â”‚   444 â”‚   â”‚   â”‚   if isinstance(do, DoAttempt):                                                                             â”‚
           â”‚   445 â”‚   â”‚   â”‚   â”‚   yield AttemptManager(retry_state=retry_state)                                                         â”‚
           â”‚   446 â”‚   â”‚   â”‚   elif isinstance(do, DoSleep):                                                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:376 in iter                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   373 â”‚   â”‚   self._begin_iter(retry_state)                                                                                 â”‚
           â”‚   374 â”‚   â”‚   result = None                                                                                                 â”‚
           â”‚   375 â”‚   â”‚   for action in self.iter_state.actions:                                                                        â”‚
           â”‚ â± 376 â”‚   â”‚   â”‚   result = action(retry_state)                                                                              â”‚
           â”‚   377 â”‚   â”‚   return result                                                                                                 â”‚
           â”‚   378 â”‚                                                                                                                     â”‚
           â”‚   379 â”‚   def _begin_iter(self, retry_state: "RetryCallState") -> None:  # noqa                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:398 in <lambda>                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   395 â”‚                                                                                                                     â”‚
           â”‚   396 â”‚   def _post_retry_check_actions(self, retry_state: "RetryCallState") -> None:                                       â”‚
           â”‚   397 â”‚   â”‚   if not (self.iter_state.is_explicit_retry or self.iter_state.retry_run_result):                               â”‚
           â”‚ â± 398 â”‚   â”‚   â”‚   self._add_action_func(lambda rs: rs.outcome.result())                                                     â”‚
           â”‚   399 â”‚   â”‚   â”‚   return                                                                                                    â”‚
           â”‚   400 â”‚   â”‚                                                                                                                 â”‚
           â”‚   401 â”‚   â”‚   if self.after is not None:                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:449 in result                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚   446 â”‚   â”‚   â”‚   â”‚   if self._state in [CANCELLED, CANCELLED_AND_NOTIFIED]:                                                â”‚
           â”‚   447 â”‚   â”‚   â”‚   â”‚   â”‚   raise CancelledError()                                                                            â”‚
           â”‚   448 â”‚   â”‚   â”‚   â”‚   elif self._state == FINISHED:                                                                         â”‚
           â”‚ â± 449 â”‚   â”‚   â”‚   â”‚   â”‚   return self.__get_result()                                                                        â”‚
           â”‚   450 â”‚   â”‚   â”‚   â”‚                                                                                                         â”‚
           â”‚   451 â”‚   â”‚   â”‚   â”‚   self._condition.wait(timeout)                                                                         â”‚
           â”‚   452                                                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:401 in __get_result                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   398 â”‚   def __get_result(self):                                                                                           â”‚
           â”‚   399 â”‚   â”‚   if self._exception:                                                                                           â”‚
           â”‚   400 â”‚   â”‚   â”‚   try:                                                                                                      â”‚
           â”‚ â± 401 â”‚   â”‚   â”‚   â”‚   raise self._exception                                                                                 â”‚
           â”‚   402 â”‚   â”‚   â”‚   finally:                                                                                                  â”‚
           â”‚   403 â”‚   â”‚   â”‚   â”‚   # Break a reference cycle with the exception in self._exception                                       â”‚
           â”‚   404 â”‚   â”‚   â”‚   â”‚   self = None                                                                                           â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:417 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   414 â”‚   â”‚   â”‚   â”‚   reraise=True,                                                                                         â”‚
           â”‚   415 â”‚   â”‚   â”‚   ):                                                                                                        â”‚
           â”‚   416 â”‚   â”‚   â”‚   â”‚   with attempt:  # Retrying if ToolSelector fails to select a tool                                      â”‚
           â”‚ â± 417 â”‚   â”‚   â”‚   â”‚   â”‚   action = await agent(agent_state.messages, tools)                                                 â”‚
           â”‚   418 â”‚   â”‚   â”‚   agent_state.messages = [*agent_state.messages, action]                                                    â”‚
           â”‚   419 â”‚   â”‚   â”‚   if on_agent_action_callback:                                                                              â”‚
           â”‚   420 â”‚   â”‚   â”‚   â”‚   await on_agent_action_callback(action, agent_state)                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aviary/tools/utils.py:182 in __call__                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   179 â”‚   â”‚   â”‚   self._ledger.messages.extend(messages)                                                                    â”‚
           â”‚   180 â”‚   â”‚   â”‚   messages = self._ledger.messages                                                                          â”‚
           â”‚   181 â”‚   â”‚                                                                                                                 â”‚
           â”‚ â± 182 â”‚   â”‚   model_response = await self._bound_acompletion(                                                               â”‚
           â”‚   183 â”‚   â”‚   â”‚   messages=MessagesAdapter.dump_python(                                                                     â”‚
           â”‚   184 â”‚   â”‚   â”‚   â”‚   messages, exclude_none=True, by_alias=True                                                            â”‚
           â”‚   185 â”‚   â”‚   â”‚   ),                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:817 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    814 â”‚   â”‚   â”‚   â”‚   â”‚   original_exception=e,                                                                            â”‚
           â”‚    815 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    816 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚ â±  817 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    818 â”‚                                                                                                                    â”‚
           â”‚    819 â”‚   async def _acompletion(                                                                                          â”‚
           â”‚    820 â”‚   â”‚   self, model: str, messages: List[Dict[str, str]], **kwargs                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:793 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    790 â”‚   â”‚   â”‚   if request_priority is not None and isinstance(request_priority, int):                                   â”‚
           â”‚    791 â”‚   â”‚   â”‚   â”‚   response = await self.schedule_acompletion(**kwargs)                                                 â”‚
           â”‚    792 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â±  793 â”‚   â”‚   â”‚   â”‚   response = await self.async_function_with_fallbacks(**kwargs)                                        â”‚
           â”‚    794 â”‚   â”‚   â”‚   end_time = time.time()                                                                                   â”‚
           â”‚    795 â”‚   â”‚   â”‚   _duration = end_time - start_time                                                                        â”‚
           â”‚    796 â”‚   â”‚   â”‚   asyncio.create_task(                                                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2795 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2792 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚   2793 â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                                â”‚
           â”‚   2794 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2795 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2796 â”‚                                                                                                                    â”‚
           â”‚   2797 â”‚   def _handle_mock_testing_fallbacks(                                                                              â”‚
           â”‚   2798 â”‚   â”‚   self,                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2631 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2628 â”‚   â”‚   â”‚   â”‚   content_policy_fallbacks=content_policy_fallbacks,                                                   â”‚
           â”‚   2629 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2630 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2631 â”‚   â”‚   â”‚   response = await self.async_function_with_retries(*args, **kwargs)                                       â”‚
           â”‚   2632 â”‚   â”‚   â”‚   verbose_router_logger.debug(f"Async Response: {response}")                                               â”‚
           â”‚   2633 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2634 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2967 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2964 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "max_retries", num_retries)                                              â”‚
           â”‚   2965 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "num_retries", current_attempt)                                          â”‚
           â”‚   2966 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2967 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2968 â”‚                                                                                                                    â”‚
           â”‚   2969 â”‚   async def make_call(self, original_function: Any, *args, **kwargs):                                              â”‚
           â”‚   2970 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2879 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2876 â”‚   â”‚   â”‚   â”‚   model_group=model_group, kwargs=kwargs                                                               â”‚
           â”‚   2877 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2878 â”‚   â”‚   â”‚   # if the function call is successful, no exception will be raised and we'll                              â”‚
           â”‚        break out of the loop                                                                                                â”‚
           â”‚ â± 2879 â”‚   â”‚   â”‚   response = await self.make_call(original_function, *args, **kwargs)                                      â”‚
           â”‚   2880 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   2881 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2882 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2976 in make_call                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2973 â”‚   â”‚   model_group = kwargs.get("model")                                                                            â”‚
           â”‚   2974 â”‚   â”‚   response = original_function(*args, **kwargs)                                                                â”‚
           â”‚   2975 â”‚   â”‚   if inspect.iscoroutinefunction(response) or inspect.isawaitable(response):                                   â”‚
           â”‚ â± 2976 â”‚   â”‚   â”‚   response = await response                                                                                â”‚
           â”‚   2977 â”‚   â”‚   ## PROCESS RESPONSE HEADERS                                                                                  â”‚
           â”‚   2978 â”‚   â”‚   await self.set_response_headers(response=response, model_group=model_group)                                  â”‚
           â”‚   2979                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:947 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    944 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚    945 â”‚   â”‚   â”‚   if model_name is not None:                                                                               â”‚
           â”‚    946 â”‚   â”‚   â”‚   â”‚   self.fail_calls[model_name] += 1                                                                     â”‚
           â”‚ â±  947 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    948 â”‚                                                                                                                    â”‚
           â”‚    949 â”‚   def _update_kwargs_before_fallbacks(self, model: str, kwargs: dict) -> None:                                     â”‚
           â”‚    950 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:915 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    912 â”‚   â”‚   â”‚   â”‚   â”‚   parent_otel_span=parent_otel_span,                                                               â”‚
           â”‚    913 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    914 â”‚   â”‚   â”‚   â”‚                                                                                                        â”‚
           â”‚ â±  915 â”‚   â”‚   â”‚   â”‚   response = await _response                                                                           â”‚
           â”‚    916 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚    917 â”‚   â”‚   â”‚   ## CHECK CONTENT FILTER ERROR ##                                                                         â”‚
           â”‚    918 â”‚   â”‚   â”‚   if isinstance(response, ModelResponse):                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1175 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1172 â”‚   â”‚   â”‚   â”‚   â”‚   else:                                                                                            â”‚
           â”‚   1173 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   kwargs["model"] = context_window_fallback_dict[model]                                        â”‚
           â”‚   1174 â”‚   â”‚   â”‚   â”‚   â”‚   return await original_function(*args, **kwargs)                                                  â”‚
           â”‚ â± 1175 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   1176 â”‚                                                                                                                    â”‚
           â”‚   1177 â”‚   is_coroutine = inspect.iscoroutinefunction(original_function)                                                    â”‚
           â”‚   1178                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1031 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1028 â”‚   â”‚   â”‚   â”‚   return _caching_handler_response.final_embedding_cached_response                                     â”‚
           â”‚   1029 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1030 â”‚   â”‚   â”‚   # MODEL CALL                                                                                             â”‚
           â”‚ â± 1031 â”‚   â”‚   â”‚   result = await original_function(*args, **kwargs)                                                        â”‚
           â”‚   1032 â”‚   â”‚   â”‚   end_time = datetime.datetime.now()                                                                       â”‚
           â”‚   1033 â”‚   â”‚   â”‚   if "stream" in kwargs and kwargs["stream"] is True:                                                      â”‚
           â”‚   1034 â”‚   â”‚   â”‚   â”‚   if (                                                                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:499 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    496 â”‚   â”‚   return response                                                                                              â”‚
           â”‚    497 â”‚   except Exception as e:                                                                                           â”‚
           â”‚    498 â”‚   â”‚   custom_llm_provider = custom_llm_provider or "openai"                                                        â”‚
           â”‚ â±  499 â”‚   â”‚   raise exception_type(                                                                                        â”‚
           â”‚    500 â”‚   â”‚   â”‚   model=model,                                                                                             â”‚
           â”‚    501 â”‚   â”‚   â”‚   custom_llm_provider=custom_llm_provider,                                                                 â”‚
           â”‚    502 â”‚   â”‚   â”‚   original_exception=e,                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:212 â”‚
           â”‚ 5 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2122 â”‚   â”‚   # don't let an error with mapping interrupt the user from receiving an error                                 â”‚
           â”‚        from the llm api calls                                                                                               â”‚
           â”‚   2123 â”‚   â”‚   if exception_mapping_worked:                                                                                 â”‚
           â”‚   2124 â”‚   â”‚   â”‚   setattr(e, "litellm_response_headers", litellm_response_headers)                                         â”‚
           â”‚ â± 2125 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   2126 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   2127 â”‚   â”‚   â”‚   for error_type in litellm.LITELLM_EXCEPTION_TYPES:                                                       â”‚
           â”‚   2128 â”‚   â”‚   â”‚   â”‚   if isinstance(e, error_type):                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:210 â”‚
           â”‚ 1 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2098 â”‚   â”‚   â”‚   â”‚   â”‚   request=original_exception.request,                                                              â”‚
           â”‚   2099 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚   2100 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â± 2101 â”‚   â”‚   â”‚   â”‚   raise APIConnectionError(                                                                            â”‚
           â”‚   2102 â”‚   â”‚   â”‚   â”‚   â”‚   message="{}\n{}".format(                                                                         â”‚
           â”‚   2103 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   str(original_exception), traceback.format_exc()                                              â”‚
           â”‚   2104 â”‚   â”‚   â”‚   â”‚   â”‚   ),                                                                                               â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           APIConnectionError: litellm.APIConnectionError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1109, in                 
           _wrap_create_connection                                                                                                        
               sock = await aiohappyeyeballs.start_connection(                                                                            
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                            
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py", line 123, in              
           start_connection                                                                                                               
               raise OSError(first_errno, msg)                                                                                            
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py", line 477, in acompletion           
               response = await init_response                                                                                             
                          ^^^^^^^^^^^^^^^^^^^                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 566, in                
           ollama_acompletion                                                                                                             
               raise e  # don't use verbose_logger.exception, if exception is raised                                                      
               ^^^^^^^                                                                                                                    
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 507, in                
           ollama_acompletion                                                                                                             
               resp = await session.post(url, json=data)                                                                                  
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                  
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py", line 696, in _request            
               conn = await self._connector.connect(                                                                                      
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 544, in connect          
               proto = await self._create_connection(req, traces, timeout)                                                                
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1050, in                 
           _create_connection                                                                                                             
               _, proto = await self._create_direct_connection(req, traces, timeout)                                                      
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1394, in                 
           _create_direct_connection                                                                                                      
               raise last_exc                                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1363, in                 
           _create_direct_connection                                                                                                      
               transp, proto = await self._wrap_create_connection(                                                                        
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                        
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1124, in                 
           _wrap_create_connection                                                                                                        
               raise client_error(req.connection_key, exc) from exc                                                                       
           aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
                                                                                                                                          
           Received Model Group=ollama/llama3.2                                                                                           
           Available Model Group Fallbacks=None LiteLLM Retried: 2 times, LiteLLM Max Retries: 3                                          
[01:02:36] Answer:                                                                                                                        


 ANSWERING QUESTION: sciqag_question_82.json
 ----------------------------- 



[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.

[01:02:56] Trajectory failed.                                                                                                             
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1109 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1106 â”‚   â”‚   â”‚   async with ceil_timeout(                                                                                 â”‚
           â”‚   1107 â”‚   â”‚   â”‚   â”‚   timeout.sock_connect, ceil_threshold=timeout.ceil_threshold                                          â”‚
           â”‚   1108 â”‚   â”‚   â”‚   ):                                                                                                       â”‚
           â”‚ â± 1109 â”‚   â”‚   â”‚   â”‚   sock = await aiohappyeyeballs.start_connection(                                                      â”‚
           â”‚   1110 â”‚   â”‚   â”‚   â”‚   â”‚   addr_infos=addr_infos,                                                                           â”‚
           â”‚   1111 â”‚   â”‚   â”‚   â”‚   â”‚   local_addr_infos=self._local_addr_infos,                                                         â”‚
           â”‚   1112 â”‚   â”‚   â”‚   â”‚   â”‚   happy_eyeballs_delay=self._happy_eyeballs_delay,                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py:123 in start_connection          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   120 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, OSError) and exc.errno == first_errno                                         â”‚
           â”‚   121 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   for exc in all_exceptions                                                                     â”‚
           â”‚   122 â”‚   â”‚   â”‚   â”‚   â”‚   ):                                                                                                â”‚
           â”‚ â± 123 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   raise OSError(first_errno, msg)                                                               â”‚
           â”‚   124 â”‚   â”‚   â”‚   â”‚   elif isinstance(first_exception, RuntimeError) and all(                                               â”‚
           â”‚   125 â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, RuntimeError) for exc in all_exceptions                                           â”‚
           â”‚   126 â”‚   â”‚   â”‚   â”‚   ):                                                                                                    â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:477 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    474 â”‚   â”‚   â”‚   â”‚   â”‚   response = ModelResponse(**init_response)                                                        â”‚
           â”‚    475 â”‚   â”‚   â”‚   â”‚   response = init_response                                                                             â”‚
           â”‚    476 â”‚   â”‚   â”‚   elif asyncio.iscoroutine(init_response):                                                                 â”‚
           â”‚ â±  477 â”‚   â”‚   â”‚   â”‚   response = await init_response                                                                       â”‚
           â”‚    478 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚    479 â”‚   â”‚   â”‚   â”‚   response = init_response  # type: ignore                                                             â”‚
           â”‚    480                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:566 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   563 â”‚   â”‚   â”‚   )                                                                                                         â”‚
           â”‚   564 â”‚   â”‚   â”‚   return model_response                                                                                     â”‚
           â”‚   565 â”‚   except Exception as e:                                                                                            â”‚
           â”‚ â± 566 â”‚   â”‚   raise e  # don't use verbose_logger.exception, if exception is raised                                         â”‚
           â”‚   567                                                                                                                       â”‚
           â”‚   568                                                                                                                       â”‚
           â”‚   569 async def ollama_aembeddings(                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:507 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   504 â”‚   try:                                                                                                              â”‚
           â”‚   505 â”‚   â”‚   timeout = aiohttp.ClientTimeout(total=litellm.request_timeout)  # 10 minutes                                  â”‚
           â”‚   506 â”‚   â”‚   async with aiohttp.ClientSession(timeout=timeout) as session:                                                 â”‚
           â”‚ â± 507 â”‚   â”‚   â”‚   resp = await session.post(url, json=data)                                                                 â”‚
           â”‚   508 â”‚   â”‚   â”‚                                                                                                             â”‚
           â”‚   509 â”‚   â”‚   â”‚   if resp.status != 200:                                                                                    â”‚
           â”‚   510 â”‚   â”‚   â”‚   â”‚   text = await resp.text()                                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py:696 in _request                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚    693 â”‚   â”‚   â”‚   â”‚   â”‚                                                                                                    â”‚
           â”‚    694 â”‚   â”‚   â”‚   â”‚   â”‚   # connection timeout                                                                             â”‚
           â”‚    695 â”‚   â”‚   â”‚   â”‚   â”‚   try:                                                                                             â”‚
           â”‚ â±  696 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   conn = await self._connector.connect(                                                        â”‚
           â”‚    697 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   req, traces=traces, timeout=real_timeout                                                 â”‚
           â”‚    698 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚    699 â”‚   â”‚   â”‚   â”‚   â”‚   except asyncio.TimeoutError as exc:                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:544 in connect                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚    541 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    542 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    543 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_start()                                                   â”‚
           â”‚ â±  544 â”‚   â”‚   â”‚   â”‚   proto = await self._create_connection(req, traces, timeout)                                          â”‚
           â”‚    545 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    546 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    547 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_end()                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1050 in _create_connection           â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1047 â”‚   â”‚   if req.proxy:                                                                                                â”‚
           â”‚   1048 â”‚   â”‚   â”‚   _, proto = await self._create_proxy_connection(req, traces, timeout)                                     â”‚
           â”‚   1049 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚ â± 1050 â”‚   â”‚   â”‚   _, proto = await self._create_direct_connection(req, traces, timeout)                                    â”‚
           â”‚   1051 â”‚   â”‚                                                                                                                â”‚
           â”‚   1052 â”‚   â”‚   return proto                                                                                                 â”‚
           â”‚   1053                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1394 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1391 â”‚   â”‚   â”‚   return transp, proto                                                                                     â”‚
           â”‚   1392 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   1393 â”‚   â”‚   â”‚   assert last_exc is not None                                                                              â”‚
           â”‚ â± 1394 â”‚   â”‚   â”‚   raise last_exc                                                                                           â”‚
           â”‚   1395 â”‚                                                                                                                    â”‚
           â”‚   1396 â”‚   async def _create_proxy_connection(                                                                              â”‚
           â”‚   1397 â”‚   â”‚   self, req: ClientRequest, traces: List["Trace"], timeout: "ClientTimeout"                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1363 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1360 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   1361 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1362 â”‚   â”‚   â”‚   try:                                                                                                     â”‚
           â”‚ â± 1363 â”‚   â”‚   â”‚   â”‚   transp, proto = await self._wrap_create_connection(                                                  â”‚
           â”‚   1364 â”‚   â”‚   â”‚   â”‚   â”‚   self._factory,                                                                                   â”‚
           â”‚   1365 â”‚   â”‚   â”‚   â”‚   â”‚   timeout=timeout,                                                                                 â”‚
           â”‚   1366 â”‚   â”‚   â”‚   â”‚   â”‚   ssl=sslcontext,                                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1124 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1121 â”‚   â”‚   except OSError as exc:                                                                                       â”‚
           â”‚   1122 â”‚   â”‚   â”‚   if exc.errno is None and isinstance(exc, asyncio.TimeoutError):                                          â”‚
           â”‚   1123 â”‚   â”‚   â”‚   â”‚   raise                                                                                                â”‚
           â”‚ â± 1124 â”‚   â”‚   â”‚   raise client_error(req.connection_key, exc) from exc                                                     â”‚
           â”‚   1125 â”‚                                                                                                                    â”‚
           â”‚   1126 â”‚   async def _wrap_existing_connection(                                                                             â”‚
           â”‚   1127 â”‚   â”‚   self,                                                                                                        â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno 111] Connect call failed 
           ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                                                    
                                                                                                                                          
           During handling of the above exception, another exception occurred:                                                            
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:276 in _run_with_timeout_failure                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   273 ) -> tuple[PQASession, AgentStatus]:                                                                                  â”‚
           â”‚   274 â”‚   try:                                                                                                              â”‚
           â”‚   275 â”‚   â”‚   async with asyncio.timeout(query.settings.agent.timeout):                                                     â”‚
           â”‚ â± 276 â”‚   â”‚   â”‚   status = await rollout()                                                                                  â”‚
           â”‚   277 â”‚   except TimeoutError:                                                                                              â”‚
           â”‚   278 â”‚   â”‚   logger.warning(                                                                                               â”‚
           â”‚   279 â”‚   â”‚   â”‚   f"Agent timeout after {query.settings.agent.timeout}-sec, just answering."                                â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:410 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   407 â”‚   â”‚   â”‚   â”‚   )                                                                                                     â”‚
           â”‚   408 â”‚   â”‚   â”‚   â”‚   return AgentStatus.TRUNCATED                                                                          â”‚
           â”‚   409 â”‚   â”‚   â”‚   agent_state.messages += obs                                                                               â”‚
           â”‚ â± 410 â”‚   â”‚   â”‚   for attempt in Retrying(                                                                                  â”‚
           â”‚   411 â”‚   â”‚   â”‚   â”‚   stop=stop_after_attempt(5),                                                                           â”‚
           â”‚   412 â”‚   â”‚   â”‚   â”‚   retry=retry_if_exception_type(MalformedMessageError),                                                 â”‚
           â”‚   413 â”‚   â”‚   â”‚   â”‚   before_sleep=before_sleep_log(logger, logging.WARNING),                                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:443 in __iter__                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   440 â”‚   â”‚                                                                                                                 â”‚
           â”‚   441 â”‚   â”‚   retry_state = RetryCallState(self, fn=None, args=(), kwargs={})                                               â”‚
           â”‚   442 â”‚   â”‚   while True:                                                                                                   â”‚
           â”‚ â± 443 â”‚   â”‚   â”‚   do = self.iter(retry_state=retry_state)                                                                   â”‚
           â”‚   444 â”‚   â”‚   â”‚   if isinstance(do, DoAttempt):                                                                             â”‚
           â”‚   445 â”‚   â”‚   â”‚   â”‚   yield AttemptManager(retry_state=retry_state)                                                         â”‚
           â”‚   446 â”‚   â”‚   â”‚   elif isinstance(do, DoSleep):                                                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:376 in iter                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   373 â”‚   â”‚   self._begin_iter(retry_state)                                                                                 â”‚
           â”‚   374 â”‚   â”‚   result = None                                                                                                 â”‚
           â”‚   375 â”‚   â”‚   for action in self.iter_state.actions:                                                                        â”‚
           â”‚ â± 376 â”‚   â”‚   â”‚   result = action(retry_state)                                                                              â”‚
           â”‚   377 â”‚   â”‚   return result                                                                                                 â”‚
           â”‚   378 â”‚                                                                                                                     â”‚
           â”‚   379 â”‚   def _begin_iter(self, retry_state: "RetryCallState") -> None:  # noqa                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:398 in <lambda>                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   395 â”‚                                                                                                                     â”‚
           â”‚   396 â”‚   def _post_retry_check_actions(self, retry_state: "RetryCallState") -> None:                                       â”‚
           â”‚   397 â”‚   â”‚   if not (self.iter_state.is_explicit_retry or self.iter_state.retry_run_result):                               â”‚
           â”‚ â± 398 â”‚   â”‚   â”‚   self._add_action_func(lambda rs: rs.outcome.result())                                                     â”‚
           â”‚   399 â”‚   â”‚   â”‚   return                                                                                                    â”‚
           â”‚   400 â”‚   â”‚                                                                                                                 â”‚
           â”‚   401 â”‚   â”‚   if self.after is not None:                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:449 in result                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚   446 â”‚   â”‚   â”‚   â”‚   if self._state in [CANCELLED, CANCELLED_AND_NOTIFIED]:                                                â”‚
           â”‚   447 â”‚   â”‚   â”‚   â”‚   â”‚   raise CancelledError()                                                                            â”‚
           â”‚   448 â”‚   â”‚   â”‚   â”‚   elif self._state == FINISHED:                                                                         â”‚
           â”‚ â± 449 â”‚   â”‚   â”‚   â”‚   â”‚   return self.__get_result()                                                                        â”‚
           â”‚   450 â”‚   â”‚   â”‚   â”‚                                                                                                         â”‚
           â”‚   451 â”‚   â”‚   â”‚   â”‚   self._condition.wait(timeout)                                                                         â”‚
           â”‚   452                                                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:401 in __get_result                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   398 â”‚   def __get_result(self):                                                                                           â”‚
           â”‚   399 â”‚   â”‚   if self._exception:                                                                                           â”‚
           â”‚   400 â”‚   â”‚   â”‚   try:                                                                                                      â”‚
           â”‚ â± 401 â”‚   â”‚   â”‚   â”‚   raise self._exception                                                                                 â”‚
           â”‚   402 â”‚   â”‚   â”‚   finally:                                                                                                  â”‚
           â”‚   403 â”‚   â”‚   â”‚   â”‚   # Break a reference cycle with the exception in self._exception                                       â”‚
           â”‚   404 â”‚   â”‚   â”‚   â”‚   self = None                                                                                           â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:417 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   414 â”‚   â”‚   â”‚   â”‚   reraise=True,                                                                                         â”‚
           â”‚   415 â”‚   â”‚   â”‚   ):                                                                                                        â”‚
           â”‚   416 â”‚   â”‚   â”‚   â”‚   with attempt:  # Retrying if ToolSelector fails to select a tool                                      â”‚
           â”‚ â± 417 â”‚   â”‚   â”‚   â”‚   â”‚   action = await agent(agent_state.messages, tools)                                                 â”‚
           â”‚   418 â”‚   â”‚   â”‚   agent_state.messages = [*agent_state.messages, action]                                                    â”‚
           â”‚   419 â”‚   â”‚   â”‚   if on_agent_action_callback:                                                                              â”‚
           â”‚   420 â”‚   â”‚   â”‚   â”‚   await on_agent_action_callback(action, agent_state)                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aviary/tools/utils.py:182 in __call__                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   179 â”‚   â”‚   â”‚   self._ledger.messages.extend(messages)                                                                    â”‚
           â”‚   180 â”‚   â”‚   â”‚   messages = self._ledger.messages                                                                          â”‚
           â”‚   181 â”‚   â”‚                                                                                                                 â”‚
           â”‚ â± 182 â”‚   â”‚   model_response = await self._bound_acompletion(                                                               â”‚
           â”‚   183 â”‚   â”‚   â”‚   messages=MessagesAdapter.dump_python(                                                                     â”‚
           â”‚   184 â”‚   â”‚   â”‚   â”‚   messages, exclude_none=True, by_alias=True                                                            â”‚
           â”‚   185 â”‚   â”‚   â”‚   ),                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:817 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    814 â”‚   â”‚   â”‚   â”‚   â”‚   original_exception=e,                                                                            â”‚
           â”‚    815 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    816 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚ â±  817 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    818 â”‚                                                                                                                    â”‚
           â”‚    819 â”‚   async def _acompletion(                                                                                          â”‚
           â”‚    820 â”‚   â”‚   self, model: str, messages: List[Dict[str, str]], **kwargs                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:793 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    790 â”‚   â”‚   â”‚   if request_priority is not None and isinstance(request_priority, int):                                   â”‚
           â”‚    791 â”‚   â”‚   â”‚   â”‚   response = await self.schedule_acompletion(**kwargs)                                                 â”‚
           â”‚    792 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â±  793 â”‚   â”‚   â”‚   â”‚   response = await self.async_function_with_fallbacks(**kwargs)                                        â”‚
           â”‚    794 â”‚   â”‚   â”‚   end_time = time.time()                                                                                   â”‚
           â”‚    795 â”‚   â”‚   â”‚   _duration = end_time - start_time                                                                        â”‚
           â”‚    796 â”‚   â”‚   â”‚   asyncio.create_task(                                                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2795 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2792 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚   2793 â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                                â”‚
           â”‚   2794 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2795 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2796 â”‚                                                                                                                    â”‚
           â”‚   2797 â”‚   def _handle_mock_testing_fallbacks(                                                                              â”‚
           â”‚   2798 â”‚   â”‚   self,                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2631 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2628 â”‚   â”‚   â”‚   â”‚   content_policy_fallbacks=content_policy_fallbacks,                                                   â”‚
           â”‚   2629 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2630 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2631 â”‚   â”‚   â”‚   response = await self.async_function_with_retries(*args, **kwargs)                                       â”‚
           â”‚   2632 â”‚   â”‚   â”‚   verbose_router_logger.debug(f"Async Response: {response}")                                               â”‚
           â”‚   2633 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2634 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2967 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2964 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "max_retries", num_retries)                                              â”‚
           â”‚   2965 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "num_retries", current_attempt)                                          â”‚
           â”‚   2966 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2967 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2968 â”‚                                                                                                                    â”‚
           â”‚   2969 â”‚   async def make_call(self, original_function: Any, *args, **kwargs):                                              â”‚
           â”‚   2970 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2879 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2876 â”‚   â”‚   â”‚   â”‚   model_group=model_group, kwargs=kwargs                                                               â”‚
           â”‚   2877 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2878 â”‚   â”‚   â”‚   # if the function call is successful, no exception will be raised and we'll                              â”‚
           â”‚        break out of the loop                                                                                                â”‚
           â”‚ â± 2879 â”‚   â”‚   â”‚   response = await self.make_call(original_function, *args, **kwargs)                                      â”‚
           â”‚   2880 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   2881 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2882 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2976 in make_call                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2973 â”‚   â”‚   model_group = kwargs.get("model")                                                                            â”‚
           â”‚   2974 â”‚   â”‚   response = original_function(*args, **kwargs)                                                                â”‚
           â”‚   2975 â”‚   â”‚   if inspect.iscoroutinefunction(response) or inspect.isawaitable(response):                                   â”‚
           â”‚ â± 2976 â”‚   â”‚   â”‚   response = await response                                                                                â”‚
           â”‚   2977 â”‚   â”‚   ## PROCESS RESPONSE HEADERS                                                                                  â”‚
           â”‚   2978 â”‚   â”‚   await self.set_response_headers(response=response, model_group=model_group)                                  â”‚
           â”‚   2979                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:947 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    944 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚    945 â”‚   â”‚   â”‚   if model_name is not None:                                                                               â”‚
           â”‚    946 â”‚   â”‚   â”‚   â”‚   self.fail_calls[model_name] += 1                                                                     â”‚
           â”‚ â±  947 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    948 â”‚                                                                                                                    â”‚
           â”‚    949 â”‚   def _update_kwargs_before_fallbacks(self, model: str, kwargs: dict) -> None:                                     â”‚
           â”‚    950 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:915 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    912 â”‚   â”‚   â”‚   â”‚   â”‚   parent_otel_span=parent_otel_span,                                                               â”‚
           â”‚    913 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    914 â”‚   â”‚   â”‚   â”‚                                                                                                        â”‚
           â”‚ â±  915 â”‚   â”‚   â”‚   â”‚   response = await _response                                                                           â”‚
           â”‚    916 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚    917 â”‚   â”‚   â”‚   ## CHECK CONTENT FILTER ERROR ##                                                                         â”‚
           â”‚    918 â”‚   â”‚   â”‚   if isinstance(response, ModelResponse):                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1175 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1172 â”‚   â”‚   â”‚   â”‚   â”‚   else:                                                                                            â”‚
           â”‚   1173 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   kwargs["model"] = context_window_fallback_dict[model]                                        â”‚
           â”‚   1174 â”‚   â”‚   â”‚   â”‚   â”‚   return await original_function(*args, **kwargs)                                                  â”‚
           â”‚ â± 1175 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   1176 â”‚                                                                                                                    â”‚
           â”‚   1177 â”‚   is_coroutine = inspect.iscoroutinefunction(original_function)                                                    â”‚
           â”‚   1178                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1031 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1028 â”‚   â”‚   â”‚   â”‚   return _caching_handler_response.final_embedding_cached_response                                     â”‚
           â”‚   1029 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1030 â”‚   â”‚   â”‚   # MODEL CALL                                                                                             â”‚
           â”‚ â± 1031 â”‚   â”‚   â”‚   result = await original_function(*args, **kwargs)                                                        â”‚
           â”‚   1032 â”‚   â”‚   â”‚   end_time = datetime.datetime.now()                                                                       â”‚
           â”‚   1033 â”‚   â”‚   â”‚   if "stream" in kwargs and kwargs["stream"] is True:                                                      â”‚
           â”‚   1034 â”‚   â”‚   â”‚   â”‚   if (                                                                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:499 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    496 â”‚   â”‚   return response                                                                                              â”‚
           â”‚    497 â”‚   except Exception as e:                                                                                           â”‚
           â”‚    498 â”‚   â”‚   custom_llm_provider = custom_llm_provider or "openai"                                                        â”‚
           â”‚ â±  499 â”‚   â”‚   raise exception_type(                                                                                        â”‚
           â”‚    500 â”‚   â”‚   â”‚   model=model,                                                                                             â”‚
           â”‚    501 â”‚   â”‚   â”‚   custom_llm_provider=custom_llm_provider,                                                                 â”‚
           â”‚    502 â”‚   â”‚   â”‚   original_exception=e,                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:212 â”‚
           â”‚ 5 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2122 â”‚   â”‚   # don't let an error with mapping interrupt the user from receiving an error                                 â”‚
           â”‚        from the llm api calls                                                                                               â”‚
           â”‚   2123 â”‚   â”‚   if exception_mapping_worked:                                                                                 â”‚
           â”‚   2124 â”‚   â”‚   â”‚   setattr(e, "litellm_response_headers", litellm_response_headers)                                         â”‚
           â”‚ â± 2125 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   2126 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   2127 â”‚   â”‚   â”‚   for error_type in litellm.LITELLM_EXCEPTION_TYPES:                                                       â”‚
           â”‚   2128 â”‚   â”‚   â”‚   â”‚   if isinstance(e, error_type):                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:210 â”‚
           â”‚ 1 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2098 â”‚   â”‚   â”‚   â”‚   â”‚   request=original_exception.request,                                                              â”‚
           â”‚   2099 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚   2100 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â± 2101 â”‚   â”‚   â”‚   â”‚   raise APIConnectionError(                                                                            â”‚
           â”‚   2102 â”‚   â”‚   â”‚   â”‚   â”‚   message="{}\n{}".format(                                                                         â”‚
           â”‚   2103 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   str(original_exception), traceback.format_exc()                                              â”‚
           â”‚   2104 â”‚   â”‚   â”‚   â”‚   â”‚   ),                                                                                               â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           APIConnectionError: litellm.APIConnectionError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1109, in                 
           _wrap_create_connection                                                                                                        
               sock = await aiohappyeyeballs.start_connection(                                                                            
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                            
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py", line 123, in              
           start_connection                                                                                                               
               raise OSError(first_errno, msg)                                                                                            
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py", line 477, in acompletion           
               response = await init_response                                                                                             
                          ^^^^^^^^^^^^^^^^^^^                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 566, in                
           ollama_acompletion                                                                                                             
               raise e  # don't use verbose_logger.exception, if exception is raised                                                      
               ^^^^^^^                                                                                                                    
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 507, in                
           ollama_acompletion                                                                                                             
               resp = await session.post(url, json=data)                                                                                  
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                  
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py", line 696, in _request            
               conn = await self._connector.connect(                                                                                      
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 544, in connect          
               proto = await self._create_connection(req, traces, timeout)                                                                
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1050, in                 
           _create_connection                                                                                                             
               _, proto = await self._create_direct_connection(req, traces, timeout)                                                      
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1394, in                 
           _create_direct_connection                                                                                                      
               raise last_exc                                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1363, in                 
           _create_direct_connection                                                                                                      
               transp, proto = await self._wrap_create_connection(                                                                        
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                        
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1124, in                 
           _wrap_create_connection                                                                                                        
               raise client_error(req.connection_key, exc) from exc                                                                       
           aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
                                                                                                                                          
           Received Model Group=ollama/llama3.2                                                                                           
           Available Model Group Fallbacks=None LiteLLM Retried: 2 times, LiteLLM Max Retries: 3                                          
[01:02:58] Answer:                                                                                                                        


 ANSWERING QUESTION: sciqag_question_83.json
 ----------------------------- 



[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.

[01:03:19] Trajectory failed.                                                                                                             
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1109 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1106 â”‚   â”‚   â”‚   async with ceil_timeout(                                                                                 â”‚
           â”‚   1107 â”‚   â”‚   â”‚   â”‚   timeout.sock_connect, ceil_threshold=timeout.ceil_threshold                                          â”‚
           â”‚   1108 â”‚   â”‚   â”‚   ):                                                                                                       â”‚
           â”‚ â± 1109 â”‚   â”‚   â”‚   â”‚   sock = await aiohappyeyeballs.start_connection(                                                      â”‚
           â”‚   1110 â”‚   â”‚   â”‚   â”‚   â”‚   addr_infos=addr_infos,                                                                           â”‚
           â”‚   1111 â”‚   â”‚   â”‚   â”‚   â”‚   local_addr_infos=self._local_addr_infos,                                                         â”‚
           â”‚   1112 â”‚   â”‚   â”‚   â”‚   â”‚   happy_eyeballs_delay=self._happy_eyeballs_delay,                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py:123 in start_connection          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   120 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, OSError) and exc.errno == first_errno                                         â”‚
           â”‚   121 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   for exc in all_exceptions                                                                     â”‚
           â”‚   122 â”‚   â”‚   â”‚   â”‚   â”‚   ):                                                                                                â”‚
           â”‚ â± 123 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   raise OSError(first_errno, msg)                                                               â”‚
           â”‚   124 â”‚   â”‚   â”‚   â”‚   elif isinstance(first_exception, RuntimeError) and all(                                               â”‚
           â”‚   125 â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, RuntimeError) for exc in all_exceptions                                           â”‚
           â”‚   126 â”‚   â”‚   â”‚   â”‚   ):                                                                                                    â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:477 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    474 â”‚   â”‚   â”‚   â”‚   â”‚   response = ModelResponse(**init_response)                                                        â”‚
           â”‚    475 â”‚   â”‚   â”‚   â”‚   response = init_response                                                                             â”‚
           â”‚    476 â”‚   â”‚   â”‚   elif asyncio.iscoroutine(init_response):                                                                 â”‚
           â”‚ â±  477 â”‚   â”‚   â”‚   â”‚   response = await init_response                                                                       â”‚
           â”‚    478 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚    479 â”‚   â”‚   â”‚   â”‚   response = init_response  # type: ignore                                                             â”‚
           â”‚    480                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:566 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   563 â”‚   â”‚   â”‚   )                                                                                                         â”‚
           â”‚   564 â”‚   â”‚   â”‚   return model_response                                                                                     â”‚
           â”‚   565 â”‚   except Exception as e:                                                                                            â”‚
           â”‚ â± 566 â”‚   â”‚   raise e  # don't use verbose_logger.exception, if exception is raised                                         â”‚
           â”‚   567                                                                                                                       â”‚
           â”‚   568                                                                                                                       â”‚
           â”‚   569 async def ollama_aembeddings(                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:507 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   504 â”‚   try:                                                                                                              â”‚
           â”‚   505 â”‚   â”‚   timeout = aiohttp.ClientTimeout(total=litellm.request_timeout)  # 10 minutes                                  â”‚
           â”‚   506 â”‚   â”‚   async with aiohttp.ClientSession(timeout=timeout) as session:                                                 â”‚
           â”‚ â± 507 â”‚   â”‚   â”‚   resp = await session.post(url, json=data)                                                                 â”‚
           â”‚   508 â”‚   â”‚   â”‚                                                                                                             â”‚
           â”‚   509 â”‚   â”‚   â”‚   if resp.status != 200:                                                                                    â”‚
           â”‚   510 â”‚   â”‚   â”‚   â”‚   text = await resp.text()                                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py:696 in _request                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚    693 â”‚   â”‚   â”‚   â”‚   â”‚                                                                                                    â”‚
           â”‚    694 â”‚   â”‚   â”‚   â”‚   â”‚   # connection timeout                                                                             â”‚
           â”‚    695 â”‚   â”‚   â”‚   â”‚   â”‚   try:                                                                                             â”‚
           â”‚ â±  696 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   conn = await self._connector.connect(                                                        â”‚
           â”‚    697 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   req, traces=traces, timeout=real_timeout                                                 â”‚
           â”‚    698 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚    699 â”‚   â”‚   â”‚   â”‚   â”‚   except asyncio.TimeoutError as exc:                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:544 in connect                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚    541 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    542 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    543 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_start()                                                   â”‚
           â”‚ â±  544 â”‚   â”‚   â”‚   â”‚   proto = await self._create_connection(req, traces, timeout)                                          â”‚
           â”‚    545 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    546 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    547 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_end()                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1050 in _create_connection           â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1047 â”‚   â”‚   if req.proxy:                                                                                                â”‚
           â”‚   1048 â”‚   â”‚   â”‚   _, proto = await self._create_proxy_connection(req, traces, timeout)                                     â”‚
           â”‚   1049 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚ â± 1050 â”‚   â”‚   â”‚   _, proto = await self._create_direct_connection(req, traces, timeout)                                    â”‚
           â”‚   1051 â”‚   â”‚                                                                                                                â”‚
           â”‚   1052 â”‚   â”‚   return proto                                                                                                 â”‚
           â”‚   1053                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1394 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1391 â”‚   â”‚   â”‚   return transp, proto                                                                                     â”‚
           â”‚   1392 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   1393 â”‚   â”‚   â”‚   assert last_exc is not None                                                                              â”‚
           â”‚ â± 1394 â”‚   â”‚   â”‚   raise last_exc                                                                                           â”‚
           â”‚   1395 â”‚                                                                                                                    â”‚
           â”‚   1396 â”‚   async def _create_proxy_connection(                                                                              â”‚
           â”‚   1397 â”‚   â”‚   self, req: ClientRequest, traces: List["Trace"], timeout: "ClientTimeout"                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1363 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1360 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   1361 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1362 â”‚   â”‚   â”‚   try:                                                                                                     â”‚
           â”‚ â± 1363 â”‚   â”‚   â”‚   â”‚   transp, proto = await self._wrap_create_connection(                                                  â”‚
           â”‚   1364 â”‚   â”‚   â”‚   â”‚   â”‚   self._factory,                                                                                   â”‚
           â”‚   1365 â”‚   â”‚   â”‚   â”‚   â”‚   timeout=timeout,                                                                                 â”‚
           â”‚   1366 â”‚   â”‚   â”‚   â”‚   â”‚   ssl=sslcontext,                                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1124 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1121 â”‚   â”‚   except OSError as exc:                                                                                       â”‚
           â”‚   1122 â”‚   â”‚   â”‚   if exc.errno is None and isinstance(exc, asyncio.TimeoutError):                                          â”‚
           â”‚   1123 â”‚   â”‚   â”‚   â”‚   raise                                                                                                â”‚
           â”‚ â± 1124 â”‚   â”‚   â”‚   raise client_error(req.connection_key, exc) from exc                                                     â”‚
           â”‚   1125 â”‚                                                                                                                    â”‚
           â”‚   1126 â”‚   async def _wrap_existing_connection(                                                                             â”‚
           â”‚   1127 â”‚   â”‚   self,                                                                                                        â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno 111] Connect call failed 
           ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                                                    
                                                                                                                                          
           During handling of the above exception, another exception occurred:                                                            
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:276 in _run_with_timeout_failure                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   273 ) -> tuple[PQASession, AgentStatus]:                                                                                  â”‚
           â”‚   274 â”‚   try:                                                                                                              â”‚
           â”‚   275 â”‚   â”‚   async with asyncio.timeout(query.settings.agent.timeout):                                                     â”‚
           â”‚ â± 276 â”‚   â”‚   â”‚   status = await rollout()                                                                                  â”‚
           â”‚   277 â”‚   except TimeoutError:                                                                                              â”‚
           â”‚   278 â”‚   â”‚   logger.warning(                                                                                               â”‚
           â”‚   279 â”‚   â”‚   â”‚   f"Agent timeout after {query.settings.agent.timeout}-sec, just answering."                                â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:410 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   407 â”‚   â”‚   â”‚   â”‚   )                                                                                                     â”‚
           â”‚   408 â”‚   â”‚   â”‚   â”‚   return AgentStatus.TRUNCATED                                                                          â”‚
           â”‚   409 â”‚   â”‚   â”‚   agent_state.messages += obs                                                                               â”‚
           â”‚ â± 410 â”‚   â”‚   â”‚   for attempt in Retrying(                                                                                  â”‚
           â”‚   411 â”‚   â”‚   â”‚   â”‚   stop=stop_after_attempt(5),                                                                           â”‚
           â”‚   412 â”‚   â”‚   â”‚   â”‚   retry=retry_if_exception_type(MalformedMessageError),                                                 â”‚
           â”‚   413 â”‚   â”‚   â”‚   â”‚   before_sleep=before_sleep_log(logger, logging.WARNING),                                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:443 in __iter__                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   440 â”‚   â”‚                                                                                                                 â”‚
           â”‚   441 â”‚   â”‚   retry_state = RetryCallState(self, fn=None, args=(), kwargs={})                                               â”‚
           â”‚   442 â”‚   â”‚   while True:                                                                                                   â”‚
           â”‚ â± 443 â”‚   â”‚   â”‚   do = self.iter(retry_state=retry_state)                                                                   â”‚
           â”‚   444 â”‚   â”‚   â”‚   if isinstance(do, DoAttempt):                                                                             â”‚
           â”‚   445 â”‚   â”‚   â”‚   â”‚   yield AttemptManager(retry_state=retry_state)                                                         â”‚
           â”‚   446 â”‚   â”‚   â”‚   elif isinstance(do, DoSleep):                                                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:376 in iter                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   373 â”‚   â”‚   self._begin_iter(retry_state)                                                                                 â”‚
           â”‚   374 â”‚   â”‚   result = None                                                                                                 â”‚
           â”‚   375 â”‚   â”‚   for action in self.iter_state.actions:                                                                        â”‚
           â”‚ â± 376 â”‚   â”‚   â”‚   result = action(retry_state)                                                                              â”‚
           â”‚   377 â”‚   â”‚   return result                                                                                                 â”‚
           â”‚   378 â”‚                                                                                                                     â”‚
           â”‚   379 â”‚   def _begin_iter(self, retry_state: "RetryCallState") -> None:  # noqa                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:398 in <lambda>                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   395 â”‚                                                                                                                     â”‚
           â”‚   396 â”‚   def _post_retry_check_actions(self, retry_state: "RetryCallState") -> None:                                       â”‚
           â”‚   397 â”‚   â”‚   if not (self.iter_state.is_explicit_retry or self.iter_state.retry_run_result):                               â”‚
           â”‚ â± 398 â”‚   â”‚   â”‚   self._add_action_func(lambda rs: rs.outcome.result())                                                     â”‚
           â”‚   399 â”‚   â”‚   â”‚   return                                                                                                    â”‚
           â”‚   400 â”‚   â”‚                                                                                                                 â”‚
           â”‚   401 â”‚   â”‚   if self.after is not None:                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:449 in result                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚   446 â”‚   â”‚   â”‚   â”‚   if self._state in [CANCELLED, CANCELLED_AND_NOTIFIED]:                                                â”‚
           â”‚   447 â”‚   â”‚   â”‚   â”‚   â”‚   raise CancelledError()                                                                            â”‚
           â”‚   448 â”‚   â”‚   â”‚   â”‚   elif self._state == FINISHED:                                                                         â”‚
           â”‚ â± 449 â”‚   â”‚   â”‚   â”‚   â”‚   return self.__get_result()                                                                        â”‚
           â”‚   450 â”‚   â”‚   â”‚   â”‚                                                                                                         â”‚
           â”‚   451 â”‚   â”‚   â”‚   â”‚   self._condition.wait(timeout)                                                                         â”‚
           â”‚   452                                                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:401 in __get_result                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   398 â”‚   def __get_result(self):                                                                                           â”‚
           â”‚   399 â”‚   â”‚   if self._exception:                                                                                           â”‚
           â”‚   400 â”‚   â”‚   â”‚   try:                                                                                                      â”‚
           â”‚ â± 401 â”‚   â”‚   â”‚   â”‚   raise self._exception                                                                                 â”‚
           â”‚   402 â”‚   â”‚   â”‚   finally:                                                                                                  â”‚
           â”‚   403 â”‚   â”‚   â”‚   â”‚   # Break a reference cycle with the exception in self._exception                                       â”‚
           â”‚   404 â”‚   â”‚   â”‚   â”‚   self = None                                                                                           â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:417 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   414 â”‚   â”‚   â”‚   â”‚   reraise=True,                                                                                         â”‚
           â”‚   415 â”‚   â”‚   â”‚   ):                                                                                                        â”‚
           â”‚   416 â”‚   â”‚   â”‚   â”‚   with attempt:  # Retrying if ToolSelector fails to select a tool                                      â”‚
           â”‚ â± 417 â”‚   â”‚   â”‚   â”‚   â”‚   action = await agent(agent_state.messages, tools)                                                 â”‚
           â”‚   418 â”‚   â”‚   â”‚   agent_state.messages = [*agent_state.messages, action]                                                    â”‚
           â”‚   419 â”‚   â”‚   â”‚   if on_agent_action_callback:                                                                              â”‚
           â”‚   420 â”‚   â”‚   â”‚   â”‚   await on_agent_action_callback(action, agent_state)                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aviary/tools/utils.py:182 in __call__                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   179 â”‚   â”‚   â”‚   self._ledger.messages.extend(messages)                                                                    â”‚
           â”‚   180 â”‚   â”‚   â”‚   messages = self._ledger.messages                                                                          â”‚
           â”‚   181 â”‚   â”‚                                                                                                                 â”‚
           â”‚ â± 182 â”‚   â”‚   model_response = await self._bound_acompletion(                                                               â”‚
           â”‚   183 â”‚   â”‚   â”‚   messages=MessagesAdapter.dump_python(                                                                     â”‚
           â”‚   184 â”‚   â”‚   â”‚   â”‚   messages, exclude_none=True, by_alias=True                                                            â”‚
           â”‚   185 â”‚   â”‚   â”‚   ),                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:817 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    814 â”‚   â”‚   â”‚   â”‚   â”‚   original_exception=e,                                                                            â”‚
           â”‚    815 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    816 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚ â±  817 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    818 â”‚                                                                                                                    â”‚
           â”‚    819 â”‚   async def _acompletion(                                                                                          â”‚
           â”‚    820 â”‚   â”‚   self, model: str, messages: List[Dict[str, str]], **kwargs                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:793 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    790 â”‚   â”‚   â”‚   if request_priority is not None and isinstance(request_priority, int):                                   â”‚
           â”‚    791 â”‚   â”‚   â”‚   â”‚   response = await self.schedule_acompletion(**kwargs)                                                 â”‚
           â”‚    792 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â±  793 â”‚   â”‚   â”‚   â”‚   response = await self.async_function_with_fallbacks(**kwargs)                                        â”‚
           â”‚    794 â”‚   â”‚   â”‚   end_time = time.time()                                                                                   â”‚
           â”‚    795 â”‚   â”‚   â”‚   _duration = end_time - start_time                                                                        â”‚
           â”‚    796 â”‚   â”‚   â”‚   asyncio.create_task(                                                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2795 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2792 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚   2793 â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                                â”‚
           â”‚   2794 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2795 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2796 â”‚                                                                                                                    â”‚
           â”‚   2797 â”‚   def _handle_mock_testing_fallbacks(                                                                              â”‚
           â”‚   2798 â”‚   â”‚   self,                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2631 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2628 â”‚   â”‚   â”‚   â”‚   content_policy_fallbacks=content_policy_fallbacks,                                                   â”‚
           â”‚   2629 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2630 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2631 â”‚   â”‚   â”‚   response = await self.async_function_with_retries(*args, **kwargs)                                       â”‚
           â”‚   2632 â”‚   â”‚   â”‚   verbose_router_logger.debug(f"Async Response: {response}")                                               â”‚
           â”‚   2633 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2634 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2967 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2964 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "max_retries", num_retries)                                              â”‚
           â”‚   2965 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "num_retries", current_attempt)                                          â”‚
           â”‚   2966 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2967 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2968 â”‚                                                                                                                    â”‚
           â”‚   2969 â”‚   async def make_call(self, original_function: Any, *args, **kwargs):                                              â”‚
           â”‚   2970 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2879 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2876 â”‚   â”‚   â”‚   â”‚   model_group=model_group, kwargs=kwargs                                                               â”‚
           â”‚   2877 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2878 â”‚   â”‚   â”‚   # if the function call is successful, no exception will be raised and we'll                              â”‚
           â”‚        break out of the loop                                                                                                â”‚
           â”‚ â± 2879 â”‚   â”‚   â”‚   response = await self.make_call(original_function, *args, **kwargs)                                      â”‚
           â”‚   2880 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   2881 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2882 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2976 in make_call                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2973 â”‚   â”‚   model_group = kwargs.get("model")                                                                            â”‚
           â”‚   2974 â”‚   â”‚   response = original_function(*args, **kwargs)                                                                â”‚
           â”‚   2975 â”‚   â”‚   if inspect.iscoroutinefunction(response) or inspect.isawaitable(response):                                   â”‚
           â”‚ â± 2976 â”‚   â”‚   â”‚   response = await response                                                                                â”‚
           â”‚   2977 â”‚   â”‚   ## PROCESS RESPONSE HEADERS                                                                                  â”‚
           â”‚   2978 â”‚   â”‚   await self.set_response_headers(response=response, model_group=model_group)                                  â”‚
           â”‚   2979                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:947 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    944 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚    945 â”‚   â”‚   â”‚   if model_name is not None:                                                                               â”‚
           â”‚    946 â”‚   â”‚   â”‚   â”‚   self.fail_calls[model_name] += 1                                                                     â”‚
           â”‚ â±  947 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    948 â”‚                                                                                                                    â”‚
           â”‚    949 â”‚   def _update_kwargs_before_fallbacks(self, model: str, kwargs: dict) -> None:                                     â”‚
           â”‚    950 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:915 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    912 â”‚   â”‚   â”‚   â”‚   â”‚   parent_otel_span=parent_otel_span,                                                               â”‚
           â”‚    913 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    914 â”‚   â”‚   â”‚   â”‚                                                                                                        â”‚
           â”‚ â±  915 â”‚   â”‚   â”‚   â”‚   response = await _response                                                                           â”‚
           â”‚    916 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚    917 â”‚   â”‚   â”‚   ## CHECK CONTENT FILTER ERROR ##                                                                         â”‚
           â”‚    918 â”‚   â”‚   â”‚   if isinstance(response, ModelResponse):                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1175 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1172 â”‚   â”‚   â”‚   â”‚   â”‚   else:                                                                                            â”‚
           â”‚   1173 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   kwargs["model"] = context_window_fallback_dict[model]                                        â”‚
           â”‚   1174 â”‚   â”‚   â”‚   â”‚   â”‚   return await original_function(*args, **kwargs)                                                  â”‚
           â”‚ â± 1175 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   1176 â”‚                                                                                                                    â”‚
           â”‚   1177 â”‚   is_coroutine = inspect.iscoroutinefunction(original_function)                                                    â”‚
           â”‚   1178                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1031 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1028 â”‚   â”‚   â”‚   â”‚   return _caching_handler_response.final_embedding_cached_response                                     â”‚
           â”‚   1029 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1030 â”‚   â”‚   â”‚   # MODEL CALL                                                                                             â”‚
           â”‚ â± 1031 â”‚   â”‚   â”‚   result = await original_function(*args, **kwargs)                                                        â”‚
           â”‚   1032 â”‚   â”‚   â”‚   end_time = datetime.datetime.now()                                                                       â”‚
           â”‚   1033 â”‚   â”‚   â”‚   if "stream" in kwargs and kwargs["stream"] is True:                                                      â”‚
           â”‚   1034 â”‚   â”‚   â”‚   â”‚   if (                                                                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:499 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    496 â”‚   â”‚   return response                                                                                              â”‚
           â”‚    497 â”‚   except Exception as e:                                                                                           â”‚
           â”‚    498 â”‚   â”‚   custom_llm_provider = custom_llm_provider or "openai"                                                        â”‚
           â”‚ â±  499 â”‚   â”‚   raise exception_type(                                                                                        â”‚
           â”‚    500 â”‚   â”‚   â”‚   model=model,                                                                                             â”‚
           â”‚    501 â”‚   â”‚   â”‚   custom_llm_provider=custom_llm_provider,                                                                 â”‚
           â”‚    502 â”‚   â”‚   â”‚   original_exception=e,                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:212 â”‚
           â”‚ 5 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2122 â”‚   â”‚   # don't let an error with mapping interrupt the user from receiving an error                                 â”‚
           â”‚        from the llm api calls                                                                                               â”‚
           â”‚   2123 â”‚   â”‚   if exception_mapping_worked:                                                                                 â”‚
           â”‚   2124 â”‚   â”‚   â”‚   setattr(e, "litellm_response_headers", litellm_response_headers)                                         â”‚
           â”‚ â± 2125 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   2126 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   2127 â”‚   â”‚   â”‚   for error_type in litellm.LITELLM_EXCEPTION_TYPES:                                                       â”‚
           â”‚   2128 â”‚   â”‚   â”‚   â”‚   if isinstance(e, error_type):                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:210 â”‚
           â”‚ 1 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2098 â”‚   â”‚   â”‚   â”‚   â”‚   request=original_exception.request,                                                              â”‚
           â”‚   2099 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚   2100 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â± 2101 â”‚   â”‚   â”‚   â”‚   raise APIConnectionError(                                                                            â”‚
           â”‚   2102 â”‚   â”‚   â”‚   â”‚   â”‚   message="{}\n{}".format(                                                                         â”‚
           â”‚   2103 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   str(original_exception), traceback.format_exc()                                              â”‚
           â”‚   2104 â”‚   â”‚   â”‚   â”‚   â”‚   ),                                                                                               â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           APIConnectionError: litellm.APIConnectionError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1109, in                 
           _wrap_create_connection                                                                                                        
               sock = await aiohappyeyeballs.start_connection(                                                                            
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                            
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py", line 123, in              
           start_connection                                                                                                               
               raise OSError(first_errno, msg)                                                                                            
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py", line 477, in acompletion           
               response = await init_response                                                                                             
                          ^^^^^^^^^^^^^^^^^^^                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 566, in                
           ollama_acompletion                                                                                                             
               raise e  # don't use verbose_logger.exception, if exception is raised                                                      
               ^^^^^^^                                                                                                                    
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 507, in                
           ollama_acompletion                                                                                                             
               resp = await session.post(url, json=data)                                                                                  
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                  
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py", line 696, in _request            
               conn = await self._connector.connect(                                                                                      
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 544, in connect          
               proto = await self._create_connection(req, traces, timeout)                                                                
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1050, in                 
           _create_connection                                                                                                             
               _, proto = await self._create_direct_connection(req, traces, timeout)                                                      
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1394, in                 
           _create_direct_connection                                                                                                      
               raise last_exc                                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1363, in                 
           _create_direct_connection                                                                                                      
               transp, proto = await self._wrap_create_connection(                                                                        
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                        
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1124, in                 
           _wrap_create_connection                                                                                                        
               raise client_error(req.connection_key, exc) from exc                                                                       
           aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
                                                                                                                                          
           Received Model Group=ollama/llama3.2                                                                                           
           Available Model Group Fallbacks=None LiteLLM Retried: 2 times, LiteLLM Max Retries: 3                                          
[01:03:21] Answer:                                                                                                                        


 ANSWERING QUESTION: sciqag_question_84.json
 ----------------------------- 



[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.

[01:03:41] Trajectory failed.                                                                                                             
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1109 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1106 â”‚   â”‚   â”‚   async with ceil_timeout(                                                                                 â”‚
           â”‚   1107 â”‚   â”‚   â”‚   â”‚   timeout.sock_connect, ceil_threshold=timeout.ceil_threshold                                          â”‚
           â”‚   1108 â”‚   â”‚   â”‚   ):                                                                                                       â”‚
           â”‚ â± 1109 â”‚   â”‚   â”‚   â”‚   sock = await aiohappyeyeballs.start_connection(                                                      â”‚
           â”‚   1110 â”‚   â”‚   â”‚   â”‚   â”‚   addr_infos=addr_infos,                                                                           â”‚
           â”‚   1111 â”‚   â”‚   â”‚   â”‚   â”‚   local_addr_infos=self._local_addr_infos,                                                         â”‚
           â”‚   1112 â”‚   â”‚   â”‚   â”‚   â”‚   happy_eyeballs_delay=self._happy_eyeballs_delay,                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py:123 in start_connection          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   120 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, OSError) and exc.errno == first_errno                                         â”‚
           â”‚   121 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   for exc in all_exceptions                                                                     â”‚
           â”‚   122 â”‚   â”‚   â”‚   â”‚   â”‚   ):                                                                                                â”‚
           â”‚ â± 123 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   raise OSError(first_errno, msg)                                                               â”‚
           â”‚   124 â”‚   â”‚   â”‚   â”‚   elif isinstance(first_exception, RuntimeError) and all(                                               â”‚
           â”‚   125 â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, RuntimeError) for exc in all_exceptions                                           â”‚
           â”‚   126 â”‚   â”‚   â”‚   â”‚   ):                                                                                                    â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:477 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    474 â”‚   â”‚   â”‚   â”‚   â”‚   response = ModelResponse(**init_response)                                                        â”‚
           â”‚    475 â”‚   â”‚   â”‚   â”‚   response = init_response                                                                             â”‚
           â”‚    476 â”‚   â”‚   â”‚   elif asyncio.iscoroutine(init_response):                                                                 â”‚
           â”‚ â±  477 â”‚   â”‚   â”‚   â”‚   response = await init_response                                                                       â”‚
           â”‚    478 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚    479 â”‚   â”‚   â”‚   â”‚   response = init_response  # type: ignore                                                             â”‚
           â”‚    480                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:566 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   563 â”‚   â”‚   â”‚   )                                                                                                         â”‚
           â”‚   564 â”‚   â”‚   â”‚   return model_response                                                                                     â”‚
           â”‚   565 â”‚   except Exception as e:                                                                                            â”‚
           â”‚ â± 566 â”‚   â”‚   raise e  # don't use verbose_logger.exception, if exception is raised                                         â”‚
           â”‚   567                                                                                                                       â”‚
           â”‚   568                                                                                                                       â”‚
           â”‚   569 async def ollama_aembeddings(                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:507 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   504 â”‚   try:                                                                                                              â”‚
           â”‚   505 â”‚   â”‚   timeout = aiohttp.ClientTimeout(total=litellm.request_timeout)  # 10 minutes                                  â”‚
           â”‚   506 â”‚   â”‚   async with aiohttp.ClientSession(timeout=timeout) as session:                                                 â”‚
           â”‚ â± 507 â”‚   â”‚   â”‚   resp = await session.post(url, json=data)                                                                 â”‚
           â”‚   508 â”‚   â”‚   â”‚                                                                                                             â”‚
           â”‚   509 â”‚   â”‚   â”‚   if resp.status != 200:                                                                                    â”‚
           â”‚   510 â”‚   â”‚   â”‚   â”‚   text = await resp.text()                                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py:696 in _request                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚    693 â”‚   â”‚   â”‚   â”‚   â”‚                                                                                                    â”‚
           â”‚    694 â”‚   â”‚   â”‚   â”‚   â”‚   # connection timeout                                                                             â”‚
           â”‚    695 â”‚   â”‚   â”‚   â”‚   â”‚   try:                                                                                             â”‚
           â”‚ â±  696 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   conn = await self._connector.connect(                                                        â”‚
           â”‚    697 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   req, traces=traces, timeout=real_timeout                                                 â”‚
           â”‚    698 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚    699 â”‚   â”‚   â”‚   â”‚   â”‚   except asyncio.TimeoutError as exc:                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:544 in connect                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚    541 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    542 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    543 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_start()                                                   â”‚
           â”‚ â±  544 â”‚   â”‚   â”‚   â”‚   proto = await self._create_connection(req, traces, timeout)                                          â”‚
           â”‚    545 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    546 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    547 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_end()                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1050 in _create_connection           â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1047 â”‚   â”‚   if req.proxy:                                                                                                â”‚
           â”‚   1048 â”‚   â”‚   â”‚   _, proto = await self._create_proxy_connection(req, traces, timeout)                                     â”‚
           â”‚   1049 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚ â± 1050 â”‚   â”‚   â”‚   _, proto = await self._create_direct_connection(req, traces, timeout)                                    â”‚
           â”‚   1051 â”‚   â”‚                                                                                                                â”‚
           â”‚   1052 â”‚   â”‚   return proto                                                                                                 â”‚
           â”‚   1053                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1394 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1391 â”‚   â”‚   â”‚   return transp, proto                                                                                     â”‚
           â”‚   1392 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   1393 â”‚   â”‚   â”‚   assert last_exc is not None                                                                              â”‚
           â”‚ â± 1394 â”‚   â”‚   â”‚   raise last_exc                                                                                           â”‚
           â”‚   1395 â”‚                                                                                                                    â”‚
           â”‚   1396 â”‚   async def _create_proxy_connection(                                                                              â”‚
           â”‚   1397 â”‚   â”‚   self, req: ClientRequest, traces: List["Trace"], timeout: "ClientTimeout"                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1363 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1360 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   1361 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1362 â”‚   â”‚   â”‚   try:                                                                                                     â”‚
           â”‚ â± 1363 â”‚   â”‚   â”‚   â”‚   transp, proto = await self._wrap_create_connection(                                                  â”‚
           â”‚   1364 â”‚   â”‚   â”‚   â”‚   â”‚   self._factory,                                                                                   â”‚
           â”‚   1365 â”‚   â”‚   â”‚   â”‚   â”‚   timeout=timeout,                                                                                 â”‚
           â”‚   1366 â”‚   â”‚   â”‚   â”‚   â”‚   ssl=sslcontext,                                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1124 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1121 â”‚   â”‚   except OSError as exc:                                                                                       â”‚
           â”‚   1122 â”‚   â”‚   â”‚   if exc.errno is None and isinstance(exc, asyncio.TimeoutError):                                          â”‚
           â”‚   1123 â”‚   â”‚   â”‚   â”‚   raise                                                                                                â”‚
           â”‚ â± 1124 â”‚   â”‚   â”‚   raise client_error(req.connection_key, exc) from exc                                                     â”‚
           â”‚   1125 â”‚                                                                                                                    â”‚
           â”‚   1126 â”‚   async def _wrap_existing_connection(                                                                             â”‚
           â”‚   1127 â”‚   â”‚   self,                                                                                                        â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno 111] Connect call failed 
           ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                                                    
                                                                                                                                          
           During handling of the above exception, another exception occurred:                                                            
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:276 in _run_with_timeout_failure                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   273 ) -> tuple[PQASession, AgentStatus]:                                                                                  â”‚
           â”‚   274 â”‚   try:                                                                                                              â”‚
           â”‚   275 â”‚   â”‚   async with asyncio.timeout(query.settings.agent.timeout):                                                     â”‚
           â”‚ â± 276 â”‚   â”‚   â”‚   status = await rollout()                                                                                  â”‚
           â”‚   277 â”‚   except TimeoutError:                                                                                              â”‚
           â”‚   278 â”‚   â”‚   logger.warning(                                                                                               â”‚
           â”‚   279 â”‚   â”‚   â”‚   f"Agent timeout after {query.settings.agent.timeout}-sec, just answering."                                â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:410 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   407 â”‚   â”‚   â”‚   â”‚   )                                                                                                     â”‚
           â”‚   408 â”‚   â”‚   â”‚   â”‚   return AgentStatus.TRUNCATED                                                                          â”‚
           â”‚   409 â”‚   â”‚   â”‚   agent_state.messages += obs                                                                               â”‚
           â”‚ â± 410 â”‚   â”‚   â”‚   for attempt in Retrying(                                                                                  â”‚
           â”‚   411 â”‚   â”‚   â”‚   â”‚   stop=stop_after_attempt(5),                                                                           â”‚
           â”‚   412 â”‚   â”‚   â”‚   â”‚   retry=retry_if_exception_type(MalformedMessageError),                                                 â”‚
           â”‚   413 â”‚   â”‚   â”‚   â”‚   before_sleep=before_sleep_log(logger, logging.WARNING),                                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:443 in __iter__                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   440 â”‚   â”‚                                                                                                                 â”‚
           â”‚   441 â”‚   â”‚   retry_state = RetryCallState(self, fn=None, args=(), kwargs={})                                               â”‚
           â”‚   442 â”‚   â”‚   while True:                                                                                                   â”‚
           â”‚ â± 443 â”‚   â”‚   â”‚   do = self.iter(retry_state=retry_state)                                                                   â”‚
           â”‚   444 â”‚   â”‚   â”‚   if isinstance(do, DoAttempt):                                                                             â”‚
           â”‚   445 â”‚   â”‚   â”‚   â”‚   yield AttemptManager(retry_state=retry_state)                                                         â”‚
           â”‚   446 â”‚   â”‚   â”‚   elif isinstance(do, DoSleep):                                                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:376 in iter                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   373 â”‚   â”‚   self._begin_iter(retry_state)                                                                                 â”‚
           â”‚   374 â”‚   â”‚   result = None                                                                                                 â”‚
           â”‚   375 â”‚   â”‚   for action in self.iter_state.actions:                                                                        â”‚
           â”‚ â± 376 â”‚   â”‚   â”‚   result = action(retry_state)                                                                              â”‚
           â”‚   377 â”‚   â”‚   return result                                                                                                 â”‚
           â”‚   378 â”‚                                                                                                                     â”‚
           â”‚   379 â”‚   def _begin_iter(self, retry_state: "RetryCallState") -> None:  # noqa                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:398 in <lambda>                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   395 â”‚                                                                                                                     â”‚
           â”‚   396 â”‚   def _post_retry_check_actions(self, retry_state: "RetryCallState") -> None:                                       â”‚
           â”‚   397 â”‚   â”‚   if not (self.iter_state.is_explicit_retry or self.iter_state.retry_run_result):                               â”‚
           â”‚ â± 398 â”‚   â”‚   â”‚   self._add_action_func(lambda rs: rs.outcome.result())                                                     â”‚
           â”‚   399 â”‚   â”‚   â”‚   return                                                                                                    â”‚
           â”‚   400 â”‚   â”‚                                                                                                                 â”‚
           â”‚   401 â”‚   â”‚   if self.after is not None:                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:449 in result                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚   446 â”‚   â”‚   â”‚   â”‚   if self._state in [CANCELLED, CANCELLED_AND_NOTIFIED]:                                                â”‚
           â”‚   447 â”‚   â”‚   â”‚   â”‚   â”‚   raise CancelledError()                                                                            â”‚
           â”‚   448 â”‚   â”‚   â”‚   â”‚   elif self._state == FINISHED:                                                                         â”‚
           â”‚ â± 449 â”‚   â”‚   â”‚   â”‚   â”‚   return self.__get_result()                                                                        â”‚
           â”‚   450 â”‚   â”‚   â”‚   â”‚                                                                                                         â”‚
           â”‚   451 â”‚   â”‚   â”‚   â”‚   self._condition.wait(timeout)                                                                         â”‚
           â”‚   452                                                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:401 in __get_result                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   398 â”‚   def __get_result(self):                                                                                           â”‚
           â”‚   399 â”‚   â”‚   if self._exception:                                                                                           â”‚
           â”‚   400 â”‚   â”‚   â”‚   try:                                                                                                      â”‚
           â”‚ â± 401 â”‚   â”‚   â”‚   â”‚   raise self._exception                                                                                 â”‚
           â”‚   402 â”‚   â”‚   â”‚   finally:                                                                                                  â”‚
           â”‚   403 â”‚   â”‚   â”‚   â”‚   # Break a reference cycle with the exception in self._exception                                       â”‚
           â”‚   404 â”‚   â”‚   â”‚   â”‚   self = None                                                                                           â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:417 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   414 â”‚   â”‚   â”‚   â”‚   reraise=True,                                                                                         â”‚
           â”‚   415 â”‚   â”‚   â”‚   ):                                                                                                        â”‚
           â”‚   416 â”‚   â”‚   â”‚   â”‚   with attempt:  # Retrying if ToolSelector fails to select a tool                                      â”‚
           â”‚ â± 417 â”‚   â”‚   â”‚   â”‚   â”‚   action = await agent(agent_state.messages, tools)                                                 â”‚
           â”‚   418 â”‚   â”‚   â”‚   agent_state.messages = [*agent_state.messages, action]                                                    â”‚
           â”‚   419 â”‚   â”‚   â”‚   if on_agent_action_callback:                                                                              â”‚
           â”‚   420 â”‚   â”‚   â”‚   â”‚   await on_agent_action_callback(action, agent_state)                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aviary/tools/utils.py:182 in __call__                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   179 â”‚   â”‚   â”‚   self._ledger.messages.extend(messages)                                                                    â”‚
           â”‚   180 â”‚   â”‚   â”‚   messages = self._ledger.messages                                                                          â”‚
           â”‚   181 â”‚   â”‚                                                                                                                 â”‚
           â”‚ â± 182 â”‚   â”‚   model_response = await self._bound_acompletion(                                                               â”‚
           â”‚   183 â”‚   â”‚   â”‚   messages=MessagesAdapter.dump_python(                                                                     â”‚
           â”‚   184 â”‚   â”‚   â”‚   â”‚   messages, exclude_none=True, by_alias=True                                                            â”‚
           â”‚   185 â”‚   â”‚   â”‚   ),                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:817 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    814 â”‚   â”‚   â”‚   â”‚   â”‚   original_exception=e,                                                                            â”‚
           â”‚    815 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    816 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚ â±  817 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    818 â”‚                                                                                                                    â”‚
           â”‚    819 â”‚   async def _acompletion(                                                                                          â”‚
           â”‚    820 â”‚   â”‚   self, model: str, messages: List[Dict[str, str]], **kwargs                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:793 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    790 â”‚   â”‚   â”‚   if request_priority is not None and isinstance(request_priority, int):                                   â”‚
           â”‚    791 â”‚   â”‚   â”‚   â”‚   response = await self.schedule_acompletion(**kwargs)                                                 â”‚
           â”‚    792 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â±  793 â”‚   â”‚   â”‚   â”‚   response = await self.async_function_with_fallbacks(**kwargs)                                        â”‚
           â”‚    794 â”‚   â”‚   â”‚   end_time = time.time()                                                                                   â”‚
           â”‚    795 â”‚   â”‚   â”‚   _duration = end_time - start_time                                                                        â”‚
           â”‚    796 â”‚   â”‚   â”‚   asyncio.create_task(                                                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2795 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2792 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚   2793 â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                                â”‚
           â”‚   2794 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2795 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2796 â”‚                                                                                                                    â”‚
           â”‚   2797 â”‚   def _handle_mock_testing_fallbacks(                                                                              â”‚
           â”‚   2798 â”‚   â”‚   self,                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2631 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2628 â”‚   â”‚   â”‚   â”‚   content_policy_fallbacks=content_policy_fallbacks,                                                   â”‚
           â”‚   2629 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2630 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2631 â”‚   â”‚   â”‚   response = await self.async_function_with_retries(*args, **kwargs)                                       â”‚
           â”‚   2632 â”‚   â”‚   â”‚   verbose_router_logger.debug(f"Async Response: {response}")                                               â”‚
           â”‚   2633 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2634 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2967 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2964 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "max_retries", num_retries)                                              â”‚
           â”‚   2965 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "num_retries", current_attempt)                                          â”‚
           â”‚   2966 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2967 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2968 â”‚                                                                                                                    â”‚
           â”‚   2969 â”‚   async def make_call(self, original_function: Any, *args, **kwargs):                                              â”‚
           â”‚   2970 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2879 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2876 â”‚   â”‚   â”‚   â”‚   model_group=model_group, kwargs=kwargs                                                               â”‚
           â”‚   2877 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2878 â”‚   â”‚   â”‚   # if the function call is successful, no exception will be raised and we'll                              â”‚
           â”‚        break out of the loop                                                                                                â”‚
           â”‚ â± 2879 â”‚   â”‚   â”‚   response = await self.make_call(original_function, *args, **kwargs)                                      â”‚
           â”‚   2880 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   2881 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2882 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2976 in make_call                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2973 â”‚   â”‚   model_group = kwargs.get("model")                                                                            â”‚
           â”‚   2974 â”‚   â”‚   response = original_function(*args, **kwargs)                                                                â”‚
           â”‚   2975 â”‚   â”‚   if inspect.iscoroutinefunction(response) or inspect.isawaitable(response):                                   â”‚
           â”‚ â± 2976 â”‚   â”‚   â”‚   response = await response                                                                                â”‚
           â”‚   2977 â”‚   â”‚   ## PROCESS RESPONSE HEADERS                                                                                  â”‚
           â”‚   2978 â”‚   â”‚   await self.set_response_headers(response=response, model_group=model_group)                                  â”‚
           â”‚   2979                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:947 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    944 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚    945 â”‚   â”‚   â”‚   if model_name is not None:                                                                               â”‚
           â”‚    946 â”‚   â”‚   â”‚   â”‚   self.fail_calls[model_name] += 1                                                                     â”‚
           â”‚ â±  947 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    948 â”‚                                                                                                                    â”‚
           â”‚    949 â”‚   def _update_kwargs_before_fallbacks(self, model: str, kwargs: dict) -> None:                                     â”‚
           â”‚    950 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:915 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    912 â”‚   â”‚   â”‚   â”‚   â”‚   parent_otel_span=parent_otel_span,                                                               â”‚
           â”‚    913 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    914 â”‚   â”‚   â”‚   â”‚                                                                                                        â”‚
           â”‚ â±  915 â”‚   â”‚   â”‚   â”‚   response = await _response                                                                           â”‚
           â”‚    916 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚    917 â”‚   â”‚   â”‚   ## CHECK CONTENT FILTER ERROR ##                                                                         â”‚
           â”‚    918 â”‚   â”‚   â”‚   if isinstance(response, ModelResponse):                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1175 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1172 â”‚   â”‚   â”‚   â”‚   â”‚   else:                                                                                            â”‚
           â”‚   1173 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   kwargs["model"] = context_window_fallback_dict[model]                                        â”‚
           â”‚   1174 â”‚   â”‚   â”‚   â”‚   â”‚   return await original_function(*args, **kwargs)                                                  â”‚
           â”‚ â± 1175 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   1176 â”‚                                                                                                                    â”‚
           â”‚   1177 â”‚   is_coroutine = inspect.iscoroutinefunction(original_function)                                                    â”‚
           â”‚   1178                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1031 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1028 â”‚   â”‚   â”‚   â”‚   return _caching_handler_response.final_embedding_cached_response                                     â”‚
           â”‚   1029 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1030 â”‚   â”‚   â”‚   # MODEL CALL                                                                                             â”‚
           â”‚ â± 1031 â”‚   â”‚   â”‚   result = await original_function(*args, **kwargs)                                                        â”‚
           â”‚   1032 â”‚   â”‚   â”‚   end_time = datetime.datetime.now()                                                                       â”‚
           â”‚   1033 â”‚   â”‚   â”‚   if "stream" in kwargs and kwargs["stream"] is True:                                                      â”‚
           â”‚   1034 â”‚   â”‚   â”‚   â”‚   if (                                                                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:499 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    496 â”‚   â”‚   return response                                                                                              â”‚
           â”‚    497 â”‚   except Exception as e:                                                                                           â”‚
           â”‚    498 â”‚   â”‚   custom_llm_provider = custom_llm_provider or "openai"                                                        â”‚
           â”‚ â±  499 â”‚   â”‚   raise exception_type(                                                                                        â”‚
           â”‚    500 â”‚   â”‚   â”‚   model=model,                                                                                             â”‚
           â”‚    501 â”‚   â”‚   â”‚   custom_llm_provider=custom_llm_provider,                                                                 â”‚
           â”‚    502 â”‚   â”‚   â”‚   original_exception=e,                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:212 â”‚
           â”‚ 5 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2122 â”‚   â”‚   # don't let an error with mapping interrupt the user from receiving an error                                 â”‚
           â”‚        from the llm api calls                                                                                               â”‚
           â”‚   2123 â”‚   â”‚   if exception_mapping_worked:                                                                                 â”‚
           â”‚   2124 â”‚   â”‚   â”‚   setattr(e, "litellm_response_headers", litellm_response_headers)                                         â”‚
           â”‚ â± 2125 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   2126 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   2127 â”‚   â”‚   â”‚   for error_type in litellm.LITELLM_EXCEPTION_TYPES:                                                       â”‚
           â”‚   2128 â”‚   â”‚   â”‚   â”‚   if isinstance(e, error_type):                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:210 â”‚
           â”‚ 1 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2098 â”‚   â”‚   â”‚   â”‚   â”‚   request=original_exception.request,                                                              â”‚
           â”‚   2099 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚   2100 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â± 2101 â”‚   â”‚   â”‚   â”‚   raise APIConnectionError(                                                                            â”‚
           â”‚   2102 â”‚   â”‚   â”‚   â”‚   â”‚   message="{}\n{}".format(                                                                         â”‚
           â”‚   2103 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   str(original_exception), traceback.format_exc()                                              â”‚
           â”‚   2104 â”‚   â”‚   â”‚   â”‚   â”‚   ),                                                                                               â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           APIConnectionError: litellm.APIConnectionError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1109, in                 
           _wrap_create_connection                                                                                                        
               sock = await aiohappyeyeballs.start_connection(                                                                            
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                            
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py", line 123, in              
           start_connection                                                                                                               
               raise OSError(first_errno, msg)                                                                                            
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py", line 477, in acompletion           
               response = await init_response                                                                                             
                          ^^^^^^^^^^^^^^^^^^^                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 566, in                
           ollama_acompletion                                                                                                             
               raise e  # don't use verbose_logger.exception, if exception is raised                                                      
               ^^^^^^^                                                                                                                    
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 507, in                
           ollama_acompletion                                                                                                             
               resp = await session.post(url, json=data)                                                                                  
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                  
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py", line 696, in _request            
               conn = await self._connector.connect(                                                                                      
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 544, in connect          
               proto = await self._create_connection(req, traces, timeout)                                                                
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1050, in                 
           _create_connection                                                                                                             
               _, proto = await self._create_direct_connection(req, traces, timeout)                                                      
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1394, in                 
           _create_direct_connection                                                                                                      
               raise last_exc                                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1363, in                 
           _create_direct_connection                                                                                                      
               transp, proto = await self._wrap_create_connection(                                                                        
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                        
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1124, in                 
           _wrap_create_connection                                                                                                        
               raise client_error(req.connection_key, exc) from exc                                                                       
           aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
                                                                                                                                          
           Received Model Group=ollama/llama3.2                                                                                           
           Available Model Group Fallbacks=None LiteLLM Retried: 2 times, LiteLLM Max Retries: 3                                          
[01:03:43] Answer:                                                                                                                        


 ANSWERING QUESTION: sciqag_question_85.json
 ----------------------------- 



[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.

[01:04:04] Trajectory failed.                                                                                                             
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1109 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1106 â”‚   â”‚   â”‚   async with ceil_timeout(                                                                                 â”‚
           â”‚   1107 â”‚   â”‚   â”‚   â”‚   timeout.sock_connect, ceil_threshold=timeout.ceil_threshold                                          â”‚
           â”‚   1108 â”‚   â”‚   â”‚   ):                                                                                                       â”‚
           â”‚ â± 1109 â”‚   â”‚   â”‚   â”‚   sock = await aiohappyeyeballs.start_connection(                                                      â”‚
           â”‚   1110 â”‚   â”‚   â”‚   â”‚   â”‚   addr_infos=addr_infos,                                                                           â”‚
           â”‚   1111 â”‚   â”‚   â”‚   â”‚   â”‚   local_addr_infos=self._local_addr_infos,                                                         â”‚
           â”‚   1112 â”‚   â”‚   â”‚   â”‚   â”‚   happy_eyeballs_delay=self._happy_eyeballs_delay,                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py:123 in start_connection          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   120 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, OSError) and exc.errno == first_errno                                         â”‚
           â”‚   121 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   for exc in all_exceptions                                                                     â”‚
           â”‚   122 â”‚   â”‚   â”‚   â”‚   â”‚   ):                                                                                                â”‚
           â”‚ â± 123 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   raise OSError(first_errno, msg)                                                               â”‚
           â”‚   124 â”‚   â”‚   â”‚   â”‚   elif isinstance(first_exception, RuntimeError) and all(                                               â”‚
           â”‚   125 â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, RuntimeError) for exc in all_exceptions                                           â”‚
           â”‚   126 â”‚   â”‚   â”‚   â”‚   ):                                                                                                    â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:477 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    474 â”‚   â”‚   â”‚   â”‚   â”‚   response = ModelResponse(**init_response)                                                        â”‚
           â”‚    475 â”‚   â”‚   â”‚   â”‚   response = init_response                                                                             â”‚
           â”‚    476 â”‚   â”‚   â”‚   elif asyncio.iscoroutine(init_response):                                                                 â”‚
           â”‚ â±  477 â”‚   â”‚   â”‚   â”‚   response = await init_response                                                                       â”‚
           â”‚    478 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚    479 â”‚   â”‚   â”‚   â”‚   response = init_response  # type: ignore                                                             â”‚
           â”‚    480                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:566 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   563 â”‚   â”‚   â”‚   )                                                                                                         â”‚
           â”‚   564 â”‚   â”‚   â”‚   return model_response                                                                                     â”‚
           â”‚   565 â”‚   except Exception as e:                                                                                            â”‚
           â”‚ â± 566 â”‚   â”‚   raise e  # don't use verbose_logger.exception, if exception is raised                                         â”‚
           â”‚   567                                                                                                                       â”‚
           â”‚   568                                                                                                                       â”‚
           â”‚   569 async def ollama_aembeddings(                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:507 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   504 â”‚   try:                                                                                                              â”‚
           â”‚   505 â”‚   â”‚   timeout = aiohttp.ClientTimeout(total=litellm.request_timeout)  # 10 minutes                                  â”‚
           â”‚   506 â”‚   â”‚   async with aiohttp.ClientSession(timeout=timeout) as session:                                                 â”‚
           â”‚ â± 507 â”‚   â”‚   â”‚   resp = await session.post(url, json=data)                                                                 â”‚
           â”‚   508 â”‚   â”‚   â”‚                                                                                                             â”‚
           â”‚   509 â”‚   â”‚   â”‚   if resp.status != 200:                                                                                    â”‚
           â”‚   510 â”‚   â”‚   â”‚   â”‚   text = await resp.text()                                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py:696 in _request                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚    693 â”‚   â”‚   â”‚   â”‚   â”‚                                                                                                    â”‚
           â”‚    694 â”‚   â”‚   â”‚   â”‚   â”‚   # connection timeout                                                                             â”‚
           â”‚    695 â”‚   â”‚   â”‚   â”‚   â”‚   try:                                                                                             â”‚
           â”‚ â±  696 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   conn = await self._connector.connect(                                                        â”‚
           â”‚    697 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   req, traces=traces, timeout=real_timeout                                                 â”‚
           â”‚    698 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚    699 â”‚   â”‚   â”‚   â”‚   â”‚   except asyncio.TimeoutError as exc:                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:544 in connect                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚    541 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    542 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    543 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_start()                                                   â”‚
           â”‚ â±  544 â”‚   â”‚   â”‚   â”‚   proto = await self._create_connection(req, traces, timeout)                                          â”‚
           â”‚    545 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    546 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    547 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_end()                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1050 in _create_connection           â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1047 â”‚   â”‚   if req.proxy:                                                                                                â”‚
           â”‚   1048 â”‚   â”‚   â”‚   _, proto = await self._create_proxy_connection(req, traces, timeout)                                     â”‚
           â”‚   1049 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚ â± 1050 â”‚   â”‚   â”‚   _, proto = await self._create_direct_connection(req, traces, timeout)                                    â”‚
           â”‚   1051 â”‚   â”‚                                                                                                                â”‚
           â”‚   1052 â”‚   â”‚   return proto                                                                                                 â”‚
           â”‚   1053                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1394 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1391 â”‚   â”‚   â”‚   return transp, proto                                                                                     â”‚
           â”‚   1392 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   1393 â”‚   â”‚   â”‚   assert last_exc is not None                                                                              â”‚
           â”‚ â± 1394 â”‚   â”‚   â”‚   raise last_exc                                                                                           â”‚
           â”‚   1395 â”‚                                                                                                                    â”‚
           â”‚   1396 â”‚   async def _create_proxy_connection(                                                                              â”‚
           â”‚   1397 â”‚   â”‚   self, req: ClientRequest, traces: List["Trace"], timeout: "ClientTimeout"                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1363 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1360 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   1361 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1362 â”‚   â”‚   â”‚   try:                                                                                                     â”‚
           â”‚ â± 1363 â”‚   â”‚   â”‚   â”‚   transp, proto = await self._wrap_create_connection(                                                  â”‚
           â”‚   1364 â”‚   â”‚   â”‚   â”‚   â”‚   self._factory,                                                                                   â”‚
           â”‚   1365 â”‚   â”‚   â”‚   â”‚   â”‚   timeout=timeout,                                                                                 â”‚
           â”‚   1366 â”‚   â”‚   â”‚   â”‚   â”‚   ssl=sslcontext,                                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1124 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1121 â”‚   â”‚   except OSError as exc:                                                                                       â”‚
           â”‚   1122 â”‚   â”‚   â”‚   if exc.errno is None and isinstance(exc, asyncio.TimeoutError):                                          â”‚
           â”‚   1123 â”‚   â”‚   â”‚   â”‚   raise                                                                                                â”‚
           â”‚ â± 1124 â”‚   â”‚   â”‚   raise client_error(req.connection_key, exc) from exc                                                     â”‚
           â”‚   1125 â”‚                                                                                                                    â”‚
           â”‚   1126 â”‚   async def _wrap_existing_connection(                                                                             â”‚
           â”‚   1127 â”‚   â”‚   self,                                                                                                        â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno 111] Connect call failed 
           ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                                                    
                                                                                                                                          
           During handling of the above exception, another exception occurred:                                                            
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:276 in _run_with_timeout_failure                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   273 ) -> tuple[PQASession, AgentStatus]:                                                                                  â”‚
           â”‚   274 â”‚   try:                                                                                                              â”‚
           â”‚   275 â”‚   â”‚   async with asyncio.timeout(query.settings.agent.timeout):                                                     â”‚
           â”‚ â± 276 â”‚   â”‚   â”‚   status = await rollout()                                                                                  â”‚
           â”‚   277 â”‚   except TimeoutError:                                                                                              â”‚
           â”‚   278 â”‚   â”‚   logger.warning(                                                                                               â”‚
           â”‚   279 â”‚   â”‚   â”‚   f"Agent timeout after {query.settings.agent.timeout}-sec, just answering."                                â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:410 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   407 â”‚   â”‚   â”‚   â”‚   )                                                                                                     â”‚
           â”‚   408 â”‚   â”‚   â”‚   â”‚   return AgentStatus.TRUNCATED                                                                          â”‚
           â”‚   409 â”‚   â”‚   â”‚   agent_state.messages += obs                                                                               â”‚
           â”‚ â± 410 â”‚   â”‚   â”‚   for attempt in Retrying(                                                                                  â”‚
           â”‚   411 â”‚   â”‚   â”‚   â”‚   stop=stop_after_attempt(5),                                                                           â”‚
           â”‚   412 â”‚   â”‚   â”‚   â”‚   retry=retry_if_exception_type(MalformedMessageError),                                                 â”‚
           â”‚   413 â”‚   â”‚   â”‚   â”‚   before_sleep=before_sleep_log(logger, logging.WARNING),                                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:443 in __iter__                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   440 â”‚   â”‚                                                                                                                 â”‚
           â”‚   441 â”‚   â”‚   retry_state = RetryCallState(self, fn=None, args=(), kwargs={})                                               â”‚
           â”‚   442 â”‚   â”‚   while True:                                                                                                   â”‚
           â”‚ â± 443 â”‚   â”‚   â”‚   do = self.iter(retry_state=retry_state)                                                                   â”‚
           â”‚   444 â”‚   â”‚   â”‚   if isinstance(do, DoAttempt):                                                                             â”‚
           â”‚   445 â”‚   â”‚   â”‚   â”‚   yield AttemptManager(retry_state=retry_state)                                                         â”‚
           â”‚   446 â”‚   â”‚   â”‚   elif isinstance(do, DoSleep):                                                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:376 in iter                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   373 â”‚   â”‚   self._begin_iter(retry_state)                                                                                 â”‚
           â”‚   374 â”‚   â”‚   result = None                                                                                                 â”‚
           â”‚   375 â”‚   â”‚   for action in self.iter_state.actions:                                                                        â”‚
           â”‚ â± 376 â”‚   â”‚   â”‚   result = action(retry_state)                                                                              â”‚
           â”‚   377 â”‚   â”‚   return result                                                                                                 â”‚
           â”‚   378 â”‚                                                                                                                     â”‚
           â”‚   379 â”‚   def _begin_iter(self, retry_state: "RetryCallState") -> None:  # noqa                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:398 in <lambda>                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   395 â”‚                                                                                                                     â”‚
           â”‚   396 â”‚   def _post_retry_check_actions(self, retry_state: "RetryCallState") -> None:                                       â”‚
           â”‚   397 â”‚   â”‚   if not (self.iter_state.is_explicit_retry or self.iter_state.retry_run_result):                               â”‚
           â”‚ â± 398 â”‚   â”‚   â”‚   self._add_action_func(lambda rs: rs.outcome.result())                                                     â”‚
           â”‚   399 â”‚   â”‚   â”‚   return                                                                                                    â”‚
           â”‚   400 â”‚   â”‚                                                                                                                 â”‚
           â”‚   401 â”‚   â”‚   if self.after is not None:                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:449 in result                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚   446 â”‚   â”‚   â”‚   â”‚   if self._state in [CANCELLED, CANCELLED_AND_NOTIFIED]:                                                â”‚
           â”‚   447 â”‚   â”‚   â”‚   â”‚   â”‚   raise CancelledError()                                                                            â”‚
           â”‚   448 â”‚   â”‚   â”‚   â”‚   elif self._state == FINISHED:                                                                         â”‚
           â”‚ â± 449 â”‚   â”‚   â”‚   â”‚   â”‚   return self.__get_result()                                                                        â”‚
           â”‚   450 â”‚   â”‚   â”‚   â”‚                                                                                                         â”‚
           â”‚   451 â”‚   â”‚   â”‚   â”‚   self._condition.wait(timeout)                                                                         â”‚
           â”‚   452                                                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:401 in __get_result                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   398 â”‚   def __get_result(self):                                                                                           â”‚
           â”‚   399 â”‚   â”‚   if self._exception:                                                                                           â”‚
           â”‚   400 â”‚   â”‚   â”‚   try:                                                                                                      â”‚
           â”‚ â± 401 â”‚   â”‚   â”‚   â”‚   raise self._exception                                                                                 â”‚
           â”‚   402 â”‚   â”‚   â”‚   finally:                                                                                                  â”‚
           â”‚   403 â”‚   â”‚   â”‚   â”‚   # Break a reference cycle with the exception in self._exception                                       â”‚
           â”‚   404 â”‚   â”‚   â”‚   â”‚   self = None                                                                                           â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:417 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   414 â”‚   â”‚   â”‚   â”‚   reraise=True,                                                                                         â”‚
           â”‚   415 â”‚   â”‚   â”‚   ):                                                                                                        â”‚
           â”‚   416 â”‚   â”‚   â”‚   â”‚   with attempt:  # Retrying if ToolSelector fails to select a tool                                      â”‚
           â”‚ â± 417 â”‚   â”‚   â”‚   â”‚   â”‚   action = await agent(agent_state.messages, tools)                                                 â”‚
           â”‚   418 â”‚   â”‚   â”‚   agent_state.messages = [*agent_state.messages, action]                                                    â”‚
           â”‚   419 â”‚   â”‚   â”‚   if on_agent_action_callback:                                                                              â”‚
           â”‚   420 â”‚   â”‚   â”‚   â”‚   await on_agent_action_callback(action, agent_state)                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aviary/tools/utils.py:182 in __call__                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   179 â”‚   â”‚   â”‚   self._ledger.messages.extend(messages)                                                                    â”‚
           â”‚   180 â”‚   â”‚   â”‚   messages = self._ledger.messages                                                                          â”‚
           â”‚   181 â”‚   â”‚                                                                                                                 â”‚
           â”‚ â± 182 â”‚   â”‚   model_response = await self._bound_acompletion(                                                               â”‚
           â”‚   183 â”‚   â”‚   â”‚   messages=MessagesAdapter.dump_python(                                                                     â”‚
           â”‚   184 â”‚   â”‚   â”‚   â”‚   messages, exclude_none=True, by_alias=True                                                            â”‚
           â”‚   185 â”‚   â”‚   â”‚   ),                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:817 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    814 â”‚   â”‚   â”‚   â”‚   â”‚   original_exception=e,                                                                            â”‚
           â”‚    815 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    816 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚ â±  817 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    818 â”‚                                                                                                                    â”‚
           â”‚    819 â”‚   async def _acompletion(                                                                                          â”‚
           â”‚    820 â”‚   â”‚   self, model: str, messages: List[Dict[str, str]], **kwargs                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:793 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    790 â”‚   â”‚   â”‚   if request_priority is not None and isinstance(request_priority, int):                                   â”‚
           â”‚    791 â”‚   â”‚   â”‚   â”‚   response = await self.schedule_acompletion(**kwargs)                                                 â”‚
           â”‚    792 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â±  793 â”‚   â”‚   â”‚   â”‚   response = await self.async_function_with_fallbacks(**kwargs)                                        â”‚
           â”‚    794 â”‚   â”‚   â”‚   end_time = time.time()                                                                                   â”‚
           â”‚    795 â”‚   â”‚   â”‚   _duration = end_time - start_time                                                                        â”‚
           â”‚    796 â”‚   â”‚   â”‚   asyncio.create_task(                                                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2795 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2792 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚   2793 â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                                â”‚
           â”‚   2794 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2795 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2796 â”‚                                                                                                                    â”‚
           â”‚   2797 â”‚   def _handle_mock_testing_fallbacks(                                                                              â”‚
           â”‚   2798 â”‚   â”‚   self,                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2631 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2628 â”‚   â”‚   â”‚   â”‚   content_policy_fallbacks=content_policy_fallbacks,                                                   â”‚
           â”‚   2629 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2630 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2631 â”‚   â”‚   â”‚   response = await self.async_function_with_retries(*args, **kwargs)                                       â”‚
           â”‚   2632 â”‚   â”‚   â”‚   verbose_router_logger.debug(f"Async Response: {response}")                                               â”‚
           â”‚   2633 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2634 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2967 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2964 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "max_retries", num_retries)                                              â”‚
           â”‚   2965 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "num_retries", current_attempt)                                          â”‚
           â”‚   2966 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2967 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2968 â”‚                                                                                                                    â”‚
           â”‚   2969 â”‚   async def make_call(self, original_function: Any, *args, **kwargs):                                              â”‚
           â”‚   2970 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2879 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2876 â”‚   â”‚   â”‚   â”‚   model_group=model_group, kwargs=kwargs                                                               â”‚
           â”‚   2877 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2878 â”‚   â”‚   â”‚   # if the function call is successful, no exception will be raised and we'll                              â”‚
           â”‚        break out of the loop                                                                                                â”‚
           â”‚ â± 2879 â”‚   â”‚   â”‚   response = await self.make_call(original_function, *args, **kwargs)                                      â”‚
           â”‚   2880 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   2881 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2882 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2976 in make_call                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2973 â”‚   â”‚   model_group = kwargs.get("model")                                                                            â”‚
           â”‚   2974 â”‚   â”‚   response = original_function(*args, **kwargs)                                                                â”‚
           â”‚   2975 â”‚   â”‚   if inspect.iscoroutinefunction(response) or inspect.isawaitable(response):                                   â”‚
           â”‚ â± 2976 â”‚   â”‚   â”‚   response = await response                                                                                â”‚
           â”‚   2977 â”‚   â”‚   ## PROCESS RESPONSE HEADERS                                                                                  â”‚
           â”‚   2978 â”‚   â”‚   await self.set_response_headers(response=response, model_group=model_group)                                  â”‚
           â”‚   2979                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:947 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    944 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚    945 â”‚   â”‚   â”‚   if model_name is not None:                                                                               â”‚
           â”‚    946 â”‚   â”‚   â”‚   â”‚   self.fail_calls[model_name] += 1                                                                     â”‚
           â”‚ â±  947 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    948 â”‚                                                                                                                    â”‚
           â”‚    949 â”‚   def _update_kwargs_before_fallbacks(self, model: str, kwargs: dict) -> None:                                     â”‚
           â”‚    950 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:915 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    912 â”‚   â”‚   â”‚   â”‚   â”‚   parent_otel_span=parent_otel_span,                                                               â”‚
           â”‚    913 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    914 â”‚   â”‚   â”‚   â”‚                                                                                                        â”‚
           â”‚ â±  915 â”‚   â”‚   â”‚   â”‚   response = await _response                                                                           â”‚
           â”‚    916 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚    917 â”‚   â”‚   â”‚   ## CHECK CONTENT FILTER ERROR ##                                                                         â”‚
           â”‚    918 â”‚   â”‚   â”‚   if isinstance(response, ModelResponse):                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1175 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1172 â”‚   â”‚   â”‚   â”‚   â”‚   else:                                                                                            â”‚
           â”‚   1173 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   kwargs["model"] = context_window_fallback_dict[model]                                        â”‚
           â”‚   1174 â”‚   â”‚   â”‚   â”‚   â”‚   return await original_function(*args, **kwargs)                                                  â”‚
           â”‚ â± 1175 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   1176 â”‚                                                                                                                    â”‚
           â”‚   1177 â”‚   is_coroutine = inspect.iscoroutinefunction(original_function)                                                    â”‚
           â”‚   1178                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1031 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1028 â”‚   â”‚   â”‚   â”‚   return _caching_handler_response.final_embedding_cached_response                                     â”‚
           â”‚   1029 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1030 â”‚   â”‚   â”‚   # MODEL CALL                                                                                             â”‚
           â”‚ â± 1031 â”‚   â”‚   â”‚   result = await original_function(*args, **kwargs)                                                        â”‚
           â”‚   1032 â”‚   â”‚   â”‚   end_time = datetime.datetime.now()                                                                       â”‚
           â”‚   1033 â”‚   â”‚   â”‚   if "stream" in kwargs and kwargs["stream"] is True:                                                      â”‚
           â”‚   1034 â”‚   â”‚   â”‚   â”‚   if (                                                                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:499 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    496 â”‚   â”‚   return response                                                                                              â”‚
           â”‚    497 â”‚   except Exception as e:                                                                                           â”‚
           â”‚    498 â”‚   â”‚   custom_llm_provider = custom_llm_provider or "openai"                                                        â”‚
           â”‚ â±  499 â”‚   â”‚   raise exception_type(                                                                                        â”‚
           â”‚    500 â”‚   â”‚   â”‚   model=model,                                                                                             â”‚
           â”‚    501 â”‚   â”‚   â”‚   custom_llm_provider=custom_llm_provider,                                                                 â”‚
           â”‚    502 â”‚   â”‚   â”‚   original_exception=e,                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:212 â”‚
           â”‚ 5 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2122 â”‚   â”‚   # don't let an error with mapping interrupt the user from receiving an error                                 â”‚
           â”‚        from the llm api calls                                                                                               â”‚
           â”‚   2123 â”‚   â”‚   if exception_mapping_worked:                                                                                 â”‚
           â”‚   2124 â”‚   â”‚   â”‚   setattr(e, "litellm_response_headers", litellm_response_headers)                                         â”‚
           â”‚ â± 2125 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   2126 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   2127 â”‚   â”‚   â”‚   for error_type in litellm.LITELLM_EXCEPTION_TYPES:                                                       â”‚
           â”‚   2128 â”‚   â”‚   â”‚   â”‚   if isinstance(e, error_type):                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:210 â”‚
           â”‚ 1 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2098 â”‚   â”‚   â”‚   â”‚   â”‚   request=original_exception.request,                                                              â”‚
           â”‚   2099 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚   2100 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â± 2101 â”‚   â”‚   â”‚   â”‚   raise APIConnectionError(                                                                            â”‚
           â”‚   2102 â”‚   â”‚   â”‚   â”‚   â”‚   message="{}\n{}".format(                                                                         â”‚
           â”‚   2103 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   str(original_exception), traceback.format_exc()                                              â”‚
           â”‚   2104 â”‚   â”‚   â”‚   â”‚   â”‚   ),                                                                                               â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           APIConnectionError: litellm.APIConnectionError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1109, in                 
           _wrap_create_connection                                                                                                        
               sock = await aiohappyeyeballs.start_connection(                                                                            
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                            
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py", line 123, in              
           start_connection                                                                                                               
               raise OSError(first_errno, msg)                                                                                            
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py", line 477, in acompletion           
               response = await init_response                                                                                             
                          ^^^^^^^^^^^^^^^^^^^                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 566, in                
           ollama_acompletion                                                                                                             
               raise e  # don't use verbose_logger.exception, if exception is raised                                                      
               ^^^^^^^                                                                                                                    
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 507, in                
           ollama_acompletion                                                                                                             
               resp = await session.post(url, json=data)                                                                                  
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                  
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py", line 696, in _request            
               conn = await self._connector.connect(                                                                                      
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 544, in connect          
               proto = await self._create_connection(req, traces, timeout)                                                                
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1050, in                 
           _create_connection                                                                                                             
               _, proto = await self._create_direct_connection(req, traces, timeout)                                                      
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1394, in                 
           _create_direct_connection                                                                                                      
               raise last_exc                                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1363, in                 
           _create_direct_connection                                                                                                      
               transp, proto = await self._wrap_create_connection(                                                                        
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                        
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1124, in                 
           _wrap_create_connection                                                                                                        
               raise client_error(req.connection_key, exc) from exc                                                                       
           aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
                                                                                                                                          
           Received Model Group=ollama/llama3.2                                                                                           
           Available Model Group Fallbacks=None LiteLLM Retried: 2 times, LiteLLM Max Retries: 3                                          
[01:04:06] Answer:                                                                                                                        


 ANSWERING QUESTION: sciqag_question_86.json
 ----------------------------- 



[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.

[01:04:26] Trajectory failed.                                                                                                             
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1109 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1106 â”‚   â”‚   â”‚   async with ceil_timeout(                                                                                 â”‚
           â”‚   1107 â”‚   â”‚   â”‚   â”‚   timeout.sock_connect, ceil_threshold=timeout.ceil_threshold                                          â”‚
           â”‚   1108 â”‚   â”‚   â”‚   ):                                                                                                       â”‚
           â”‚ â± 1109 â”‚   â”‚   â”‚   â”‚   sock = await aiohappyeyeballs.start_connection(                                                      â”‚
           â”‚   1110 â”‚   â”‚   â”‚   â”‚   â”‚   addr_infos=addr_infos,                                                                           â”‚
           â”‚   1111 â”‚   â”‚   â”‚   â”‚   â”‚   local_addr_infos=self._local_addr_infos,                                                         â”‚
           â”‚   1112 â”‚   â”‚   â”‚   â”‚   â”‚   happy_eyeballs_delay=self._happy_eyeballs_delay,                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py:123 in start_connection          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   120 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, OSError) and exc.errno == first_errno                                         â”‚
           â”‚   121 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   for exc in all_exceptions                                                                     â”‚
           â”‚   122 â”‚   â”‚   â”‚   â”‚   â”‚   ):                                                                                                â”‚
           â”‚ â± 123 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   raise OSError(first_errno, msg)                                                               â”‚
           â”‚   124 â”‚   â”‚   â”‚   â”‚   elif isinstance(first_exception, RuntimeError) and all(                                               â”‚
           â”‚   125 â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, RuntimeError) for exc in all_exceptions                                           â”‚
           â”‚   126 â”‚   â”‚   â”‚   â”‚   ):                                                                                                    â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:477 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    474 â”‚   â”‚   â”‚   â”‚   â”‚   response = ModelResponse(**init_response)                                                        â”‚
           â”‚    475 â”‚   â”‚   â”‚   â”‚   response = init_response                                                                             â”‚
           â”‚    476 â”‚   â”‚   â”‚   elif asyncio.iscoroutine(init_response):                                                                 â”‚
           â”‚ â±  477 â”‚   â”‚   â”‚   â”‚   response = await init_response                                                                       â”‚
           â”‚    478 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚    479 â”‚   â”‚   â”‚   â”‚   response = init_response  # type: ignore                                                             â”‚
           â”‚    480                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:566 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   563 â”‚   â”‚   â”‚   )                                                                                                         â”‚
           â”‚   564 â”‚   â”‚   â”‚   return model_response                                                                                     â”‚
           â”‚   565 â”‚   except Exception as e:                                                                                            â”‚
           â”‚ â± 566 â”‚   â”‚   raise e  # don't use verbose_logger.exception, if exception is raised                                         â”‚
           â”‚   567                                                                                                                       â”‚
           â”‚   568                                                                                                                       â”‚
           â”‚   569 async def ollama_aembeddings(                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:507 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   504 â”‚   try:                                                                                                              â”‚
           â”‚   505 â”‚   â”‚   timeout = aiohttp.ClientTimeout(total=litellm.request_timeout)  # 10 minutes                                  â”‚
           â”‚   506 â”‚   â”‚   async with aiohttp.ClientSession(timeout=timeout) as session:                                                 â”‚
           â”‚ â± 507 â”‚   â”‚   â”‚   resp = await session.post(url, json=data)                                                                 â”‚
           â”‚   508 â”‚   â”‚   â”‚                                                                                                             â”‚
           â”‚   509 â”‚   â”‚   â”‚   if resp.status != 200:                                                                                    â”‚
           â”‚   510 â”‚   â”‚   â”‚   â”‚   text = await resp.text()                                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py:696 in _request                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚    693 â”‚   â”‚   â”‚   â”‚   â”‚                                                                                                    â”‚
           â”‚    694 â”‚   â”‚   â”‚   â”‚   â”‚   # connection timeout                                                                             â”‚
           â”‚    695 â”‚   â”‚   â”‚   â”‚   â”‚   try:                                                                                             â”‚
           â”‚ â±  696 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   conn = await self._connector.connect(                                                        â”‚
           â”‚    697 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   req, traces=traces, timeout=real_timeout                                                 â”‚
           â”‚    698 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚    699 â”‚   â”‚   â”‚   â”‚   â”‚   except asyncio.TimeoutError as exc:                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:544 in connect                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚    541 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    542 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    543 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_start()                                                   â”‚
           â”‚ â±  544 â”‚   â”‚   â”‚   â”‚   proto = await self._create_connection(req, traces, timeout)                                          â”‚
           â”‚    545 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    546 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    547 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_end()                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1050 in _create_connection           â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1047 â”‚   â”‚   if req.proxy:                                                                                                â”‚
           â”‚   1048 â”‚   â”‚   â”‚   _, proto = await self._create_proxy_connection(req, traces, timeout)                                     â”‚
           â”‚   1049 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚ â± 1050 â”‚   â”‚   â”‚   _, proto = await self._create_direct_connection(req, traces, timeout)                                    â”‚
           â”‚   1051 â”‚   â”‚                                                                                                                â”‚
           â”‚   1052 â”‚   â”‚   return proto                                                                                                 â”‚
           â”‚   1053                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1394 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1391 â”‚   â”‚   â”‚   return transp, proto                                                                                     â”‚
           â”‚   1392 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   1393 â”‚   â”‚   â”‚   assert last_exc is not None                                                                              â”‚
           â”‚ â± 1394 â”‚   â”‚   â”‚   raise last_exc                                                                                           â”‚
           â”‚   1395 â”‚                                                                                                                    â”‚
           â”‚   1396 â”‚   async def _create_proxy_connection(                                                                              â”‚
           â”‚   1397 â”‚   â”‚   self, req: ClientRequest, traces: List["Trace"], timeout: "ClientTimeout"                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1363 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1360 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   1361 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1362 â”‚   â”‚   â”‚   try:                                                                                                     â”‚
           â”‚ â± 1363 â”‚   â”‚   â”‚   â”‚   transp, proto = await self._wrap_create_connection(                                                  â”‚
           â”‚   1364 â”‚   â”‚   â”‚   â”‚   â”‚   self._factory,                                                                                   â”‚
           â”‚   1365 â”‚   â”‚   â”‚   â”‚   â”‚   timeout=timeout,                                                                                 â”‚
           â”‚   1366 â”‚   â”‚   â”‚   â”‚   â”‚   ssl=sslcontext,                                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1124 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1121 â”‚   â”‚   except OSError as exc:                                                                                       â”‚
           â”‚   1122 â”‚   â”‚   â”‚   if exc.errno is None and isinstance(exc, asyncio.TimeoutError):                                          â”‚
           â”‚   1123 â”‚   â”‚   â”‚   â”‚   raise                                                                                                â”‚
           â”‚ â± 1124 â”‚   â”‚   â”‚   raise client_error(req.connection_key, exc) from exc                                                     â”‚
           â”‚   1125 â”‚                                                                                                                    â”‚
           â”‚   1126 â”‚   async def _wrap_existing_connection(                                                                             â”‚
           â”‚   1127 â”‚   â”‚   self,                                                                                                        â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno 111] Connect call failed 
           ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                                                    
                                                                                                                                          
           During handling of the above exception, another exception occurred:                                                            
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:276 in _run_with_timeout_failure                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   273 ) -> tuple[PQASession, AgentStatus]:                                                                                  â”‚
           â”‚   274 â”‚   try:                                                                                                              â”‚
           â”‚   275 â”‚   â”‚   async with asyncio.timeout(query.settings.agent.timeout):                                                     â”‚
           â”‚ â± 276 â”‚   â”‚   â”‚   status = await rollout()                                                                                  â”‚
           â”‚   277 â”‚   except TimeoutError:                                                                                              â”‚
           â”‚   278 â”‚   â”‚   logger.warning(                                                                                               â”‚
           â”‚   279 â”‚   â”‚   â”‚   f"Agent timeout after {query.settings.agent.timeout}-sec, just answering."                                â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:410 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   407 â”‚   â”‚   â”‚   â”‚   )                                                                                                     â”‚
           â”‚   408 â”‚   â”‚   â”‚   â”‚   return AgentStatus.TRUNCATED                                                                          â”‚
           â”‚   409 â”‚   â”‚   â”‚   agent_state.messages += obs                                                                               â”‚
           â”‚ â± 410 â”‚   â”‚   â”‚   for attempt in Retrying(                                                                                  â”‚
           â”‚   411 â”‚   â”‚   â”‚   â”‚   stop=stop_after_attempt(5),                                                                           â”‚
           â”‚   412 â”‚   â”‚   â”‚   â”‚   retry=retry_if_exception_type(MalformedMessageError),                                                 â”‚
           â”‚   413 â”‚   â”‚   â”‚   â”‚   before_sleep=before_sleep_log(logger, logging.WARNING),                                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:443 in __iter__                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   440 â”‚   â”‚                                                                                                                 â”‚
           â”‚   441 â”‚   â”‚   retry_state = RetryCallState(self, fn=None, args=(), kwargs={})                                               â”‚
           â”‚   442 â”‚   â”‚   while True:                                                                                                   â”‚
           â”‚ â± 443 â”‚   â”‚   â”‚   do = self.iter(retry_state=retry_state)                                                                   â”‚
           â”‚   444 â”‚   â”‚   â”‚   if isinstance(do, DoAttempt):                                                                             â”‚
           â”‚   445 â”‚   â”‚   â”‚   â”‚   yield AttemptManager(retry_state=retry_state)                                                         â”‚
           â”‚   446 â”‚   â”‚   â”‚   elif isinstance(do, DoSleep):                                                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:376 in iter                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   373 â”‚   â”‚   self._begin_iter(retry_state)                                                                                 â”‚
           â”‚   374 â”‚   â”‚   result = None                                                                                                 â”‚
           â”‚   375 â”‚   â”‚   for action in self.iter_state.actions:                                                                        â”‚
           â”‚ â± 376 â”‚   â”‚   â”‚   result = action(retry_state)                                                                              â”‚
           â”‚   377 â”‚   â”‚   return result                                                                                                 â”‚
           â”‚   378 â”‚                                                                                                                     â”‚
           â”‚   379 â”‚   def _begin_iter(self, retry_state: "RetryCallState") -> None:  # noqa                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:398 in <lambda>                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   395 â”‚                                                                                                                     â”‚
           â”‚   396 â”‚   def _post_retry_check_actions(self, retry_state: "RetryCallState") -> None:                                       â”‚
           â”‚   397 â”‚   â”‚   if not (self.iter_state.is_explicit_retry or self.iter_state.retry_run_result):                               â”‚
           â”‚ â± 398 â”‚   â”‚   â”‚   self._add_action_func(lambda rs: rs.outcome.result())                                                     â”‚
           â”‚   399 â”‚   â”‚   â”‚   return                                                                                                    â”‚
           â”‚   400 â”‚   â”‚                                                                                                                 â”‚
           â”‚   401 â”‚   â”‚   if self.after is not None:                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:449 in result                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚   446 â”‚   â”‚   â”‚   â”‚   if self._state in [CANCELLED, CANCELLED_AND_NOTIFIED]:                                                â”‚
           â”‚   447 â”‚   â”‚   â”‚   â”‚   â”‚   raise CancelledError()                                                                            â”‚
           â”‚   448 â”‚   â”‚   â”‚   â”‚   elif self._state == FINISHED:                                                                         â”‚
           â”‚ â± 449 â”‚   â”‚   â”‚   â”‚   â”‚   return self.__get_result()                                                                        â”‚
           â”‚   450 â”‚   â”‚   â”‚   â”‚                                                                                                         â”‚
           â”‚   451 â”‚   â”‚   â”‚   â”‚   self._condition.wait(timeout)                                                                         â”‚
           â”‚   452                                                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:401 in __get_result                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   398 â”‚   def __get_result(self):                                                                                           â”‚
           â”‚   399 â”‚   â”‚   if self._exception:                                                                                           â”‚
           â”‚   400 â”‚   â”‚   â”‚   try:                                                                                                      â”‚
           â”‚ â± 401 â”‚   â”‚   â”‚   â”‚   raise self._exception                                                                                 â”‚
           â”‚   402 â”‚   â”‚   â”‚   finally:                                                                                                  â”‚
           â”‚   403 â”‚   â”‚   â”‚   â”‚   # Break a reference cycle with the exception in self._exception                                       â”‚
           â”‚   404 â”‚   â”‚   â”‚   â”‚   self = None                                                                                           â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:417 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   414 â”‚   â”‚   â”‚   â”‚   reraise=True,                                                                                         â”‚
           â”‚   415 â”‚   â”‚   â”‚   ):                                                                                                        â”‚
           â”‚   416 â”‚   â”‚   â”‚   â”‚   with attempt:  # Retrying if ToolSelector fails to select a tool                                      â”‚
           â”‚ â± 417 â”‚   â”‚   â”‚   â”‚   â”‚   action = await agent(agent_state.messages, tools)                                                 â”‚
           â”‚   418 â”‚   â”‚   â”‚   agent_state.messages = [*agent_state.messages, action]                                                    â”‚
           â”‚   419 â”‚   â”‚   â”‚   if on_agent_action_callback:                                                                              â”‚
           â”‚   420 â”‚   â”‚   â”‚   â”‚   await on_agent_action_callback(action, agent_state)                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aviary/tools/utils.py:182 in __call__                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   179 â”‚   â”‚   â”‚   self._ledger.messages.extend(messages)                                                                    â”‚
           â”‚   180 â”‚   â”‚   â”‚   messages = self._ledger.messages                                                                          â”‚
           â”‚   181 â”‚   â”‚                                                                                                                 â”‚
           â”‚ â± 182 â”‚   â”‚   model_response = await self._bound_acompletion(                                                               â”‚
           â”‚   183 â”‚   â”‚   â”‚   messages=MessagesAdapter.dump_python(                                                                     â”‚
           â”‚   184 â”‚   â”‚   â”‚   â”‚   messages, exclude_none=True, by_alias=True                                                            â”‚
           â”‚   185 â”‚   â”‚   â”‚   ),                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:817 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    814 â”‚   â”‚   â”‚   â”‚   â”‚   original_exception=e,                                                                            â”‚
           â”‚    815 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    816 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚ â±  817 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    818 â”‚                                                                                                                    â”‚
           â”‚    819 â”‚   async def _acompletion(                                                                                          â”‚
           â”‚    820 â”‚   â”‚   self, model: str, messages: List[Dict[str, str]], **kwargs                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:793 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    790 â”‚   â”‚   â”‚   if request_priority is not None and isinstance(request_priority, int):                                   â”‚
           â”‚    791 â”‚   â”‚   â”‚   â”‚   response = await self.schedule_acompletion(**kwargs)                                                 â”‚
           â”‚    792 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â±  793 â”‚   â”‚   â”‚   â”‚   response = await self.async_function_with_fallbacks(**kwargs)                                        â”‚
           â”‚    794 â”‚   â”‚   â”‚   end_time = time.time()                                                                                   â”‚
           â”‚    795 â”‚   â”‚   â”‚   _duration = end_time - start_time                                                                        â”‚
           â”‚    796 â”‚   â”‚   â”‚   asyncio.create_task(                                                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2795 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2792 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚   2793 â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                                â”‚
           â”‚   2794 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2795 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2796 â”‚                                                                                                                    â”‚
           â”‚   2797 â”‚   def _handle_mock_testing_fallbacks(                                                                              â”‚
           â”‚   2798 â”‚   â”‚   self,                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2631 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2628 â”‚   â”‚   â”‚   â”‚   content_policy_fallbacks=content_policy_fallbacks,                                                   â”‚
           â”‚   2629 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2630 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2631 â”‚   â”‚   â”‚   response = await self.async_function_with_retries(*args, **kwargs)                                       â”‚
           â”‚   2632 â”‚   â”‚   â”‚   verbose_router_logger.debug(f"Async Response: {response}")                                               â”‚
           â”‚   2633 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2634 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2967 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2964 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "max_retries", num_retries)                                              â”‚
           â”‚   2965 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "num_retries", current_attempt)                                          â”‚
           â”‚   2966 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2967 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2968 â”‚                                                                                                                    â”‚
           â”‚   2969 â”‚   async def make_call(self, original_function: Any, *args, **kwargs):                                              â”‚
           â”‚   2970 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2879 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2876 â”‚   â”‚   â”‚   â”‚   model_group=model_group, kwargs=kwargs                                                               â”‚
           â”‚   2877 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2878 â”‚   â”‚   â”‚   # if the function call is successful, no exception will be raised and we'll                              â”‚
           â”‚        break out of the loop                                                                                                â”‚
           â”‚ â± 2879 â”‚   â”‚   â”‚   response = await self.make_call(original_function, *args, **kwargs)                                      â”‚
           â”‚   2880 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   2881 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2882 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2976 in make_call                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2973 â”‚   â”‚   model_group = kwargs.get("model")                                                                            â”‚
           â”‚   2974 â”‚   â”‚   response = original_function(*args, **kwargs)                                                                â”‚
           â”‚   2975 â”‚   â”‚   if inspect.iscoroutinefunction(response) or inspect.isawaitable(response):                                   â”‚
           â”‚ â± 2976 â”‚   â”‚   â”‚   response = await response                                                                                â”‚
           â”‚   2977 â”‚   â”‚   ## PROCESS RESPONSE HEADERS                                                                                  â”‚
           â”‚   2978 â”‚   â”‚   await self.set_response_headers(response=response, model_group=model_group)                                  â”‚
           â”‚   2979                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:947 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    944 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚    945 â”‚   â”‚   â”‚   if model_name is not None:                                                                               â”‚
           â”‚    946 â”‚   â”‚   â”‚   â”‚   self.fail_calls[model_name] += 1                                                                     â”‚
           â”‚ â±  947 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    948 â”‚                                                                                                                    â”‚
           â”‚    949 â”‚   def _update_kwargs_before_fallbacks(self, model: str, kwargs: dict) -> None:                                     â”‚
           â”‚    950 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:915 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    912 â”‚   â”‚   â”‚   â”‚   â”‚   parent_otel_span=parent_otel_span,                                                               â”‚
           â”‚    913 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    914 â”‚   â”‚   â”‚   â”‚                                                                                                        â”‚
           â”‚ â±  915 â”‚   â”‚   â”‚   â”‚   response = await _response                                                                           â”‚
           â”‚    916 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚    917 â”‚   â”‚   â”‚   ## CHECK CONTENT FILTER ERROR ##                                                                         â”‚
           â”‚    918 â”‚   â”‚   â”‚   if isinstance(response, ModelResponse):                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1175 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1172 â”‚   â”‚   â”‚   â”‚   â”‚   else:                                                                                            â”‚
           â”‚   1173 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   kwargs["model"] = context_window_fallback_dict[model]                                        â”‚
           â”‚   1174 â”‚   â”‚   â”‚   â”‚   â”‚   return await original_function(*args, **kwargs)                                                  â”‚
           â”‚ â± 1175 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   1176 â”‚                                                                                                                    â”‚
           â”‚   1177 â”‚   is_coroutine = inspect.iscoroutinefunction(original_function)                                                    â”‚
           â”‚   1178                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1031 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1028 â”‚   â”‚   â”‚   â”‚   return _caching_handler_response.final_embedding_cached_response                                     â”‚
           â”‚   1029 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1030 â”‚   â”‚   â”‚   # MODEL CALL                                                                                             â”‚
           â”‚ â± 1031 â”‚   â”‚   â”‚   result = await original_function(*args, **kwargs)                                                        â”‚
           â”‚   1032 â”‚   â”‚   â”‚   end_time = datetime.datetime.now()                                                                       â”‚
           â”‚   1033 â”‚   â”‚   â”‚   if "stream" in kwargs and kwargs["stream"] is True:                                                      â”‚
           â”‚   1034 â”‚   â”‚   â”‚   â”‚   if (                                                                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:499 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    496 â”‚   â”‚   return response                                                                                              â”‚
           â”‚    497 â”‚   except Exception as e:                                                                                           â”‚
           â”‚    498 â”‚   â”‚   custom_llm_provider = custom_llm_provider or "openai"                                                        â”‚
           â”‚ â±  499 â”‚   â”‚   raise exception_type(                                                                                        â”‚
           â”‚    500 â”‚   â”‚   â”‚   model=model,                                                                                             â”‚
           â”‚    501 â”‚   â”‚   â”‚   custom_llm_provider=custom_llm_provider,                                                                 â”‚
           â”‚    502 â”‚   â”‚   â”‚   original_exception=e,                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:212 â”‚
           â”‚ 5 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2122 â”‚   â”‚   # don't let an error with mapping interrupt the user from receiving an error                                 â”‚
           â”‚        from the llm api calls                                                                                               â”‚
           â”‚   2123 â”‚   â”‚   if exception_mapping_worked:                                                                                 â”‚
           â”‚   2124 â”‚   â”‚   â”‚   setattr(e, "litellm_response_headers", litellm_response_headers)                                         â”‚
           â”‚ â± 2125 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   2126 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   2127 â”‚   â”‚   â”‚   for error_type in litellm.LITELLM_EXCEPTION_TYPES:                                                       â”‚
           â”‚   2128 â”‚   â”‚   â”‚   â”‚   if isinstance(e, error_type):                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:210 â”‚
           â”‚ 1 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2098 â”‚   â”‚   â”‚   â”‚   â”‚   request=original_exception.request,                                                              â”‚
           â”‚   2099 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚   2100 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â± 2101 â”‚   â”‚   â”‚   â”‚   raise APIConnectionError(                                                                            â”‚
           â”‚   2102 â”‚   â”‚   â”‚   â”‚   â”‚   message="{}\n{}".format(                                                                         â”‚
           â”‚   2103 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   str(original_exception), traceback.format_exc()                                              â”‚
           â”‚   2104 â”‚   â”‚   â”‚   â”‚   â”‚   ),                                                                                               â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           APIConnectionError: litellm.APIConnectionError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1109, in                 
           _wrap_create_connection                                                                                                        
               sock = await aiohappyeyeballs.start_connection(                                                                            
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                            
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py", line 123, in              
           start_connection                                                                                                               
               raise OSError(first_errno, msg)                                                                                            
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py", line 477, in acompletion           
               response = await init_response                                                                                             
                          ^^^^^^^^^^^^^^^^^^^                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 566, in                
           ollama_acompletion                                                                                                             
               raise e  # don't use verbose_logger.exception, if exception is raised                                                      
               ^^^^^^^                                                                                                                    
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 507, in                
           ollama_acompletion                                                                                                             
               resp = await session.post(url, json=data)                                                                                  
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                  
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py", line 696, in _request            
               conn = await self._connector.connect(                                                                                      
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 544, in connect          
               proto = await self._create_connection(req, traces, timeout)                                                                
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1050, in                 
           _create_connection                                                                                                             
               _, proto = await self._create_direct_connection(req, traces, timeout)                                                      
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1394, in                 
           _create_direct_connection                                                                                                      
               raise last_exc                                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1363, in                 
           _create_direct_connection                                                                                                      
               transp, proto = await self._wrap_create_connection(                                                                        
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                        
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1124, in                 
           _wrap_create_connection                                                                                                        
               raise client_error(req.connection_key, exc) from exc                                                                       
           aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
                                                                                                                                          
           Received Model Group=ollama/llama3.2                                                                                           
           Available Model Group Fallbacks=None LiteLLM Retried: 2 times, LiteLLM Max Retries: 3                                          
[01:04:28] Answer:                                                                                                                        


 ANSWERING QUESTION: sciqag_question_87.json
 ----------------------------- 



[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.

[01:04:49] Trajectory failed.                                                                                                             
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1109 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1106 â”‚   â”‚   â”‚   async with ceil_timeout(                                                                                 â”‚
           â”‚   1107 â”‚   â”‚   â”‚   â”‚   timeout.sock_connect, ceil_threshold=timeout.ceil_threshold                                          â”‚
           â”‚   1108 â”‚   â”‚   â”‚   ):                                                                                                       â”‚
           â”‚ â± 1109 â”‚   â”‚   â”‚   â”‚   sock = await aiohappyeyeballs.start_connection(                                                      â”‚
           â”‚   1110 â”‚   â”‚   â”‚   â”‚   â”‚   addr_infos=addr_infos,                                                                           â”‚
           â”‚   1111 â”‚   â”‚   â”‚   â”‚   â”‚   local_addr_infos=self._local_addr_infos,                                                         â”‚
           â”‚   1112 â”‚   â”‚   â”‚   â”‚   â”‚   happy_eyeballs_delay=self._happy_eyeballs_delay,                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py:123 in start_connection          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   120 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, OSError) and exc.errno == first_errno                                         â”‚
           â”‚   121 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   for exc in all_exceptions                                                                     â”‚
           â”‚   122 â”‚   â”‚   â”‚   â”‚   â”‚   ):                                                                                                â”‚
           â”‚ â± 123 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   raise OSError(first_errno, msg)                                                               â”‚
           â”‚   124 â”‚   â”‚   â”‚   â”‚   elif isinstance(first_exception, RuntimeError) and all(                                               â”‚
           â”‚   125 â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, RuntimeError) for exc in all_exceptions                                           â”‚
           â”‚   126 â”‚   â”‚   â”‚   â”‚   ):                                                                                                    â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:477 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    474 â”‚   â”‚   â”‚   â”‚   â”‚   response = ModelResponse(**init_response)                                                        â”‚
           â”‚    475 â”‚   â”‚   â”‚   â”‚   response = init_response                                                                             â”‚
           â”‚    476 â”‚   â”‚   â”‚   elif asyncio.iscoroutine(init_response):                                                                 â”‚
           â”‚ â±  477 â”‚   â”‚   â”‚   â”‚   response = await init_response                                                                       â”‚
           â”‚    478 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚    479 â”‚   â”‚   â”‚   â”‚   response = init_response  # type: ignore                                                             â”‚
           â”‚    480                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:566 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   563 â”‚   â”‚   â”‚   )                                                                                                         â”‚
           â”‚   564 â”‚   â”‚   â”‚   return model_response                                                                                     â”‚
           â”‚   565 â”‚   except Exception as e:                                                                                            â”‚
           â”‚ â± 566 â”‚   â”‚   raise e  # don't use verbose_logger.exception, if exception is raised                                         â”‚
           â”‚   567                                                                                                                       â”‚
           â”‚   568                                                                                                                       â”‚
           â”‚   569 async def ollama_aembeddings(                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:507 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   504 â”‚   try:                                                                                                              â”‚
           â”‚   505 â”‚   â”‚   timeout = aiohttp.ClientTimeout(total=litellm.request_timeout)  # 10 minutes                                  â”‚
           â”‚   506 â”‚   â”‚   async with aiohttp.ClientSession(timeout=timeout) as session:                                                 â”‚
           â”‚ â± 507 â”‚   â”‚   â”‚   resp = await session.post(url, json=data)                                                                 â”‚
           â”‚   508 â”‚   â”‚   â”‚                                                                                                             â”‚
           â”‚   509 â”‚   â”‚   â”‚   if resp.status != 200:                                                                                    â”‚
           â”‚   510 â”‚   â”‚   â”‚   â”‚   text = await resp.text()                                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py:696 in _request                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚    693 â”‚   â”‚   â”‚   â”‚   â”‚                                                                                                    â”‚
           â”‚    694 â”‚   â”‚   â”‚   â”‚   â”‚   # connection timeout                                                                             â”‚
           â”‚    695 â”‚   â”‚   â”‚   â”‚   â”‚   try:                                                                                             â”‚
           â”‚ â±  696 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   conn = await self._connector.connect(                                                        â”‚
           â”‚    697 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   req, traces=traces, timeout=real_timeout                                                 â”‚
           â”‚    698 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚    699 â”‚   â”‚   â”‚   â”‚   â”‚   except asyncio.TimeoutError as exc:                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:544 in connect                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚    541 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    542 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    543 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_start()                                                   â”‚
           â”‚ â±  544 â”‚   â”‚   â”‚   â”‚   proto = await self._create_connection(req, traces, timeout)                                          â”‚
           â”‚    545 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    546 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    547 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_end()                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1050 in _create_connection           â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1047 â”‚   â”‚   if req.proxy:                                                                                                â”‚
           â”‚   1048 â”‚   â”‚   â”‚   _, proto = await self._create_proxy_connection(req, traces, timeout)                                     â”‚
           â”‚   1049 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚ â± 1050 â”‚   â”‚   â”‚   _, proto = await self._create_direct_connection(req, traces, timeout)                                    â”‚
           â”‚   1051 â”‚   â”‚                                                                                                                â”‚
           â”‚   1052 â”‚   â”‚   return proto                                                                                                 â”‚
           â”‚   1053                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1394 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1391 â”‚   â”‚   â”‚   return transp, proto                                                                                     â”‚
           â”‚   1392 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   1393 â”‚   â”‚   â”‚   assert last_exc is not None                                                                              â”‚
           â”‚ â± 1394 â”‚   â”‚   â”‚   raise last_exc                                                                                           â”‚
           â”‚   1395 â”‚                                                                                                                    â”‚
           â”‚   1396 â”‚   async def _create_proxy_connection(                                                                              â”‚
           â”‚   1397 â”‚   â”‚   self, req: ClientRequest, traces: List["Trace"], timeout: "ClientTimeout"                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1363 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1360 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   1361 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1362 â”‚   â”‚   â”‚   try:                                                                                                     â”‚
           â”‚ â± 1363 â”‚   â”‚   â”‚   â”‚   transp, proto = await self._wrap_create_connection(                                                  â”‚
           â”‚   1364 â”‚   â”‚   â”‚   â”‚   â”‚   self._factory,                                                                                   â”‚
           â”‚   1365 â”‚   â”‚   â”‚   â”‚   â”‚   timeout=timeout,                                                                                 â”‚
           â”‚   1366 â”‚   â”‚   â”‚   â”‚   â”‚   ssl=sslcontext,                                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1124 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1121 â”‚   â”‚   except OSError as exc:                                                                                       â”‚
           â”‚   1122 â”‚   â”‚   â”‚   if exc.errno is None and isinstance(exc, asyncio.TimeoutError):                                          â”‚
           â”‚   1123 â”‚   â”‚   â”‚   â”‚   raise                                                                                                â”‚
           â”‚ â± 1124 â”‚   â”‚   â”‚   raise client_error(req.connection_key, exc) from exc                                                     â”‚
           â”‚   1125 â”‚                                                                                                                    â”‚
           â”‚   1126 â”‚   async def _wrap_existing_connection(                                                                             â”‚
           â”‚   1127 â”‚   â”‚   self,                                                                                                        â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno 111] Connect call failed 
           ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                                                    
                                                                                                                                          
           During handling of the above exception, another exception occurred:                                                            
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:276 in _run_with_timeout_failure                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   273 ) -> tuple[PQASession, AgentStatus]:                                                                                  â”‚
           â”‚   274 â”‚   try:                                                                                                              â”‚
           â”‚   275 â”‚   â”‚   async with asyncio.timeout(query.settings.agent.timeout):                                                     â”‚
           â”‚ â± 276 â”‚   â”‚   â”‚   status = await rollout()                                                                                  â”‚
           â”‚   277 â”‚   except TimeoutError:                                                                                              â”‚
           â”‚   278 â”‚   â”‚   logger.warning(                                                                                               â”‚
           â”‚   279 â”‚   â”‚   â”‚   f"Agent timeout after {query.settings.agent.timeout}-sec, just answering."                                â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:410 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   407 â”‚   â”‚   â”‚   â”‚   )                                                                                                     â”‚
           â”‚   408 â”‚   â”‚   â”‚   â”‚   return AgentStatus.TRUNCATED                                                                          â”‚
           â”‚   409 â”‚   â”‚   â”‚   agent_state.messages += obs                                                                               â”‚
           â”‚ â± 410 â”‚   â”‚   â”‚   for attempt in Retrying(                                                                                  â”‚
           â”‚   411 â”‚   â”‚   â”‚   â”‚   stop=stop_after_attempt(5),                                                                           â”‚
           â”‚   412 â”‚   â”‚   â”‚   â”‚   retry=retry_if_exception_type(MalformedMessageError),                                                 â”‚
           â”‚   413 â”‚   â”‚   â”‚   â”‚   before_sleep=before_sleep_log(logger, logging.WARNING),                                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:443 in __iter__                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   440 â”‚   â”‚                                                                                                                 â”‚
           â”‚   441 â”‚   â”‚   retry_state = RetryCallState(self, fn=None, args=(), kwargs={})                                               â”‚
           â”‚   442 â”‚   â”‚   while True:                                                                                                   â”‚
           â”‚ â± 443 â”‚   â”‚   â”‚   do = self.iter(retry_state=retry_state)                                                                   â”‚
           â”‚   444 â”‚   â”‚   â”‚   if isinstance(do, DoAttempt):                                                                             â”‚
           â”‚   445 â”‚   â”‚   â”‚   â”‚   yield AttemptManager(retry_state=retry_state)                                                         â”‚
           â”‚   446 â”‚   â”‚   â”‚   elif isinstance(do, DoSleep):                                                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:376 in iter                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   373 â”‚   â”‚   self._begin_iter(retry_state)                                                                                 â”‚
           â”‚   374 â”‚   â”‚   result = None                                                                                                 â”‚
           â”‚   375 â”‚   â”‚   for action in self.iter_state.actions:                                                                        â”‚
           â”‚ â± 376 â”‚   â”‚   â”‚   result = action(retry_state)                                                                              â”‚
           â”‚   377 â”‚   â”‚   return result                                                                                                 â”‚
           â”‚   378 â”‚                                                                                                                     â”‚
           â”‚   379 â”‚   def _begin_iter(self, retry_state: "RetryCallState") -> None:  # noqa                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:398 in <lambda>                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   395 â”‚                                                                                                                     â”‚
           â”‚   396 â”‚   def _post_retry_check_actions(self, retry_state: "RetryCallState") -> None:                                       â”‚
           â”‚   397 â”‚   â”‚   if not (self.iter_state.is_explicit_retry or self.iter_state.retry_run_result):                               â”‚
           â”‚ â± 398 â”‚   â”‚   â”‚   self._add_action_func(lambda rs: rs.outcome.result())                                                     â”‚
           â”‚   399 â”‚   â”‚   â”‚   return                                                                                                    â”‚
           â”‚   400 â”‚   â”‚                                                                                                                 â”‚
           â”‚   401 â”‚   â”‚   if self.after is not None:                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:449 in result                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚   446 â”‚   â”‚   â”‚   â”‚   if self._state in [CANCELLED, CANCELLED_AND_NOTIFIED]:                                                â”‚
           â”‚   447 â”‚   â”‚   â”‚   â”‚   â”‚   raise CancelledError()                                                                            â”‚
           â”‚   448 â”‚   â”‚   â”‚   â”‚   elif self._state == FINISHED:                                                                         â”‚
           â”‚ â± 449 â”‚   â”‚   â”‚   â”‚   â”‚   return self.__get_result()                                                                        â”‚
           â”‚   450 â”‚   â”‚   â”‚   â”‚                                                                                                         â”‚
           â”‚   451 â”‚   â”‚   â”‚   â”‚   self._condition.wait(timeout)                                                                         â”‚
           â”‚   452                                                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:401 in __get_result                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   398 â”‚   def __get_result(self):                                                                                           â”‚
           â”‚   399 â”‚   â”‚   if self._exception:                                                                                           â”‚
           â”‚   400 â”‚   â”‚   â”‚   try:                                                                                                      â”‚
           â”‚ â± 401 â”‚   â”‚   â”‚   â”‚   raise self._exception                                                                                 â”‚
           â”‚   402 â”‚   â”‚   â”‚   finally:                                                                                                  â”‚
           â”‚   403 â”‚   â”‚   â”‚   â”‚   # Break a reference cycle with the exception in self._exception                                       â”‚
           â”‚   404 â”‚   â”‚   â”‚   â”‚   self = None                                                                                           â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:417 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   414 â”‚   â”‚   â”‚   â”‚   reraise=True,                                                                                         â”‚
           â”‚   415 â”‚   â”‚   â”‚   ):                                                                                                        â”‚
           â”‚   416 â”‚   â”‚   â”‚   â”‚   with attempt:  # Retrying if ToolSelector fails to select a tool                                      â”‚
           â”‚ â± 417 â”‚   â”‚   â”‚   â”‚   â”‚   action = await agent(agent_state.messages, tools)                                                 â”‚
           â”‚   418 â”‚   â”‚   â”‚   agent_state.messages = [*agent_state.messages, action]                                                    â”‚
           â”‚   419 â”‚   â”‚   â”‚   if on_agent_action_callback:                                                                              â”‚
           â”‚   420 â”‚   â”‚   â”‚   â”‚   await on_agent_action_callback(action, agent_state)                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aviary/tools/utils.py:182 in __call__                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   179 â”‚   â”‚   â”‚   self._ledger.messages.extend(messages)                                                                    â”‚
           â”‚   180 â”‚   â”‚   â”‚   messages = self._ledger.messages                                                                          â”‚
           â”‚   181 â”‚   â”‚                                                                                                                 â”‚
           â”‚ â± 182 â”‚   â”‚   model_response = await self._bound_acompletion(                                                               â”‚
           â”‚   183 â”‚   â”‚   â”‚   messages=MessagesAdapter.dump_python(                                                                     â”‚
           â”‚   184 â”‚   â”‚   â”‚   â”‚   messages, exclude_none=True, by_alias=True                                                            â”‚
           â”‚   185 â”‚   â”‚   â”‚   ),                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:817 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    814 â”‚   â”‚   â”‚   â”‚   â”‚   original_exception=e,                                                                            â”‚
           â”‚    815 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    816 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚ â±  817 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    818 â”‚                                                                                                                    â”‚
           â”‚    819 â”‚   async def _acompletion(                                                                                          â”‚
           â”‚    820 â”‚   â”‚   self, model: str, messages: List[Dict[str, str]], **kwargs                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:793 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    790 â”‚   â”‚   â”‚   if request_priority is not None and isinstance(request_priority, int):                                   â”‚
           â”‚    791 â”‚   â”‚   â”‚   â”‚   response = await self.schedule_acompletion(**kwargs)                                                 â”‚
           â”‚    792 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â±  793 â”‚   â”‚   â”‚   â”‚   response = await self.async_function_with_fallbacks(**kwargs)                                        â”‚
           â”‚    794 â”‚   â”‚   â”‚   end_time = time.time()                                                                                   â”‚
           â”‚    795 â”‚   â”‚   â”‚   _duration = end_time - start_time                                                                        â”‚
           â”‚    796 â”‚   â”‚   â”‚   asyncio.create_task(                                                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2795 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2792 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚   2793 â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                                â”‚
           â”‚   2794 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2795 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2796 â”‚                                                                                                                    â”‚
           â”‚   2797 â”‚   def _handle_mock_testing_fallbacks(                                                                              â”‚
           â”‚   2798 â”‚   â”‚   self,                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2631 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2628 â”‚   â”‚   â”‚   â”‚   content_policy_fallbacks=content_policy_fallbacks,                                                   â”‚
           â”‚   2629 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2630 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2631 â”‚   â”‚   â”‚   response = await self.async_function_with_retries(*args, **kwargs)                                       â”‚
           â”‚   2632 â”‚   â”‚   â”‚   verbose_router_logger.debug(f"Async Response: {response}")                                               â”‚
           â”‚   2633 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2634 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2967 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2964 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "max_retries", num_retries)                                              â”‚
           â”‚   2965 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "num_retries", current_attempt)                                          â”‚
           â”‚   2966 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2967 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2968 â”‚                                                                                                                    â”‚
           â”‚   2969 â”‚   async def make_call(self, original_function: Any, *args, **kwargs):                                              â”‚
           â”‚   2970 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2879 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2876 â”‚   â”‚   â”‚   â”‚   model_group=model_group, kwargs=kwargs                                                               â”‚
           â”‚   2877 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2878 â”‚   â”‚   â”‚   # if the function call is successful, no exception will be raised and we'll                              â”‚
           â”‚        break out of the loop                                                                                                â”‚
           â”‚ â± 2879 â”‚   â”‚   â”‚   response = await self.make_call(original_function, *args, **kwargs)                                      â”‚
           â”‚   2880 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   2881 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2882 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2976 in make_call                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2973 â”‚   â”‚   model_group = kwargs.get("model")                                                                            â”‚
           â”‚   2974 â”‚   â”‚   response = original_function(*args, **kwargs)                                                                â”‚
           â”‚   2975 â”‚   â”‚   if inspect.iscoroutinefunction(response) or inspect.isawaitable(response):                                   â”‚
           â”‚ â± 2976 â”‚   â”‚   â”‚   response = await response                                                                                â”‚
           â”‚   2977 â”‚   â”‚   ## PROCESS RESPONSE HEADERS                                                                                  â”‚
           â”‚   2978 â”‚   â”‚   await self.set_response_headers(response=response, model_group=model_group)                                  â”‚
           â”‚   2979                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:947 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    944 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚    945 â”‚   â”‚   â”‚   if model_name is not None:                                                                               â”‚
           â”‚    946 â”‚   â”‚   â”‚   â”‚   self.fail_calls[model_name] += 1                                                                     â”‚
           â”‚ â±  947 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    948 â”‚                                                                                                                    â”‚
           â”‚    949 â”‚   def _update_kwargs_before_fallbacks(self, model: str, kwargs: dict) -> None:                                     â”‚
           â”‚    950 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:915 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    912 â”‚   â”‚   â”‚   â”‚   â”‚   parent_otel_span=parent_otel_span,                                                               â”‚
           â”‚    913 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    914 â”‚   â”‚   â”‚   â”‚                                                                                                        â”‚
           â”‚ â±  915 â”‚   â”‚   â”‚   â”‚   response = await _response                                                                           â”‚
           â”‚    916 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚    917 â”‚   â”‚   â”‚   ## CHECK CONTENT FILTER ERROR ##                                                                         â”‚
           â”‚    918 â”‚   â”‚   â”‚   if isinstance(response, ModelResponse):                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1175 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1172 â”‚   â”‚   â”‚   â”‚   â”‚   else:                                                                                            â”‚
           â”‚   1173 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   kwargs["model"] = context_window_fallback_dict[model]                                        â”‚
           â”‚   1174 â”‚   â”‚   â”‚   â”‚   â”‚   return await original_function(*args, **kwargs)                                                  â”‚
           â”‚ â± 1175 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   1176 â”‚                                                                                                                    â”‚
           â”‚   1177 â”‚   is_coroutine = inspect.iscoroutinefunction(original_function)                                                    â”‚
           â”‚   1178                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1031 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1028 â”‚   â”‚   â”‚   â”‚   return _caching_handler_response.final_embedding_cached_response                                     â”‚
           â”‚   1029 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1030 â”‚   â”‚   â”‚   # MODEL CALL                                                                                             â”‚
           â”‚ â± 1031 â”‚   â”‚   â”‚   result = await original_function(*args, **kwargs)                                                        â”‚
           â”‚   1032 â”‚   â”‚   â”‚   end_time = datetime.datetime.now()                                                                       â”‚
           â”‚   1033 â”‚   â”‚   â”‚   if "stream" in kwargs and kwargs["stream"] is True:                                                      â”‚
           â”‚   1034 â”‚   â”‚   â”‚   â”‚   if (                                                                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:499 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    496 â”‚   â”‚   return response                                                                                              â”‚
           â”‚    497 â”‚   except Exception as e:                                                                                           â”‚
           â”‚    498 â”‚   â”‚   custom_llm_provider = custom_llm_provider or "openai"                                                        â”‚
           â”‚ â±  499 â”‚   â”‚   raise exception_type(                                                                                        â”‚
           â”‚    500 â”‚   â”‚   â”‚   model=model,                                                                                             â”‚
           â”‚    501 â”‚   â”‚   â”‚   custom_llm_provider=custom_llm_provider,                                                                 â”‚
           â”‚    502 â”‚   â”‚   â”‚   original_exception=e,                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:212 â”‚
           â”‚ 5 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2122 â”‚   â”‚   # don't let an error with mapping interrupt the user from receiving an error                                 â”‚
           â”‚        from the llm api calls                                                                                               â”‚
           â”‚   2123 â”‚   â”‚   if exception_mapping_worked:                                                                                 â”‚
           â”‚   2124 â”‚   â”‚   â”‚   setattr(e, "litellm_response_headers", litellm_response_headers)                                         â”‚
           â”‚ â± 2125 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   2126 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   2127 â”‚   â”‚   â”‚   for error_type in litellm.LITELLM_EXCEPTION_TYPES:                                                       â”‚
           â”‚   2128 â”‚   â”‚   â”‚   â”‚   if isinstance(e, error_type):                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:210 â”‚
           â”‚ 1 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2098 â”‚   â”‚   â”‚   â”‚   â”‚   request=original_exception.request,                                                              â”‚
           â”‚   2099 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚   2100 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â± 2101 â”‚   â”‚   â”‚   â”‚   raise APIConnectionError(                                                                            â”‚
           â”‚   2102 â”‚   â”‚   â”‚   â”‚   â”‚   message="{}\n{}".format(                                                                         â”‚
           â”‚   2103 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   str(original_exception), traceback.format_exc()                                              â”‚
           â”‚   2104 â”‚   â”‚   â”‚   â”‚   â”‚   ),                                                                                               â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           APIConnectionError: litellm.APIConnectionError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1109, in                 
           _wrap_create_connection                                                                                                        
               sock = await aiohappyeyeballs.start_connection(                                                                            
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                            
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py", line 123, in              
           start_connection                                                                                                               
               raise OSError(first_errno, msg)                                                                                            
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py", line 477, in acompletion           
               response = await init_response                                                                                             
                          ^^^^^^^^^^^^^^^^^^^                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 566, in                
           ollama_acompletion                                                                                                             
               raise e  # don't use verbose_logger.exception, if exception is raised                                                      
               ^^^^^^^                                                                                                                    
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 507, in                
           ollama_acompletion                                                                                                             
               resp = await session.post(url, json=data)                                                                                  
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                  
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py", line 696, in _request            
               conn = await self._connector.connect(                                                                                      
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 544, in connect          
               proto = await self._create_connection(req, traces, timeout)                                                                
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1050, in                 
           _create_connection                                                                                                             
               _, proto = await self._create_direct_connection(req, traces, timeout)                                                      
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1394, in                 
           _create_direct_connection                                                                                                      
               raise last_exc                                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1363, in                 
           _create_direct_connection                                                                                                      
               transp, proto = await self._wrap_create_connection(                                                                        
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                        
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1124, in                 
           _wrap_create_connection                                                                                                        
               raise client_error(req.connection_key, exc) from exc                                                                       
           aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
                                                                                                                                          
           Received Model Group=ollama/llama3.2                                                                                           
           Available Model Group Fallbacks=None LiteLLM Retried: 2 times, LiteLLM Max Retries: 3                                          
[01:04:51] Answer:                                                                                                                        


 ANSWERING QUESTION: sciqag_question_88.json
 ----------------------------- 



[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.

[01:05:11] Trajectory failed.                                                                                                             
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1109 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1106 â”‚   â”‚   â”‚   async with ceil_timeout(                                                                                 â”‚
           â”‚   1107 â”‚   â”‚   â”‚   â”‚   timeout.sock_connect, ceil_threshold=timeout.ceil_threshold                                          â”‚
           â”‚   1108 â”‚   â”‚   â”‚   ):                                                                                                       â”‚
           â”‚ â± 1109 â”‚   â”‚   â”‚   â”‚   sock = await aiohappyeyeballs.start_connection(                                                      â”‚
           â”‚   1110 â”‚   â”‚   â”‚   â”‚   â”‚   addr_infos=addr_infos,                                                                           â”‚
           â”‚   1111 â”‚   â”‚   â”‚   â”‚   â”‚   local_addr_infos=self._local_addr_infos,                                                         â”‚
           â”‚   1112 â”‚   â”‚   â”‚   â”‚   â”‚   happy_eyeballs_delay=self._happy_eyeballs_delay,                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py:123 in start_connection          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   120 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, OSError) and exc.errno == first_errno                                         â”‚
           â”‚   121 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   for exc in all_exceptions                                                                     â”‚
           â”‚   122 â”‚   â”‚   â”‚   â”‚   â”‚   ):                                                                                                â”‚
           â”‚ â± 123 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   raise OSError(first_errno, msg)                                                               â”‚
           â”‚   124 â”‚   â”‚   â”‚   â”‚   elif isinstance(first_exception, RuntimeError) and all(                                               â”‚
           â”‚   125 â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, RuntimeError) for exc in all_exceptions                                           â”‚
           â”‚   126 â”‚   â”‚   â”‚   â”‚   ):                                                                                                    â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:477 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    474 â”‚   â”‚   â”‚   â”‚   â”‚   response = ModelResponse(**init_response)                                                        â”‚
           â”‚    475 â”‚   â”‚   â”‚   â”‚   response = init_response                                                                             â”‚
           â”‚    476 â”‚   â”‚   â”‚   elif asyncio.iscoroutine(init_response):                                                                 â”‚
           â”‚ â±  477 â”‚   â”‚   â”‚   â”‚   response = await init_response                                                                       â”‚
           â”‚    478 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚    479 â”‚   â”‚   â”‚   â”‚   response = init_response  # type: ignore                                                             â”‚
           â”‚    480                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:566 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   563 â”‚   â”‚   â”‚   )                                                                                                         â”‚
           â”‚   564 â”‚   â”‚   â”‚   return model_response                                                                                     â”‚
           â”‚   565 â”‚   except Exception as e:                                                                                            â”‚
           â”‚ â± 566 â”‚   â”‚   raise e  # don't use verbose_logger.exception, if exception is raised                                         â”‚
           â”‚   567                                                                                                                       â”‚
           â”‚   568                                                                                                                       â”‚
           â”‚   569 async def ollama_aembeddings(                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:507 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   504 â”‚   try:                                                                                                              â”‚
           â”‚   505 â”‚   â”‚   timeout = aiohttp.ClientTimeout(total=litellm.request_timeout)  # 10 minutes                                  â”‚
           â”‚   506 â”‚   â”‚   async with aiohttp.ClientSession(timeout=timeout) as session:                                                 â”‚
           â”‚ â± 507 â”‚   â”‚   â”‚   resp = await session.post(url, json=data)                                                                 â”‚
           â”‚   508 â”‚   â”‚   â”‚                                                                                                             â”‚
           â”‚   509 â”‚   â”‚   â”‚   if resp.status != 200:                                                                                    â”‚
           â”‚   510 â”‚   â”‚   â”‚   â”‚   text = await resp.text()                                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py:696 in _request                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚    693 â”‚   â”‚   â”‚   â”‚   â”‚                                                                                                    â”‚
           â”‚    694 â”‚   â”‚   â”‚   â”‚   â”‚   # connection timeout                                                                             â”‚
           â”‚    695 â”‚   â”‚   â”‚   â”‚   â”‚   try:                                                                                             â”‚
           â”‚ â±  696 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   conn = await self._connector.connect(                                                        â”‚
           â”‚    697 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   req, traces=traces, timeout=real_timeout                                                 â”‚
           â”‚    698 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚    699 â”‚   â”‚   â”‚   â”‚   â”‚   except asyncio.TimeoutError as exc:                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:544 in connect                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚    541 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    542 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    543 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_start()                                                   â”‚
           â”‚ â±  544 â”‚   â”‚   â”‚   â”‚   proto = await self._create_connection(req, traces, timeout)                                          â”‚
           â”‚    545 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    546 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    547 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_end()                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1050 in _create_connection           â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1047 â”‚   â”‚   if req.proxy:                                                                                                â”‚
           â”‚   1048 â”‚   â”‚   â”‚   _, proto = await self._create_proxy_connection(req, traces, timeout)                                     â”‚
           â”‚   1049 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚ â± 1050 â”‚   â”‚   â”‚   _, proto = await self._create_direct_connection(req, traces, timeout)                                    â”‚
           â”‚   1051 â”‚   â”‚                                                                                                                â”‚
           â”‚   1052 â”‚   â”‚   return proto                                                                                                 â”‚
           â”‚   1053                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1394 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1391 â”‚   â”‚   â”‚   return transp, proto                                                                                     â”‚
           â”‚   1392 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   1393 â”‚   â”‚   â”‚   assert last_exc is not None                                                                              â”‚
           â”‚ â± 1394 â”‚   â”‚   â”‚   raise last_exc                                                                                           â”‚
           â”‚   1395 â”‚                                                                                                                    â”‚
           â”‚   1396 â”‚   async def _create_proxy_connection(                                                                              â”‚
           â”‚   1397 â”‚   â”‚   self, req: ClientRequest, traces: List["Trace"], timeout: "ClientTimeout"                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1363 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1360 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   1361 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1362 â”‚   â”‚   â”‚   try:                                                                                                     â”‚
           â”‚ â± 1363 â”‚   â”‚   â”‚   â”‚   transp, proto = await self._wrap_create_connection(                                                  â”‚
           â”‚   1364 â”‚   â”‚   â”‚   â”‚   â”‚   self._factory,                                                                                   â”‚
           â”‚   1365 â”‚   â”‚   â”‚   â”‚   â”‚   timeout=timeout,                                                                                 â”‚
           â”‚   1366 â”‚   â”‚   â”‚   â”‚   â”‚   ssl=sslcontext,                                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1124 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1121 â”‚   â”‚   except OSError as exc:                                                                                       â”‚
           â”‚   1122 â”‚   â”‚   â”‚   if exc.errno is None and isinstance(exc, asyncio.TimeoutError):                                          â”‚
           â”‚   1123 â”‚   â”‚   â”‚   â”‚   raise                                                                                                â”‚
           â”‚ â± 1124 â”‚   â”‚   â”‚   raise client_error(req.connection_key, exc) from exc                                                     â”‚
           â”‚   1125 â”‚                                                                                                                    â”‚
           â”‚   1126 â”‚   async def _wrap_existing_connection(                                                                             â”‚
           â”‚   1127 â”‚   â”‚   self,                                                                                                        â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno 111] Connect call failed 
           ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                                                    
                                                                                                                                          
           During handling of the above exception, another exception occurred:                                                            
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:276 in _run_with_timeout_failure                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   273 ) -> tuple[PQASession, AgentStatus]:                                                                                  â”‚
           â”‚   274 â”‚   try:                                                                                                              â”‚
           â”‚   275 â”‚   â”‚   async with asyncio.timeout(query.settings.agent.timeout):                                                     â”‚
           â”‚ â± 276 â”‚   â”‚   â”‚   status = await rollout()                                                                                  â”‚
           â”‚   277 â”‚   except TimeoutError:                                                                                              â”‚
           â”‚   278 â”‚   â”‚   logger.warning(                                                                                               â”‚
           â”‚   279 â”‚   â”‚   â”‚   f"Agent timeout after {query.settings.agent.timeout}-sec, just answering."                                â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:410 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   407 â”‚   â”‚   â”‚   â”‚   )                                                                                                     â”‚
           â”‚   408 â”‚   â”‚   â”‚   â”‚   return AgentStatus.TRUNCATED                                                                          â”‚
           â”‚   409 â”‚   â”‚   â”‚   agent_state.messages += obs                                                                               â”‚
           â”‚ â± 410 â”‚   â”‚   â”‚   for attempt in Retrying(                                                                                  â”‚
           â”‚   411 â”‚   â”‚   â”‚   â”‚   stop=stop_after_attempt(5),                                                                           â”‚
           â”‚   412 â”‚   â”‚   â”‚   â”‚   retry=retry_if_exception_type(MalformedMessageError),                                                 â”‚
           â”‚   413 â”‚   â”‚   â”‚   â”‚   before_sleep=before_sleep_log(logger, logging.WARNING),                                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:443 in __iter__                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   440 â”‚   â”‚                                                                                                                 â”‚
           â”‚   441 â”‚   â”‚   retry_state = RetryCallState(self, fn=None, args=(), kwargs={})                                               â”‚
           â”‚   442 â”‚   â”‚   while True:                                                                                                   â”‚
           â”‚ â± 443 â”‚   â”‚   â”‚   do = self.iter(retry_state=retry_state)                                                                   â”‚
           â”‚   444 â”‚   â”‚   â”‚   if isinstance(do, DoAttempt):                                                                             â”‚
           â”‚   445 â”‚   â”‚   â”‚   â”‚   yield AttemptManager(retry_state=retry_state)                                                         â”‚
           â”‚   446 â”‚   â”‚   â”‚   elif isinstance(do, DoSleep):                                                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:376 in iter                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   373 â”‚   â”‚   self._begin_iter(retry_state)                                                                                 â”‚
           â”‚   374 â”‚   â”‚   result = None                                                                                                 â”‚
           â”‚   375 â”‚   â”‚   for action in self.iter_state.actions:                                                                        â”‚
           â”‚ â± 376 â”‚   â”‚   â”‚   result = action(retry_state)                                                                              â”‚
           â”‚   377 â”‚   â”‚   return result                                                                                                 â”‚
           â”‚   378 â”‚                                                                                                                     â”‚
           â”‚   379 â”‚   def _begin_iter(self, retry_state: "RetryCallState") -> None:  # noqa                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:398 in <lambda>                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   395 â”‚                                                                                                                     â”‚
           â”‚   396 â”‚   def _post_retry_check_actions(self, retry_state: "RetryCallState") -> None:                                       â”‚
           â”‚   397 â”‚   â”‚   if not (self.iter_state.is_explicit_retry or self.iter_state.retry_run_result):                               â”‚
           â”‚ â± 398 â”‚   â”‚   â”‚   self._add_action_func(lambda rs: rs.outcome.result())                                                     â”‚
           â”‚   399 â”‚   â”‚   â”‚   return                                                                                                    â”‚
           â”‚   400 â”‚   â”‚                                                                                                                 â”‚
           â”‚   401 â”‚   â”‚   if self.after is not None:                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:449 in result                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚   446 â”‚   â”‚   â”‚   â”‚   if self._state in [CANCELLED, CANCELLED_AND_NOTIFIED]:                                                â”‚
           â”‚   447 â”‚   â”‚   â”‚   â”‚   â”‚   raise CancelledError()                                                                            â”‚
           â”‚   448 â”‚   â”‚   â”‚   â”‚   elif self._state == FINISHED:                                                                         â”‚
           â”‚ â± 449 â”‚   â”‚   â”‚   â”‚   â”‚   return self.__get_result()                                                                        â”‚
           â”‚   450 â”‚   â”‚   â”‚   â”‚                                                                                                         â”‚
           â”‚   451 â”‚   â”‚   â”‚   â”‚   self._condition.wait(timeout)                                                                         â”‚
           â”‚   452                                                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:401 in __get_result                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   398 â”‚   def __get_result(self):                                                                                           â”‚
           â”‚   399 â”‚   â”‚   if self._exception:                                                                                           â”‚
           â”‚   400 â”‚   â”‚   â”‚   try:                                                                                                      â”‚
           â”‚ â± 401 â”‚   â”‚   â”‚   â”‚   raise self._exception                                                                                 â”‚
           â”‚   402 â”‚   â”‚   â”‚   finally:                                                                                                  â”‚
           â”‚   403 â”‚   â”‚   â”‚   â”‚   # Break a reference cycle with the exception in self._exception                                       â”‚
           â”‚   404 â”‚   â”‚   â”‚   â”‚   self = None                                                                                           â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:417 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   414 â”‚   â”‚   â”‚   â”‚   reraise=True,                                                                                         â”‚
           â”‚   415 â”‚   â”‚   â”‚   ):                                                                                                        â”‚
           â”‚   416 â”‚   â”‚   â”‚   â”‚   with attempt:  # Retrying if ToolSelector fails to select a tool                                      â”‚
           â”‚ â± 417 â”‚   â”‚   â”‚   â”‚   â”‚   action = await agent(agent_state.messages, tools)                                                 â”‚
           â”‚   418 â”‚   â”‚   â”‚   agent_state.messages = [*agent_state.messages, action]                                                    â”‚
           â”‚   419 â”‚   â”‚   â”‚   if on_agent_action_callback:                                                                              â”‚
           â”‚   420 â”‚   â”‚   â”‚   â”‚   await on_agent_action_callback(action, agent_state)                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aviary/tools/utils.py:182 in __call__                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   179 â”‚   â”‚   â”‚   self._ledger.messages.extend(messages)                                                                    â”‚
           â”‚   180 â”‚   â”‚   â”‚   messages = self._ledger.messages                                                                          â”‚
           â”‚   181 â”‚   â”‚                                                                                                                 â”‚
           â”‚ â± 182 â”‚   â”‚   model_response = await self._bound_acompletion(                                                               â”‚
           â”‚   183 â”‚   â”‚   â”‚   messages=MessagesAdapter.dump_python(                                                                     â”‚
           â”‚   184 â”‚   â”‚   â”‚   â”‚   messages, exclude_none=True, by_alias=True                                                            â”‚
           â”‚   185 â”‚   â”‚   â”‚   ),                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:817 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    814 â”‚   â”‚   â”‚   â”‚   â”‚   original_exception=e,                                                                            â”‚
           â”‚    815 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    816 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚ â±  817 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    818 â”‚                                                                                                                    â”‚
           â”‚    819 â”‚   async def _acompletion(                                                                                          â”‚
           â”‚    820 â”‚   â”‚   self, model: str, messages: List[Dict[str, str]], **kwargs                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:793 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    790 â”‚   â”‚   â”‚   if request_priority is not None and isinstance(request_priority, int):                                   â”‚
           â”‚    791 â”‚   â”‚   â”‚   â”‚   response = await self.schedule_acompletion(**kwargs)                                                 â”‚
           â”‚    792 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â±  793 â”‚   â”‚   â”‚   â”‚   response = await self.async_function_with_fallbacks(**kwargs)                                        â”‚
           â”‚    794 â”‚   â”‚   â”‚   end_time = time.time()                                                                                   â”‚
           â”‚    795 â”‚   â”‚   â”‚   _duration = end_time - start_time                                                                        â”‚
           â”‚    796 â”‚   â”‚   â”‚   asyncio.create_task(                                                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2795 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2792 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚   2793 â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                                â”‚
           â”‚   2794 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2795 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2796 â”‚                                                                                                                    â”‚
           â”‚   2797 â”‚   def _handle_mock_testing_fallbacks(                                                                              â”‚
           â”‚   2798 â”‚   â”‚   self,                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2631 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2628 â”‚   â”‚   â”‚   â”‚   content_policy_fallbacks=content_policy_fallbacks,                                                   â”‚
           â”‚   2629 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2630 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2631 â”‚   â”‚   â”‚   response = await self.async_function_with_retries(*args, **kwargs)                                       â”‚
           â”‚   2632 â”‚   â”‚   â”‚   verbose_router_logger.debug(f"Async Response: {response}")                                               â”‚
           â”‚   2633 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2634 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2967 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2964 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "max_retries", num_retries)                                              â”‚
           â”‚   2965 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "num_retries", current_attempt)                                          â”‚
           â”‚   2966 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2967 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2968 â”‚                                                                                                                    â”‚
           â”‚   2969 â”‚   async def make_call(self, original_function: Any, *args, **kwargs):                                              â”‚
           â”‚   2970 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2879 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2876 â”‚   â”‚   â”‚   â”‚   model_group=model_group, kwargs=kwargs                                                               â”‚
           â”‚   2877 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2878 â”‚   â”‚   â”‚   # if the function call is successful, no exception will be raised and we'll                              â”‚
           â”‚        break out of the loop                                                                                                â”‚
           â”‚ â± 2879 â”‚   â”‚   â”‚   response = await self.make_call(original_function, *args, **kwargs)                                      â”‚
           â”‚   2880 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   2881 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2882 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2976 in make_call                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2973 â”‚   â”‚   model_group = kwargs.get("model")                                                                            â”‚
           â”‚   2974 â”‚   â”‚   response = original_function(*args, **kwargs)                                                                â”‚
           â”‚   2975 â”‚   â”‚   if inspect.iscoroutinefunction(response) or inspect.isawaitable(response):                                   â”‚
           â”‚ â± 2976 â”‚   â”‚   â”‚   response = await response                                                                                â”‚
           â”‚   2977 â”‚   â”‚   ## PROCESS RESPONSE HEADERS                                                                                  â”‚
           â”‚   2978 â”‚   â”‚   await self.set_response_headers(response=response, model_group=model_group)                                  â”‚
           â”‚   2979                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:947 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    944 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚    945 â”‚   â”‚   â”‚   if model_name is not None:                                                                               â”‚
           â”‚    946 â”‚   â”‚   â”‚   â”‚   self.fail_calls[model_name] += 1                                                                     â”‚
           â”‚ â±  947 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    948 â”‚                                                                                                                    â”‚
           â”‚    949 â”‚   def _update_kwargs_before_fallbacks(self, model: str, kwargs: dict) -> None:                                     â”‚
           â”‚    950 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:915 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    912 â”‚   â”‚   â”‚   â”‚   â”‚   parent_otel_span=parent_otel_span,                                                               â”‚
           â”‚    913 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    914 â”‚   â”‚   â”‚   â”‚                                                                                                        â”‚
           â”‚ â±  915 â”‚   â”‚   â”‚   â”‚   response = await _response                                                                           â”‚
           â”‚    916 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚    917 â”‚   â”‚   â”‚   ## CHECK CONTENT FILTER ERROR ##                                                                         â”‚
           â”‚    918 â”‚   â”‚   â”‚   if isinstance(response, ModelResponse):                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1175 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1172 â”‚   â”‚   â”‚   â”‚   â”‚   else:                                                                                            â”‚
           â”‚   1173 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   kwargs["model"] = context_window_fallback_dict[model]                                        â”‚
           â”‚   1174 â”‚   â”‚   â”‚   â”‚   â”‚   return await original_function(*args, **kwargs)                                                  â”‚
           â”‚ â± 1175 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   1176 â”‚                                                                                                                    â”‚
           â”‚   1177 â”‚   is_coroutine = inspect.iscoroutinefunction(original_function)                                                    â”‚
           â”‚   1178                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1031 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1028 â”‚   â”‚   â”‚   â”‚   return _caching_handler_response.final_embedding_cached_response                                     â”‚
           â”‚   1029 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1030 â”‚   â”‚   â”‚   # MODEL CALL                                                                                             â”‚
           â”‚ â± 1031 â”‚   â”‚   â”‚   result = await original_function(*args, **kwargs)                                                        â”‚
           â”‚   1032 â”‚   â”‚   â”‚   end_time = datetime.datetime.now()                                                                       â”‚
           â”‚   1033 â”‚   â”‚   â”‚   if "stream" in kwargs and kwargs["stream"] is True:                                                      â”‚
           â”‚   1034 â”‚   â”‚   â”‚   â”‚   if (                                                                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:499 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    496 â”‚   â”‚   return response                                                                                              â”‚
           â”‚    497 â”‚   except Exception as e:                                                                                           â”‚
           â”‚    498 â”‚   â”‚   custom_llm_provider = custom_llm_provider or "openai"                                                        â”‚
           â”‚ â±  499 â”‚   â”‚   raise exception_type(                                                                                        â”‚
           â”‚    500 â”‚   â”‚   â”‚   model=model,                                                                                             â”‚
           â”‚    501 â”‚   â”‚   â”‚   custom_llm_provider=custom_llm_provider,                                                                 â”‚
           â”‚    502 â”‚   â”‚   â”‚   original_exception=e,                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:212 â”‚
           â”‚ 5 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2122 â”‚   â”‚   # don't let an error with mapping interrupt the user from receiving an error                                 â”‚
           â”‚        from the llm api calls                                                                                               â”‚
           â”‚   2123 â”‚   â”‚   if exception_mapping_worked:                                                                                 â”‚
           â”‚   2124 â”‚   â”‚   â”‚   setattr(e, "litellm_response_headers", litellm_response_headers)                                         â”‚
           â”‚ â± 2125 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   2126 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   2127 â”‚   â”‚   â”‚   for error_type in litellm.LITELLM_EXCEPTION_TYPES:                                                       â”‚
           â”‚   2128 â”‚   â”‚   â”‚   â”‚   if isinstance(e, error_type):                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:210 â”‚
           â”‚ 1 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2098 â”‚   â”‚   â”‚   â”‚   â”‚   request=original_exception.request,                                                              â”‚
           â”‚   2099 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚   2100 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â± 2101 â”‚   â”‚   â”‚   â”‚   raise APIConnectionError(                                                                            â”‚
           â”‚   2102 â”‚   â”‚   â”‚   â”‚   â”‚   message="{}\n{}".format(                                                                         â”‚
           â”‚   2103 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   str(original_exception), traceback.format_exc()                                              â”‚
           â”‚   2104 â”‚   â”‚   â”‚   â”‚   â”‚   ),                                                                                               â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           APIConnectionError: litellm.APIConnectionError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1109, in                 
           _wrap_create_connection                                                                                                        
               sock = await aiohappyeyeballs.start_connection(                                                                            
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                            
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py", line 123, in              
           start_connection                                                                                                               
               raise OSError(first_errno, msg)                                                                                            
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py", line 477, in acompletion           
               response = await init_response                                                                                             
                          ^^^^^^^^^^^^^^^^^^^                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 566, in                
           ollama_acompletion                                                                                                             
               raise e  # don't use verbose_logger.exception, if exception is raised                                                      
               ^^^^^^^                                                                                                                    
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 507, in                
           ollama_acompletion                                                                                                             
               resp = await session.post(url, json=data)                                                                                  
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                  
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py", line 696, in _request            
               conn = await self._connector.connect(                                                                                      
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 544, in connect          
               proto = await self._create_connection(req, traces, timeout)                                                                
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1050, in                 
           _create_connection                                                                                                             
               _, proto = await self._create_direct_connection(req, traces, timeout)                                                      
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1394, in                 
           _create_direct_connection                                                                                                      
               raise last_exc                                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1363, in                 
           _create_direct_connection                                                                                                      
               transp, proto = await self._wrap_create_connection(                                                                        
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                        
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1124, in                 
           _wrap_create_connection                                                                                                        
               raise client_error(req.connection_key, exc) from exc                                                                       
           aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
                                                                                                                                          
           Received Model Group=ollama/llama3.2                                                                                           
           Available Model Group Fallbacks=None LiteLLM Retried: 2 times, LiteLLM Max Retries: 3                                          
[01:05:13] Answer:                                                                                                                        


 ANSWERING QUESTION: sciqag_question_89.json
 ----------------------------- 



[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.

[01:05:34] Trajectory failed.                                                                                                             
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1109 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1106 â”‚   â”‚   â”‚   async with ceil_timeout(                                                                                 â”‚
           â”‚   1107 â”‚   â”‚   â”‚   â”‚   timeout.sock_connect, ceil_threshold=timeout.ceil_threshold                                          â”‚
           â”‚   1108 â”‚   â”‚   â”‚   ):                                                                                                       â”‚
           â”‚ â± 1109 â”‚   â”‚   â”‚   â”‚   sock = await aiohappyeyeballs.start_connection(                                                      â”‚
           â”‚   1110 â”‚   â”‚   â”‚   â”‚   â”‚   addr_infos=addr_infos,                                                                           â”‚
           â”‚   1111 â”‚   â”‚   â”‚   â”‚   â”‚   local_addr_infos=self._local_addr_infos,                                                         â”‚
           â”‚   1112 â”‚   â”‚   â”‚   â”‚   â”‚   happy_eyeballs_delay=self._happy_eyeballs_delay,                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py:123 in start_connection          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   120 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, OSError) and exc.errno == first_errno                                         â”‚
           â”‚   121 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   for exc in all_exceptions                                                                     â”‚
           â”‚   122 â”‚   â”‚   â”‚   â”‚   â”‚   ):                                                                                                â”‚
           â”‚ â± 123 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   raise OSError(first_errno, msg)                                                               â”‚
           â”‚   124 â”‚   â”‚   â”‚   â”‚   elif isinstance(first_exception, RuntimeError) and all(                                               â”‚
           â”‚   125 â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, RuntimeError) for exc in all_exceptions                                           â”‚
           â”‚   126 â”‚   â”‚   â”‚   â”‚   ):                                                                                                    â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:477 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    474 â”‚   â”‚   â”‚   â”‚   â”‚   response = ModelResponse(**init_response)                                                        â”‚
           â”‚    475 â”‚   â”‚   â”‚   â”‚   response = init_response                                                                             â”‚
           â”‚    476 â”‚   â”‚   â”‚   elif asyncio.iscoroutine(init_response):                                                                 â”‚
           â”‚ â±  477 â”‚   â”‚   â”‚   â”‚   response = await init_response                                                                       â”‚
           â”‚    478 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚    479 â”‚   â”‚   â”‚   â”‚   response = init_response  # type: ignore                                                             â”‚
           â”‚    480                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:566 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   563 â”‚   â”‚   â”‚   )                                                                                                         â”‚
           â”‚   564 â”‚   â”‚   â”‚   return model_response                                                                                     â”‚
           â”‚   565 â”‚   except Exception as e:                                                                                            â”‚
           â”‚ â± 566 â”‚   â”‚   raise e  # don't use verbose_logger.exception, if exception is raised                                         â”‚
           â”‚   567                                                                                                                       â”‚
           â”‚   568                                                                                                                       â”‚
           â”‚   569 async def ollama_aembeddings(                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:507 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   504 â”‚   try:                                                                                                              â”‚
           â”‚   505 â”‚   â”‚   timeout = aiohttp.ClientTimeout(total=litellm.request_timeout)  # 10 minutes                                  â”‚
           â”‚   506 â”‚   â”‚   async with aiohttp.ClientSession(timeout=timeout) as session:                                                 â”‚
           â”‚ â± 507 â”‚   â”‚   â”‚   resp = await session.post(url, json=data)                                                                 â”‚
           â”‚   508 â”‚   â”‚   â”‚                                                                                                             â”‚
           â”‚   509 â”‚   â”‚   â”‚   if resp.status != 200:                                                                                    â”‚
           â”‚   510 â”‚   â”‚   â”‚   â”‚   text = await resp.text()                                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py:696 in _request                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚    693 â”‚   â”‚   â”‚   â”‚   â”‚                                                                                                    â”‚
           â”‚    694 â”‚   â”‚   â”‚   â”‚   â”‚   # connection timeout                                                                             â”‚
           â”‚    695 â”‚   â”‚   â”‚   â”‚   â”‚   try:                                                                                             â”‚
           â”‚ â±  696 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   conn = await self._connector.connect(                                                        â”‚
           â”‚    697 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   req, traces=traces, timeout=real_timeout                                                 â”‚
           â”‚    698 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚    699 â”‚   â”‚   â”‚   â”‚   â”‚   except asyncio.TimeoutError as exc:                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:544 in connect                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚    541 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    542 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    543 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_start()                                                   â”‚
           â”‚ â±  544 â”‚   â”‚   â”‚   â”‚   proto = await self._create_connection(req, traces, timeout)                                          â”‚
           â”‚    545 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    546 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    547 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_end()                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1050 in _create_connection           â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1047 â”‚   â”‚   if req.proxy:                                                                                                â”‚
           â”‚   1048 â”‚   â”‚   â”‚   _, proto = await self._create_proxy_connection(req, traces, timeout)                                     â”‚
           â”‚   1049 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚ â± 1050 â”‚   â”‚   â”‚   _, proto = await self._create_direct_connection(req, traces, timeout)                                    â”‚
           â”‚   1051 â”‚   â”‚                                                                                                                â”‚
           â”‚   1052 â”‚   â”‚   return proto                                                                                                 â”‚
           â”‚   1053                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1394 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1391 â”‚   â”‚   â”‚   return transp, proto                                                                                     â”‚
           â”‚   1392 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   1393 â”‚   â”‚   â”‚   assert last_exc is not None                                                                              â”‚
           â”‚ â± 1394 â”‚   â”‚   â”‚   raise last_exc                                                                                           â”‚
           â”‚   1395 â”‚                                                                                                                    â”‚
           â”‚   1396 â”‚   async def _create_proxy_connection(                                                                              â”‚
           â”‚   1397 â”‚   â”‚   self, req: ClientRequest, traces: List["Trace"], timeout: "ClientTimeout"                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1363 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1360 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   1361 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1362 â”‚   â”‚   â”‚   try:                                                                                                     â”‚
           â”‚ â± 1363 â”‚   â”‚   â”‚   â”‚   transp, proto = await self._wrap_create_connection(                                                  â”‚
           â”‚   1364 â”‚   â”‚   â”‚   â”‚   â”‚   self._factory,                                                                                   â”‚
           â”‚   1365 â”‚   â”‚   â”‚   â”‚   â”‚   timeout=timeout,                                                                                 â”‚
           â”‚   1366 â”‚   â”‚   â”‚   â”‚   â”‚   ssl=sslcontext,                                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1124 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1121 â”‚   â”‚   except OSError as exc:                                                                                       â”‚
           â”‚   1122 â”‚   â”‚   â”‚   if exc.errno is None and isinstance(exc, asyncio.TimeoutError):                                          â”‚
           â”‚   1123 â”‚   â”‚   â”‚   â”‚   raise                                                                                                â”‚
           â”‚ â± 1124 â”‚   â”‚   â”‚   raise client_error(req.connection_key, exc) from exc                                                     â”‚
           â”‚   1125 â”‚                                                                                                                    â”‚
           â”‚   1126 â”‚   async def _wrap_existing_connection(                                                                             â”‚
           â”‚   1127 â”‚   â”‚   self,                                                                                                        â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno 111] Connect call failed 
           ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                                                    
                                                                                                                                          
           During handling of the above exception, another exception occurred:                                                            
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:276 in _run_with_timeout_failure                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   273 ) -> tuple[PQASession, AgentStatus]:                                                                                  â”‚
           â”‚   274 â”‚   try:                                                                                                              â”‚
           â”‚   275 â”‚   â”‚   async with asyncio.timeout(query.settings.agent.timeout):                                                     â”‚
           â”‚ â± 276 â”‚   â”‚   â”‚   status = await rollout()                                                                                  â”‚
           â”‚   277 â”‚   except TimeoutError:                                                                                              â”‚
           â”‚   278 â”‚   â”‚   logger.warning(                                                                                               â”‚
           â”‚   279 â”‚   â”‚   â”‚   f"Agent timeout after {query.settings.agent.timeout}-sec, just answering."                                â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:410 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   407 â”‚   â”‚   â”‚   â”‚   )                                                                                                     â”‚
           â”‚   408 â”‚   â”‚   â”‚   â”‚   return AgentStatus.TRUNCATED                                                                          â”‚
           â”‚   409 â”‚   â”‚   â”‚   agent_state.messages += obs                                                                               â”‚
           â”‚ â± 410 â”‚   â”‚   â”‚   for attempt in Retrying(                                                                                  â”‚
           â”‚   411 â”‚   â”‚   â”‚   â”‚   stop=stop_after_attempt(5),                                                                           â”‚
           â”‚   412 â”‚   â”‚   â”‚   â”‚   retry=retry_if_exception_type(MalformedMessageError),                                                 â”‚
           â”‚   413 â”‚   â”‚   â”‚   â”‚   before_sleep=before_sleep_log(logger, logging.WARNING),                                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:443 in __iter__                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   440 â”‚   â”‚                                                                                                                 â”‚
           â”‚   441 â”‚   â”‚   retry_state = RetryCallState(self, fn=None, args=(), kwargs={})                                               â”‚
           â”‚   442 â”‚   â”‚   while True:                                                                                                   â”‚
           â”‚ â± 443 â”‚   â”‚   â”‚   do = self.iter(retry_state=retry_state)                                                                   â”‚
           â”‚   444 â”‚   â”‚   â”‚   if isinstance(do, DoAttempt):                                                                             â”‚
           â”‚   445 â”‚   â”‚   â”‚   â”‚   yield AttemptManager(retry_state=retry_state)                                                         â”‚
           â”‚   446 â”‚   â”‚   â”‚   elif isinstance(do, DoSleep):                                                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:376 in iter                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   373 â”‚   â”‚   self._begin_iter(retry_state)                                                                                 â”‚
           â”‚   374 â”‚   â”‚   result = None                                                                                                 â”‚
           â”‚   375 â”‚   â”‚   for action in self.iter_state.actions:                                                                        â”‚
           â”‚ â± 376 â”‚   â”‚   â”‚   result = action(retry_state)                                                                              â”‚
           â”‚   377 â”‚   â”‚   return result                                                                                                 â”‚
           â”‚   378 â”‚                                                                                                                     â”‚
           â”‚   379 â”‚   def _begin_iter(self, retry_state: "RetryCallState") -> None:  # noqa                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:398 in <lambda>                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   395 â”‚                                                                                                                     â”‚
           â”‚   396 â”‚   def _post_retry_check_actions(self, retry_state: "RetryCallState") -> None:                                       â”‚
           â”‚   397 â”‚   â”‚   if not (self.iter_state.is_explicit_retry or self.iter_state.retry_run_result):                               â”‚
           â”‚ â± 398 â”‚   â”‚   â”‚   self._add_action_func(lambda rs: rs.outcome.result())                                                     â”‚
           â”‚   399 â”‚   â”‚   â”‚   return                                                                                                    â”‚
           â”‚   400 â”‚   â”‚                                                                                                                 â”‚
           â”‚   401 â”‚   â”‚   if self.after is not None:                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:449 in result                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚   446 â”‚   â”‚   â”‚   â”‚   if self._state in [CANCELLED, CANCELLED_AND_NOTIFIED]:                                                â”‚
           â”‚   447 â”‚   â”‚   â”‚   â”‚   â”‚   raise CancelledError()                                                                            â”‚
           â”‚   448 â”‚   â”‚   â”‚   â”‚   elif self._state == FINISHED:                                                                         â”‚
           â”‚ â± 449 â”‚   â”‚   â”‚   â”‚   â”‚   return self.__get_result()                                                                        â”‚
           â”‚   450 â”‚   â”‚   â”‚   â”‚                                                                                                         â”‚
           â”‚   451 â”‚   â”‚   â”‚   â”‚   self._condition.wait(timeout)                                                                         â”‚
           â”‚   452                                                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:401 in __get_result                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   398 â”‚   def __get_result(self):                                                                                           â”‚
           â”‚   399 â”‚   â”‚   if self._exception:                                                                                           â”‚
           â”‚   400 â”‚   â”‚   â”‚   try:                                                                                                      â”‚
           â”‚ â± 401 â”‚   â”‚   â”‚   â”‚   raise self._exception                                                                                 â”‚
           â”‚   402 â”‚   â”‚   â”‚   finally:                                                                                                  â”‚
           â”‚   403 â”‚   â”‚   â”‚   â”‚   # Break a reference cycle with the exception in self._exception                                       â”‚
           â”‚   404 â”‚   â”‚   â”‚   â”‚   self = None                                                                                           â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:417 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   414 â”‚   â”‚   â”‚   â”‚   reraise=True,                                                                                         â”‚
           â”‚   415 â”‚   â”‚   â”‚   ):                                                                                                        â”‚
           â”‚   416 â”‚   â”‚   â”‚   â”‚   with attempt:  # Retrying if ToolSelector fails to select a tool                                      â”‚
           â”‚ â± 417 â”‚   â”‚   â”‚   â”‚   â”‚   action = await agent(agent_state.messages, tools)                                                 â”‚
           â”‚   418 â”‚   â”‚   â”‚   agent_state.messages = [*agent_state.messages, action]                                                    â”‚
           â”‚   419 â”‚   â”‚   â”‚   if on_agent_action_callback:                                                                              â”‚
           â”‚   420 â”‚   â”‚   â”‚   â”‚   await on_agent_action_callback(action, agent_state)                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aviary/tools/utils.py:182 in __call__                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   179 â”‚   â”‚   â”‚   self._ledger.messages.extend(messages)                                                                    â”‚
           â”‚   180 â”‚   â”‚   â”‚   messages = self._ledger.messages                                                                          â”‚
           â”‚   181 â”‚   â”‚                                                                                                                 â”‚
           â”‚ â± 182 â”‚   â”‚   model_response = await self._bound_acompletion(                                                               â”‚
           â”‚   183 â”‚   â”‚   â”‚   messages=MessagesAdapter.dump_python(                                                                     â”‚
           â”‚   184 â”‚   â”‚   â”‚   â”‚   messages, exclude_none=True, by_alias=True                                                            â”‚
           â”‚   185 â”‚   â”‚   â”‚   ),                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:817 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    814 â”‚   â”‚   â”‚   â”‚   â”‚   original_exception=e,                                                                            â”‚
           â”‚    815 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    816 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚ â±  817 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    818 â”‚                                                                                                                    â”‚
           â”‚    819 â”‚   async def _acompletion(                                                                                          â”‚
           â”‚    820 â”‚   â”‚   self, model: str, messages: List[Dict[str, str]], **kwargs                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:793 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    790 â”‚   â”‚   â”‚   if request_priority is not None and isinstance(request_priority, int):                                   â”‚
           â”‚    791 â”‚   â”‚   â”‚   â”‚   response = await self.schedule_acompletion(**kwargs)                                                 â”‚
           â”‚    792 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â±  793 â”‚   â”‚   â”‚   â”‚   response = await self.async_function_with_fallbacks(**kwargs)                                        â”‚
           â”‚    794 â”‚   â”‚   â”‚   end_time = time.time()                                                                                   â”‚
           â”‚    795 â”‚   â”‚   â”‚   _duration = end_time - start_time                                                                        â”‚
           â”‚    796 â”‚   â”‚   â”‚   asyncio.create_task(                                                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2795 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2792 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚   2793 â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                                â”‚
           â”‚   2794 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2795 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2796 â”‚                                                                                                                    â”‚
           â”‚   2797 â”‚   def _handle_mock_testing_fallbacks(                                                                              â”‚
           â”‚   2798 â”‚   â”‚   self,                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2631 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2628 â”‚   â”‚   â”‚   â”‚   content_policy_fallbacks=content_policy_fallbacks,                                                   â”‚
           â”‚   2629 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2630 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2631 â”‚   â”‚   â”‚   response = await self.async_function_with_retries(*args, **kwargs)                                       â”‚
           â”‚   2632 â”‚   â”‚   â”‚   verbose_router_logger.debug(f"Async Response: {response}")                                               â”‚
           â”‚   2633 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2634 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2967 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2964 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "max_retries", num_retries)                                              â”‚
           â”‚   2965 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "num_retries", current_attempt)                                          â”‚
           â”‚   2966 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2967 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2968 â”‚                                                                                                                    â”‚
           â”‚   2969 â”‚   async def make_call(self, original_function: Any, *args, **kwargs):                                              â”‚
           â”‚   2970 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2879 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2876 â”‚   â”‚   â”‚   â”‚   model_group=model_group, kwargs=kwargs                                                               â”‚
           â”‚   2877 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2878 â”‚   â”‚   â”‚   # if the function call is successful, no exception will be raised and we'll                              â”‚
           â”‚        break out of the loop                                                                                                â”‚
           â”‚ â± 2879 â”‚   â”‚   â”‚   response = await self.make_call(original_function, *args, **kwargs)                                      â”‚
           â”‚   2880 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   2881 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2882 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2976 in make_call                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2973 â”‚   â”‚   model_group = kwargs.get("model")                                                                            â”‚
           â”‚   2974 â”‚   â”‚   response = original_function(*args, **kwargs)                                                                â”‚
           â”‚   2975 â”‚   â”‚   if inspect.iscoroutinefunction(response) or inspect.isawaitable(response):                                   â”‚
           â”‚ â± 2976 â”‚   â”‚   â”‚   response = await response                                                                                â”‚
           â”‚   2977 â”‚   â”‚   ## PROCESS RESPONSE HEADERS                                                                                  â”‚
           â”‚   2978 â”‚   â”‚   await self.set_response_headers(response=response, model_group=model_group)                                  â”‚
           â”‚   2979                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:947 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    944 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚    945 â”‚   â”‚   â”‚   if model_name is not None:                                                                               â”‚
           â”‚    946 â”‚   â”‚   â”‚   â”‚   self.fail_calls[model_name] += 1                                                                     â”‚
           â”‚ â±  947 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    948 â”‚                                                                                                                    â”‚
           â”‚    949 â”‚   def _update_kwargs_before_fallbacks(self, model: str, kwargs: dict) -> None:                                     â”‚
           â”‚    950 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:915 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    912 â”‚   â”‚   â”‚   â”‚   â”‚   parent_otel_span=parent_otel_span,                                                               â”‚
           â”‚    913 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    914 â”‚   â”‚   â”‚   â”‚                                                                                                        â”‚
           â”‚ â±  915 â”‚   â”‚   â”‚   â”‚   response = await _response                                                                           â”‚
           â”‚    916 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚    917 â”‚   â”‚   â”‚   ## CHECK CONTENT FILTER ERROR ##                                                                         â”‚
           â”‚    918 â”‚   â”‚   â”‚   if isinstance(response, ModelResponse):                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1175 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1172 â”‚   â”‚   â”‚   â”‚   â”‚   else:                                                                                            â”‚
           â”‚   1173 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   kwargs["model"] = context_window_fallback_dict[model]                                        â”‚
           â”‚   1174 â”‚   â”‚   â”‚   â”‚   â”‚   return await original_function(*args, **kwargs)                                                  â”‚
           â”‚ â± 1175 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   1176 â”‚                                                                                                                    â”‚
           â”‚   1177 â”‚   is_coroutine = inspect.iscoroutinefunction(original_function)                                                    â”‚
           â”‚   1178                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1031 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1028 â”‚   â”‚   â”‚   â”‚   return _caching_handler_response.final_embedding_cached_response                                     â”‚
           â”‚   1029 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1030 â”‚   â”‚   â”‚   # MODEL CALL                                                                                             â”‚
           â”‚ â± 1031 â”‚   â”‚   â”‚   result = await original_function(*args, **kwargs)                                                        â”‚
           â”‚   1032 â”‚   â”‚   â”‚   end_time = datetime.datetime.now()                                                                       â”‚
           â”‚   1033 â”‚   â”‚   â”‚   if "stream" in kwargs and kwargs["stream"] is True:                                                      â”‚
           â”‚   1034 â”‚   â”‚   â”‚   â”‚   if (                                                                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:499 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    496 â”‚   â”‚   return response                                                                                              â”‚
           â”‚    497 â”‚   except Exception as e:                                                                                           â”‚
           â”‚    498 â”‚   â”‚   custom_llm_provider = custom_llm_provider or "openai"                                                        â”‚
           â”‚ â±  499 â”‚   â”‚   raise exception_type(                                                                                        â”‚
           â”‚    500 â”‚   â”‚   â”‚   model=model,                                                                                             â”‚
           â”‚    501 â”‚   â”‚   â”‚   custom_llm_provider=custom_llm_provider,                                                                 â”‚
           â”‚    502 â”‚   â”‚   â”‚   original_exception=e,                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:212 â”‚
           â”‚ 5 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2122 â”‚   â”‚   # don't let an error with mapping interrupt the user from receiving an error                                 â”‚
           â”‚        from the llm api calls                                                                                               â”‚
           â”‚   2123 â”‚   â”‚   if exception_mapping_worked:                                                                                 â”‚
           â”‚   2124 â”‚   â”‚   â”‚   setattr(e, "litellm_response_headers", litellm_response_headers)                                         â”‚
           â”‚ â± 2125 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   2126 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   2127 â”‚   â”‚   â”‚   for error_type in litellm.LITELLM_EXCEPTION_TYPES:                                                       â”‚
           â”‚   2128 â”‚   â”‚   â”‚   â”‚   if isinstance(e, error_type):                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:210 â”‚
           â”‚ 1 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2098 â”‚   â”‚   â”‚   â”‚   â”‚   request=original_exception.request,                                                              â”‚
           â”‚   2099 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚   2100 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â± 2101 â”‚   â”‚   â”‚   â”‚   raise APIConnectionError(                                                                            â”‚
           â”‚   2102 â”‚   â”‚   â”‚   â”‚   â”‚   message="{}\n{}".format(                                                                         â”‚
           â”‚   2103 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   str(original_exception), traceback.format_exc()                                              â”‚
           â”‚   2104 â”‚   â”‚   â”‚   â”‚   â”‚   ),                                                                                               â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           APIConnectionError: litellm.APIConnectionError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1109, in                 
           _wrap_create_connection                                                                                                        
               sock = await aiohappyeyeballs.start_connection(                                                                            
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                            
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py", line 123, in              
           start_connection                                                                                                               
               raise OSError(first_errno, msg)                                                                                            
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py", line 477, in acompletion           
               response = await init_response                                                                                             
                          ^^^^^^^^^^^^^^^^^^^                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 566, in                
           ollama_acompletion                                                                                                             
               raise e  # don't use verbose_logger.exception, if exception is raised                                                      
               ^^^^^^^                                                                                                                    
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 507, in                
           ollama_acompletion                                                                                                             
               resp = await session.post(url, json=data)                                                                                  
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                  
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py", line 696, in _request            
               conn = await self._connector.connect(                                                                                      
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 544, in connect          
               proto = await self._create_connection(req, traces, timeout)                                                                
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1050, in                 
           _create_connection                                                                                                             
               _, proto = await self._create_direct_connection(req, traces, timeout)                                                      
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1394, in                 
           _create_direct_connection                                                                                                      
               raise last_exc                                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1363, in                 
           _create_direct_connection                                                                                                      
               transp, proto = await self._wrap_create_connection(                                                                        
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                        
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1124, in                 
           _wrap_create_connection                                                                                                        
               raise client_error(req.connection_key, exc) from exc                                                                       
           aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
                                                                                                                                          
           Received Model Group=ollama/llama3.2                                                                                           
           Available Model Group Fallbacks=None LiteLLM Retried: 2 times, LiteLLM Max Retries: 3                                          
[01:05:36] Answer:                                                                                                                        


 ANSWERING QUESTION: sciqag_question_9.json
 ----------------------------- 



[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.

[01:05:56] Trajectory failed.                                                                                                             
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1109 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1106 â”‚   â”‚   â”‚   async with ceil_timeout(                                                                                 â”‚
           â”‚   1107 â”‚   â”‚   â”‚   â”‚   timeout.sock_connect, ceil_threshold=timeout.ceil_threshold                                          â”‚
           â”‚   1108 â”‚   â”‚   â”‚   ):                                                                                                       â”‚
           â”‚ â± 1109 â”‚   â”‚   â”‚   â”‚   sock = await aiohappyeyeballs.start_connection(                                                      â”‚
           â”‚   1110 â”‚   â”‚   â”‚   â”‚   â”‚   addr_infos=addr_infos,                                                                           â”‚
           â”‚   1111 â”‚   â”‚   â”‚   â”‚   â”‚   local_addr_infos=self._local_addr_infos,                                                         â”‚
           â”‚   1112 â”‚   â”‚   â”‚   â”‚   â”‚   happy_eyeballs_delay=self._happy_eyeballs_delay,                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py:123 in start_connection          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   120 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, OSError) and exc.errno == first_errno                                         â”‚
           â”‚   121 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   for exc in all_exceptions                                                                     â”‚
           â”‚   122 â”‚   â”‚   â”‚   â”‚   â”‚   ):                                                                                                â”‚
           â”‚ â± 123 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   raise OSError(first_errno, msg)                                                               â”‚
           â”‚   124 â”‚   â”‚   â”‚   â”‚   elif isinstance(first_exception, RuntimeError) and all(                                               â”‚
           â”‚   125 â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, RuntimeError) for exc in all_exceptions                                           â”‚
           â”‚   126 â”‚   â”‚   â”‚   â”‚   ):                                                                                                    â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:477 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    474 â”‚   â”‚   â”‚   â”‚   â”‚   response = ModelResponse(**init_response)                                                        â”‚
           â”‚    475 â”‚   â”‚   â”‚   â”‚   response = init_response                                                                             â”‚
           â”‚    476 â”‚   â”‚   â”‚   elif asyncio.iscoroutine(init_response):                                                                 â”‚
           â”‚ â±  477 â”‚   â”‚   â”‚   â”‚   response = await init_response                                                                       â”‚
           â”‚    478 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚    479 â”‚   â”‚   â”‚   â”‚   response = init_response  # type: ignore                                                             â”‚
           â”‚    480                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:566 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   563 â”‚   â”‚   â”‚   )                                                                                                         â”‚
           â”‚   564 â”‚   â”‚   â”‚   return model_response                                                                                     â”‚
           â”‚   565 â”‚   except Exception as e:                                                                                            â”‚
           â”‚ â± 566 â”‚   â”‚   raise e  # don't use verbose_logger.exception, if exception is raised                                         â”‚
           â”‚   567                                                                                                                       â”‚
           â”‚   568                                                                                                                       â”‚
           â”‚   569 async def ollama_aembeddings(                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:507 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   504 â”‚   try:                                                                                                              â”‚
           â”‚   505 â”‚   â”‚   timeout = aiohttp.ClientTimeout(total=litellm.request_timeout)  # 10 minutes                                  â”‚
           â”‚   506 â”‚   â”‚   async with aiohttp.ClientSession(timeout=timeout) as session:                                                 â”‚
           â”‚ â± 507 â”‚   â”‚   â”‚   resp = await session.post(url, json=data)                                                                 â”‚
           â”‚   508 â”‚   â”‚   â”‚                                                                                                             â”‚
           â”‚   509 â”‚   â”‚   â”‚   if resp.status != 200:                                                                                    â”‚
           â”‚   510 â”‚   â”‚   â”‚   â”‚   text = await resp.text()                                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py:696 in _request                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚    693 â”‚   â”‚   â”‚   â”‚   â”‚                                                                                                    â”‚
           â”‚    694 â”‚   â”‚   â”‚   â”‚   â”‚   # connection timeout                                                                             â”‚
           â”‚    695 â”‚   â”‚   â”‚   â”‚   â”‚   try:                                                                                             â”‚
           â”‚ â±  696 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   conn = await self._connector.connect(                                                        â”‚
           â”‚    697 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   req, traces=traces, timeout=real_timeout                                                 â”‚
           â”‚    698 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚    699 â”‚   â”‚   â”‚   â”‚   â”‚   except asyncio.TimeoutError as exc:                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:544 in connect                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚    541 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    542 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    543 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_start()                                                   â”‚
           â”‚ â±  544 â”‚   â”‚   â”‚   â”‚   proto = await self._create_connection(req, traces, timeout)                                          â”‚
           â”‚    545 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    546 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    547 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_end()                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1050 in _create_connection           â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1047 â”‚   â”‚   if req.proxy:                                                                                                â”‚
           â”‚   1048 â”‚   â”‚   â”‚   _, proto = await self._create_proxy_connection(req, traces, timeout)                                     â”‚
           â”‚   1049 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚ â± 1050 â”‚   â”‚   â”‚   _, proto = await self._create_direct_connection(req, traces, timeout)                                    â”‚
           â”‚   1051 â”‚   â”‚                                                                                                                â”‚
           â”‚   1052 â”‚   â”‚   return proto                                                                                                 â”‚
           â”‚   1053                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1394 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1391 â”‚   â”‚   â”‚   return transp, proto                                                                                     â”‚
           â”‚   1392 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   1393 â”‚   â”‚   â”‚   assert last_exc is not None                                                                              â”‚
           â”‚ â± 1394 â”‚   â”‚   â”‚   raise last_exc                                                                                           â”‚
           â”‚   1395 â”‚                                                                                                                    â”‚
           â”‚   1396 â”‚   async def _create_proxy_connection(                                                                              â”‚
           â”‚   1397 â”‚   â”‚   self, req: ClientRequest, traces: List["Trace"], timeout: "ClientTimeout"                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1363 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1360 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   1361 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1362 â”‚   â”‚   â”‚   try:                                                                                                     â”‚
           â”‚ â± 1363 â”‚   â”‚   â”‚   â”‚   transp, proto = await self._wrap_create_connection(                                                  â”‚
           â”‚   1364 â”‚   â”‚   â”‚   â”‚   â”‚   self._factory,                                                                                   â”‚
           â”‚   1365 â”‚   â”‚   â”‚   â”‚   â”‚   timeout=timeout,                                                                                 â”‚
           â”‚   1366 â”‚   â”‚   â”‚   â”‚   â”‚   ssl=sslcontext,                                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1124 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1121 â”‚   â”‚   except OSError as exc:                                                                                       â”‚
           â”‚   1122 â”‚   â”‚   â”‚   if exc.errno is None and isinstance(exc, asyncio.TimeoutError):                                          â”‚
           â”‚   1123 â”‚   â”‚   â”‚   â”‚   raise                                                                                                â”‚
           â”‚ â± 1124 â”‚   â”‚   â”‚   raise client_error(req.connection_key, exc) from exc                                                     â”‚
           â”‚   1125 â”‚                                                                                                                    â”‚
           â”‚   1126 â”‚   async def _wrap_existing_connection(                                                                             â”‚
           â”‚   1127 â”‚   â”‚   self,                                                                                                        â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno 111] Connect call failed 
           ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                                                    
                                                                                                                                          
           During handling of the above exception, another exception occurred:                                                            
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:276 in _run_with_timeout_failure                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   273 ) -> tuple[PQASession, AgentStatus]:                                                                                  â”‚
           â”‚   274 â”‚   try:                                                                                                              â”‚
           â”‚   275 â”‚   â”‚   async with asyncio.timeout(query.settings.agent.timeout):                                                     â”‚
           â”‚ â± 276 â”‚   â”‚   â”‚   status = await rollout()                                                                                  â”‚
           â”‚   277 â”‚   except TimeoutError:                                                                                              â”‚
           â”‚   278 â”‚   â”‚   logger.warning(                                                                                               â”‚
           â”‚   279 â”‚   â”‚   â”‚   f"Agent timeout after {query.settings.agent.timeout}-sec, just answering."                                â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:410 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   407 â”‚   â”‚   â”‚   â”‚   )                                                                                                     â”‚
           â”‚   408 â”‚   â”‚   â”‚   â”‚   return AgentStatus.TRUNCATED                                                                          â”‚
           â”‚   409 â”‚   â”‚   â”‚   agent_state.messages += obs                                                                               â”‚
           â”‚ â± 410 â”‚   â”‚   â”‚   for attempt in Retrying(                                                                                  â”‚
           â”‚   411 â”‚   â”‚   â”‚   â”‚   stop=stop_after_attempt(5),                                                                           â”‚
           â”‚   412 â”‚   â”‚   â”‚   â”‚   retry=retry_if_exception_type(MalformedMessageError),                                                 â”‚
           â”‚   413 â”‚   â”‚   â”‚   â”‚   before_sleep=before_sleep_log(logger, logging.WARNING),                                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:443 in __iter__                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   440 â”‚   â”‚                                                                                                                 â”‚
           â”‚   441 â”‚   â”‚   retry_state = RetryCallState(self, fn=None, args=(), kwargs={})                                               â”‚
           â”‚   442 â”‚   â”‚   while True:                                                                                                   â”‚
           â”‚ â± 443 â”‚   â”‚   â”‚   do = self.iter(retry_state=retry_state)                                                                   â”‚
           â”‚   444 â”‚   â”‚   â”‚   if isinstance(do, DoAttempt):                                                                             â”‚
           â”‚   445 â”‚   â”‚   â”‚   â”‚   yield AttemptManager(retry_state=retry_state)                                                         â”‚
           â”‚   446 â”‚   â”‚   â”‚   elif isinstance(do, DoSleep):                                                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:376 in iter                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   373 â”‚   â”‚   self._begin_iter(retry_state)                                                                                 â”‚
           â”‚   374 â”‚   â”‚   result = None                                                                                                 â”‚
           â”‚   375 â”‚   â”‚   for action in self.iter_state.actions:                                                                        â”‚
           â”‚ â± 376 â”‚   â”‚   â”‚   result = action(retry_state)                                                                              â”‚
           â”‚   377 â”‚   â”‚   return result                                                                                                 â”‚
           â”‚   378 â”‚                                                                                                                     â”‚
           â”‚   379 â”‚   def _begin_iter(self, retry_state: "RetryCallState") -> None:  # noqa                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:398 in <lambda>                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   395 â”‚                                                                                                                     â”‚
           â”‚   396 â”‚   def _post_retry_check_actions(self, retry_state: "RetryCallState") -> None:                                       â”‚
           â”‚   397 â”‚   â”‚   if not (self.iter_state.is_explicit_retry or self.iter_state.retry_run_result):                               â”‚
           â”‚ â± 398 â”‚   â”‚   â”‚   self._add_action_func(lambda rs: rs.outcome.result())                                                     â”‚
           â”‚   399 â”‚   â”‚   â”‚   return                                                                                                    â”‚
           â”‚   400 â”‚   â”‚                                                                                                                 â”‚
           â”‚   401 â”‚   â”‚   if self.after is not None:                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:449 in result                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚   446 â”‚   â”‚   â”‚   â”‚   if self._state in [CANCELLED, CANCELLED_AND_NOTIFIED]:                                                â”‚
           â”‚   447 â”‚   â”‚   â”‚   â”‚   â”‚   raise CancelledError()                                                                            â”‚
           â”‚   448 â”‚   â”‚   â”‚   â”‚   elif self._state == FINISHED:                                                                         â”‚
           â”‚ â± 449 â”‚   â”‚   â”‚   â”‚   â”‚   return self.__get_result()                                                                        â”‚
           â”‚   450 â”‚   â”‚   â”‚   â”‚                                                                                                         â”‚
           â”‚   451 â”‚   â”‚   â”‚   â”‚   self._condition.wait(timeout)                                                                         â”‚
           â”‚   452                                                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:401 in __get_result                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   398 â”‚   def __get_result(self):                                                                                           â”‚
           â”‚   399 â”‚   â”‚   if self._exception:                                                                                           â”‚
           â”‚   400 â”‚   â”‚   â”‚   try:                                                                                                      â”‚
           â”‚ â± 401 â”‚   â”‚   â”‚   â”‚   raise self._exception                                                                                 â”‚
           â”‚   402 â”‚   â”‚   â”‚   finally:                                                                                                  â”‚
           â”‚   403 â”‚   â”‚   â”‚   â”‚   # Break a reference cycle with the exception in self._exception                                       â”‚
           â”‚   404 â”‚   â”‚   â”‚   â”‚   self = None                                                                                           â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:417 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   414 â”‚   â”‚   â”‚   â”‚   reraise=True,                                                                                         â”‚
           â”‚   415 â”‚   â”‚   â”‚   ):                                                                                                        â”‚
           â”‚   416 â”‚   â”‚   â”‚   â”‚   with attempt:  # Retrying if ToolSelector fails to select a tool                                      â”‚
           â”‚ â± 417 â”‚   â”‚   â”‚   â”‚   â”‚   action = await agent(agent_state.messages, tools)                                                 â”‚
           â”‚   418 â”‚   â”‚   â”‚   agent_state.messages = [*agent_state.messages, action]                                                    â”‚
           â”‚   419 â”‚   â”‚   â”‚   if on_agent_action_callback:                                                                              â”‚
           â”‚   420 â”‚   â”‚   â”‚   â”‚   await on_agent_action_callback(action, agent_state)                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aviary/tools/utils.py:182 in __call__                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   179 â”‚   â”‚   â”‚   self._ledger.messages.extend(messages)                                                                    â”‚
           â”‚   180 â”‚   â”‚   â”‚   messages = self._ledger.messages                                                                          â”‚
           â”‚   181 â”‚   â”‚                                                                                                                 â”‚
           â”‚ â± 182 â”‚   â”‚   model_response = await self._bound_acompletion(                                                               â”‚
           â”‚   183 â”‚   â”‚   â”‚   messages=MessagesAdapter.dump_python(                                                                     â”‚
           â”‚   184 â”‚   â”‚   â”‚   â”‚   messages, exclude_none=True, by_alias=True                                                            â”‚
           â”‚   185 â”‚   â”‚   â”‚   ),                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:817 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    814 â”‚   â”‚   â”‚   â”‚   â”‚   original_exception=e,                                                                            â”‚
           â”‚    815 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    816 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚ â±  817 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    818 â”‚                                                                                                                    â”‚
           â”‚    819 â”‚   async def _acompletion(                                                                                          â”‚
           â”‚    820 â”‚   â”‚   self, model: str, messages: List[Dict[str, str]], **kwargs                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:793 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    790 â”‚   â”‚   â”‚   if request_priority is not None and isinstance(request_priority, int):                                   â”‚
           â”‚    791 â”‚   â”‚   â”‚   â”‚   response = await self.schedule_acompletion(**kwargs)                                                 â”‚
           â”‚    792 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â±  793 â”‚   â”‚   â”‚   â”‚   response = await self.async_function_with_fallbacks(**kwargs)                                        â”‚
           â”‚    794 â”‚   â”‚   â”‚   end_time = time.time()                                                                                   â”‚
           â”‚    795 â”‚   â”‚   â”‚   _duration = end_time - start_time                                                                        â”‚
           â”‚    796 â”‚   â”‚   â”‚   asyncio.create_task(                                                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2795 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2792 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚   2793 â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                                â”‚
           â”‚   2794 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2795 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2796 â”‚                                                                                                                    â”‚
           â”‚   2797 â”‚   def _handle_mock_testing_fallbacks(                                                                              â”‚
           â”‚   2798 â”‚   â”‚   self,                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2631 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2628 â”‚   â”‚   â”‚   â”‚   content_policy_fallbacks=content_policy_fallbacks,                                                   â”‚
           â”‚   2629 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2630 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2631 â”‚   â”‚   â”‚   response = await self.async_function_with_retries(*args, **kwargs)                                       â”‚
           â”‚   2632 â”‚   â”‚   â”‚   verbose_router_logger.debug(f"Async Response: {response}")                                               â”‚
           â”‚   2633 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2634 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2967 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2964 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "max_retries", num_retries)                                              â”‚
           â”‚   2965 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "num_retries", current_attempt)                                          â”‚
           â”‚   2966 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2967 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2968 â”‚                                                                                                                    â”‚
           â”‚   2969 â”‚   async def make_call(self, original_function: Any, *args, **kwargs):                                              â”‚
           â”‚   2970 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2879 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2876 â”‚   â”‚   â”‚   â”‚   model_group=model_group, kwargs=kwargs                                                               â”‚
           â”‚   2877 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2878 â”‚   â”‚   â”‚   # if the function call is successful, no exception will be raised and we'll                              â”‚
           â”‚        break out of the loop                                                                                                â”‚
           â”‚ â± 2879 â”‚   â”‚   â”‚   response = await self.make_call(original_function, *args, **kwargs)                                      â”‚
           â”‚   2880 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   2881 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2882 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2976 in make_call                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2973 â”‚   â”‚   model_group = kwargs.get("model")                                                                            â”‚
           â”‚   2974 â”‚   â”‚   response = original_function(*args, **kwargs)                                                                â”‚
           â”‚   2975 â”‚   â”‚   if inspect.iscoroutinefunction(response) or inspect.isawaitable(response):                                   â”‚
           â”‚ â± 2976 â”‚   â”‚   â”‚   response = await response                                                                                â”‚
           â”‚   2977 â”‚   â”‚   ## PROCESS RESPONSE HEADERS                                                                                  â”‚
           â”‚   2978 â”‚   â”‚   await self.set_response_headers(response=response, model_group=model_group)                                  â”‚
           â”‚   2979                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:947 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    944 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚    945 â”‚   â”‚   â”‚   if model_name is not None:                                                                               â”‚
           â”‚    946 â”‚   â”‚   â”‚   â”‚   self.fail_calls[model_name] += 1                                                                     â”‚
           â”‚ â±  947 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    948 â”‚                                                                                                                    â”‚
           â”‚    949 â”‚   def _update_kwargs_before_fallbacks(self, model: str, kwargs: dict) -> None:                                     â”‚
           â”‚    950 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:915 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    912 â”‚   â”‚   â”‚   â”‚   â”‚   parent_otel_span=parent_otel_span,                                                               â”‚
           â”‚    913 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    914 â”‚   â”‚   â”‚   â”‚                                                                                                        â”‚
           â”‚ â±  915 â”‚   â”‚   â”‚   â”‚   response = await _response                                                                           â”‚
           â”‚    916 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚    917 â”‚   â”‚   â”‚   ## CHECK CONTENT FILTER ERROR ##                                                                         â”‚
           â”‚    918 â”‚   â”‚   â”‚   if isinstance(response, ModelResponse):                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1175 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1172 â”‚   â”‚   â”‚   â”‚   â”‚   else:                                                                                            â”‚
           â”‚   1173 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   kwargs["model"] = context_window_fallback_dict[model]                                        â”‚
           â”‚   1174 â”‚   â”‚   â”‚   â”‚   â”‚   return await original_function(*args, **kwargs)                                                  â”‚
           â”‚ â± 1175 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   1176 â”‚                                                                                                                    â”‚
           â”‚   1177 â”‚   is_coroutine = inspect.iscoroutinefunction(original_function)                                                    â”‚
           â”‚   1178                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1031 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1028 â”‚   â”‚   â”‚   â”‚   return _caching_handler_response.final_embedding_cached_response                                     â”‚
           â”‚   1029 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1030 â”‚   â”‚   â”‚   # MODEL CALL                                                                                             â”‚
           â”‚ â± 1031 â”‚   â”‚   â”‚   result = await original_function(*args, **kwargs)                                                        â”‚
           â”‚   1032 â”‚   â”‚   â”‚   end_time = datetime.datetime.now()                                                                       â”‚
           â”‚   1033 â”‚   â”‚   â”‚   if "stream" in kwargs and kwargs["stream"] is True:                                                      â”‚
           â”‚   1034 â”‚   â”‚   â”‚   â”‚   if (                                                                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:499 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    496 â”‚   â”‚   return response                                                                                              â”‚
           â”‚    497 â”‚   except Exception as e:                                                                                           â”‚
           â”‚    498 â”‚   â”‚   custom_llm_provider = custom_llm_provider or "openai"                                                        â”‚
           â”‚ â±  499 â”‚   â”‚   raise exception_type(                                                                                        â”‚
           â”‚    500 â”‚   â”‚   â”‚   model=model,                                                                                             â”‚
           â”‚    501 â”‚   â”‚   â”‚   custom_llm_provider=custom_llm_provider,                                                                 â”‚
           â”‚    502 â”‚   â”‚   â”‚   original_exception=e,                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:212 â”‚
           â”‚ 5 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2122 â”‚   â”‚   # don't let an error with mapping interrupt the user from receiving an error                                 â”‚
           â”‚        from the llm api calls                                                                                               â”‚
           â”‚   2123 â”‚   â”‚   if exception_mapping_worked:                                                                                 â”‚
           â”‚   2124 â”‚   â”‚   â”‚   setattr(e, "litellm_response_headers", litellm_response_headers)                                         â”‚
           â”‚ â± 2125 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   2126 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   2127 â”‚   â”‚   â”‚   for error_type in litellm.LITELLM_EXCEPTION_TYPES:                                                       â”‚
           â”‚   2128 â”‚   â”‚   â”‚   â”‚   if isinstance(e, error_type):                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:210 â”‚
           â”‚ 1 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2098 â”‚   â”‚   â”‚   â”‚   â”‚   request=original_exception.request,                                                              â”‚
           â”‚   2099 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚   2100 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â± 2101 â”‚   â”‚   â”‚   â”‚   raise APIConnectionError(                                                                            â”‚
           â”‚   2102 â”‚   â”‚   â”‚   â”‚   â”‚   message="{}\n{}".format(                                                                         â”‚
           â”‚   2103 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   str(original_exception), traceback.format_exc()                                              â”‚
           â”‚   2104 â”‚   â”‚   â”‚   â”‚   â”‚   ),                                                                                               â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           APIConnectionError: litellm.APIConnectionError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1109, in                 
           _wrap_create_connection                                                                                                        
               sock = await aiohappyeyeballs.start_connection(                                                                            
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                            
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py", line 123, in              
           start_connection                                                                                                               
               raise OSError(first_errno, msg)                                                                                            
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py", line 477, in acompletion           
               response = await init_response                                                                                             
                          ^^^^^^^^^^^^^^^^^^^                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 566, in                
           ollama_acompletion                                                                                                             
               raise e  # don't use verbose_logger.exception, if exception is raised                                                      
               ^^^^^^^                                                                                                                    
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 507, in                
           ollama_acompletion                                                                                                             
               resp = await session.post(url, json=data)                                                                                  
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                  
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py", line 696, in _request            
               conn = await self._connector.connect(                                                                                      
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 544, in connect          
               proto = await self._create_connection(req, traces, timeout)                                                                
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1050, in                 
           _create_connection                                                                                                             
               _, proto = await self._create_direct_connection(req, traces, timeout)                                                      
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1394, in                 
           _create_direct_connection                                                                                                      
               raise last_exc                                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1363, in                 
           _create_direct_connection                                                                                                      
               transp, proto = await self._wrap_create_connection(                                                                        
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                        
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1124, in                 
           _wrap_create_connection                                                                                                        
               raise client_error(req.connection_key, exc) from exc                                                                       
           aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
                                                                                                                                          
           Received Model Group=ollama/llama3.2                                                                                           
           Available Model Group Fallbacks=None LiteLLM Retried: 2 times, LiteLLM Max Retries: 3                                          
[01:05:59] Answer:                                                                                                                        


 ANSWERING QUESTION: sciqag_question_90.json
 ----------------------------- 



[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.

[01:06:19] Trajectory failed.                                                                                                             
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1109 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1106 â”‚   â”‚   â”‚   async with ceil_timeout(                                                                                 â”‚
           â”‚   1107 â”‚   â”‚   â”‚   â”‚   timeout.sock_connect, ceil_threshold=timeout.ceil_threshold                                          â”‚
           â”‚   1108 â”‚   â”‚   â”‚   ):                                                                                                       â”‚
           â”‚ â± 1109 â”‚   â”‚   â”‚   â”‚   sock = await aiohappyeyeballs.start_connection(                                                      â”‚
           â”‚   1110 â”‚   â”‚   â”‚   â”‚   â”‚   addr_infos=addr_infos,                                                                           â”‚
           â”‚   1111 â”‚   â”‚   â”‚   â”‚   â”‚   local_addr_infos=self._local_addr_infos,                                                         â”‚
           â”‚   1112 â”‚   â”‚   â”‚   â”‚   â”‚   happy_eyeballs_delay=self._happy_eyeballs_delay,                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py:123 in start_connection          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   120 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, OSError) and exc.errno == first_errno                                         â”‚
           â”‚   121 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   for exc in all_exceptions                                                                     â”‚
           â”‚   122 â”‚   â”‚   â”‚   â”‚   â”‚   ):                                                                                                â”‚
           â”‚ â± 123 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   raise OSError(first_errno, msg)                                                               â”‚
           â”‚   124 â”‚   â”‚   â”‚   â”‚   elif isinstance(first_exception, RuntimeError) and all(                                               â”‚
           â”‚   125 â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, RuntimeError) for exc in all_exceptions                                           â”‚
           â”‚   126 â”‚   â”‚   â”‚   â”‚   ):                                                                                                    â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:477 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    474 â”‚   â”‚   â”‚   â”‚   â”‚   response = ModelResponse(**init_response)                                                        â”‚
           â”‚    475 â”‚   â”‚   â”‚   â”‚   response = init_response                                                                             â”‚
           â”‚    476 â”‚   â”‚   â”‚   elif asyncio.iscoroutine(init_response):                                                                 â”‚
           â”‚ â±  477 â”‚   â”‚   â”‚   â”‚   response = await init_response                                                                       â”‚
           â”‚    478 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚    479 â”‚   â”‚   â”‚   â”‚   response = init_response  # type: ignore                                                             â”‚
           â”‚    480                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:566 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   563 â”‚   â”‚   â”‚   )                                                                                                         â”‚
           â”‚   564 â”‚   â”‚   â”‚   return model_response                                                                                     â”‚
           â”‚   565 â”‚   except Exception as e:                                                                                            â”‚
           â”‚ â± 566 â”‚   â”‚   raise e  # don't use verbose_logger.exception, if exception is raised                                         â”‚
           â”‚   567                                                                                                                       â”‚
           â”‚   568                                                                                                                       â”‚
           â”‚   569 async def ollama_aembeddings(                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:507 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   504 â”‚   try:                                                                                                              â”‚
           â”‚   505 â”‚   â”‚   timeout = aiohttp.ClientTimeout(total=litellm.request_timeout)  # 10 minutes                                  â”‚
           â”‚   506 â”‚   â”‚   async with aiohttp.ClientSession(timeout=timeout) as session:                                                 â”‚
           â”‚ â± 507 â”‚   â”‚   â”‚   resp = await session.post(url, json=data)                                                                 â”‚
           â”‚   508 â”‚   â”‚   â”‚                                                                                                             â”‚
           â”‚   509 â”‚   â”‚   â”‚   if resp.status != 200:                                                                                    â”‚
           â”‚   510 â”‚   â”‚   â”‚   â”‚   text = await resp.text()                                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py:696 in _request                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚    693 â”‚   â”‚   â”‚   â”‚   â”‚                                                                                                    â”‚
           â”‚    694 â”‚   â”‚   â”‚   â”‚   â”‚   # connection timeout                                                                             â”‚
           â”‚    695 â”‚   â”‚   â”‚   â”‚   â”‚   try:                                                                                             â”‚
           â”‚ â±  696 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   conn = await self._connector.connect(                                                        â”‚
           â”‚    697 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   req, traces=traces, timeout=real_timeout                                                 â”‚
           â”‚    698 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚    699 â”‚   â”‚   â”‚   â”‚   â”‚   except asyncio.TimeoutError as exc:                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:544 in connect                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚    541 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    542 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    543 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_start()                                                   â”‚
           â”‚ â±  544 â”‚   â”‚   â”‚   â”‚   proto = await self._create_connection(req, traces, timeout)                                          â”‚
           â”‚    545 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    546 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    547 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_end()                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1050 in _create_connection           â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1047 â”‚   â”‚   if req.proxy:                                                                                                â”‚
           â”‚   1048 â”‚   â”‚   â”‚   _, proto = await self._create_proxy_connection(req, traces, timeout)                                     â”‚
           â”‚   1049 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚ â± 1050 â”‚   â”‚   â”‚   _, proto = await self._create_direct_connection(req, traces, timeout)                                    â”‚
           â”‚   1051 â”‚   â”‚                                                                                                                â”‚
           â”‚   1052 â”‚   â”‚   return proto                                                                                                 â”‚
           â”‚   1053                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1394 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1391 â”‚   â”‚   â”‚   return transp, proto                                                                                     â”‚
           â”‚   1392 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   1393 â”‚   â”‚   â”‚   assert last_exc is not None                                                                              â”‚
           â”‚ â± 1394 â”‚   â”‚   â”‚   raise last_exc                                                                                           â”‚
           â”‚   1395 â”‚                                                                                                                    â”‚
           â”‚   1396 â”‚   async def _create_proxy_connection(                                                                              â”‚
           â”‚   1397 â”‚   â”‚   self, req: ClientRequest, traces: List["Trace"], timeout: "ClientTimeout"                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1363 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1360 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   1361 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1362 â”‚   â”‚   â”‚   try:                                                                                                     â”‚
           â”‚ â± 1363 â”‚   â”‚   â”‚   â”‚   transp, proto = await self._wrap_create_connection(                                                  â”‚
           â”‚   1364 â”‚   â”‚   â”‚   â”‚   â”‚   self._factory,                                                                                   â”‚
           â”‚   1365 â”‚   â”‚   â”‚   â”‚   â”‚   timeout=timeout,                                                                                 â”‚
           â”‚   1366 â”‚   â”‚   â”‚   â”‚   â”‚   ssl=sslcontext,                                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1124 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1121 â”‚   â”‚   except OSError as exc:                                                                                       â”‚
           â”‚   1122 â”‚   â”‚   â”‚   if exc.errno is None and isinstance(exc, asyncio.TimeoutError):                                          â”‚
           â”‚   1123 â”‚   â”‚   â”‚   â”‚   raise                                                                                                â”‚
           â”‚ â± 1124 â”‚   â”‚   â”‚   raise client_error(req.connection_key, exc) from exc                                                     â”‚
           â”‚   1125 â”‚                                                                                                                    â”‚
           â”‚   1126 â”‚   async def _wrap_existing_connection(                                                                             â”‚
           â”‚   1127 â”‚   â”‚   self,                                                                                                        â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno 111] Connect call failed 
           ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                                                    
                                                                                                                                          
           During handling of the above exception, another exception occurred:                                                            
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:276 in _run_with_timeout_failure                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   273 ) -> tuple[PQASession, AgentStatus]:                                                                                  â”‚
           â”‚   274 â”‚   try:                                                                                                              â”‚
           â”‚   275 â”‚   â”‚   async with asyncio.timeout(query.settings.agent.timeout):                                                     â”‚
           â”‚ â± 276 â”‚   â”‚   â”‚   status = await rollout()                                                                                  â”‚
           â”‚   277 â”‚   except TimeoutError:                                                                                              â”‚
           â”‚   278 â”‚   â”‚   logger.warning(                                                                                               â”‚
           â”‚   279 â”‚   â”‚   â”‚   f"Agent timeout after {query.settings.agent.timeout}-sec, just answering."                                â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:410 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   407 â”‚   â”‚   â”‚   â”‚   )                                                                                                     â”‚
           â”‚   408 â”‚   â”‚   â”‚   â”‚   return AgentStatus.TRUNCATED                                                                          â”‚
           â”‚   409 â”‚   â”‚   â”‚   agent_state.messages += obs                                                                               â”‚
           â”‚ â± 410 â”‚   â”‚   â”‚   for attempt in Retrying(                                                                                  â”‚
           â”‚   411 â”‚   â”‚   â”‚   â”‚   stop=stop_after_attempt(5),                                                                           â”‚
           â”‚   412 â”‚   â”‚   â”‚   â”‚   retry=retry_if_exception_type(MalformedMessageError),                                                 â”‚
           â”‚   413 â”‚   â”‚   â”‚   â”‚   before_sleep=before_sleep_log(logger, logging.WARNING),                                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:443 in __iter__                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   440 â”‚   â”‚                                                                                                                 â”‚
           â”‚   441 â”‚   â”‚   retry_state = RetryCallState(self, fn=None, args=(), kwargs={})                                               â”‚
           â”‚   442 â”‚   â”‚   while True:                                                                                                   â”‚
           â”‚ â± 443 â”‚   â”‚   â”‚   do = self.iter(retry_state=retry_state)                                                                   â”‚
           â”‚   444 â”‚   â”‚   â”‚   if isinstance(do, DoAttempt):                                                                             â”‚
           â”‚   445 â”‚   â”‚   â”‚   â”‚   yield AttemptManager(retry_state=retry_state)                                                         â”‚
           â”‚   446 â”‚   â”‚   â”‚   elif isinstance(do, DoSleep):                                                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:376 in iter                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   373 â”‚   â”‚   self._begin_iter(retry_state)                                                                                 â”‚
           â”‚   374 â”‚   â”‚   result = None                                                                                                 â”‚
           â”‚   375 â”‚   â”‚   for action in self.iter_state.actions:                                                                        â”‚
           â”‚ â± 376 â”‚   â”‚   â”‚   result = action(retry_state)                                                                              â”‚
           â”‚   377 â”‚   â”‚   return result                                                                                                 â”‚
           â”‚   378 â”‚                                                                                                                     â”‚
           â”‚   379 â”‚   def _begin_iter(self, retry_state: "RetryCallState") -> None:  # noqa                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:398 in <lambda>                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   395 â”‚                                                                                                                     â”‚
           â”‚   396 â”‚   def _post_retry_check_actions(self, retry_state: "RetryCallState") -> None:                                       â”‚
           â”‚   397 â”‚   â”‚   if not (self.iter_state.is_explicit_retry or self.iter_state.retry_run_result):                               â”‚
           â”‚ â± 398 â”‚   â”‚   â”‚   self._add_action_func(lambda rs: rs.outcome.result())                                                     â”‚
           â”‚   399 â”‚   â”‚   â”‚   return                                                                                                    â”‚
           â”‚   400 â”‚   â”‚                                                                                                                 â”‚
           â”‚   401 â”‚   â”‚   if self.after is not None:                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:449 in result                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚   446 â”‚   â”‚   â”‚   â”‚   if self._state in [CANCELLED, CANCELLED_AND_NOTIFIED]:                                                â”‚
           â”‚   447 â”‚   â”‚   â”‚   â”‚   â”‚   raise CancelledError()                                                                            â”‚
           â”‚   448 â”‚   â”‚   â”‚   â”‚   elif self._state == FINISHED:                                                                         â”‚
           â”‚ â± 449 â”‚   â”‚   â”‚   â”‚   â”‚   return self.__get_result()                                                                        â”‚
           â”‚   450 â”‚   â”‚   â”‚   â”‚                                                                                                         â”‚
           â”‚   451 â”‚   â”‚   â”‚   â”‚   self._condition.wait(timeout)                                                                         â”‚
           â”‚   452                                                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:401 in __get_result                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   398 â”‚   def __get_result(self):                                                                                           â”‚
           â”‚   399 â”‚   â”‚   if self._exception:                                                                                           â”‚
           â”‚   400 â”‚   â”‚   â”‚   try:                                                                                                      â”‚
           â”‚ â± 401 â”‚   â”‚   â”‚   â”‚   raise self._exception                                                                                 â”‚
           â”‚   402 â”‚   â”‚   â”‚   finally:                                                                                                  â”‚
           â”‚   403 â”‚   â”‚   â”‚   â”‚   # Break a reference cycle with the exception in self._exception                                       â”‚
           â”‚   404 â”‚   â”‚   â”‚   â”‚   self = None                                                                                           â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:417 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   414 â”‚   â”‚   â”‚   â”‚   reraise=True,                                                                                         â”‚
           â”‚   415 â”‚   â”‚   â”‚   ):                                                                                                        â”‚
           â”‚   416 â”‚   â”‚   â”‚   â”‚   with attempt:  # Retrying if ToolSelector fails to select a tool                                      â”‚
           â”‚ â± 417 â”‚   â”‚   â”‚   â”‚   â”‚   action = await agent(agent_state.messages, tools)                                                 â”‚
           â”‚   418 â”‚   â”‚   â”‚   agent_state.messages = [*agent_state.messages, action]                                                    â”‚
           â”‚   419 â”‚   â”‚   â”‚   if on_agent_action_callback:                                                                              â”‚
           â”‚   420 â”‚   â”‚   â”‚   â”‚   await on_agent_action_callback(action, agent_state)                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aviary/tools/utils.py:182 in __call__                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   179 â”‚   â”‚   â”‚   self._ledger.messages.extend(messages)                                                                    â”‚
           â”‚   180 â”‚   â”‚   â”‚   messages = self._ledger.messages                                                                          â”‚
           â”‚   181 â”‚   â”‚                                                                                                                 â”‚
           â”‚ â± 182 â”‚   â”‚   model_response = await self._bound_acompletion(                                                               â”‚
           â”‚   183 â”‚   â”‚   â”‚   messages=MessagesAdapter.dump_python(                                                                     â”‚
           â”‚   184 â”‚   â”‚   â”‚   â”‚   messages, exclude_none=True, by_alias=True                                                            â”‚
           â”‚   185 â”‚   â”‚   â”‚   ),                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:817 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    814 â”‚   â”‚   â”‚   â”‚   â”‚   original_exception=e,                                                                            â”‚
           â”‚    815 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    816 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚ â±  817 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    818 â”‚                                                                                                                    â”‚
           â”‚    819 â”‚   async def _acompletion(                                                                                          â”‚
           â”‚    820 â”‚   â”‚   self, model: str, messages: List[Dict[str, str]], **kwargs                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:793 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    790 â”‚   â”‚   â”‚   if request_priority is not None and isinstance(request_priority, int):                                   â”‚
           â”‚    791 â”‚   â”‚   â”‚   â”‚   response = await self.schedule_acompletion(**kwargs)                                                 â”‚
           â”‚    792 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â±  793 â”‚   â”‚   â”‚   â”‚   response = await self.async_function_with_fallbacks(**kwargs)                                        â”‚
           â”‚    794 â”‚   â”‚   â”‚   end_time = time.time()                                                                                   â”‚
           â”‚    795 â”‚   â”‚   â”‚   _duration = end_time - start_time                                                                        â”‚
           â”‚    796 â”‚   â”‚   â”‚   asyncio.create_task(                                                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2795 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2792 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚   2793 â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                                â”‚
           â”‚   2794 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2795 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2796 â”‚                                                                                                                    â”‚
           â”‚   2797 â”‚   def _handle_mock_testing_fallbacks(                                                                              â”‚
           â”‚   2798 â”‚   â”‚   self,                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2631 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2628 â”‚   â”‚   â”‚   â”‚   content_policy_fallbacks=content_policy_fallbacks,                                                   â”‚
           â”‚   2629 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2630 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2631 â”‚   â”‚   â”‚   response = await self.async_function_with_retries(*args, **kwargs)                                       â”‚
           â”‚   2632 â”‚   â”‚   â”‚   verbose_router_logger.debug(f"Async Response: {response}")                                               â”‚
           â”‚   2633 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2634 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2967 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2964 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "max_retries", num_retries)                                              â”‚
           â”‚   2965 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "num_retries", current_attempt)                                          â”‚
           â”‚   2966 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2967 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2968 â”‚                                                                                                                    â”‚
           â”‚   2969 â”‚   async def make_call(self, original_function: Any, *args, **kwargs):                                              â”‚
           â”‚   2970 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2879 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2876 â”‚   â”‚   â”‚   â”‚   model_group=model_group, kwargs=kwargs                                                               â”‚
           â”‚   2877 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2878 â”‚   â”‚   â”‚   # if the function call is successful, no exception will be raised and we'll                              â”‚
           â”‚        break out of the loop                                                                                                â”‚
           â”‚ â± 2879 â”‚   â”‚   â”‚   response = await self.make_call(original_function, *args, **kwargs)                                      â”‚
           â”‚   2880 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   2881 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2882 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2976 in make_call                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2973 â”‚   â”‚   model_group = kwargs.get("model")                                                                            â”‚
           â”‚   2974 â”‚   â”‚   response = original_function(*args, **kwargs)                                                                â”‚
           â”‚   2975 â”‚   â”‚   if inspect.iscoroutinefunction(response) or inspect.isawaitable(response):                                   â”‚
           â”‚ â± 2976 â”‚   â”‚   â”‚   response = await response                                                                                â”‚
           â”‚   2977 â”‚   â”‚   ## PROCESS RESPONSE HEADERS                                                                                  â”‚
           â”‚   2978 â”‚   â”‚   await self.set_response_headers(response=response, model_group=model_group)                                  â”‚
           â”‚   2979                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:947 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    944 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚    945 â”‚   â”‚   â”‚   if model_name is not None:                                                                               â”‚
           â”‚    946 â”‚   â”‚   â”‚   â”‚   self.fail_calls[model_name] += 1                                                                     â”‚
           â”‚ â±  947 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    948 â”‚                                                                                                                    â”‚
           â”‚    949 â”‚   def _update_kwargs_before_fallbacks(self, model: str, kwargs: dict) -> None:                                     â”‚
           â”‚    950 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:915 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    912 â”‚   â”‚   â”‚   â”‚   â”‚   parent_otel_span=parent_otel_span,                                                               â”‚
           â”‚    913 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    914 â”‚   â”‚   â”‚   â”‚                                                                                                        â”‚
           â”‚ â±  915 â”‚   â”‚   â”‚   â”‚   response = await _response                                                                           â”‚
           â”‚    916 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚    917 â”‚   â”‚   â”‚   ## CHECK CONTENT FILTER ERROR ##                                                                         â”‚
           â”‚    918 â”‚   â”‚   â”‚   if isinstance(response, ModelResponse):                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1175 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1172 â”‚   â”‚   â”‚   â”‚   â”‚   else:                                                                                            â”‚
           â”‚   1173 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   kwargs["model"] = context_window_fallback_dict[model]                                        â”‚
           â”‚   1174 â”‚   â”‚   â”‚   â”‚   â”‚   return await original_function(*args, **kwargs)                                                  â”‚
           â”‚ â± 1175 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   1176 â”‚                                                                                                                    â”‚
           â”‚   1177 â”‚   is_coroutine = inspect.iscoroutinefunction(original_function)                                                    â”‚
           â”‚   1178                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1031 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1028 â”‚   â”‚   â”‚   â”‚   return _caching_handler_response.final_embedding_cached_response                                     â”‚
           â”‚   1029 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1030 â”‚   â”‚   â”‚   # MODEL CALL                                                                                             â”‚
           â”‚ â± 1031 â”‚   â”‚   â”‚   result = await original_function(*args, **kwargs)                                                        â”‚
           â”‚   1032 â”‚   â”‚   â”‚   end_time = datetime.datetime.now()                                                                       â”‚
           â”‚   1033 â”‚   â”‚   â”‚   if "stream" in kwargs and kwargs["stream"] is True:                                                      â”‚
           â”‚   1034 â”‚   â”‚   â”‚   â”‚   if (                                                                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:499 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    496 â”‚   â”‚   return response                                                                                              â”‚
           â”‚    497 â”‚   except Exception as e:                                                                                           â”‚
           â”‚    498 â”‚   â”‚   custom_llm_provider = custom_llm_provider or "openai"                                                        â”‚
           â”‚ â±  499 â”‚   â”‚   raise exception_type(                                                                                        â”‚
           â”‚    500 â”‚   â”‚   â”‚   model=model,                                                                                             â”‚
           â”‚    501 â”‚   â”‚   â”‚   custom_llm_provider=custom_llm_provider,                                                                 â”‚
           â”‚    502 â”‚   â”‚   â”‚   original_exception=e,                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:212 â”‚
           â”‚ 5 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2122 â”‚   â”‚   # don't let an error with mapping interrupt the user from receiving an error                                 â”‚
           â”‚        from the llm api calls                                                                                               â”‚
           â”‚   2123 â”‚   â”‚   if exception_mapping_worked:                                                                                 â”‚
           â”‚   2124 â”‚   â”‚   â”‚   setattr(e, "litellm_response_headers", litellm_response_headers)                                         â”‚
           â”‚ â± 2125 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   2126 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   2127 â”‚   â”‚   â”‚   for error_type in litellm.LITELLM_EXCEPTION_TYPES:                                                       â”‚
           â”‚   2128 â”‚   â”‚   â”‚   â”‚   if isinstance(e, error_type):                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:210 â”‚
           â”‚ 1 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2098 â”‚   â”‚   â”‚   â”‚   â”‚   request=original_exception.request,                                                              â”‚
           â”‚   2099 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚   2100 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â± 2101 â”‚   â”‚   â”‚   â”‚   raise APIConnectionError(                                                                            â”‚
           â”‚   2102 â”‚   â”‚   â”‚   â”‚   â”‚   message="{}\n{}".format(                                                                         â”‚
           â”‚   2103 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   str(original_exception), traceback.format_exc()                                              â”‚
           â”‚   2104 â”‚   â”‚   â”‚   â”‚   â”‚   ),                                                                                               â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           APIConnectionError: litellm.APIConnectionError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1109, in                 
           _wrap_create_connection                                                                                                        
               sock = await aiohappyeyeballs.start_connection(                                                                            
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                            
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py", line 123, in              
           start_connection                                                                                                               
               raise OSError(first_errno, msg)                                                                                            
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py", line 477, in acompletion           
               response = await init_response                                                                                             
                          ^^^^^^^^^^^^^^^^^^^                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 566, in                
           ollama_acompletion                                                                                                             
               raise e  # don't use verbose_logger.exception, if exception is raised                                                      
               ^^^^^^^                                                                                                                    
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 507, in                
           ollama_acompletion                                                                                                             
               resp = await session.post(url, json=data)                                                                                  
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                  
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py", line 696, in _request            
               conn = await self._connector.connect(                                                                                      
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 544, in connect          
               proto = await self._create_connection(req, traces, timeout)                                                                
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1050, in                 
           _create_connection                                                                                                             
               _, proto = await self._create_direct_connection(req, traces, timeout)                                                      
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1394, in                 
           _create_direct_connection                                                                                                      
               raise last_exc                                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1363, in                 
           _create_direct_connection                                                                                                      
               transp, proto = await self._wrap_create_connection(                                                                        
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                        
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1124, in                 
           _wrap_create_connection                                                                                                        
               raise client_error(req.connection_key, exc) from exc                                                                       
           aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
                                                                                                                                          
           Received Model Group=ollama/llama3.2                                                                                           
           Available Model Group Fallbacks=None LiteLLM Retried: 2 times, LiteLLM Max Retries: 3                                          
[01:06:21] Answer:                                                                                                                        


 ANSWERING QUESTION: sciqag_question_91.json
 ----------------------------- 



[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.

[01:06:41] Trajectory failed.                                                                                                             
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1109 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1106 â”‚   â”‚   â”‚   async with ceil_timeout(                                                                                 â”‚
           â”‚   1107 â”‚   â”‚   â”‚   â”‚   timeout.sock_connect, ceil_threshold=timeout.ceil_threshold                                          â”‚
           â”‚   1108 â”‚   â”‚   â”‚   ):                                                                                                       â”‚
           â”‚ â± 1109 â”‚   â”‚   â”‚   â”‚   sock = await aiohappyeyeballs.start_connection(                                                      â”‚
           â”‚   1110 â”‚   â”‚   â”‚   â”‚   â”‚   addr_infos=addr_infos,                                                                           â”‚
           â”‚   1111 â”‚   â”‚   â”‚   â”‚   â”‚   local_addr_infos=self._local_addr_infos,                                                         â”‚
           â”‚   1112 â”‚   â”‚   â”‚   â”‚   â”‚   happy_eyeballs_delay=self._happy_eyeballs_delay,                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py:123 in start_connection          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   120 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, OSError) and exc.errno == first_errno                                         â”‚
           â”‚   121 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   for exc in all_exceptions                                                                     â”‚
           â”‚   122 â”‚   â”‚   â”‚   â”‚   â”‚   ):                                                                                                â”‚
           â”‚ â± 123 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   raise OSError(first_errno, msg)                                                               â”‚
           â”‚   124 â”‚   â”‚   â”‚   â”‚   elif isinstance(first_exception, RuntimeError) and all(                                               â”‚
           â”‚   125 â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, RuntimeError) for exc in all_exceptions                                           â”‚
           â”‚   126 â”‚   â”‚   â”‚   â”‚   ):                                                                                                    â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:477 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    474 â”‚   â”‚   â”‚   â”‚   â”‚   response = ModelResponse(**init_response)                                                        â”‚
           â”‚    475 â”‚   â”‚   â”‚   â”‚   response = init_response                                                                             â”‚
           â”‚    476 â”‚   â”‚   â”‚   elif asyncio.iscoroutine(init_response):                                                                 â”‚
           â”‚ â±  477 â”‚   â”‚   â”‚   â”‚   response = await init_response                                                                       â”‚
           â”‚    478 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚    479 â”‚   â”‚   â”‚   â”‚   response = init_response  # type: ignore                                                             â”‚
           â”‚    480                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:566 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   563 â”‚   â”‚   â”‚   )                                                                                                         â”‚
           â”‚   564 â”‚   â”‚   â”‚   return model_response                                                                                     â”‚
           â”‚   565 â”‚   except Exception as e:                                                                                            â”‚
           â”‚ â± 566 â”‚   â”‚   raise e  # don't use verbose_logger.exception, if exception is raised                                         â”‚
           â”‚   567                                                                                                                       â”‚
           â”‚   568                                                                                                                       â”‚
           â”‚   569 async def ollama_aembeddings(                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:507 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   504 â”‚   try:                                                                                                              â”‚
           â”‚   505 â”‚   â”‚   timeout = aiohttp.ClientTimeout(total=litellm.request_timeout)  # 10 minutes                                  â”‚
           â”‚   506 â”‚   â”‚   async with aiohttp.ClientSession(timeout=timeout) as session:                                                 â”‚
           â”‚ â± 507 â”‚   â”‚   â”‚   resp = await session.post(url, json=data)                                                                 â”‚
           â”‚   508 â”‚   â”‚   â”‚                                                                                                             â”‚
           â”‚   509 â”‚   â”‚   â”‚   if resp.status != 200:                                                                                    â”‚
           â”‚   510 â”‚   â”‚   â”‚   â”‚   text = await resp.text()                                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py:696 in _request                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚    693 â”‚   â”‚   â”‚   â”‚   â”‚                                                                                                    â”‚
           â”‚    694 â”‚   â”‚   â”‚   â”‚   â”‚   # connection timeout                                                                             â”‚
           â”‚    695 â”‚   â”‚   â”‚   â”‚   â”‚   try:                                                                                             â”‚
           â”‚ â±  696 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   conn = await self._connector.connect(                                                        â”‚
           â”‚    697 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   req, traces=traces, timeout=real_timeout                                                 â”‚
           â”‚    698 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚    699 â”‚   â”‚   â”‚   â”‚   â”‚   except asyncio.TimeoutError as exc:                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:544 in connect                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚    541 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    542 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    543 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_start()                                                   â”‚
           â”‚ â±  544 â”‚   â”‚   â”‚   â”‚   proto = await self._create_connection(req, traces, timeout)                                          â”‚
           â”‚    545 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    546 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    547 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_end()                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1050 in _create_connection           â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1047 â”‚   â”‚   if req.proxy:                                                                                                â”‚
           â”‚   1048 â”‚   â”‚   â”‚   _, proto = await self._create_proxy_connection(req, traces, timeout)                                     â”‚
           â”‚   1049 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚ â± 1050 â”‚   â”‚   â”‚   _, proto = await self._create_direct_connection(req, traces, timeout)                                    â”‚
           â”‚   1051 â”‚   â”‚                                                                                                                â”‚
           â”‚   1052 â”‚   â”‚   return proto                                                                                                 â”‚
           â”‚   1053                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1394 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1391 â”‚   â”‚   â”‚   return transp, proto                                                                                     â”‚
           â”‚   1392 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   1393 â”‚   â”‚   â”‚   assert last_exc is not None                                                                              â”‚
           â”‚ â± 1394 â”‚   â”‚   â”‚   raise last_exc                                                                                           â”‚
           â”‚   1395 â”‚                                                                                                                    â”‚
           â”‚   1396 â”‚   async def _create_proxy_connection(                                                                              â”‚
           â”‚   1397 â”‚   â”‚   self, req: ClientRequest, traces: List["Trace"], timeout: "ClientTimeout"                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1363 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1360 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   1361 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1362 â”‚   â”‚   â”‚   try:                                                                                                     â”‚
           â”‚ â± 1363 â”‚   â”‚   â”‚   â”‚   transp, proto = await self._wrap_create_connection(                                                  â”‚
           â”‚   1364 â”‚   â”‚   â”‚   â”‚   â”‚   self._factory,                                                                                   â”‚
           â”‚   1365 â”‚   â”‚   â”‚   â”‚   â”‚   timeout=timeout,                                                                                 â”‚
           â”‚   1366 â”‚   â”‚   â”‚   â”‚   â”‚   ssl=sslcontext,                                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1124 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1121 â”‚   â”‚   except OSError as exc:                                                                                       â”‚
           â”‚   1122 â”‚   â”‚   â”‚   if exc.errno is None and isinstance(exc, asyncio.TimeoutError):                                          â”‚
           â”‚   1123 â”‚   â”‚   â”‚   â”‚   raise                                                                                                â”‚
           â”‚ â± 1124 â”‚   â”‚   â”‚   raise client_error(req.connection_key, exc) from exc                                                     â”‚
           â”‚   1125 â”‚                                                                                                                    â”‚
           â”‚   1126 â”‚   async def _wrap_existing_connection(                                                                             â”‚
           â”‚   1127 â”‚   â”‚   self,                                                                                                        â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno 111] Connect call failed 
           ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                                                    
                                                                                                                                          
           During handling of the above exception, another exception occurred:                                                            
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:276 in _run_with_timeout_failure                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   273 ) -> tuple[PQASession, AgentStatus]:                                                                                  â”‚
           â”‚   274 â”‚   try:                                                                                                              â”‚
           â”‚   275 â”‚   â”‚   async with asyncio.timeout(query.settings.agent.timeout):                                                     â”‚
           â”‚ â± 276 â”‚   â”‚   â”‚   status = await rollout()                                                                                  â”‚
           â”‚   277 â”‚   except TimeoutError:                                                                                              â”‚
           â”‚   278 â”‚   â”‚   logger.warning(                                                                                               â”‚
           â”‚   279 â”‚   â”‚   â”‚   f"Agent timeout after {query.settings.agent.timeout}-sec, just answering."                                â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:410 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   407 â”‚   â”‚   â”‚   â”‚   )                                                                                                     â”‚
           â”‚   408 â”‚   â”‚   â”‚   â”‚   return AgentStatus.TRUNCATED                                                                          â”‚
           â”‚   409 â”‚   â”‚   â”‚   agent_state.messages += obs                                                                               â”‚
           â”‚ â± 410 â”‚   â”‚   â”‚   for attempt in Retrying(                                                                                  â”‚
           â”‚   411 â”‚   â”‚   â”‚   â”‚   stop=stop_after_attempt(5),                                                                           â”‚
           â”‚   412 â”‚   â”‚   â”‚   â”‚   retry=retry_if_exception_type(MalformedMessageError),                                                 â”‚
           â”‚   413 â”‚   â”‚   â”‚   â”‚   before_sleep=before_sleep_log(logger, logging.WARNING),                                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:443 in __iter__                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   440 â”‚   â”‚                                                                                                                 â”‚
           â”‚   441 â”‚   â”‚   retry_state = RetryCallState(self, fn=None, args=(), kwargs={})                                               â”‚
           â”‚   442 â”‚   â”‚   while True:                                                                                                   â”‚
           â”‚ â± 443 â”‚   â”‚   â”‚   do = self.iter(retry_state=retry_state)                                                                   â”‚
           â”‚   444 â”‚   â”‚   â”‚   if isinstance(do, DoAttempt):                                                                             â”‚
           â”‚   445 â”‚   â”‚   â”‚   â”‚   yield AttemptManager(retry_state=retry_state)                                                         â”‚
           â”‚   446 â”‚   â”‚   â”‚   elif isinstance(do, DoSleep):                                                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:376 in iter                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   373 â”‚   â”‚   self._begin_iter(retry_state)                                                                                 â”‚
           â”‚   374 â”‚   â”‚   result = None                                                                                                 â”‚
           â”‚   375 â”‚   â”‚   for action in self.iter_state.actions:                                                                        â”‚
           â”‚ â± 376 â”‚   â”‚   â”‚   result = action(retry_state)                                                                              â”‚
           â”‚   377 â”‚   â”‚   return result                                                                                                 â”‚
           â”‚   378 â”‚                                                                                                                     â”‚
           â”‚   379 â”‚   def _begin_iter(self, retry_state: "RetryCallState") -> None:  # noqa                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:398 in <lambda>                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   395 â”‚                                                                                                                     â”‚
           â”‚   396 â”‚   def _post_retry_check_actions(self, retry_state: "RetryCallState") -> None:                                       â”‚
           â”‚   397 â”‚   â”‚   if not (self.iter_state.is_explicit_retry or self.iter_state.retry_run_result):                               â”‚
           â”‚ â± 398 â”‚   â”‚   â”‚   self._add_action_func(lambda rs: rs.outcome.result())                                                     â”‚
           â”‚   399 â”‚   â”‚   â”‚   return                                                                                                    â”‚
           â”‚   400 â”‚   â”‚                                                                                                                 â”‚
           â”‚   401 â”‚   â”‚   if self.after is not None:                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:449 in result                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚   446 â”‚   â”‚   â”‚   â”‚   if self._state in [CANCELLED, CANCELLED_AND_NOTIFIED]:                                                â”‚
           â”‚   447 â”‚   â”‚   â”‚   â”‚   â”‚   raise CancelledError()                                                                            â”‚
           â”‚   448 â”‚   â”‚   â”‚   â”‚   elif self._state == FINISHED:                                                                         â”‚
           â”‚ â± 449 â”‚   â”‚   â”‚   â”‚   â”‚   return self.__get_result()                                                                        â”‚
           â”‚   450 â”‚   â”‚   â”‚   â”‚                                                                                                         â”‚
           â”‚   451 â”‚   â”‚   â”‚   â”‚   self._condition.wait(timeout)                                                                         â”‚
           â”‚   452                                                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:401 in __get_result                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   398 â”‚   def __get_result(self):                                                                                           â”‚
           â”‚   399 â”‚   â”‚   if self._exception:                                                                                           â”‚
           â”‚   400 â”‚   â”‚   â”‚   try:                                                                                                      â”‚
           â”‚ â± 401 â”‚   â”‚   â”‚   â”‚   raise self._exception                                                                                 â”‚
           â”‚   402 â”‚   â”‚   â”‚   finally:                                                                                                  â”‚
           â”‚   403 â”‚   â”‚   â”‚   â”‚   # Break a reference cycle with the exception in self._exception                                       â”‚
           â”‚   404 â”‚   â”‚   â”‚   â”‚   self = None                                                                                           â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:417 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   414 â”‚   â”‚   â”‚   â”‚   reraise=True,                                                                                         â”‚
           â”‚   415 â”‚   â”‚   â”‚   ):                                                                                                        â”‚
           â”‚   416 â”‚   â”‚   â”‚   â”‚   with attempt:  # Retrying if ToolSelector fails to select a tool                                      â”‚
           â”‚ â± 417 â”‚   â”‚   â”‚   â”‚   â”‚   action = await agent(agent_state.messages, tools)                                                 â”‚
           â”‚   418 â”‚   â”‚   â”‚   agent_state.messages = [*agent_state.messages, action]                                                    â”‚
           â”‚   419 â”‚   â”‚   â”‚   if on_agent_action_callback:                                                                              â”‚
           â”‚   420 â”‚   â”‚   â”‚   â”‚   await on_agent_action_callback(action, agent_state)                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aviary/tools/utils.py:182 in __call__                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   179 â”‚   â”‚   â”‚   self._ledger.messages.extend(messages)                                                                    â”‚
           â”‚   180 â”‚   â”‚   â”‚   messages = self._ledger.messages                                                                          â”‚
           â”‚   181 â”‚   â”‚                                                                                                                 â”‚
           â”‚ â± 182 â”‚   â”‚   model_response = await self._bound_acompletion(                                                               â”‚
           â”‚   183 â”‚   â”‚   â”‚   messages=MessagesAdapter.dump_python(                                                                     â”‚
           â”‚   184 â”‚   â”‚   â”‚   â”‚   messages, exclude_none=True, by_alias=True                                                            â”‚
           â”‚   185 â”‚   â”‚   â”‚   ),                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:817 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    814 â”‚   â”‚   â”‚   â”‚   â”‚   original_exception=e,                                                                            â”‚
           â”‚    815 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    816 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚ â±  817 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    818 â”‚                                                                                                                    â”‚
           â”‚    819 â”‚   async def _acompletion(                                                                                          â”‚
           â”‚    820 â”‚   â”‚   self, model: str, messages: List[Dict[str, str]], **kwargs                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:793 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    790 â”‚   â”‚   â”‚   if request_priority is not None and isinstance(request_priority, int):                                   â”‚
           â”‚    791 â”‚   â”‚   â”‚   â”‚   response = await self.schedule_acompletion(**kwargs)                                                 â”‚
           â”‚    792 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â±  793 â”‚   â”‚   â”‚   â”‚   response = await self.async_function_with_fallbacks(**kwargs)                                        â”‚
           â”‚    794 â”‚   â”‚   â”‚   end_time = time.time()                                                                                   â”‚
           â”‚    795 â”‚   â”‚   â”‚   _duration = end_time - start_time                                                                        â”‚
           â”‚    796 â”‚   â”‚   â”‚   asyncio.create_task(                                                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2795 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2792 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚   2793 â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                                â”‚
           â”‚   2794 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2795 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2796 â”‚                                                                                                                    â”‚
           â”‚   2797 â”‚   def _handle_mock_testing_fallbacks(                                                                              â”‚
           â”‚   2798 â”‚   â”‚   self,                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2631 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2628 â”‚   â”‚   â”‚   â”‚   content_policy_fallbacks=content_policy_fallbacks,                                                   â”‚
           â”‚   2629 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2630 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2631 â”‚   â”‚   â”‚   response = await self.async_function_with_retries(*args, **kwargs)                                       â”‚
           â”‚   2632 â”‚   â”‚   â”‚   verbose_router_logger.debug(f"Async Response: {response}")                                               â”‚
           â”‚   2633 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2634 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2967 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2964 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "max_retries", num_retries)                                              â”‚
           â”‚   2965 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "num_retries", current_attempt)                                          â”‚
           â”‚   2966 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2967 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2968 â”‚                                                                                                                    â”‚
           â”‚   2969 â”‚   async def make_call(self, original_function: Any, *args, **kwargs):                                              â”‚
           â”‚   2970 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2879 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2876 â”‚   â”‚   â”‚   â”‚   model_group=model_group, kwargs=kwargs                                                               â”‚
           â”‚   2877 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2878 â”‚   â”‚   â”‚   # if the function call is successful, no exception will be raised and we'll                              â”‚
           â”‚        break out of the loop                                                                                                â”‚
           â”‚ â± 2879 â”‚   â”‚   â”‚   response = await self.make_call(original_function, *args, **kwargs)                                      â”‚
           â”‚   2880 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   2881 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2882 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2976 in make_call                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2973 â”‚   â”‚   model_group = kwargs.get("model")                                                                            â”‚
           â”‚   2974 â”‚   â”‚   response = original_function(*args, **kwargs)                                                                â”‚
           â”‚   2975 â”‚   â”‚   if inspect.iscoroutinefunction(response) or inspect.isawaitable(response):                                   â”‚
           â”‚ â± 2976 â”‚   â”‚   â”‚   response = await response                                                                                â”‚
           â”‚   2977 â”‚   â”‚   ## PROCESS RESPONSE HEADERS                                                                                  â”‚
           â”‚   2978 â”‚   â”‚   await self.set_response_headers(response=response, model_group=model_group)                                  â”‚
           â”‚   2979                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:947 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    944 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚    945 â”‚   â”‚   â”‚   if model_name is not None:                                                                               â”‚
           â”‚    946 â”‚   â”‚   â”‚   â”‚   self.fail_calls[model_name] += 1                                                                     â”‚
           â”‚ â±  947 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    948 â”‚                                                                                                                    â”‚
           â”‚    949 â”‚   def _update_kwargs_before_fallbacks(self, model: str, kwargs: dict) -> None:                                     â”‚
           â”‚    950 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:915 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    912 â”‚   â”‚   â”‚   â”‚   â”‚   parent_otel_span=parent_otel_span,                                                               â”‚
           â”‚    913 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    914 â”‚   â”‚   â”‚   â”‚                                                                                                        â”‚
           â”‚ â±  915 â”‚   â”‚   â”‚   â”‚   response = await _response                                                                           â”‚
           â”‚    916 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚    917 â”‚   â”‚   â”‚   ## CHECK CONTENT FILTER ERROR ##                                                                         â”‚
           â”‚    918 â”‚   â”‚   â”‚   if isinstance(response, ModelResponse):                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1175 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1172 â”‚   â”‚   â”‚   â”‚   â”‚   else:                                                                                            â”‚
           â”‚   1173 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   kwargs["model"] = context_window_fallback_dict[model]                                        â”‚
           â”‚   1174 â”‚   â”‚   â”‚   â”‚   â”‚   return await original_function(*args, **kwargs)                                                  â”‚
           â”‚ â± 1175 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   1176 â”‚                                                                                                                    â”‚
           â”‚   1177 â”‚   is_coroutine = inspect.iscoroutinefunction(original_function)                                                    â”‚
           â”‚   1178                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1031 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1028 â”‚   â”‚   â”‚   â”‚   return _caching_handler_response.final_embedding_cached_response                                     â”‚
           â”‚   1029 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1030 â”‚   â”‚   â”‚   # MODEL CALL                                                                                             â”‚
           â”‚ â± 1031 â”‚   â”‚   â”‚   result = await original_function(*args, **kwargs)                                                        â”‚
           â”‚   1032 â”‚   â”‚   â”‚   end_time = datetime.datetime.now()                                                                       â”‚
           â”‚   1033 â”‚   â”‚   â”‚   if "stream" in kwargs and kwargs["stream"] is True:                                                      â”‚
           â”‚   1034 â”‚   â”‚   â”‚   â”‚   if (                                                                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:499 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    496 â”‚   â”‚   return response                                                                                              â”‚
           â”‚    497 â”‚   except Exception as e:                                                                                           â”‚
           â”‚    498 â”‚   â”‚   custom_llm_provider = custom_llm_provider or "openai"                                                        â”‚
           â”‚ â±  499 â”‚   â”‚   raise exception_type(                                                                                        â”‚
           â”‚    500 â”‚   â”‚   â”‚   model=model,                                                                                             â”‚
           â”‚    501 â”‚   â”‚   â”‚   custom_llm_provider=custom_llm_provider,                                                                 â”‚
           â”‚    502 â”‚   â”‚   â”‚   original_exception=e,                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:212 â”‚
           â”‚ 5 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2122 â”‚   â”‚   # don't let an error with mapping interrupt the user from receiving an error                                 â”‚
           â”‚        from the llm api calls                                                                                               â”‚
           â”‚   2123 â”‚   â”‚   if exception_mapping_worked:                                                                                 â”‚
           â”‚   2124 â”‚   â”‚   â”‚   setattr(e, "litellm_response_headers", litellm_response_headers)                                         â”‚
           â”‚ â± 2125 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   2126 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   2127 â”‚   â”‚   â”‚   for error_type in litellm.LITELLM_EXCEPTION_TYPES:                                                       â”‚
           â”‚   2128 â”‚   â”‚   â”‚   â”‚   if isinstance(e, error_type):                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:210 â”‚
           â”‚ 1 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2098 â”‚   â”‚   â”‚   â”‚   â”‚   request=original_exception.request,                                                              â”‚
           â”‚   2099 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚   2100 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â± 2101 â”‚   â”‚   â”‚   â”‚   raise APIConnectionError(                                                                            â”‚
           â”‚   2102 â”‚   â”‚   â”‚   â”‚   â”‚   message="{}\n{}".format(                                                                         â”‚
           â”‚   2103 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   str(original_exception), traceback.format_exc()                                              â”‚
           â”‚   2104 â”‚   â”‚   â”‚   â”‚   â”‚   ),                                                                                               â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           APIConnectionError: litellm.APIConnectionError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1109, in                 
           _wrap_create_connection                                                                                                        
               sock = await aiohappyeyeballs.start_connection(                                                                            
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                            
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py", line 123, in              
           start_connection                                                                                                               
               raise OSError(first_errno, msg)                                                                                            
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py", line 477, in acompletion           
               response = await init_response                                                                                             
                          ^^^^^^^^^^^^^^^^^^^                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 566, in                
           ollama_acompletion                                                                                                             
               raise e  # don't use verbose_logger.exception, if exception is raised                                                      
               ^^^^^^^                                                                                                                    
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 507, in                
           ollama_acompletion                                                                                                             
               resp = await session.post(url, json=data)                                                                                  
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                  
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py", line 696, in _request            
               conn = await self._connector.connect(                                                                                      
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 544, in connect          
               proto = await self._create_connection(req, traces, timeout)                                                                
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1050, in                 
           _create_connection                                                                                                             
               _, proto = await self._create_direct_connection(req, traces, timeout)                                                      
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1394, in                 
           _create_direct_connection                                                                                                      
               raise last_exc                                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1363, in                 
           _create_direct_connection                                                                                                      
               transp, proto = await self._wrap_create_connection(                                                                        
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                        
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1124, in                 
           _wrap_create_connection                                                                                                        
               raise client_error(req.connection_key, exc) from exc                                                                       
           aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
                                                                                                                                          
           Received Model Group=ollama/llama3.2                                                                                           
           Available Model Group Fallbacks=None LiteLLM Retried: 2 times, LiteLLM Max Retries: 3                                          
[01:06:43] Answer:                                                                                                                        


 ANSWERING QUESTION: sciqag_question_92.json
 ----------------------------- 



[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.

[01:07:04] Trajectory failed.                                                                                                             
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1109 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1106 â”‚   â”‚   â”‚   async with ceil_timeout(                                                                                 â”‚
           â”‚   1107 â”‚   â”‚   â”‚   â”‚   timeout.sock_connect, ceil_threshold=timeout.ceil_threshold                                          â”‚
           â”‚   1108 â”‚   â”‚   â”‚   ):                                                                                                       â”‚
           â”‚ â± 1109 â”‚   â”‚   â”‚   â”‚   sock = await aiohappyeyeballs.start_connection(                                                      â”‚
           â”‚   1110 â”‚   â”‚   â”‚   â”‚   â”‚   addr_infos=addr_infos,                                                                           â”‚
           â”‚   1111 â”‚   â”‚   â”‚   â”‚   â”‚   local_addr_infos=self._local_addr_infos,                                                         â”‚
           â”‚   1112 â”‚   â”‚   â”‚   â”‚   â”‚   happy_eyeballs_delay=self._happy_eyeballs_delay,                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py:123 in start_connection          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   120 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, OSError) and exc.errno == first_errno                                         â”‚
           â”‚   121 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   for exc in all_exceptions                                                                     â”‚
           â”‚   122 â”‚   â”‚   â”‚   â”‚   â”‚   ):                                                                                                â”‚
           â”‚ â± 123 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   raise OSError(first_errno, msg)                                                               â”‚
           â”‚   124 â”‚   â”‚   â”‚   â”‚   elif isinstance(first_exception, RuntimeError) and all(                                               â”‚
           â”‚   125 â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, RuntimeError) for exc in all_exceptions                                           â”‚
           â”‚   126 â”‚   â”‚   â”‚   â”‚   ):                                                                                                    â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:477 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    474 â”‚   â”‚   â”‚   â”‚   â”‚   response = ModelResponse(**init_response)                                                        â”‚
           â”‚    475 â”‚   â”‚   â”‚   â”‚   response = init_response                                                                             â”‚
           â”‚    476 â”‚   â”‚   â”‚   elif asyncio.iscoroutine(init_response):                                                                 â”‚
           â”‚ â±  477 â”‚   â”‚   â”‚   â”‚   response = await init_response                                                                       â”‚
           â”‚    478 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚    479 â”‚   â”‚   â”‚   â”‚   response = init_response  # type: ignore                                                             â”‚
           â”‚    480                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:566 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   563 â”‚   â”‚   â”‚   )                                                                                                         â”‚
           â”‚   564 â”‚   â”‚   â”‚   return model_response                                                                                     â”‚
           â”‚   565 â”‚   except Exception as e:                                                                                            â”‚
           â”‚ â± 566 â”‚   â”‚   raise e  # don't use verbose_logger.exception, if exception is raised                                         â”‚
           â”‚   567                                                                                                                       â”‚
           â”‚   568                                                                                                                       â”‚
           â”‚   569 async def ollama_aembeddings(                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:507 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   504 â”‚   try:                                                                                                              â”‚
           â”‚   505 â”‚   â”‚   timeout = aiohttp.ClientTimeout(total=litellm.request_timeout)  # 10 minutes                                  â”‚
           â”‚   506 â”‚   â”‚   async with aiohttp.ClientSession(timeout=timeout) as session:                                                 â”‚
           â”‚ â± 507 â”‚   â”‚   â”‚   resp = await session.post(url, json=data)                                                                 â”‚
           â”‚   508 â”‚   â”‚   â”‚                                                                                                             â”‚
           â”‚   509 â”‚   â”‚   â”‚   if resp.status != 200:                                                                                    â”‚
           â”‚   510 â”‚   â”‚   â”‚   â”‚   text = await resp.text()                                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py:696 in _request                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚    693 â”‚   â”‚   â”‚   â”‚   â”‚                                                                                                    â”‚
           â”‚    694 â”‚   â”‚   â”‚   â”‚   â”‚   # connection timeout                                                                             â”‚
           â”‚    695 â”‚   â”‚   â”‚   â”‚   â”‚   try:                                                                                             â”‚
           â”‚ â±  696 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   conn = await self._connector.connect(                                                        â”‚
           â”‚    697 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   req, traces=traces, timeout=real_timeout                                                 â”‚
           â”‚    698 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚    699 â”‚   â”‚   â”‚   â”‚   â”‚   except asyncio.TimeoutError as exc:                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:544 in connect                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚    541 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    542 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    543 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_start()                                                   â”‚
           â”‚ â±  544 â”‚   â”‚   â”‚   â”‚   proto = await self._create_connection(req, traces, timeout)                                          â”‚
           â”‚    545 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    546 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    547 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_end()                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1050 in _create_connection           â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1047 â”‚   â”‚   if req.proxy:                                                                                                â”‚
           â”‚   1048 â”‚   â”‚   â”‚   _, proto = await self._create_proxy_connection(req, traces, timeout)                                     â”‚
           â”‚   1049 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚ â± 1050 â”‚   â”‚   â”‚   _, proto = await self._create_direct_connection(req, traces, timeout)                                    â”‚
           â”‚   1051 â”‚   â”‚                                                                                                                â”‚
           â”‚   1052 â”‚   â”‚   return proto                                                                                                 â”‚
           â”‚   1053                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1394 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1391 â”‚   â”‚   â”‚   return transp, proto                                                                                     â”‚
           â”‚   1392 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   1393 â”‚   â”‚   â”‚   assert last_exc is not None                                                                              â”‚
           â”‚ â± 1394 â”‚   â”‚   â”‚   raise last_exc                                                                                           â”‚
           â”‚   1395 â”‚                                                                                                                    â”‚
           â”‚   1396 â”‚   async def _create_proxy_connection(                                                                              â”‚
           â”‚   1397 â”‚   â”‚   self, req: ClientRequest, traces: List["Trace"], timeout: "ClientTimeout"                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1363 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1360 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   1361 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1362 â”‚   â”‚   â”‚   try:                                                                                                     â”‚
           â”‚ â± 1363 â”‚   â”‚   â”‚   â”‚   transp, proto = await self._wrap_create_connection(                                                  â”‚
           â”‚   1364 â”‚   â”‚   â”‚   â”‚   â”‚   self._factory,                                                                                   â”‚
           â”‚   1365 â”‚   â”‚   â”‚   â”‚   â”‚   timeout=timeout,                                                                                 â”‚
           â”‚   1366 â”‚   â”‚   â”‚   â”‚   â”‚   ssl=sslcontext,                                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1124 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1121 â”‚   â”‚   except OSError as exc:                                                                                       â”‚
           â”‚   1122 â”‚   â”‚   â”‚   if exc.errno is None and isinstance(exc, asyncio.TimeoutError):                                          â”‚
           â”‚   1123 â”‚   â”‚   â”‚   â”‚   raise                                                                                                â”‚
           â”‚ â± 1124 â”‚   â”‚   â”‚   raise client_error(req.connection_key, exc) from exc                                                     â”‚
           â”‚   1125 â”‚                                                                                                                    â”‚
           â”‚   1126 â”‚   async def _wrap_existing_connection(                                                                             â”‚
           â”‚   1127 â”‚   â”‚   self,                                                                                                        â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno 111] Connect call failed 
           ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                                                    
                                                                                                                                          
           During handling of the above exception, another exception occurred:                                                            
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:276 in _run_with_timeout_failure                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   273 ) -> tuple[PQASession, AgentStatus]:                                                                                  â”‚
           â”‚   274 â”‚   try:                                                                                                              â”‚
           â”‚   275 â”‚   â”‚   async with asyncio.timeout(query.settings.agent.timeout):                                                     â”‚
           â”‚ â± 276 â”‚   â”‚   â”‚   status = await rollout()                                                                                  â”‚
           â”‚   277 â”‚   except TimeoutError:                                                                                              â”‚
           â”‚   278 â”‚   â”‚   logger.warning(                                                                                               â”‚
           â”‚   279 â”‚   â”‚   â”‚   f"Agent timeout after {query.settings.agent.timeout}-sec, just answering."                                â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:410 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   407 â”‚   â”‚   â”‚   â”‚   )                                                                                                     â”‚
           â”‚   408 â”‚   â”‚   â”‚   â”‚   return AgentStatus.TRUNCATED                                                                          â”‚
           â”‚   409 â”‚   â”‚   â”‚   agent_state.messages += obs                                                                               â”‚
           â”‚ â± 410 â”‚   â”‚   â”‚   for attempt in Retrying(                                                                                  â”‚
           â”‚   411 â”‚   â”‚   â”‚   â”‚   stop=stop_after_attempt(5),                                                                           â”‚
           â”‚   412 â”‚   â”‚   â”‚   â”‚   retry=retry_if_exception_type(MalformedMessageError),                                                 â”‚
           â”‚   413 â”‚   â”‚   â”‚   â”‚   before_sleep=before_sleep_log(logger, logging.WARNING),                                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:443 in __iter__                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   440 â”‚   â”‚                                                                                                                 â”‚
           â”‚   441 â”‚   â”‚   retry_state = RetryCallState(self, fn=None, args=(), kwargs={})                                               â”‚
           â”‚   442 â”‚   â”‚   while True:                                                                                                   â”‚
           â”‚ â± 443 â”‚   â”‚   â”‚   do = self.iter(retry_state=retry_state)                                                                   â”‚
           â”‚   444 â”‚   â”‚   â”‚   if isinstance(do, DoAttempt):                                                                             â”‚
           â”‚   445 â”‚   â”‚   â”‚   â”‚   yield AttemptManager(retry_state=retry_state)                                                         â”‚
           â”‚   446 â”‚   â”‚   â”‚   elif isinstance(do, DoSleep):                                                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:376 in iter                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   373 â”‚   â”‚   self._begin_iter(retry_state)                                                                                 â”‚
           â”‚   374 â”‚   â”‚   result = None                                                                                                 â”‚
           â”‚   375 â”‚   â”‚   for action in self.iter_state.actions:                                                                        â”‚
           â”‚ â± 376 â”‚   â”‚   â”‚   result = action(retry_state)                                                                              â”‚
           â”‚   377 â”‚   â”‚   return result                                                                                                 â”‚
           â”‚   378 â”‚                                                                                                                     â”‚
           â”‚   379 â”‚   def _begin_iter(self, retry_state: "RetryCallState") -> None:  # noqa                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:398 in <lambda>                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   395 â”‚                                                                                                                     â”‚
           â”‚   396 â”‚   def _post_retry_check_actions(self, retry_state: "RetryCallState") -> None:                                       â”‚
           â”‚   397 â”‚   â”‚   if not (self.iter_state.is_explicit_retry or self.iter_state.retry_run_result):                               â”‚
           â”‚ â± 398 â”‚   â”‚   â”‚   self._add_action_func(lambda rs: rs.outcome.result())                                                     â”‚
           â”‚   399 â”‚   â”‚   â”‚   return                                                                                                    â”‚
           â”‚   400 â”‚   â”‚                                                                                                                 â”‚
           â”‚   401 â”‚   â”‚   if self.after is not None:                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:449 in result                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚   446 â”‚   â”‚   â”‚   â”‚   if self._state in [CANCELLED, CANCELLED_AND_NOTIFIED]:                                                â”‚
           â”‚   447 â”‚   â”‚   â”‚   â”‚   â”‚   raise CancelledError()                                                                            â”‚
           â”‚   448 â”‚   â”‚   â”‚   â”‚   elif self._state == FINISHED:                                                                         â”‚
           â”‚ â± 449 â”‚   â”‚   â”‚   â”‚   â”‚   return self.__get_result()                                                                        â”‚
           â”‚   450 â”‚   â”‚   â”‚   â”‚                                                                                                         â”‚
           â”‚   451 â”‚   â”‚   â”‚   â”‚   self._condition.wait(timeout)                                                                         â”‚
           â”‚   452                                                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:401 in __get_result                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   398 â”‚   def __get_result(self):                                                                                           â”‚
           â”‚   399 â”‚   â”‚   if self._exception:                                                                                           â”‚
           â”‚   400 â”‚   â”‚   â”‚   try:                                                                                                      â”‚
           â”‚ â± 401 â”‚   â”‚   â”‚   â”‚   raise self._exception                                                                                 â”‚
           â”‚   402 â”‚   â”‚   â”‚   finally:                                                                                                  â”‚
           â”‚   403 â”‚   â”‚   â”‚   â”‚   # Break a reference cycle with the exception in self._exception                                       â”‚
           â”‚   404 â”‚   â”‚   â”‚   â”‚   self = None                                                                                           â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:417 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   414 â”‚   â”‚   â”‚   â”‚   reraise=True,                                                                                         â”‚
           â”‚   415 â”‚   â”‚   â”‚   ):                                                                                                        â”‚
           â”‚   416 â”‚   â”‚   â”‚   â”‚   with attempt:  # Retrying if ToolSelector fails to select a tool                                      â”‚
           â”‚ â± 417 â”‚   â”‚   â”‚   â”‚   â”‚   action = await agent(agent_state.messages, tools)                                                 â”‚
           â”‚   418 â”‚   â”‚   â”‚   agent_state.messages = [*agent_state.messages, action]                                                    â”‚
           â”‚   419 â”‚   â”‚   â”‚   if on_agent_action_callback:                                                                              â”‚
           â”‚   420 â”‚   â”‚   â”‚   â”‚   await on_agent_action_callback(action, agent_state)                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aviary/tools/utils.py:182 in __call__                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   179 â”‚   â”‚   â”‚   self._ledger.messages.extend(messages)                                                                    â”‚
           â”‚   180 â”‚   â”‚   â”‚   messages = self._ledger.messages                                                                          â”‚
           â”‚   181 â”‚   â”‚                                                                                                                 â”‚
           â”‚ â± 182 â”‚   â”‚   model_response = await self._bound_acompletion(                                                               â”‚
           â”‚   183 â”‚   â”‚   â”‚   messages=MessagesAdapter.dump_python(                                                                     â”‚
           â”‚   184 â”‚   â”‚   â”‚   â”‚   messages, exclude_none=True, by_alias=True                                                            â”‚
           â”‚   185 â”‚   â”‚   â”‚   ),                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:817 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    814 â”‚   â”‚   â”‚   â”‚   â”‚   original_exception=e,                                                                            â”‚
           â”‚    815 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    816 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚ â±  817 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    818 â”‚                                                                                                                    â”‚
           â”‚    819 â”‚   async def _acompletion(                                                                                          â”‚
           â”‚    820 â”‚   â”‚   self, model: str, messages: List[Dict[str, str]], **kwargs                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:793 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    790 â”‚   â”‚   â”‚   if request_priority is not None and isinstance(request_priority, int):                                   â”‚
           â”‚    791 â”‚   â”‚   â”‚   â”‚   response = await self.schedule_acompletion(**kwargs)                                                 â”‚
           â”‚    792 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â±  793 â”‚   â”‚   â”‚   â”‚   response = await self.async_function_with_fallbacks(**kwargs)                                        â”‚
           â”‚    794 â”‚   â”‚   â”‚   end_time = time.time()                                                                                   â”‚
           â”‚    795 â”‚   â”‚   â”‚   _duration = end_time - start_time                                                                        â”‚
           â”‚    796 â”‚   â”‚   â”‚   asyncio.create_task(                                                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2795 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2792 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚   2793 â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                                â”‚
           â”‚   2794 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2795 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2796 â”‚                                                                                                                    â”‚
           â”‚   2797 â”‚   def _handle_mock_testing_fallbacks(                                                                              â”‚
           â”‚   2798 â”‚   â”‚   self,                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2631 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2628 â”‚   â”‚   â”‚   â”‚   content_policy_fallbacks=content_policy_fallbacks,                                                   â”‚
           â”‚   2629 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2630 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2631 â”‚   â”‚   â”‚   response = await self.async_function_with_retries(*args, **kwargs)                                       â”‚
           â”‚   2632 â”‚   â”‚   â”‚   verbose_router_logger.debug(f"Async Response: {response}")                                               â”‚
           â”‚   2633 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2634 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2967 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2964 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "max_retries", num_retries)                                              â”‚
           â”‚   2965 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "num_retries", current_attempt)                                          â”‚
           â”‚   2966 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2967 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2968 â”‚                                                                                                                    â”‚
           â”‚   2969 â”‚   async def make_call(self, original_function: Any, *args, **kwargs):                                              â”‚
           â”‚   2970 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2879 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2876 â”‚   â”‚   â”‚   â”‚   model_group=model_group, kwargs=kwargs                                                               â”‚
           â”‚   2877 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2878 â”‚   â”‚   â”‚   # if the function call is successful, no exception will be raised and we'll                              â”‚
           â”‚        break out of the loop                                                                                                â”‚
           â”‚ â± 2879 â”‚   â”‚   â”‚   response = await self.make_call(original_function, *args, **kwargs)                                      â”‚
           â”‚   2880 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   2881 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2882 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2976 in make_call                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2973 â”‚   â”‚   model_group = kwargs.get("model")                                                                            â”‚
           â”‚   2974 â”‚   â”‚   response = original_function(*args, **kwargs)                                                                â”‚
           â”‚   2975 â”‚   â”‚   if inspect.iscoroutinefunction(response) or inspect.isawaitable(response):                                   â”‚
           â”‚ â± 2976 â”‚   â”‚   â”‚   response = await response                                                                                â”‚
           â”‚   2977 â”‚   â”‚   ## PROCESS RESPONSE HEADERS                                                                                  â”‚
           â”‚   2978 â”‚   â”‚   await self.set_response_headers(response=response, model_group=model_group)                                  â”‚
           â”‚   2979                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:947 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    944 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚    945 â”‚   â”‚   â”‚   if model_name is not None:                                                                               â”‚
           â”‚    946 â”‚   â”‚   â”‚   â”‚   self.fail_calls[model_name] += 1                                                                     â”‚
           â”‚ â±  947 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    948 â”‚                                                                                                                    â”‚
           â”‚    949 â”‚   def _update_kwargs_before_fallbacks(self, model: str, kwargs: dict) -> None:                                     â”‚
           â”‚    950 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:915 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    912 â”‚   â”‚   â”‚   â”‚   â”‚   parent_otel_span=parent_otel_span,                                                               â”‚
           â”‚    913 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    914 â”‚   â”‚   â”‚   â”‚                                                                                                        â”‚
           â”‚ â±  915 â”‚   â”‚   â”‚   â”‚   response = await _response                                                                           â”‚
           â”‚    916 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚    917 â”‚   â”‚   â”‚   ## CHECK CONTENT FILTER ERROR ##                                                                         â”‚
           â”‚    918 â”‚   â”‚   â”‚   if isinstance(response, ModelResponse):                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1175 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1172 â”‚   â”‚   â”‚   â”‚   â”‚   else:                                                                                            â”‚
           â”‚   1173 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   kwargs["model"] = context_window_fallback_dict[model]                                        â”‚
           â”‚   1174 â”‚   â”‚   â”‚   â”‚   â”‚   return await original_function(*args, **kwargs)                                                  â”‚
           â”‚ â± 1175 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   1176 â”‚                                                                                                                    â”‚
           â”‚   1177 â”‚   is_coroutine = inspect.iscoroutinefunction(original_function)                                                    â”‚
           â”‚   1178                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1031 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1028 â”‚   â”‚   â”‚   â”‚   return _caching_handler_response.final_embedding_cached_response                                     â”‚
           â”‚   1029 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1030 â”‚   â”‚   â”‚   # MODEL CALL                                                                                             â”‚
           â”‚ â± 1031 â”‚   â”‚   â”‚   result = await original_function(*args, **kwargs)                                                        â”‚
           â”‚   1032 â”‚   â”‚   â”‚   end_time = datetime.datetime.now()                                                                       â”‚
           â”‚   1033 â”‚   â”‚   â”‚   if "stream" in kwargs and kwargs["stream"] is True:                                                      â”‚
           â”‚   1034 â”‚   â”‚   â”‚   â”‚   if (                                                                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:499 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    496 â”‚   â”‚   return response                                                                                              â”‚
           â”‚    497 â”‚   except Exception as e:                                                                                           â”‚
           â”‚    498 â”‚   â”‚   custom_llm_provider = custom_llm_provider or "openai"                                                        â”‚
           â”‚ â±  499 â”‚   â”‚   raise exception_type(                                                                                        â”‚
           â”‚    500 â”‚   â”‚   â”‚   model=model,                                                                                             â”‚
           â”‚    501 â”‚   â”‚   â”‚   custom_llm_provider=custom_llm_provider,                                                                 â”‚
           â”‚    502 â”‚   â”‚   â”‚   original_exception=e,                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:212 â”‚
           â”‚ 5 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2122 â”‚   â”‚   # don't let an error with mapping interrupt the user from receiving an error                                 â”‚
           â”‚        from the llm api calls                                                                                               â”‚
           â”‚   2123 â”‚   â”‚   if exception_mapping_worked:                                                                                 â”‚
           â”‚   2124 â”‚   â”‚   â”‚   setattr(e, "litellm_response_headers", litellm_response_headers)                                         â”‚
           â”‚ â± 2125 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   2126 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   2127 â”‚   â”‚   â”‚   for error_type in litellm.LITELLM_EXCEPTION_TYPES:                                                       â”‚
           â”‚   2128 â”‚   â”‚   â”‚   â”‚   if isinstance(e, error_type):                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:210 â”‚
           â”‚ 1 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2098 â”‚   â”‚   â”‚   â”‚   â”‚   request=original_exception.request,                                                              â”‚
           â”‚   2099 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚   2100 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â± 2101 â”‚   â”‚   â”‚   â”‚   raise APIConnectionError(                                                                            â”‚
           â”‚   2102 â”‚   â”‚   â”‚   â”‚   â”‚   message="{}\n{}".format(                                                                         â”‚
           â”‚   2103 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   str(original_exception), traceback.format_exc()                                              â”‚
           â”‚   2104 â”‚   â”‚   â”‚   â”‚   â”‚   ),                                                                                               â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           APIConnectionError: litellm.APIConnectionError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1109, in                 
           _wrap_create_connection                                                                                                        
               sock = await aiohappyeyeballs.start_connection(                                                                            
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                            
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py", line 123, in              
           start_connection                                                                                                               
               raise OSError(first_errno, msg)                                                                                            
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py", line 477, in acompletion           
               response = await init_response                                                                                             
                          ^^^^^^^^^^^^^^^^^^^                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 566, in                
           ollama_acompletion                                                                                                             
               raise e  # don't use verbose_logger.exception, if exception is raised                                                      
               ^^^^^^^                                                                                                                    
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 507, in                
           ollama_acompletion                                                                                                             
               resp = await session.post(url, json=data)                                                                                  
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                  
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py", line 696, in _request            
               conn = await self._connector.connect(                                                                                      
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 544, in connect          
               proto = await self._create_connection(req, traces, timeout)                                                                
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1050, in                 
           _create_connection                                                                                                             
               _, proto = await self._create_direct_connection(req, traces, timeout)                                                      
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1394, in                 
           _create_direct_connection                                                                                                      
               raise last_exc                                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1363, in                 
           _create_direct_connection                                                                                                      
               transp, proto = await self._wrap_create_connection(                                                                        
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                        
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1124, in                 
           _wrap_create_connection                                                                                                        
               raise client_error(req.connection_key, exc) from exc                                                                       
           aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
                                                                                                                                          
           Received Model Group=ollama/llama3.2                                                                                           
           Available Model Group Fallbacks=None LiteLLM Retried: 2 times, LiteLLM Max Retries: 3                                          
[01:07:06] Answer:                                                                                                                        


 ANSWERING QUESTION: sciqag_question_93.json
 ----------------------------- 



[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.

[01:07:26] Trajectory failed.                                                                                                             
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1109 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1106 â”‚   â”‚   â”‚   async with ceil_timeout(                                                                                 â”‚
           â”‚   1107 â”‚   â”‚   â”‚   â”‚   timeout.sock_connect, ceil_threshold=timeout.ceil_threshold                                          â”‚
           â”‚   1108 â”‚   â”‚   â”‚   ):                                                                                                       â”‚
           â”‚ â± 1109 â”‚   â”‚   â”‚   â”‚   sock = await aiohappyeyeballs.start_connection(                                                      â”‚
           â”‚   1110 â”‚   â”‚   â”‚   â”‚   â”‚   addr_infos=addr_infos,                                                                           â”‚
           â”‚   1111 â”‚   â”‚   â”‚   â”‚   â”‚   local_addr_infos=self._local_addr_infos,                                                         â”‚
           â”‚   1112 â”‚   â”‚   â”‚   â”‚   â”‚   happy_eyeballs_delay=self._happy_eyeballs_delay,                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py:123 in start_connection          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   120 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, OSError) and exc.errno == first_errno                                         â”‚
           â”‚   121 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   for exc in all_exceptions                                                                     â”‚
           â”‚   122 â”‚   â”‚   â”‚   â”‚   â”‚   ):                                                                                                â”‚
           â”‚ â± 123 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   raise OSError(first_errno, msg)                                                               â”‚
           â”‚   124 â”‚   â”‚   â”‚   â”‚   elif isinstance(first_exception, RuntimeError) and all(                                               â”‚
           â”‚   125 â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, RuntimeError) for exc in all_exceptions                                           â”‚
           â”‚   126 â”‚   â”‚   â”‚   â”‚   ):                                                                                                    â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:477 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    474 â”‚   â”‚   â”‚   â”‚   â”‚   response = ModelResponse(**init_response)                                                        â”‚
           â”‚    475 â”‚   â”‚   â”‚   â”‚   response = init_response                                                                             â”‚
           â”‚    476 â”‚   â”‚   â”‚   elif asyncio.iscoroutine(init_response):                                                                 â”‚
           â”‚ â±  477 â”‚   â”‚   â”‚   â”‚   response = await init_response                                                                       â”‚
           â”‚    478 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚    479 â”‚   â”‚   â”‚   â”‚   response = init_response  # type: ignore                                                             â”‚
           â”‚    480                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:566 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   563 â”‚   â”‚   â”‚   )                                                                                                         â”‚
           â”‚   564 â”‚   â”‚   â”‚   return model_response                                                                                     â”‚
           â”‚   565 â”‚   except Exception as e:                                                                                            â”‚
           â”‚ â± 566 â”‚   â”‚   raise e  # don't use verbose_logger.exception, if exception is raised                                         â”‚
           â”‚   567                                                                                                                       â”‚
           â”‚   568                                                                                                                       â”‚
           â”‚   569 async def ollama_aembeddings(                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:507 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   504 â”‚   try:                                                                                                              â”‚
           â”‚   505 â”‚   â”‚   timeout = aiohttp.ClientTimeout(total=litellm.request_timeout)  # 10 minutes                                  â”‚
           â”‚   506 â”‚   â”‚   async with aiohttp.ClientSession(timeout=timeout) as session:                                                 â”‚
           â”‚ â± 507 â”‚   â”‚   â”‚   resp = await session.post(url, json=data)                                                                 â”‚
           â”‚   508 â”‚   â”‚   â”‚                                                                                                             â”‚
           â”‚   509 â”‚   â”‚   â”‚   if resp.status != 200:                                                                                    â”‚
           â”‚   510 â”‚   â”‚   â”‚   â”‚   text = await resp.text()                                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py:696 in _request                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚    693 â”‚   â”‚   â”‚   â”‚   â”‚                                                                                                    â”‚
           â”‚    694 â”‚   â”‚   â”‚   â”‚   â”‚   # connection timeout                                                                             â”‚
           â”‚    695 â”‚   â”‚   â”‚   â”‚   â”‚   try:                                                                                             â”‚
           â”‚ â±  696 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   conn = await self._connector.connect(                                                        â”‚
           â”‚    697 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   req, traces=traces, timeout=real_timeout                                                 â”‚
           â”‚    698 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚    699 â”‚   â”‚   â”‚   â”‚   â”‚   except asyncio.TimeoutError as exc:                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:544 in connect                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚    541 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    542 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    543 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_start()                                                   â”‚
           â”‚ â±  544 â”‚   â”‚   â”‚   â”‚   proto = await self._create_connection(req, traces, timeout)                                          â”‚
           â”‚    545 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    546 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    547 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_end()                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1050 in _create_connection           â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1047 â”‚   â”‚   if req.proxy:                                                                                                â”‚
           â”‚   1048 â”‚   â”‚   â”‚   _, proto = await self._create_proxy_connection(req, traces, timeout)                                     â”‚
           â”‚   1049 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚ â± 1050 â”‚   â”‚   â”‚   _, proto = await self._create_direct_connection(req, traces, timeout)                                    â”‚
           â”‚   1051 â”‚   â”‚                                                                                                                â”‚
           â”‚   1052 â”‚   â”‚   return proto                                                                                                 â”‚
           â”‚   1053                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1394 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1391 â”‚   â”‚   â”‚   return transp, proto                                                                                     â”‚
           â”‚   1392 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   1393 â”‚   â”‚   â”‚   assert last_exc is not None                                                                              â”‚
           â”‚ â± 1394 â”‚   â”‚   â”‚   raise last_exc                                                                                           â”‚
           â”‚   1395 â”‚                                                                                                                    â”‚
           â”‚   1396 â”‚   async def _create_proxy_connection(                                                                              â”‚
           â”‚   1397 â”‚   â”‚   self, req: ClientRequest, traces: List["Trace"], timeout: "ClientTimeout"                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1363 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1360 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   1361 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1362 â”‚   â”‚   â”‚   try:                                                                                                     â”‚
           â”‚ â± 1363 â”‚   â”‚   â”‚   â”‚   transp, proto = await self._wrap_create_connection(                                                  â”‚
           â”‚   1364 â”‚   â”‚   â”‚   â”‚   â”‚   self._factory,                                                                                   â”‚
           â”‚   1365 â”‚   â”‚   â”‚   â”‚   â”‚   timeout=timeout,                                                                                 â”‚
           â”‚   1366 â”‚   â”‚   â”‚   â”‚   â”‚   ssl=sslcontext,                                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1124 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1121 â”‚   â”‚   except OSError as exc:                                                                                       â”‚
           â”‚   1122 â”‚   â”‚   â”‚   if exc.errno is None and isinstance(exc, asyncio.TimeoutError):                                          â”‚
           â”‚   1123 â”‚   â”‚   â”‚   â”‚   raise                                                                                                â”‚
           â”‚ â± 1124 â”‚   â”‚   â”‚   raise client_error(req.connection_key, exc) from exc                                                     â”‚
           â”‚   1125 â”‚                                                                                                                    â”‚
           â”‚   1126 â”‚   async def _wrap_existing_connection(                                                                             â”‚
           â”‚   1127 â”‚   â”‚   self,                                                                                                        â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno 111] Connect call failed 
           ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                                                    
                                                                                                                                          
           During handling of the above exception, another exception occurred:                                                            
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:276 in _run_with_timeout_failure                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   273 ) -> tuple[PQASession, AgentStatus]:                                                                                  â”‚
           â”‚   274 â”‚   try:                                                                                                              â”‚
           â”‚   275 â”‚   â”‚   async with asyncio.timeout(query.settings.agent.timeout):                                                     â”‚
           â”‚ â± 276 â”‚   â”‚   â”‚   status = await rollout()                                                                                  â”‚
           â”‚   277 â”‚   except TimeoutError:                                                                                              â”‚
           â”‚   278 â”‚   â”‚   logger.warning(                                                                                               â”‚
           â”‚   279 â”‚   â”‚   â”‚   f"Agent timeout after {query.settings.agent.timeout}-sec, just answering."                                â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:410 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   407 â”‚   â”‚   â”‚   â”‚   )                                                                                                     â”‚
           â”‚   408 â”‚   â”‚   â”‚   â”‚   return AgentStatus.TRUNCATED                                                                          â”‚
           â”‚   409 â”‚   â”‚   â”‚   agent_state.messages += obs                                                                               â”‚
           â”‚ â± 410 â”‚   â”‚   â”‚   for attempt in Retrying(                                                                                  â”‚
           â”‚   411 â”‚   â”‚   â”‚   â”‚   stop=stop_after_attempt(5),                                                                           â”‚
           â”‚   412 â”‚   â”‚   â”‚   â”‚   retry=retry_if_exception_type(MalformedMessageError),                                                 â”‚
           â”‚   413 â”‚   â”‚   â”‚   â”‚   before_sleep=before_sleep_log(logger, logging.WARNING),                                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:443 in __iter__                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   440 â”‚   â”‚                                                                                                                 â”‚
           â”‚   441 â”‚   â”‚   retry_state = RetryCallState(self, fn=None, args=(), kwargs={})                                               â”‚
           â”‚   442 â”‚   â”‚   while True:                                                                                                   â”‚
           â”‚ â± 443 â”‚   â”‚   â”‚   do = self.iter(retry_state=retry_state)                                                                   â”‚
           â”‚   444 â”‚   â”‚   â”‚   if isinstance(do, DoAttempt):                                                                             â”‚
           â”‚   445 â”‚   â”‚   â”‚   â”‚   yield AttemptManager(retry_state=retry_state)                                                         â”‚
           â”‚   446 â”‚   â”‚   â”‚   elif isinstance(do, DoSleep):                                                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:376 in iter                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   373 â”‚   â”‚   self._begin_iter(retry_state)                                                                                 â”‚
           â”‚   374 â”‚   â”‚   result = None                                                                                                 â”‚
           â”‚   375 â”‚   â”‚   for action in self.iter_state.actions:                                                                        â”‚
           â”‚ â± 376 â”‚   â”‚   â”‚   result = action(retry_state)                                                                              â”‚
           â”‚   377 â”‚   â”‚   return result                                                                                                 â”‚
           â”‚   378 â”‚                                                                                                                     â”‚
           â”‚   379 â”‚   def _begin_iter(self, retry_state: "RetryCallState") -> None:  # noqa                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:398 in <lambda>                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   395 â”‚                                                                                                                     â”‚
           â”‚   396 â”‚   def _post_retry_check_actions(self, retry_state: "RetryCallState") -> None:                                       â”‚
           â”‚   397 â”‚   â”‚   if not (self.iter_state.is_explicit_retry or self.iter_state.retry_run_result):                               â”‚
           â”‚ â± 398 â”‚   â”‚   â”‚   self._add_action_func(lambda rs: rs.outcome.result())                                                     â”‚
           â”‚   399 â”‚   â”‚   â”‚   return                                                                                                    â”‚
           â”‚   400 â”‚   â”‚                                                                                                                 â”‚
           â”‚   401 â”‚   â”‚   if self.after is not None:                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:449 in result                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚   446 â”‚   â”‚   â”‚   â”‚   if self._state in [CANCELLED, CANCELLED_AND_NOTIFIED]:                                                â”‚
           â”‚   447 â”‚   â”‚   â”‚   â”‚   â”‚   raise CancelledError()                                                                            â”‚
           â”‚   448 â”‚   â”‚   â”‚   â”‚   elif self._state == FINISHED:                                                                         â”‚
           â”‚ â± 449 â”‚   â”‚   â”‚   â”‚   â”‚   return self.__get_result()                                                                        â”‚
           â”‚   450 â”‚   â”‚   â”‚   â”‚                                                                                                         â”‚
           â”‚   451 â”‚   â”‚   â”‚   â”‚   self._condition.wait(timeout)                                                                         â”‚
           â”‚   452                                                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:401 in __get_result                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   398 â”‚   def __get_result(self):                                                                                           â”‚
           â”‚   399 â”‚   â”‚   if self._exception:                                                                                           â”‚
           â”‚   400 â”‚   â”‚   â”‚   try:                                                                                                      â”‚
           â”‚ â± 401 â”‚   â”‚   â”‚   â”‚   raise self._exception                                                                                 â”‚
           â”‚   402 â”‚   â”‚   â”‚   finally:                                                                                                  â”‚
           â”‚   403 â”‚   â”‚   â”‚   â”‚   # Break a reference cycle with the exception in self._exception                                       â”‚
           â”‚   404 â”‚   â”‚   â”‚   â”‚   self = None                                                                                           â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:417 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   414 â”‚   â”‚   â”‚   â”‚   reraise=True,                                                                                         â”‚
           â”‚   415 â”‚   â”‚   â”‚   ):                                                                                                        â”‚
           â”‚   416 â”‚   â”‚   â”‚   â”‚   with attempt:  # Retrying if ToolSelector fails to select a tool                                      â”‚
           â”‚ â± 417 â”‚   â”‚   â”‚   â”‚   â”‚   action = await agent(agent_state.messages, tools)                                                 â”‚
           â”‚   418 â”‚   â”‚   â”‚   agent_state.messages = [*agent_state.messages, action]                                                    â”‚
           â”‚   419 â”‚   â”‚   â”‚   if on_agent_action_callback:                                                                              â”‚
           â”‚   420 â”‚   â”‚   â”‚   â”‚   await on_agent_action_callback(action, agent_state)                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aviary/tools/utils.py:182 in __call__                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   179 â”‚   â”‚   â”‚   self._ledger.messages.extend(messages)                                                                    â”‚
           â”‚   180 â”‚   â”‚   â”‚   messages = self._ledger.messages                                                                          â”‚
           â”‚   181 â”‚   â”‚                                                                                                                 â”‚
           â”‚ â± 182 â”‚   â”‚   model_response = await self._bound_acompletion(                                                               â”‚
           â”‚   183 â”‚   â”‚   â”‚   messages=MessagesAdapter.dump_python(                                                                     â”‚
           â”‚   184 â”‚   â”‚   â”‚   â”‚   messages, exclude_none=True, by_alias=True                                                            â”‚
           â”‚   185 â”‚   â”‚   â”‚   ),                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:817 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    814 â”‚   â”‚   â”‚   â”‚   â”‚   original_exception=e,                                                                            â”‚
           â”‚    815 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    816 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚ â±  817 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    818 â”‚                                                                                                                    â”‚
           â”‚    819 â”‚   async def _acompletion(                                                                                          â”‚
           â”‚    820 â”‚   â”‚   self, model: str, messages: List[Dict[str, str]], **kwargs                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:793 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    790 â”‚   â”‚   â”‚   if request_priority is not None and isinstance(request_priority, int):                                   â”‚
           â”‚    791 â”‚   â”‚   â”‚   â”‚   response = await self.schedule_acompletion(**kwargs)                                                 â”‚
           â”‚    792 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â±  793 â”‚   â”‚   â”‚   â”‚   response = await self.async_function_with_fallbacks(**kwargs)                                        â”‚
           â”‚    794 â”‚   â”‚   â”‚   end_time = time.time()                                                                                   â”‚
           â”‚    795 â”‚   â”‚   â”‚   _duration = end_time - start_time                                                                        â”‚
           â”‚    796 â”‚   â”‚   â”‚   asyncio.create_task(                                                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2795 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2792 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚   2793 â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                                â”‚
           â”‚   2794 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2795 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2796 â”‚                                                                                                                    â”‚
           â”‚   2797 â”‚   def _handle_mock_testing_fallbacks(                                                                              â”‚
           â”‚   2798 â”‚   â”‚   self,                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2631 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2628 â”‚   â”‚   â”‚   â”‚   content_policy_fallbacks=content_policy_fallbacks,                                                   â”‚
           â”‚   2629 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2630 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2631 â”‚   â”‚   â”‚   response = await self.async_function_with_retries(*args, **kwargs)                                       â”‚
           â”‚   2632 â”‚   â”‚   â”‚   verbose_router_logger.debug(f"Async Response: {response}")                                               â”‚
           â”‚   2633 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2634 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2967 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2964 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "max_retries", num_retries)                                              â”‚
           â”‚   2965 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "num_retries", current_attempt)                                          â”‚
           â”‚   2966 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2967 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2968 â”‚                                                                                                                    â”‚
           â”‚   2969 â”‚   async def make_call(self, original_function: Any, *args, **kwargs):                                              â”‚
           â”‚   2970 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2879 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2876 â”‚   â”‚   â”‚   â”‚   model_group=model_group, kwargs=kwargs                                                               â”‚
           â”‚   2877 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2878 â”‚   â”‚   â”‚   # if the function call is successful, no exception will be raised and we'll                              â”‚
           â”‚        break out of the loop                                                                                                â”‚
           â”‚ â± 2879 â”‚   â”‚   â”‚   response = await self.make_call(original_function, *args, **kwargs)                                      â”‚
           â”‚   2880 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   2881 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2882 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2976 in make_call                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2973 â”‚   â”‚   model_group = kwargs.get("model")                                                                            â”‚
           â”‚   2974 â”‚   â”‚   response = original_function(*args, **kwargs)                                                                â”‚
           â”‚   2975 â”‚   â”‚   if inspect.iscoroutinefunction(response) or inspect.isawaitable(response):                                   â”‚
           â”‚ â± 2976 â”‚   â”‚   â”‚   response = await response                                                                                â”‚
           â”‚   2977 â”‚   â”‚   ## PROCESS RESPONSE HEADERS                                                                                  â”‚
           â”‚   2978 â”‚   â”‚   await self.set_response_headers(response=response, model_group=model_group)                                  â”‚
           â”‚   2979                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:947 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    944 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚    945 â”‚   â”‚   â”‚   if model_name is not None:                                                                               â”‚
           â”‚    946 â”‚   â”‚   â”‚   â”‚   self.fail_calls[model_name] += 1                                                                     â”‚
           â”‚ â±  947 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    948 â”‚                                                                                                                    â”‚
           â”‚    949 â”‚   def _update_kwargs_before_fallbacks(self, model: str, kwargs: dict) -> None:                                     â”‚
           â”‚    950 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:915 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    912 â”‚   â”‚   â”‚   â”‚   â”‚   parent_otel_span=parent_otel_span,                                                               â”‚
           â”‚    913 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    914 â”‚   â”‚   â”‚   â”‚                                                                                                        â”‚
           â”‚ â±  915 â”‚   â”‚   â”‚   â”‚   response = await _response                                                                           â”‚
           â”‚    916 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚    917 â”‚   â”‚   â”‚   ## CHECK CONTENT FILTER ERROR ##                                                                         â”‚
           â”‚    918 â”‚   â”‚   â”‚   if isinstance(response, ModelResponse):                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1175 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1172 â”‚   â”‚   â”‚   â”‚   â”‚   else:                                                                                            â”‚
           â”‚   1173 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   kwargs["model"] = context_window_fallback_dict[model]                                        â”‚
           â”‚   1174 â”‚   â”‚   â”‚   â”‚   â”‚   return await original_function(*args, **kwargs)                                                  â”‚
           â”‚ â± 1175 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   1176 â”‚                                                                                                                    â”‚
           â”‚   1177 â”‚   is_coroutine = inspect.iscoroutinefunction(original_function)                                                    â”‚
           â”‚   1178                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1031 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1028 â”‚   â”‚   â”‚   â”‚   return _caching_handler_response.final_embedding_cached_response                                     â”‚
           â”‚   1029 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1030 â”‚   â”‚   â”‚   # MODEL CALL                                                                                             â”‚
           â”‚ â± 1031 â”‚   â”‚   â”‚   result = await original_function(*args, **kwargs)                                                        â”‚
           â”‚   1032 â”‚   â”‚   â”‚   end_time = datetime.datetime.now()                                                                       â”‚
           â”‚   1033 â”‚   â”‚   â”‚   if "stream" in kwargs and kwargs["stream"] is True:                                                      â”‚
           â”‚   1034 â”‚   â”‚   â”‚   â”‚   if (                                                                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:499 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    496 â”‚   â”‚   return response                                                                                              â”‚
           â”‚    497 â”‚   except Exception as e:                                                                                           â”‚
           â”‚    498 â”‚   â”‚   custom_llm_provider = custom_llm_provider or "openai"                                                        â”‚
           â”‚ â±  499 â”‚   â”‚   raise exception_type(                                                                                        â”‚
           â”‚    500 â”‚   â”‚   â”‚   model=model,                                                                                             â”‚
           â”‚    501 â”‚   â”‚   â”‚   custom_llm_provider=custom_llm_provider,                                                                 â”‚
           â”‚    502 â”‚   â”‚   â”‚   original_exception=e,                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:212 â”‚
           â”‚ 5 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2122 â”‚   â”‚   # don't let an error with mapping interrupt the user from receiving an error                                 â”‚
           â”‚        from the llm api calls                                                                                               â”‚
           â”‚   2123 â”‚   â”‚   if exception_mapping_worked:                                                                                 â”‚
           â”‚   2124 â”‚   â”‚   â”‚   setattr(e, "litellm_response_headers", litellm_response_headers)                                         â”‚
           â”‚ â± 2125 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   2126 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   2127 â”‚   â”‚   â”‚   for error_type in litellm.LITELLM_EXCEPTION_TYPES:                                                       â”‚
           â”‚   2128 â”‚   â”‚   â”‚   â”‚   if isinstance(e, error_type):                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:210 â”‚
           â”‚ 1 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2098 â”‚   â”‚   â”‚   â”‚   â”‚   request=original_exception.request,                                                              â”‚
           â”‚   2099 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚   2100 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â± 2101 â”‚   â”‚   â”‚   â”‚   raise APIConnectionError(                                                                            â”‚
           â”‚   2102 â”‚   â”‚   â”‚   â”‚   â”‚   message="{}\n{}".format(                                                                         â”‚
           â”‚   2103 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   str(original_exception), traceback.format_exc()                                              â”‚
           â”‚   2104 â”‚   â”‚   â”‚   â”‚   â”‚   ),                                                                                               â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           APIConnectionError: litellm.APIConnectionError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1109, in                 
           _wrap_create_connection                                                                                                        
               sock = await aiohappyeyeballs.start_connection(                                                                            
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                            
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py", line 123, in              
           start_connection                                                                                                               
               raise OSError(first_errno, msg)                                                                                            
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py", line 477, in acompletion           
               response = await init_response                                                                                             
                          ^^^^^^^^^^^^^^^^^^^                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 566, in                
           ollama_acompletion                                                                                                             
               raise e  # don't use verbose_logger.exception, if exception is raised                                                      
               ^^^^^^^                                                                                                                    
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 507, in                
           ollama_acompletion                                                                                                             
               resp = await session.post(url, json=data)                                                                                  
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                  
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py", line 696, in _request            
               conn = await self._connector.connect(                                                                                      
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 544, in connect          
               proto = await self._create_connection(req, traces, timeout)                                                                
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1050, in                 
           _create_connection                                                                                                             
               _, proto = await self._create_direct_connection(req, traces, timeout)                                                      
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1394, in                 
           _create_direct_connection                                                                                                      
               raise last_exc                                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1363, in                 
           _create_direct_connection                                                                                                      
               transp, proto = await self._wrap_create_connection(                                                                        
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                        
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1124, in                 
           _wrap_create_connection                                                                                                        
               raise client_error(req.connection_key, exc) from exc                                                                       
           aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
                                                                                                                                          
           Received Model Group=ollama/llama3.2                                                                                           
           Available Model Group Fallbacks=None LiteLLM Retried: 2 times, LiteLLM Max Retries: 3                                          
[01:07:28] Answer:                                                                                                                        


 ANSWERING QUESTION: sciqag_question_94.json
 ----------------------------- 



[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.

[01:07:48] Trajectory failed.                                                                                                             
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1109 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1106 â”‚   â”‚   â”‚   async with ceil_timeout(                                                                                 â”‚
           â”‚   1107 â”‚   â”‚   â”‚   â”‚   timeout.sock_connect, ceil_threshold=timeout.ceil_threshold                                          â”‚
           â”‚   1108 â”‚   â”‚   â”‚   ):                                                                                                       â”‚
           â”‚ â± 1109 â”‚   â”‚   â”‚   â”‚   sock = await aiohappyeyeballs.start_connection(                                                      â”‚
           â”‚   1110 â”‚   â”‚   â”‚   â”‚   â”‚   addr_infos=addr_infos,                                                                           â”‚
           â”‚   1111 â”‚   â”‚   â”‚   â”‚   â”‚   local_addr_infos=self._local_addr_infos,                                                         â”‚
           â”‚   1112 â”‚   â”‚   â”‚   â”‚   â”‚   happy_eyeballs_delay=self._happy_eyeballs_delay,                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py:123 in start_connection          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   120 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, OSError) and exc.errno == first_errno                                         â”‚
           â”‚   121 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   for exc in all_exceptions                                                                     â”‚
           â”‚   122 â”‚   â”‚   â”‚   â”‚   â”‚   ):                                                                                                â”‚
           â”‚ â± 123 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   raise OSError(first_errno, msg)                                                               â”‚
           â”‚   124 â”‚   â”‚   â”‚   â”‚   elif isinstance(first_exception, RuntimeError) and all(                                               â”‚
           â”‚   125 â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, RuntimeError) for exc in all_exceptions                                           â”‚
           â”‚   126 â”‚   â”‚   â”‚   â”‚   ):                                                                                                    â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:477 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    474 â”‚   â”‚   â”‚   â”‚   â”‚   response = ModelResponse(**init_response)                                                        â”‚
           â”‚    475 â”‚   â”‚   â”‚   â”‚   response = init_response                                                                             â”‚
           â”‚    476 â”‚   â”‚   â”‚   elif asyncio.iscoroutine(init_response):                                                                 â”‚
           â”‚ â±  477 â”‚   â”‚   â”‚   â”‚   response = await init_response                                                                       â”‚
           â”‚    478 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚    479 â”‚   â”‚   â”‚   â”‚   response = init_response  # type: ignore                                                             â”‚
           â”‚    480                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:566 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   563 â”‚   â”‚   â”‚   )                                                                                                         â”‚
           â”‚   564 â”‚   â”‚   â”‚   return model_response                                                                                     â”‚
           â”‚   565 â”‚   except Exception as e:                                                                                            â”‚
           â”‚ â± 566 â”‚   â”‚   raise e  # don't use verbose_logger.exception, if exception is raised                                         â”‚
           â”‚   567                                                                                                                       â”‚
           â”‚   568                                                                                                                       â”‚
           â”‚   569 async def ollama_aembeddings(                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:507 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   504 â”‚   try:                                                                                                              â”‚
           â”‚   505 â”‚   â”‚   timeout = aiohttp.ClientTimeout(total=litellm.request_timeout)  # 10 minutes                                  â”‚
           â”‚   506 â”‚   â”‚   async with aiohttp.ClientSession(timeout=timeout) as session:                                                 â”‚
           â”‚ â± 507 â”‚   â”‚   â”‚   resp = await session.post(url, json=data)                                                                 â”‚
           â”‚   508 â”‚   â”‚   â”‚                                                                                                             â”‚
           â”‚   509 â”‚   â”‚   â”‚   if resp.status != 200:                                                                                    â”‚
           â”‚   510 â”‚   â”‚   â”‚   â”‚   text = await resp.text()                                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py:696 in _request                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚    693 â”‚   â”‚   â”‚   â”‚   â”‚                                                                                                    â”‚
           â”‚    694 â”‚   â”‚   â”‚   â”‚   â”‚   # connection timeout                                                                             â”‚
           â”‚    695 â”‚   â”‚   â”‚   â”‚   â”‚   try:                                                                                             â”‚
           â”‚ â±  696 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   conn = await self._connector.connect(                                                        â”‚
           â”‚    697 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   req, traces=traces, timeout=real_timeout                                                 â”‚
           â”‚    698 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚    699 â”‚   â”‚   â”‚   â”‚   â”‚   except asyncio.TimeoutError as exc:                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:544 in connect                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚    541 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    542 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    543 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_start()                                                   â”‚
           â”‚ â±  544 â”‚   â”‚   â”‚   â”‚   proto = await self._create_connection(req, traces, timeout)                                          â”‚
           â”‚    545 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    546 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    547 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_end()                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1050 in _create_connection           â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1047 â”‚   â”‚   if req.proxy:                                                                                                â”‚
           â”‚   1048 â”‚   â”‚   â”‚   _, proto = await self._create_proxy_connection(req, traces, timeout)                                     â”‚
           â”‚   1049 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚ â± 1050 â”‚   â”‚   â”‚   _, proto = await self._create_direct_connection(req, traces, timeout)                                    â”‚
           â”‚   1051 â”‚   â”‚                                                                                                                â”‚
           â”‚   1052 â”‚   â”‚   return proto                                                                                                 â”‚
           â”‚   1053                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1394 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1391 â”‚   â”‚   â”‚   return transp, proto                                                                                     â”‚
           â”‚   1392 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   1393 â”‚   â”‚   â”‚   assert last_exc is not None                                                                              â”‚
           â”‚ â± 1394 â”‚   â”‚   â”‚   raise last_exc                                                                                           â”‚
           â”‚   1395 â”‚                                                                                                                    â”‚
           â”‚   1396 â”‚   async def _create_proxy_connection(                                                                              â”‚
           â”‚   1397 â”‚   â”‚   self, req: ClientRequest, traces: List["Trace"], timeout: "ClientTimeout"                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1363 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1360 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   1361 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1362 â”‚   â”‚   â”‚   try:                                                                                                     â”‚
           â”‚ â± 1363 â”‚   â”‚   â”‚   â”‚   transp, proto = await self._wrap_create_connection(                                                  â”‚
           â”‚   1364 â”‚   â”‚   â”‚   â”‚   â”‚   self._factory,                                                                                   â”‚
           â”‚   1365 â”‚   â”‚   â”‚   â”‚   â”‚   timeout=timeout,                                                                                 â”‚
           â”‚   1366 â”‚   â”‚   â”‚   â”‚   â”‚   ssl=sslcontext,                                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1124 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1121 â”‚   â”‚   except OSError as exc:                                                                                       â”‚
           â”‚   1122 â”‚   â”‚   â”‚   if exc.errno is None and isinstance(exc, asyncio.TimeoutError):                                          â”‚
           â”‚   1123 â”‚   â”‚   â”‚   â”‚   raise                                                                                                â”‚
           â”‚ â± 1124 â”‚   â”‚   â”‚   raise client_error(req.connection_key, exc) from exc                                                     â”‚
           â”‚   1125 â”‚                                                                                                                    â”‚
           â”‚   1126 â”‚   async def _wrap_existing_connection(                                                                             â”‚
           â”‚   1127 â”‚   â”‚   self,                                                                                                        â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno 111] Connect call failed 
           ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                                                    
                                                                                                                                          
           During handling of the above exception, another exception occurred:                                                            
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:276 in _run_with_timeout_failure                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   273 ) -> tuple[PQASession, AgentStatus]:                                                                                  â”‚
           â”‚   274 â”‚   try:                                                                                                              â”‚
           â”‚   275 â”‚   â”‚   async with asyncio.timeout(query.settings.agent.timeout):                                                     â”‚
           â”‚ â± 276 â”‚   â”‚   â”‚   status = await rollout()                                                                                  â”‚
           â”‚   277 â”‚   except TimeoutError:                                                                                              â”‚
           â”‚   278 â”‚   â”‚   logger.warning(                                                                                               â”‚
           â”‚   279 â”‚   â”‚   â”‚   f"Agent timeout after {query.settings.agent.timeout}-sec, just answering."                                â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:410 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   407 â”‚   â”‚   â”‚   â”‚   )                                                                                                     â”‚
           â”‚   408 â”‚   â”‚   â”‚   â”‚   return AgentStatus.TRUNCATED                                                                          â”‚
           â”‚   409 â”‚   â”‚   â”‚   agent_state.messages += obs                                                                               â”‚
           â”‚ â± 410 â”‚   â”‚   â”‚   for attempt in Retrying(                                                                                  â”‚
           â”‚   411 â”‚   â”‚   â”‚   â”‚   stop=stop_after_attempt(5),                                                                           â”‚
           â”‚   412 â”‚   â”‚   â”‚   â”‚   retry=retry_if_exception_type(MalformedMessageError),                                                 â”‚
           â”‚   413 â”‚   â”‚   â”‚   â”‚   before_sleep=before_sleep_log(logger, logging.WARNING),                                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:443 in __iter__                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   440 â”‚   â”‚                                                                                                                 â”‚
           â”‚   441 â”‚   â”‚   retry_state = RetryCallState(self, fn=None, args=(), kwargs={})                                               â”‚
           â”‚   442 â”‚   â”‚   while True:                                                                                                   â”‚
           â”‚ â± 443 â”‚   â”‚   â”‚   do = self.iter(retry_state=retry_state)                                                                   â”‚
           â”‚   444 â”‚   â”‚   â”‚   if isinstance(do, DoAttempt):                                                                             â”‚
           â”‚   445 â”‚   â”‚   â”‚   â”‚   yield AttemptManager(retry_state=retry_state)                                                         â”‚
           â”‚   446 â”‚   â”‚   â”‚   elif isinstance(do, DoSleep):                                                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:376 in iter                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   373 â”‚   â”‚   self._begin_iter(retry_state)                                                                                 â”‚
           â”‚   374 â”‚   â”‚   result = None                                                                                                 â”‚
           â”‚   375 â”‚   â”‚   for action in self.iter_state.actions:                                                                        â”‚
           â”‚ â± 376 â”‚   â”‚   â”‚   result = action(retry_state)                                                                              â”‚
           â”‚   377 â”‚   â”‚   return result                                                                                                 â”‚
           â”‚   378 â”‚                                                                                                                     â”‚
           â”‚   379 â”‚   def _begin_iter(self, retry_state: "RetryCallState") -> None:  # noqa                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:398 in <lambda>                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   395 â”‚                                                                                                                     â”‚
           â”‚   396 â”‚   def _post_retry_check_actions(self, retry_state: "RetryCallState") -> None:                                       â”‚
           â”‚   397 â”‚   â”‚   if not (self.iter_state.is_explicit_retry or self.iter_state.retry_run_result):                               â”‚
           â”‚ â± 398 â”‚   â”‚   â”‚   self._add_action_func(lambda rs: rs.outcome.result())                                                     â”‚
           â”‚   399 â”‚   â”‚   â”‚   return                                                                                                    â”‚
           â”‚   400 â”‚   â”‚                                                                                                                 â”‚
           â”‚   401 â”‚   â”‚   if self.after is not None:                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:449 in result                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚   446 â”‚   â”‚   â”‚   â”‚   if self._state in [CANCELLED, CANCELLED_AND_NOTIFIED]:                                                â”‚
           â”‚   447 â”‚   â”‚   â”‚   â”‚   â”‚   raise CancelledError()                                                                            â”‚
           â”‚   448 â”‚   â”‚   â”‚   â”‚   elif self._state == FINISHED:                                                                         â”‚
           â”‚ â± 449 â”‚   â”‚   â”‚   â”‚   â”‚   return self.__get_result()                                                                        â”‚
           â”‚   450 â”‚   â”‚   â”‚   â”‚                                                                                                         â”‚
           â”‚   451 â”‚   â”‚   â”‚   â”‚   self._condition.wait(timeout)                                                                         â”‚
           â”‚   452                                                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:401 in __get_result                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   398 â”‚   def __get_result(self):                                                                                           â”‚
           â”‚   399 â”‚   â”‚   if self._exception:                                                                                           â”‚
           â”‚   400 â”‚   â”‚   â”‚   try:                                                                                                      â”‚
           â”‚ â± 401 â”‚   â”‚   â”‚   â”‚   raise self._exception                                                                                 â”‚
           â”‚   402 â”‚   â”‚   â”‚   finally:                                                                                                  â”‚
           â”‚   403 â”‚   â”‚   â”‚   â”‚   # Break a reference cycle with the exception in self._exception                                       â”‚
           â”‚   404 â”‚   â”‚   â”‚   â”‚   self = None                                                                                           â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:417 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   414 â”‚   â”‚   â”‚   â”‚   reraise=True,                                                                                         â”‚
           â”‚   415 â”‚   â”‚   â”‚   ):                                                                                                        â”‚
           â”‚   416 â”‚   â”‚   â”‚   â”‚   with attempt:  # Retrying if ToolSelector fails to select a tool                                      â”‚
           â”‚ â± 417 â”‚   â”‚   â”‚   â”‚   â”‚   action = await agent(agent_state.messages, tools)                                                 â”‚
           â”‚   418 â”‚   â”‚   â”‚   agent_state.messages = [*agent_state.messages, action]                                                    â”‚
           â”‚   419 â”‚   â”‚   â”‚   if on_agent_action_callback:                                                                              â”‚
           â”‚   420 â”‚   â”‚   â”‚   â”‚   await on_agent_action_callback(action, agent_state)                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aviary/tools/utils.py:182 in __call__                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   179 â”‚   â”‚   â”‚   self._ledger.messages.extend(messages)                                                                    â”‚
           â”‚   180 â”‚   â”‚   â”‚   messages = self._ledger.messages                                                                          â”‚
           â”‚   181 â”‚   â”‚                                                                                                                 â”‚
           â”‚ â± 182 â”‚   â”‚   model_response = await self._bound_acompletion(                                                               â”‚
           â”‚   183 â”‚   â”‚   â”‚   messages=MessagesAdapter.dump_python(                                                                     â”‚
           â”‚   184 â”‚   â”‚   â”‚   â”‚   messages, exclude_none=True, by_alias=True                                                            â”‚
           â”‚   185 â”‚   â”‚   â”‚   ),                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:817 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    814 â”‚   â”‚   â”‚   â”‚   â”‚   original_exception=e,                                                                            â”‚
           â”‚    815 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    816 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚ â±  817 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    818 â”‚                                                                                                                    â”‚
           â”‚    819 â”‚   async def _acompletion(                                                                                          â”‚
           â”‚    820 â”‚   â”‚   self, model: str, messages: List[Dict[str, str]], **kwargs                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:793 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    790 â”‚   â”‚   â”‚   if request_priority is not None and isinstance(request_priority, int):                                   â”‚
           â”‚    791 â”‚   â”‚   â”‚   â”‚   response = await self.schedule_acompletion(**kwargs)                                                 â”‚
           â”‚    792 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â±  793 â”‚   â”‚   â”‚   â”‚   response = await self.async_function_with_fallbacks(**kwargs)                                        â”‚
           â”‚    794 â”‚   â”‚   â”‚   end_time = time.time()                                                                                   â”‚
           â”‚    795 â”‚   â”‚   â”‚   _duration = end_time - start_time                                                                        â”‚
           â”‚    796 â”‚   â”‚   â”‚   asyncio.create_task(                                                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2795 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2792 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚   2793 â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                                â”‚
           â”‚   2794 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2795 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2796 â”‚                                                                                                                    â”‚
           â”‚   2797 â”‚   def _handle_mock_testing_fallbacks(                                                                              â”‚
           â”‚   2798 â”‚   â”‚   self,                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2631 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2628 â”‚   â”‚   â”‚   â”‚   content_policy_fallbacks=content_policy_fallbacks,                                                   â”‚
           â”‚   2629 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2630 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2631 â”‚   â”‚   â”‚   response = await self.async_function_with_retries(*args, **kwargs)                                       â”‚
           â”‚   2632 â”‚   â”‚   â”‚   verbose_router_logger.debug(f"Async Response: {response}")                                               â”‚
           â”‚   2633 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2634 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2967 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2964 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "max_retries", num_retries)                                              â”‚
           â”‚   2965 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "num_retries", current_attempt)                                          â”‚
           â”‚   2966 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2967 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2968 â”‚                                                                                                                    â”‚
           â”‚   2969 â”‚   async def make_call(self, original_function: Any, *args, **kwargs):                                              â”‚
           â”‚   2970 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2879 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2876 â”‚   â”‚   â”‚   â”‚   model_group=model_group, kwargs=kwargs                                                               â”‚
           â”‚   2877 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2878 â”‚   â”‚   â”‚   # if the function call is successful, no exception will be raised and we'll                              â”‚
           â”‚        break out of the loop                                                                                                â”‚
           â”‚ â± 2879 â”‚   â”‚   â”‚   response = await self.make_call(original_function, *args, **kwargs)                                      â”‚
           â”‚   2880 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   2881 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2882 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2976 in make_call                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2973 â”‚   â”‚   model_group = kwargs.get("model")                                                                            â”‚
           â”‚   2974 â”‚   â”‚   response = original_function(*args, **kwargs)                                                                â”‚
           â”‚   2975 â”‚   â”‚   if inspect.iscoroutinefunction(response) or inspect.isawaitable(response):                                   â”‚
           â”‚ â± 2976 â”‚   â”‚   â”‚   response = await response                                                                                â”‚
           â”‚   2977 â”‚   â”‚   ## PROCESS RESPONSE HEADERS                                                                                  â”‚
           â”‚   2978 â”‚   â”‚   await self.set_response_headers(response=response, model_group=model_group)                                  â”‚
           â”‚   2979                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:947 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    944 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚    945 â”‚   â”‚   â”‚   if model_name is not None:                                                                               â”‚
           â”‚    946 â”‚   â”‚   â”‚   â”‚   self.fail_calls[model_name] += 1                                                                     â”‚
           â”‚ â±  947 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    948 â”‚                                                                                                                    â”‚
           â”‚    949 â”‚   def _update_kwargs_before_fallbacks(self, model: str, kwargs: dict) -> None:                                     â”‚
           â”‚    950 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:915 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    912 â”‚   â”‚   â”‚   â”‚   â”‚   parent_otel_span=parent_otel_span,                                                               â”‚
           â”‚    913 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    914 â”‚   â”‚   â”‚   â”‚                                                                                                        â”‚
           â”‚ â±  915 â”‚   â”‚   â”‚   â”‚   response = await _response                                                                           â”‚
           â”‚    916 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚    917 â”‚   â”‚   â”‚   ## CHECK CONTENT FILTER ERROR ##                                                                         â”‚
           â”‚    918 â”‚   â”‚   â”‚   if isinstance(response, ModelResponse):                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1175 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1172 â”‚   â”‚   â”‚   â”‚   â”‚   else:                                                                                            â”‚
           â”‚   1173 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   kwargs["model"] = context_window_fallback_dict[model]                                        â”‚
           â”‚   1174 â”‚   â”‚   â”‚   â”‚   â”‚   return await original_function(*args, **kwargs)                                                  â”‚
           â”‚ â± 1175 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   1176 â”‚                                                                                                                    â”‚
           â”‚   1177 â”‚   is_coroutine = inspect.iscoroutinefunction(original_function)                                                    â”‚
           â”‚   1178                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1031 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1028 â”‚   â”‚   â”‚   â”‚   return _caching_handler_response.final_embedding_cached_response                                     â”‚
           â”‚   1029 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1030 â”‚   â”‚   â”‚   # MODEL CALL                                                                                             â”‚
           â”‚ â± 1031 â”‚   â”‚   â”‚   result = await original_function(*args, **kwargs)                                                        â”‚
           â”‚   1032 â”‚   â”‚   â”‚   end_time = datetime.datetime.now()                                                                       â”‚
           â”‚   1033 â”‚   â”‚   â”‚   if "stream" in kwargs and kwargs["stream"] is True:                                                      â”‚
           â”‚   1034 â”‚   â”‚   â”‚   â”‚   if (                                                                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:499 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    496 â”‚   â”‚   return response                                                                                              â”‚
           â”‚    497 â”‚   except Exception as e:                                                                                           â”‚
           â”‚    498 â”‚   â”‚   custom_llm_provider = custom_llm_provider or "openai"                                                        â”‚
           â”‚ â±  499 â”‚   â”‚   raise exception_type(                                                                                        â”‚
           â”‚    500 â”‚   â”‚   â”‚   model=model,                                                                                             â”‚
           â”‚    501 â”‚   â”‚   â”‚   custom_llm_provider=custom_llm_provider,                                                                 â”‚
           â”‚    502 â”‚   â”‚   â”‚   original_exception=e,                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:212 â”‚
           â”‚ 5 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2122 â”‚   â”‚   # don't let an error with mapping interrupt the user from receiving an error                                 â”‚
           â”‚        from the llm api calls                                                                                               â”‚
           â”‚   2123 â”‚   â”‚   if exception_mapping_worked:                                                                                 â”‚
           â”‚   2124 â”‚   â”‚   â”‚   setattr(e, "litellm_response_headers", litellm_response_headers)                                         â”‚
           â”‚ â± 2125 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   2126 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   2127 â”‚   â”‚   â”‚   for error_type in litellm.LITELLM_EXCEPTION_TYPES:                                                       â”‚
           â”‚   2128 â”‚   â”‚   â”‚   â”‚   if isinstance(e, error_type):                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:210 â”‚
           â”‚ 1 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2098 â”‚   â”‚   â”‚   â”‚   â”‚   request=original_exception.request,                                                              â”‚
           â”‚   2099 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚   2100 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â± 2101 â”‚   â”‚   â”‚   â”‚   raise APIConnectionError(                                                                            â”‚
           â”‚   2102 â”‚   â”‚   â”‚   â”‚   â”‚   message="{}\n{}".format(                                                                         â”‚
           â”‚   2103 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   str(original_exception), traceback.format_exc()                                              â”‚
           â”‚   2104 â”‚   â”‚   â”‚   â”‚   â”‚   ),                                                                                               â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           APIConnectionError: litellm.APIConnectionError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1109, in                 
           _wrap_create_connection                                                                                                        
               sock = await aiohappyeyeballs.start_connection(                                                                            
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                            
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py", line 123, in              
           start_connection                                                                                                               
               raise OSError(first_errno, msg)                                                                                            
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py", line 477, in acompletion           
               response = await init_response                                                                                             
                          ^^^^^^^^^^^^^^^^^^^                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 566, in                
           ollama_acompletion                                                                                                             
               raise e  # don't use verbose_logger.exception, if exception is raised                                                      
               ^^^^^^^                                                                                                                    
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 507, in                
           ollama_acompletion                                                                                                             
               resp = await session.post(url, json=data)                                                                                  
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                  
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py", line 696, in _request            
               conn = await self._connector.connect(                                                                                      
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 544, in connect          
               proto = await self._create_connection(req, traces, timeout)                                                                
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1050, in                 
           _create_connection                                                                                                             
               _, proto = await self._create_direct_connection(req, traces, timeout)                                                      
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1394, in                 
           _create_direct_connection                                                                                                      
               raise last_exc                                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1363, in                 
           _create_direct_connection                                                                                                      
               transp, proto = await self._wrap_create_connection(                                                                        
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                        
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1124, in                 
           _wrap_create_connection                                                                                                        
               raise client_error(req.connection_key, exc) from exc                                                                       
           aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
                                                                                                                                          
           Received Model Group=ollama/llama3.2                                                                                           
           Available Model Group Fallbacks=None LiteLLM Retried: 2 times, LiteLLM Max Retries: 3                                          
[01:07:51] Answer:                                                                                                                        


 ANSWERING QUESTION: sciqag_question_95.json
 ----------------------------- 



[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.

[01:08:11] Trajectory failed.                                                                                                             
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1109 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1106 â”‚   â”‚   â”‚   async with ceil_timeout(                                                                                 â”‚
           â”‚   1107 â”‚   â”‚   â”‚   â”‚   timeout.sock_connect, ceil_threshold=timeout.ceil_threshold                                          â”‚
           â”‚   1108 â”‚   â”‚   â”‚   ):                                                                                                       â”‚
           â”‚ â± 1109 â”‚   â”‚   â”‚   â”‚   sock = await aiohappyeyeballs.start_connection(                                                      â”‚
           â”‚   1110 â”‚   â”‚   â”‚   â”‚   â”‚   addr_infos=addr_infos,                                                                           â”‚
           â”‚   1111 â”‚   â”‚   â”‚   â”‚   â”‚   local_addr_infos=self._local_addr_infos,                                                         â”‚
           â”‚   1112 â”‚   â”‚   â”‚   â”‚   â”‚   happy_eyeballs_delay=self._happy_eyeballs_delay,                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py:123 in start_connection          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   120 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, OSError) and exc.errno == first_errno                                         â”‚
           â”‚   121 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   for exc in all_exceptions                                                                     â”‚
           â”‚   122 â”‚   â”‚   â”‚   â”‚   â”‚   ):                                                                                                â”‚
           â”‚ â± 123 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   raise OSError(first_errno, msg)                                                               â”‚
           â”‚   124 â”‚   â”‚   â”‚   â”‚   elif isinstance(first_exception, RuntimeError) and all(                                               â”‚
           â”‚   125 â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, RuntimeError) for exc in all_exceptions                                           â”‚
           â”‚   126 â”‚   â”‚   â”‚   â”‚   ):                                                                                                    â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:477 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    474 â”‚   â”‚   â”‚   â”‚   â”‚   response = ModelResponse(**init_response)                                                        â”‚
           â”‚    475 â”‚   â”‚   â”‚   â”‚   response = init_response                                                                             â”‚
           â”‚    476 â”‚   â”‚   â”‚   elif asyncio.iscoroutine(init_response):                                                                 â”‚
           â”‚ â±  477 â”‚   â”‚   â”‚   â”‚   response = await init_response                                                                       â”‚
           â”‚    478 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚    479 â”‚   â”‚   â”‚   â”‚   response = init_response  # type: ignore                                                             â”‚
           â”‚    480                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:566 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   563 â”‚   â”‚   â”‚   )                                                                                                         â”‚
           â”‚   564 â”‚   â”‚   â”‚   return model_response                                                                                     â”‚
           â”‚   565 â”‚   except Exception as e:                                                                                            â”‚
           â”‚ â± 566 â”‚   â”‚   raise e  # don't use verbose_logger.exception, if exception is raised                                         â”‚
           â”‚   567                                                                                                                       â”‚
           â”‚   568                                                                                                                       â”‚
           â”‚   569 async def ollama_aembeddings(                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:507 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   504 â”‚   try:                                                                                                              â”‚
           â”‚   505 â”‚   â”‚   timeout = aiohttp.ClientTimeout(total=litellm.request_timeout)  # 10 minutes                                  â”‚
           â”‚   506 â”‚   â”‚   async with aiohttp.ClientSession(timeout=timeout) as session:                                                 â”‚
           â”‚ â± 507 â”‚   â”‚   â”‚   resp = await session.post(url, json=data)                                                                 â”‚
           â”‚   508 â”‚   â”‚   â”‚                                                                                                             â”‚
           â”‚   509 â”‚   â”‚   â”‚   if resp.status != 200:                                                                                    â”‚
           â”‚   510 â”‚   â”‚   â”‚   â”‚   text = await resp.text()                                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py:696 in _request                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚    693 â”‚   â”‚   â”‚   â”‚   â”‚                                                                                                    â”‚
           â”‚    694 â”‚   â”‚   â”‚   â”‚   â”‚   # connection timeout                                                                             â”‚
           â”‚    695 â”‚   â”‚   â”‚   â”‚   â”‚   try:                                                                                             â”‚
           â”‚ â±  696 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   conn = await self._connector.connect(                                                        â”‚
           â”‚    697 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   req, traces=traces, timeout=real_timeout                                                 â”‚
           â”‚    698 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚    699 â”‚   â”‚   â”‚   â”‚   â”‚   except asyncio.TimeoutError as exc:                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:544 in connect                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚    541 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    542 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    543 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_start()                                                   â”‚
           â”‚ â±  544 â”‚   â”‚   â”‚   â”‚   proto = await self._create_connection(req, traces, timeout)                                          â”‚
           â”‚    545 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    546 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    547 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_end()                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1050 in _create_connection           â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1047 â”‚   â”‚   if req.proxy:                                                                                                â”‚
           â”‚   1048 â”‚   â”‚   â”‚   _, proto = await self._create_proxy_connection(req, traces, timeout)                                     â”‚
           â”‚   1049 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚ â± 1050 â”‚   â”‚   â”‚   _, proto = await self._create_direct_connection(req, traces, timeout)                                    â”‚
           â”‚   1051 â”‚   â”‚                                                                                                                â”‚
           â”‚   1052 â”‚   â”‚   return proto                                                                                                 â”‚
           â”‚   1053                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1394 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1391 â”‚   â”‚   â”‚   return transp, proto                                                                                     â”‚
           â”‚   1392 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   1393 â”‚   â”‚   â”‚   assert last_exc is not None                                                                              â”‚
           â”‚ â± 1394 â”‚   â”‚   â”‚   raise last_exc                                                                                           â”‚
           â”‚   1395 â”‚                                                                                                                    â”‚
           â”‚   1396 â”‚   async def _create_proxy_connection(                                                                              â”‚
           â”‚   1397 â”‚   â”‚   self, req: ClientRequest, traces: List["Trace"], timeout: "ClientTimeout"                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1363 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1360 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   1361 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1362 â”‚   â”‚   â”‚   try:                                                                                                     â”‚
           â”‚ â± 1363 â”‚   â”‚   â”‚   â”‚   transp, proto = await self._wrap_create_connection(                                                  â”‚
           â”‚   1364 â”‚   â”‚   â”‚   â”‚   â”‚   self._factory,                                                                                   â”‚
           â”‚   1365 â”‚   â”‚   â”‚   â”‚   â”‚   timeout=timeout,                                                                                 â”‚
           â”‚   1366 â”‚   â”‚   â”‚   â”‚   â”‚   ssl=sslcontext,                                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1124 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1121 â”‚   â”‚   except OSError as exc:                                                                                       â”‚
           â”‚   1122 â”‚   â”‚   â”‚   if exc.errno is None and isinstance(exc, asyncio.TimeoutError):                                          â”‚
           â”‚   1123 â”‚   â”‚   â”‚   â”‚   raise                                                                                                â”‚
           â”‚ â± 1124 â”‚   â”‚   â”‚   raise client_error(req.connection_key, exc) from exc                                                     â”‚
           â”‚   1125 â”‚                                                                                                                    â”‚
           â”‚   1126 â”‚   async def _wrap_existing_connection(                                                                             â”‚
           â”‚   1127 â”‚   â”‚   self,                                                                                                        â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno 111] Connect call failed 
           ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                                                    
                                                                                                                                          
           During handling of the above exception, another exception occurred:                                                            
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:276 in _run_with_timeout_failure                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   273 ) -> tuple[PQASession, AgentStatus]:                                                                                  â”‚
           â”‚   274 â”‚   try:                                                                                                              â”‚
           â”‚   275 â”‚   â”‚   async with asyncio.timeout(query.settings.agent.timeout):                                                     â”‚
           â”‚ â± 276 â”‚   â”‚   â”‚   status = await rollout()                                                                                  â”‚
           â”‚   277 â”‚   except TimeoutError:                                                                                              â”‚
           â”‚   278 â”‚   â”‚   logger.warning(                                                                                               â”‚
           â”‚   279 â”‚   â”‚   â”‚   f"Agent timeout after {query.settings.agent.timeout}-sec, just answering."                                â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:410 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   407 â”‚   â”‚   â”‚   â”‚   )                                                                                                     â”‚
           â”‚   408 â”‚   â”‚   â”‚   â”‚   return AgentStatus.TRUNCATED                                                                          â”‚
           â”‚   409 â”‚   â”‚   â”‚   agent_state.messages += obs                                                                               â”‚
           â”‚ â± 410 â”‚   â”‚   â”‚   for attempt in Retrying(                                                                                  â”‚
           â”‚   411 â”‚   â”‚   â”‚   â”‚   stop=stop_after_attempt(5),                                                                           â”‚
           â”‚   412 â”‚   â”‚   â”‚   â”‚   retry=retry_if_exception_type(MalformedMessageError),                                                 â”‚
           â”‚   413 â”‚   â”‚   â”‚   â”‚   before_sleep=before_sleep_log(logger, logging.WARNING),                                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:443 in __iter__                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   440 â”‚   â”‚                                                                                                                 â”‚
           â”‚   441 â”‚   â”‚   retry_state = RetryCallState(self, fn=None, args=(), kwargs={})                                               â”‚
           â”‚   442 â”‚   â”‚   while True:                                                                                                   â”‚
           â”‚ â± 443 â”‚   â”‚   â”‚   do = self.iter(retry_state=retry_state)                                                                   â”‚
           â”‚   444 â”‚   â”‚   â”‚   if isinstance(do, DoAttempt):                                                                             â”‚
           â”‚   445 â”‚   â”‚   â”‚   â”‚   yield AttemptManager(retry_state=retry_state)                                                         â”‚
           â”‚   446 â”‚   â”‚   â”‚   elif isinstance(do, DoSleep):                                                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:376 in iter                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   373 â”‚   â”‚   self._begin_iter(retry_state)                                                                                 â”‚
           â”‚   374 â”‚   â”‚   result = None                                                                                                 â”‚
           â”‚   375 â”‚   â”‚   for action in self.iter_state.actions:                                                                        â”‚
           â”‚ â± 376 â”‚   â”‚   â”‚   result = action(retry_state)                                                                              â”‚
           â”‚   377 â”‚   â”‚   return result                                                                                                 â”‚
           â”‚   378 â”‚                                                                                                                     â”‚
           â”‚   379 â”‚   def _begin_iter(self, retry_state: "RetryCallState") -> None:  # noqa                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:398 in <lambda>                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   395 â”‚                                                                                                                     â”‚
           â”‚   396 â”‚   def _post_retry_check_actions(self, retry_state: "RetryCallState") -> None:                                       â”‚
           â”‚   397 â”‚   â”‚   if not (self.iter_state.is_explicit_retry or self.iter_state.retry_run_result):                               â”‚
           â”‚ â± 398 â”‚   â”‚   â”‚   self._add_action_func(lambda rs: rs.outcome.result())                                                     â”‚
           â”‚   399 â”‚   â”‚   â”‚   return                                                                                                    â”‚
           â”‚   400 â”‚   â”‚                                                                                                                 â”‚
           â”‚   401 â”‚   â”‚   if self.after is not None:                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:449 in result                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚   446 â”‚   â”‚   â”‚   â”‚   if self._state in [CANCELLED, CANCELLED_AND_NOTIFIED]:                                                â”‚
           â”‚   447 â”‚   â”‚   â”‚   â”‚   â”‚   raise CancelledError()                                                                            â”‚
           â”‚   448 â”‚   â”‚   â”‚   â”‚   elif self._state == FINISHED:                                                                         â”‚
           â”‚ â± 449 â”‚   â”‚   â”‚   â”‚   â”‚   return self.__get_result()                                                                        â”‚
           â”‚   450 â”‚   â”‚   â”‚   â”‚                                                                                                         â”‚
           â”‚   451 â”‚   â”‚   â”‚   â”‚   self._condition.wait(timeout)                                                                         â”‚
           â”‚   452                                                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:401 in __get_result                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   398 â”‚   def __get_result(self):                                                                                           â”‚
           â”‚   399 â”‚   â”‚   if self._exception:                                                                                           â”‚
           â”‚   400 â”‚   â”‚   â”‚   try:                                                                                                      â”‚
           â”‚ â± 401 â”‚   â”‚   â”‚   â”‚   raise self._exception                                                                                 â”‚
           â”‚   402 â”‚   â”‚   â”‚   finally:                                                                                                  â”‚
           â”‚   403 â”‚   â”‚   â”‚   â”‚   # Break a reference cycle with the exception in self._exception                                       â”‚
           â”‚   404 â”‚   â”‚   â”‚   â”‚   self = None                                                                                           â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:417 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   414 â”‚   â”‚   â”‚   â”‚   reraise=True,                                                                                         â”‚
           â”‚   415 â”‚   â”‚   â”‚   ):                                                                                                        â”‚
           â”‚   416 â”‚   â”‚   â”‚   â”‚   with attempt:  # Retrying if ToolSelector fails to select a tool                                      â”‚
           â”‚ â± 417 â”‚   â”‚   â”‚   â”‚   â”‚   action = await agent(agent_state.messages, tools)                                                 â”‚
           â”‚   418 â”‚   â”‚   â”‚   agent_state.messages = [*agent_state.messages, action]                                                    â”‚
           â”‚   419 â”‚   â”‚   â”‚   if on_agent_action_callback:                                                                              â”‚
           â”‚   420 â”‚   â”‚   â”‚   â”‚   await on_agent_action_callback(action, agent_state)                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aviary/tools/utils.py:182 in __call__                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   179 â”‚   â”‚   â”‚   self._ledger.messages.extend(messages)                                                                    â”‚
           â”‚   180 â”‚   â”‚   â”‚   messages = self._ledger.messages                                                                          â”‚
           â”‚   181 â”‚   â”‚                                                                                                                 â”‚
           â”‚ â± 182 â”‚   â”‚   model_response = await self._bound_acompletion(                                                               â”‚
           â”‚   183 â”‚   â”‚   â”‚   messages=MessagesAdapter.dump_python(                                                                     â”‚
           â”‚   184 â”‚   â”‚   â”‚   â”‚   messages, exclude_none=True, by_alias=True                                                            â”‚
           â”‚   185 â”‚   â”‚   â”‚   ),                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:817 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    814 â”‚   â”‚   â”‚   â”‚   â”‚   original_exception=e,                                                                            â”‚
           â”‚    815 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    816 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚ â±  817 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    818 â”‚                                                                                                                    â”‚
           â”‚    819 â”‚   async def _acompletion(                                                                                          â”‚
           â”‚    820 â”‚   â”‚   self, model: str, messages: List[Dict[str, str]], **kwargs                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:793 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    790 â”‚   â”‚   â”‚   if request_priority is not None and isinstance(request_priority, int):                                   â”‚
           â”‚    791 â”‚   â”‚   â”‚   â”‚   response = await self.schedule_acompletion(**kwargs)                                                 â”‚
           â”‚    792 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â±  793 â”‚   â”‚   â”‚   â”‚   response = await self.async_function_with_fallbacks(**kwargs)                                        â”‚
           â”‚    794 â”‚   â”‚   â”‚   end_time = time.time()                                                                                   â”‚
           â”‚    795 â”‚   â”‚   â”‚   _duration = end_time - start_time                                                                        â”‚
           â”‚    796 â”‚   â”‚   â”‚   asyncio.create_task(                                                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2795 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2792 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚   2793 â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                                â”‚
           â”‚   2794 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2795 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2796 â”‚                                                                                                                    â”‚
           â”‚   2797 â”‚   def _handle_mock_testing_fallbacks(                                                                              â”‚
           â”‚   2798 â”‚   â”‚   self,                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2631 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2628 â”‚   â”‚   â”‚   â”‚   content_policy_fallbacks=content_policy_fallbacks,                                                   â”‚
           â”‚   2629 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2630 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2631 â”‚   â”‚   â”‚   response = await self.async_function_with_retries(*args, **kwargs)                                       â”‚
           â”‚   2632 â”‚   â”‚   â”‚   verbose_router_logger.debug(f"Async Response: {response}")                                               â”‚
           â”‚   2633 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2634 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2967 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2964 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "max_retries", num_retries)                                              â”‚
           â”‚   2965 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "num_retries", current_attempt)                                          â”‚
           â”‚   2966 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2967 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2968 â”‚                                                                                                                    â”‚
           â”‚   2969 â”‚   async def make_call(self, original_function: Any, *args, **kwargs):                                              â”‚
           â”‚   2970 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2879 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2876 â”‚   â”‚   â”‚   â”‚   model_group=model_group, kwargs=kwargs                                                               â”‚
           â”‚   2877 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2878 â”‚   â”‚   â”‚   # if the function call is successful, no exception will be raised and we'll                              â”‚
           â”‚        break out of the loop                                                                                                â”‚
           â”‚ â± 2879 â”‚   â”‚   â”‚   response = await self.make_call(original_function, *args, **kwargs)                                      â”‚
           â”‚   2880 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   2881 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2882 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2976 in make_call                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2973 â”‚   â”‚   model_group = kwargs.get("model")                                                                            â”‚
           â”‚   2974 â”‚   â”‚   response = original_function(*args, **kwargs)                                                                â”‚
           â”‚   2975 â”‚   â”‚   if inspect.iscoroutinefunction(response) or inspect.isawaitable(response):                                   â”‚
           â”‚ â± 2976 â”‚   â”‚   â”‚   response = await response                                                                                â”‚
           â”‚   2977 â”‚   â”‚   ## PROCESS RESPONSE HEADERS                                                                                  â”‚
           â”‚   2978 â”‚   â”‚   await self.set_response_headers(response=response, model_group=model_group)                                  â”‚
           â”‚   2979                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:947 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    944 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚    945 â”‚   â”‚   â”‚   if model_name is not None:                                                                               â”‚
           â”‚    946 â”‚   â”‚   â”‚   â”‚   self.fail_calls[model_name] += 1                                                                     â”‚
           â”‚ â±  947 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    948 â”‚                                                                                                                    â”‚
           â”‚    949 â”‚   def _update_kwargs_before_fallbacks(self, model: str, kwargs: dict) -> None:                                     â”‚
           â”‚    950 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:915 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    912 â”‚   â”‚   â”‚   â”‚   â”‚   parent_otel_span=parent_otel_span,                                                               â”‚
           â”‚    913 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    914 â”‚   â”‚   â”‚   â”‚                                                                                                        â”‚
           â”‚ â±  915 â”‚   â”‚   â”‚   â”‚   response = await _response                                                                           â”‚
           â”‚    916 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚    917 â”‚   â”‚   â”‚   ## CHECK CONTENT FILTER ERROR ##                                                                         â”‚
           â”‚    918 â”‚   â”‚   â”‚   if isinstance(response, ModelResponse):                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1175 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1172 â”‚   â”‚   â”‚   â”‚   â”‚   else:                                                                                            â”‚
           â”‚   1173 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   kwargs["model"] = context_window_fallback_dict[model]                                        â”‚
           â”‚   1174 â”‚   â”‚   â”‚   â”‚   â”‚   return await original_function(*args, **kwargs)                                                  â”‚
           â”‚ â± 1175 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   1176 â”‚                                                                                                                    â”‚
           â”‚   1177 â”‚   is_coroutine = inspect.iscoroutinefunction(original_function)                                                    â”‚
           â”‚   1178                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1031 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1028 â”‚   â”‚   â”‚   â”‚   return _caching_handler_response.final_embedding_cached_response                                     â”‚
           â”‚   1029 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1030 â”‚   â”‚   â”‚   # MODEL CALL                                                                                             â”‚
           â”‚ â± 1031 â”‚   â”‚   â”‚   result = await original_function(*args, **kwargs)                                                        â”‚
           â”‚   1032 â”‚   â”‚   â”‚   end_time = datetime.datetime.now()                                                                       â”‚
           â”‚   1033 â”‚   â”‚   â”‚   if "stream" in kwargs and kwargs["stream"] is True:                                                      â”‚
           â”‚   1034 â”‚   â”‚   â”‚   â”‚   if (                                                                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:499 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    496 â”‚   â”‚   return response                                                                                              â”‚
           â”‚    497 â”‚   except Exception as e:                                                                                           â”‚
           â”‚    498 â”‚   â”‚   custom_llm_provider = custom_llm_provider or "openai"                                                        â”‚
           â”‚ â±  499 â”‚   â”‚   raise exception_type(                                                                                        â”‚
           â”‚    500 â”‚   â”‚   â”‚   model=model,                                                                                             â”‚
           â”‚    501 â”‚   â”‚   â”‚   custom_llm_provider=custom_llm_provider,                                                                 â”‚
           â”‚    502 â”‚   â”‚   â”‚   original_exception=e,                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:212 â”‚
           â”‚ 5 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2122 â”‚   â”‚   # don't let an error with mapping interrupt the user from receiving an error                                 â”‚
           â”‚        from the llm api calls                                                                                               â”‚
           â”‚   2123 â”‚   â”‚   if exception_mapping_worked:                                                                                 â”‚
           â”‚   2124 â”‚   â”‚   â”‚   setattr(e, "litellm_response_headers", litellm_response_headers)                                         â”‚
           â”‚ â± 2125 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   2126 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   2127 â”‚   â”‚   â”‚   for error_type in litellm.LITELLM_EXCEPTION_TYPES:                                                       â”‚
           â”‚   2128 â”‚   â”‚   â”‚   â”‚   if isinstance(e, error_type):                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:210 â”‚
           â”‚ 1 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2098 â”‚   â”‚   â”‚   â”‚   â”‚   request=original_exception.request,                                                              â”‚
           â”‚   2099 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚   2100 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â± 2101 â”‚   â”‚   â”‚   â”‚   raise APIConnectionError(                                                                            â”‚
           â”‚   2102 â”‚   â”‚   â”‚   â”‚   â”‚   message="{}\n{}".format(                                                                         â”‚
           â”‚   2103 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   str(original_exception), traceback.format_exc()                                              â”‚
           â”‚   2104 â”‚   â”‚   â”‚   â”‚   â”‚   ),                                                                                               â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           APIConnectionError: litellm.APIConnectionError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1109, in                 
           _wrap_create_connection                                                                                                        
               sock = await aiohappyeyeballs.start_connection(                                                                            
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                            
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py", line 123, in              
           start_connection                                                                                                               
               raise OSError(first_errno, msg)                                                                                            
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py", line 477, in acompletion           
               response = await init_response                                                                                             
                          ^^^^^^^^^^^^^^^^^^^                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 566, in                
           ollama_acompletion                                                                                                             
               raise e  # don't use verbose_logger.exception, if exception is raised                                                      
               ^^^^^^^                                                                                                                    
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 507, in                
           ollama_acompletion                                                                                                             
               resp = await session.post(url, json=data)                                                                                  
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                  
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py", line 696, in _request            
               conn = await self._connector.connect(                                                                                      
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 544, in connect          
               proto = await self._create_connection(req, traces, timeout)                                                                
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1050, in                 
           _create_connection                                                                                                             
               _, proto = await self._create_direct_connection(req, traces, timeout)                                                      
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1394, in                 
           _create_direct_connection                                                                                                      
               raise last_exc                                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1363, in                 
           _create_direct_connection                                                                                                      
               transp, proto = await self._wrap_create_connection(                                                                        
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                        
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1124, in                 
           _wrap_create_connection                                                                                                        
               raise client_error(req.connection_key, exc) from exc                                                                       
           aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
                                                                                                                                          
           Received Model Group=ollama/llama3.2                                                                                           
           Available Model Group Fallbacks=None LiteLLM Retried: 2 times, LiteLLM Max Retries: 3                                          
[01:08:13] Answer:                                                                                                                        


 ANSWERING QUESTION: sciqag_question_96.json
 ----------------------------- 



[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.

[01:08:33] Trajectory failed.                                                                                                             
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1109 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1106 â”‚   â”‚   â”‚   async with ceil_timeout(                                                                                 â”‚
           â”‚   1107 â”‚   â”‚   â”‚   â”‚   timeout.sock_connect, ceil_threshold=timeout.ceil_threshold                                          â”‚
           â”‚   1108 â”‚   â”‚   â”‚   ):                                                                                                       â”‚
           â”‚ â± 1109 â”‚   â”‚   â”‚   â”‚   sock = await aiohappyeyeballs.start_connection(                                                      â”‚
           â”‚   1110 â”‚   â”‚   â”‚   â”‚   â”‚   addr_infos=addr_infos,                                                                           â”‚
           â”‚   1111 â”‚   â”‚   â”‚   â”‚   â”‚   local_addr_infos=self._local_addr_infos,                                                         â”‚
           â”‚   1112 â”‚   â”‚   â”‚   â”‚   â”‚   happy_eyeballs_delay=self._happy_eyeballs_delay,                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py:123 in start_connection          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   120 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, OSError) and exc.errno == first_errno                                         â”‚
           â”‚   121 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   for exc in all_exceptions                                                                     â”‚
           â”‚   122 â”‚   â”‚   â”‚   â”‚   â”‚   ):                                                                                                â”‚
           â”‚ â± 123 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   raise OSError(first_errno, msg)                                                               â”‚
           â”‚   124 â”‚   â”‚   â”‚   â”‚   elif isinstance(first_exception, RuntimeError) and all(                                               â”‚
           â”‚   125 â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, RuntimeError) for exc in all_exceptions                                           â”‚
           â”‚   126 â”‚   â”‚   â”‚   â”‚   ):                                                                                                    â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:477 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    474 â”‚   â”‚   â”‚   â”‚   â”‚   response = ModelResponse(**init_response)                                                        â”‚
           â”‚    475 â”‚   â”‚   â”‚   â”‚   response = init_response                                                                             â”‚
           â”‚    476 â”‚   â”‚   â”‚   elif asyncio.iscoroutine(init_response):                                                                 â”‚
           â”‚ â±  477 â”‚   â”‚   â”‚   â”‚   response = await init_response                                                                       â”‚
           â”‚    478 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚    479 â”‚   â”‚   â”‚   â”‚   response = init_response  # type: ignore                                                             â”‚
           â”‚    480                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:566 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   563 â”‚   â”‚   â”‚   )                                                                                                         â”‚
           â”‚   564 â”‚   â”‚   â”‚   return model_response                                                                                     â”‚
           â”‚   565 â”‚   except Exception as e:                                                                                            â”‚
           â”‚ â± 566 â”‚   â”‚   raise e  # don't use verbose_logger.exception, if exception is raised                                         â”‚
           â”‚   567                                                                                                                       â”‚
           â”‚   568                                                                                                                       â”‚
           â”‚   569 async def ollama_aembeddings(                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:507 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   504 â”‚   try:                                                                                                              â”‚
           â”‚   505 â”‚   â”‚   timeout = aiohttp.ClientTimeout(total=litellm.request_timeout)  # 10 minutes                                  â”‚
           â”‚   506 â”‚   â”‚   async with aiohttp.ClientSession(timeout=timeout) as session:                                                 â”‚
           â”‚ â± 507 â”‚   â”‚   â”‚   resp = await session.post(url, json=data)                                                                 â”‚
           â”‚   508 â”‚   â”‚   â”‚                                                                                                             â”‚
           â”‚   509 â”‚   â”‚   â”‚   if resp.status != 200:                                                                                    â”‚
           â”‚   510 â”‚   â”‚   â”‚   â”‚   text = await resp.text()                                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py:696 in _request                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚    693 â”‚   â”‚   â”‚   â”‚   â”‚                                                                                                    â”‚
           â”‚    694 â”‚   â”‚   â”‚   â”‚   â”‚   # connection timeout                                                                             â”‚
           â”‚    695 â”‚   â”‚   â”‚   â”‚   â”‚   try:                                                                                             â”‚
           â”‚ â±  696 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   conn = await self._connector.connect(                                                        â”‚
           â”‚    697 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   req, traces=traces, timeout=real_timeout                                                 â”‚
           â”‚    698 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚    699 â”‚   â”‚   â”‚   â”‚   â”‚   except asyncio.TimeoutError as exc:                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:544 in connect                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚    541 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    542 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    543 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_start()                                                   â”‚
           â”‚ â±  544 â”‚   â”‚   â”‚   â”‚   proto = await self._create_connection(req, traces, timeout)                                          â”‚
           â”‚    545 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    546 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    547 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_end()                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1050 in _create_connection           â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1047 â”‚   â”‚   if req.proxy:                                                                                                â”‚
           â”‚   1048 â”‚   â”‚   â”‚   _, proto = await self._create_proxy_connection(req, traces, timeout)                                     â”‚
           â”‚   1049 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚ â± 1050 â”‚   â”‚   â”‚   _, proto = await self._create_direct_connection(req, traces, timeout)                                    â”‚
           â”‚   1051 â”‚   â”‚                                                                                                                â”‚
           â”‚   1052 â”‚   â”‚   return proto                                                                                                 â”‚
           â”‚   1053                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1394 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1391 â”‚   â”‚   â”‚   return transp, proto                                                                                     â”‚
           â”‚   1392 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   1393 â”‚   â”‚   â”‚   assert last_exc is not None                                                                              â”‚
           â”‚ â± 1394 â”‚   â”‚   â”‚   raise last_exc                                                                                           â”‚
           â”‚   1395 â”‚                                                                                                                    â”‚
           â”‚   1396 â”‚   async def _create_proxy_connection(                                                                              â”‚
           â”‚   1397 â”‚   â”‚   self, req: ClientRequest, traces: List["Trace"], timeout: "ClientTimeout"                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1363 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1360 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   1361 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1362 â”‚   â”‚   â”‚   try:                                                                                                     â”‚
           â”‚ â± 1363 â”‚   â”‚   â”‚   â”‚   transp, proto = await self._wrap_create_connection(                                                  â”‚
           â”‚   1364 â”‚   â”‚   â”‚   â”‚   â”‚   self._factory,                                                                                   â”‚
           â”‚   1365 â”‚   â”‚   â”‚   â”‚   â”‚   timeout=timeout,                                                                                 â”‚
           â”‚   1366 â”‚   â”‚   â”‚   â”‚   â”‚   ssl=sslcontext,                                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1124 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1121 â”‚   â”‚   except OSError as exc:                                                                                       â”‚
           â”‚   1122 â”‚   â”‚   â”‚   if exc.errno is None and isinstance(exc, asyncio.TimeoutError):                                          â”‚
           â”‚   1123 â”‚   â”‚   â”‚   â”‚   raise                                                                                                â”‚
           â”‚ â± 1124 â”‚   â”‚   â”‚   raise client_error(req.connection_key, exc) from exc                                                     â”‚
           â”‚   1125 â”‚                                                                                                                    â”‚
           â”‚   1126 â”‚   async def _wrap_existing_connection(                                                                             â”‚
           â”‚   1127 â”‚   â”‚   self,                                                                                                        â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno 111] Connect call failed 
           ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                                                    
                                                                                                                                          
           During handling of the above exception, another exception occurred:                                                            
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:276 in _run_with_timeout_failure                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   273 ) -> tuple[PQASession, AgentStatus]:                                                                                  â”‚
           â”‚   274 â”‚   try:                                                                                                              â”‚
           â”‚   275 â”‚   â”‚   async with asyncio.timeout(query.settings.agent.timeout):                                                     â”‚
           â”‚ â± 276 â”‚   â”‚   â”‚   status = await rollout()                                                                                  â”‚
           â”‚   277 â”‚   except TimeoutError:                                                                                              â”‚
           â”‚   278 â”‚   â”‚   logger.warning(                                                                                               â”‚
           â”‚   279 â”‚   â”‚   â”‚   f"Agent timeout after {query.settings.agent.timeout}-sec, just answering."                                â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:410 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   407 â”‚   â”‚   â”‚   â”‚   )                                                                                                     â”‚
           â”‚   408 â”‚   â”‚   â”‚   â”‚   return AgentStatus.TRUNCATED                                                                          â”‚
           â”‚   409 â”‚   â”‚   â”‚   agent_state.messages += obs                                                                               â”‚
           â”‚ â± 410 â”‚   â”‚   â”‚   for attempt in Retrying(                                                                                  â”‚
           â”‚   411 â”‚   â”‚   â”‚   â”‚   stop=stop_after_attempt(5),                                                                           â”‚
           â”‚   412 â”‚   â”‚   â”‚   â”‚   retry=retry_if_exception_type(MalformedMessageError),                                                 â”‚
           â”‚   413 â”‚   â”‚   â”‚   â”‚   before_sleep=before_sleep_log(logger, logging.WARNING),                                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:443 in __iter__                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   440 â”‚   â”‚                                                                                                                 â”‚
           â”‚   441 â”‚   â”‚   retry_state = RetryCallState(self, fn=None, args=(), kwargs={})                                               â”‚
           â”‚   442 â”‚   â”‚   while True:                                                                                                   â”‚
           â”‚ â± 443 â”‚   â”‚   â”‚   do = self.iter(retry_state=retry_state)                                                                   â”‚
           â”‚   444 â”‚   â”‚   â”‚   if isinstance(do, DoAttempt):                                                                             â”‚
           â”‚   445 â”‚   â”‚   â”‚   â”‚   yield AttemptManager(retry_state=retry_state)                                                         â”‚
           â”‚   446 â”‚   â”‚   â”‚   elif isinstance(do, DoSleep):                                                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:376 in iter                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   373 â”‚   â”‚   self._begin_iter(retry_state)                                                                                 â”‚
           â”‚   374 â”‚   â”‚   result = None                                                                                                 â”‚
           â”‚   375 â”‚   â”‚   for action in self.iter_state.actions:                                                                        â”‚
           â”‚ â± 376 â”‚   â”‚   â”‚   result = action(retry_state)                                                                              â”‚
           â”‚   377 â”‚   â”‚   return result                                                                                                 â”‚
           â”‚   378 â”‚                                                                                                                     â”‚
           â”‚   379 â”‚   def _begin_iter(self, retry_state: "RetryCallState") -> None:  # noqa                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:398 in <lambda>                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   395 â”‚                                                                                                                     â”‚
           â”‚   396 â”‚   def _post_retry_check_actions(self, retry_state: "RetryCallState") -> None:                                       â”‚
           â”‚   397 â”‚   â”‚   if not (self.iter_state.is_explicit_retry or self.iter_state.retry_run_result):                               â”‚
           â”‚ â± 398 â”‚   â”‚   â”‚   self._add_action_func(lambda rs: rs.outcome.result())                                                     â”‚
           â”‚   399 â”‚   â”‚   â”‚   return                                                                                                    â”‚
           â”‚   400 â”‚   â”‚                                                                                                                 â”‚
           â”‚   401 â”‚   â”‚   if self.after is not None:                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:449 in result                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚   446 â”‚   â”‚   â”‚   â”‚   if self._state in [CANCELLED, CANCELLED_AND_NOTIFIED]:                                                â”‚
           â”‚   447 â”‚   â”‚   â”‚   â”‚   â”‚   raise CancelledError()                                                                            â”‚
           â”‚   448 â”‚   â”‚   â”‚   â”‚   elif self._state == FINISHED:                                                                         â”‚
           â”‚ â± 449 â”‚   â”‚   â”‚   â”‚   â”‚   return self.__get_result()                                                                        â”‚
           â”‚   450 â”‚   â”‚   â”‚   â”‚                                                                                                         â”‚
           â”‚   451 â”‚   â”‚   â”‚   â”‚   self._condition.wait(timeout)                                                                         â”‚
           â”‚   452                                                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:401 in __get_result                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   398 â”‚   def __get_result(self):                                                                                           â”‚
           â”‚   399 â”‚   â”‚   if self._exception:                                                                                           â”‚
           â”‚   400 â”‚   â”‚   â”‚   try:                                                                                                      â”‚
           â”‚ â± 401 â”‚   â”‚   â”‚   â”‚   raise self._exception                                                                                 â”‚
           â”‚   402 â”‚   â”‚   â”‚   finally:                                                                                                  â”‚
           â”‚   403 â”‚   â”‚   â”‚   â”‚   # Break a reference cycle with the exception in self._exception                                       â”‚
           â”‚   404 â”‚   â”‚   â”‚   â”‚   self = None                                                                                           â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:417 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   414 â”‚   â”‚   â”‚   â”‚   reraise=True,                                                                                         â”‚
           â”‚   415 â”‚   â”‚   â”‚   ):                                                                                                        â”‚
           â”‚   416 â”‚   â”‚   â”‚   â”‚   with attempt:  # Retrying if ToolSelector fails to select a tool                                      â”‚
           â”‚ â± 417 â”‚   â”‚   â”‚   â”‚   â”‚   action = await agent(agent_state.messages, tools)                                                 â”‚
           â”‚   418 â”‚   â”‚   â”‚   agent_state.messages = [*agent_state.messages, action]                                                    â”‚
           â”‚   419 â”‚   â”‚   â”‚   if on_agent_action_callback:                                                                              â”‚
           â”‚   420 â”‚   â”‚   â”‚   â”‚   await on_agent_action_callback(action, agent_state)                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aviary/tools/utils.py:182 in __call__                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   179 â”‚   â”‚   â”‚   self._ledger.messages.extend(messages)                                                                    â”‚
           â”‚   180 â”‚   â”‚   â”‚   messages = self._ledger.messages                                                                          â”‚
           â”‚   181 â”‚   â”‚                                                                                                                 â”‚
           â”‚ â± 182 â”‚   â”‚   model_response = await self._bound_acompletion(                                                               â”‚
           â”‚   183 â”‚   â”‚   â”‚   messages=MessagesAdapter.dump_python(                                                                     â”‚
           â”‚   184 â”‚   â”‚   â”‚   â”‚   messages, exclude_none=True, by_alias=True                                                            â”‚
           â”‚   185 â”‚   â”‚   â”‚   ),                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:817 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    814 â”‚   â”‚   â”‚   â”‚   â”‚   original_exception=e,                                                                            â”‚
           â”‚    815 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    816 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚ â±  817 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    818 â”‚                                                                                                                    â”‚
           â”‚    819 â”‚   async def _acompletion(                                                                                          â”‚
           â”‚    820 â”‚   â”‚   self, model: str, messages: List[Dict[str, str]], **kwargs                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:793 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    790 â”‚   â”‚   â”‚   if request_priority is not None and isinstance(request_priority, int):                                   â”‚
           â”‚    791 â”‚   â”‚   â”‚   â”‚   response = await self.schedule_acompletion(**kwargs)                                                 â”‚
           â”‚    792 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â±  793 â”‚   â”‚   â”‚   â”‚   response = await self.async_function_with_fallbacks(**kwargs)                                        â”‚
           â”‚    794 â”‚   â”‚   â”‚   end_time = time.time()                                                                                   â”‚
           â”‚    795 â”‚   â”‚   â”‚   _duration = end_time - start_time                                                                        â”‚
           â”‚    796 â”‚   â”‚   â”‚   asyncio.create_task(                                                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2795 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2792 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚   2793 â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                                â”‚
           â”‚   2794 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2795 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2796 â”‚                                                                                                                    â”‚
           â”‚   2797 â”‚   def _handle_mock_testing_fallbacks(                                                                              â”‚
           â”‚   2798 â”‚   â”‚   self,                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2631 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2628 â”‚   â”‚   â”‚   â”‚   content_policy_fallbacks=content_policy_fallbacks,                                                   â”‚
           â”‚   2629 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2630 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2631 â”‚   â”‚   â”‚   response = await self.async_function_with_retries(*args, **kwargs)                                       â”‚
           â”‚   2632 â”‚   â”‚   â”‚   verbose_router_logger.debug(f"Async Response: {response}")                                               â”‚
           â”‚   2633 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2634 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2967 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2964 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "max_retries", num_retries)                                              â”‚
           â”‚   2965 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "num_retries", current_attempt)                                          â”‚
           â”‚   2966 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2967 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2968 â”‚                                                                                                                    â”‚
           â”‚   2969 â”‚   async def make_call(self, original_function: Any, *args, **kwargs):                                              â”‚
           â”‚   2970 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2879 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2876 â”‚   â”‚   â”‚   â”‚   model_group=model_group, kwargs=kwargs                                                               â”‚
           â”‚   2877 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2878 â”‚   â”‚   â”‚   # if the function call is successful, no exception will be raised and we'll                              â”‚
           â”‚        break out of the loop                                                                                                â”‚
           â”‚ â± 2879 â”‚   â”‚   â”‚   response = await self.make_call(original_function, *args, **kwargs)                                      â”‚
           â”‚   2880 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   2881 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2882 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2976 in make_call                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2973 â”‚   â”‚   model_group = kwargs.get("model")                                                                            â”‚
           â”‚   2974 â”‚   â”‚   response = original_function(*args, **kwargs)                                                                â”‚
           â”‚   2975 â”‚   â”‚   if inspect.iscoroutinefunction(response) or inspect.isawaitable(response):                                   â”‚
           â”‚ â± 2976 â”‚   â”‚   â”‚   response = await response                                                                                â”‚
           â”‚   2977 â”‚   â”‚   ## PROCESS RESPONSE HEADERS                                                                                  â”‚
           â”‚   2978 â”‚   â”‚   await self.set_response_headers(response=response, model_group=model_group)                                  â”‚
           â”‚   2979                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:947 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    944 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚    945 â”‚   â”‚   â”‚   if model_name is not None:                                                                               â”‚
           â”‚    946 â”‚   â”‚   â”‚   â”‚   self.fail_calls[model_name] += 1                                                                     â”‚
           â”‚ â±  947 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    948 â”‚                                                                                                                    â”‚
           â”‚    949 â”‚   def _update_kwargs_before_fallbacks(self, model: str, kwargs: dict) -> None:                                     â”‚
           â”‚    950 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:915 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    912 â”‚   â”‚   â”‚   â”‚   â”‚   parent_otel_span=parent_otel_span,                                                               â”‚
           â”‚    913 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    914 â”‚   â”‚   â”‚   â”‚                                                                                                        â”‚
           â”‚ â±  915 â”‚   â”‚   â”‚   â”‚   response = await _response                                                                           â”‚
           â”‚    916 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚    917 â”‚   â”‚   â”‚   ## CHECK CONTENT FILTER ERROR ##                                                                         â”‚
           â”‚    918 â”‚   â”‚   â”‚   if isinstance(response, ModelResponse):                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1175 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1172 â”‚   â”‚   â”‚   â”‚   â”‚   else:                                                                                            â”‚
           â”‚   1173 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   kwargs["model"] = context_window_fallback_dict[model]                                        â”‚
           â”‚   1174 â”‚   â”‚   â”‚   â”‚   â”‚   return await original_function(*args, **kwargs)                                                  â”‚
           â”‚ â± 1175 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   1176 â”‚                                                                                                                    â”‚
           â”‚   1177 â”‚   is_coroutine = inspect.iscoroutinefunction(original_function)                                                    â”‚
           â”‚   1178                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1031 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1028 â”‚   â”‚   â”‚   â”‚   return _caching_handler_response.final_embedding_cached_response                                     â”‚
           â”‚   1029 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1030 â”‚   â”‚   â”‚   # MODEL CALL                                                                                             â”‚
           â”‚ â± 1031 â”‚   â”‚   â”‚   result = await original_function(*args, **kwargs)                                                        â”‚
           â”‚   1032 â”‚   â”‚   â”‚   end_time = datetime.datetime.now()                                                                       â”‚
           â”‚   1033 â”‚   â”‚   â”‚   if "stream" in kwargs and kwargs["stream"] is True:                                                      â”‚
           â”‚   1034 â”‚   â”‚   â”‚   â”‚   if (                                                                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:499 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    496 â”‚   â”‚   return response                                                                                              â”‚
           â”‚    497 â”‚   except Exception as e:                                                                                           â”‚
           â”‚    498 â”‚   â”‚   custom_llm_provider = custom_llm_provider or "openai"                                                        â”‚
           â”‚ â±  499 â”‚   â”‚   raise exception_type(                                                                                        â”‚
           â”‚    500 â”‚   â”‚   â”‚   model=model,                                                                                             â”‚
           â”‚    501 â”‚   â”‚   â”‚   custom_llm_provider=custom_llm_provider,                                                                 â”‚
           â”‚    502 â”‚   â”‚   â”‚   original_exception=e,                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:212 â”‚
           â”‚ 5 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2122 â”‚   â”‚   # don't let an error with mapping interrupt the user from receiving an error                                 â”‚
           â”‚        from the llm api calls                                                                                               â”‚
           â”‚   2123 â”‚   â”‚   if exception_mapping_worked:                                                                                 â”‚
           â”‚   2124 â”‚   â”‚   â”‚   setattr(e, "litellm_response_headers", litellm_response_headers)                                         â”‚
           â”‚ â± 2125 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   2126 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   2127 â”‚   â”‚   â”‚   for error_type in litellm.LITELLM_EXCEPTION_TYPES:                                                       â”‚
           â”‚   2128 â”‚   â”‚   â”‚   â”‚   if isinstance(e, error_type):                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:210 â”‚
           â”‚ 1 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2098 â”‚   â”‚   â”‚   â”‚   â”‚   request=original_exception.request,                                                              â”‚
           â”‚   2099 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚   2100 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â± 2101 â”‚   â”‚   â”‚   â”‚   raise APIConnectionError(                                                                            â”‚
           â”‚   2102 â”‚   â”‚   â”‚   â”‚   â”‚   message="{}\n{}".format(                                                                         â”‚
           â”‚   2103 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   str(original_exception), traceback.format_exc()                                              â”‚
           â”‚   2104 â”‚   â”‚   â”‚   â”‚   â”‚   ),                                                                                               â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           APIConnectionError: litellm.APIConnectionError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1109, in                 
           _wrap_create_connection                                                                                                        
               sock = await aiohappyeyeballs.start_connection(                                                                            
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                            
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py", line 123, in              
           start_connection                                                                                                               
               raise OSError(first_errno, msg)                                                                                            
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py", line 477, in acompletion           
               response = await init_response                                                                                             
                          ^^^^^^^^^^^^^^^^^^^                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 566, in                
           ollama_acompletion                                                                                                             
               raise e  # don't use verbose_logger.exception, if exception is raised                                                      
               ^^^^^^^                                                                                                                    
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 507, in                
           ollama_acompletion                                                                                                             
               resp = await session.post(url, json=data)                                                                                  
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                  
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py", line 696, in _request            
               conn = await self._connector.connect(                                                                                      
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 544, in connect          
               proto = await self._create_connection(req, traces, timeout)                                                                
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1050, in                 
           _create_connection                                                                                                             
               _, proto = await self._create_direct_connection(req, traces, timeout)                                                      
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1394, in                 
           _create_direct_connection                                                                                                      
               raise last_exc                                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1363, in                 
           _create_direct_connection                                                                                                      
               transp, proto = await self._wrap_create_connection(                                                                        
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                        
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1124, in                 
           _wrap_create_connection                                                                                                        
               raise client_error(req.connection_key, exc) from exc                                                                       
           aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
                                                                                                                                          
           Received Model Group=ollama/llama3.2                                                                                           
           Available Model Group Fallbacks=None LiteLLM Retried: 2 times, LiteLLM Max Retries: 3                                          
[01:08:35] Answer:                                                                                                                        


 ANSWERING QUESTION: sciqag_question_97.json
 ----------------------------- 



[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.

[01:08:56] Trajectory failed.                                                                                                             
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1109 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1106 â”‚   â”‚   â”‚   async with ceil_timeout(                                                                                 â”‚
           â”‚   1107 â”‚   â”‚   â”‚   â”‚   timeout.sock_connect, ceil_threshold=timeout.ceil_threshold                                          â”‚
           â”‚   1108 â”‚   â”‚   â”‚   ):                                                                                                       â”‚
           â”‚ â± 1109 â”‚   â”‚   â”‚   â”‚   sock = await aiohappyeyeballs.start_connection(                                                      â”‚
           â”‚   1110 â”‚   â”‚   â”‚   â”‚   â”‚   addr_infos=addr_infos,                                                                           â”‚
           â”‚   1111 â”‚   â”‚   â”‚   â”‚   â”‚   local_addr_infos=self._local_addr_infos,                                                         â”‚
           â”‚   1112 â”‚   â”‚   â”‚   â”‚   â”‚   happy_eyeballs_delay=self._happy_eyeballs_delay,                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py:123 in start_connection          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   120 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, OSError) and exc.errno == first_errno                                         â”‚
           â”‚   121 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   for exc in all_exceptions                                                                     â”‚
           â”‚   122 â”‚   â”‚   â”‚   â”‚   â”‚   ):                                                                                                â”‚
           â”‚ â± 123 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   raise OSError(first_errno, msg)                                                               â”‚
           â”‚   124 â”‚   â”‚   â”‚   â”‚   elif isinstance(first_exception, RuntimeError) and all(                                               â”‚
           â”‚   125 â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, RuntimeError) for exc in all_exceptions                                           â”‚
           â”‚   126 â”‚   â”‚   â”‚   â”‚   ):                                                                                                    â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:477 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    474 â”‚   â”‚   â”‚   â”‚   â”‚   response = ModelResponse(**init_response)                                                        â”‚
           â”‚    475 â”‚   â”‚   â”‚   â”‚   response = init_response                                                                             â”‚
           â”‚    476 â”‚   â”‚   â”‚   elif asyncio.iscoroutine(init_response):                                                                 â”‚
           â”‚ â±  477 â”‚   â”‚   â”‚   â”‚   response = await init_response                                                                       â”‚
           â”‚    478 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚    479 â”‚   â”‚   â”‚   â”‚   response = init_response  # type: ignore                                                             â”‚
           â”‚    480                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:566 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   563 â”‚   â”‚   â”‚   )                                                                                                         â”‚
           â”‚   564 â”‚   â”‚   â”‚   return model_response                                                                                     â”‚
           â”‚   565 â”‚   except Exception as e:                                                                                            â”‚
           â”‚ â± 566 â”‚   â”‚   raise e  # don't use verbose_logger.exception, if exception is raised                                         â”‚
           â”‚   567                                                                                                                       â”‚
           â”‚   568                                                                                                                       â”‚
           â”‚   569 async def ollama_aembeddings(                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:507 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   504 â”‚   try:                                                                                                              â”‚
           â”‚   505 â”‚   â”‚   timeout = aiohttp.ClientTimeout(total=litellm.request_timeout)  # 10 minutes                                  â”‚
           â”‚   506 â”‚   â”‚   async with aiohttp.ClientSession(timeout=timeout) as session:                                                 â”‚
           â”‚ â± 507 â”‚   â”‚   â”‚   resp = await session.post(url, json=data)                                                                 â”‚
           â”‚   508 â”‚   â”‚   â”‚                                                                                                             â”‚
           â”‚   509 â”‚   â”‚   â”‚   if resp.status != 200:                                                                                    â”‚
           â”‚   510 â”‚   â”‚   â”‚   â”‚   text = await resp.text()                                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py:696 in _request                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚    693 â”‚   â”‚   â”‚   â”‚   â”‚                                                                                                    â”‚
           â”‚    694 â”‚   â”‚   â”‚   â”‚   â”‚   # connection timeout                                                                             â”‚
           â”‚    695 â”‚   â”‚   â”‚   â”‚   â”‚   try:                                                                                             â”‚
           â”‚ â±  696 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   conn = await self._connector.connect(                                                        â”‚
           â”‚    697 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   req, traces=traces, timeout=real_timeout                                                 â”‚
           â”‚    698 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚    699 â”‚   â”‚   â”‚   â”‚   â”‚   except asyncio.TimeoutError as exc:                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:544 in connect                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚    541 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    542 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    543 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_start()                                                   â”‚
           â”‚ â±  544 â”‚   â”‚   â”‚   â”‚   proto = await self._create_connection(req, traces, timeout)                                          â”‚
           â”‚    545 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    546 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    547 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_end()                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1050 in _create_connection           â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1047 â”‚   â”‚   if req.proxy:                                                                                                â”‚
           â”‚   1048 â”‚   â”‚   â”‚   _, proto = await self._create_proxy_connection(req, traces, timeout)                                     â”‚
           â”‚   1049 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚ â± 1050 â”‚   â”‚   â”‚   _, proto = await self._create_direct_connection(req, traces, timeout)                                    â”‚
           â”‚   1051 â”‚   â”‚                                                                                                                â”‚
           â”‚   1052 â”‚   â”‚   return proto                                                                                                 â”‚
           â”‚   1053                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1394 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1391 â”‚   â”‚   â”‚   return transp, proto                                                                                     â”‚
           â”‚   1392 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   1393 â”‚   â”‚   â”‚   assert last_exc is not None                                                                              â”‚
           â”‚ â± 1394 â”‚   â”‚   â”‚   raise last_exc                                                                                           â”‚
           â”‚   1395 â”‚                                                                                                                    â”‚
           â”‚   1396 â”‚   async def _create_proxy_connection(                                                                              â”‚
           â”‚   1397 â”‚   â”‚   self, req: ClientRequest, traces: List["Trace"], timeout: "ClientTimeout"                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1363 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1360 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   1361 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1362 â”‚   â”‚   â”‚   try:                                                                                                     â”‚
           â”‚ â± 1363 â”‚   â”‚   â”‚   â”‚   transp, proto = await self._wrap_create_connection(                                                  â”‚
           â”‚   1364 â”‚   â”‚   â”‚   â”‚   â”‚   self._factory,                                                                                   â”‚
           â”‚   1365 â”‚   â”‚   â”‚   â”‚   â”‚   timeout=timeout,                                                                                 â”‚
           â”‚   1366 â”‚   â”‚   â”‚   â”‚   â”‚   ssl=sslcontext,                                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1124 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1121 â”‚   â”‚   except OSError as exc:                                                                                       â”‚
           â”‚   1122 â”‚   â”‚   â”‚   if exc.errno is None and isinstance(exc, asyncio.TimeoutError):                                          â”‚
           â”‚   1123 â”‚   â”‚   â”‚   â”‚   raise                                                                                                â”‚
           â”‚ â± 1124 â”‚   â”‚   â”‚   raise client_error(req.connection_key, exc) from exc                                                     â”‚
           â”‚   1125 â”‚                                                                                                                    â”‚
           â”‚   1126 â”‚   async def _wrap_existing_connection(                                                                             â”‚
           â”‚   1127 â”‚   â”‚   self,                                                                                                        â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno 111] Connect call failed 
           ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                                                    
                                                                                                                                          
           During handling of the above exception, another exception occurred:                                                            
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:276 in _run_with_timeout_failure                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   273 ) -> tuple[PQASession, AgentStatus]:                                                                                  â”‚
           â”‚   274 â”‚   try:                                                                                                              â”‚
           â”‚   275 â”‚   â”‚   async with asyncio.timeout(query.settings.agent.timeout):                                                     â”‚
           â”‚ â± 276 â”‚   â”‚   â”‚   status = await rollout()                                                                                  â”‚
           â”‚   277 â”‚   except TimeoutError:                                                                                              â”‚
           â”‚   278 â”‚   â”‚   logger.warning(                                                                                               â”‚
           â”‚   279 â”‚   â”‚   â”‚   f"Agent timeout after {query.settings.agent.timeout}-sec, just answering."                                â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:410 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   407 â”‚   â”‚   â”‚   â”‚   )                                                                                                     â”‚
           â”‚   408 â”‚   â”‚   â”‚   â”‚   return AgentStatus.TRUNCATED                                                                          â”‚
           â”‚   409 â”‚   â”‚   â”‚   agent_state.messages += obs                                                                               â”‚
           â”‚ â± 410 â”‚   â”‚   â”‚   for attempt in Retrying(                                                                                  â”‚
           â”‚   411 â”‚   â”‚   â”‚   â”‚   stop=stop_after_attempt(5),                                                                           â”‚
           â”‚   412 â”‚   â”‚   â”‚   â”‚   retry=retry_if_exception_type(MalformedMessageError),                                                 â”‚
           â”‚   413 â”‚   â”‚   â”‚   â”‚   before_sleep=before_sleep_log(logger, logging.WARNING),                                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:443 in __iter__                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   440 â”‚   â”‚                                                                                                                 â”‚
           â”‚   441 â”‚   â”‚   retry_state = RetryCallState(self, fn=None, args=(), kwargs={})                                               â”‚
           â”‚   442 â”‚   â”‚   while True:                                                                                                   â”‚
           â”‚ â± 443 â”‚   â”‚   â”‚   do = self.iter(retry_state=retry_state)                                                                   â”‚
           â”‚   444 â”‚   â”‚   â”‚   if isinstance(do, DoAttempt):                                                                             â”‚
           â”‚   445 â”‚   â”‚   â”‚   â”‚   yield AttemptManager(retry_state=retry_state)                                                         â”‚
           â”‚   446 â”‚   â”‚   â”‚   elif isinstance(do, DoSleep):                                                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:376 in iter                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   373 â”‚   â”‚   self._begin_iter(retry_state)                                                                                 â”‚
           â”‚   374 â”‚   â”‚   result = None                                                                                                 â”‚
           â”‚   375 â”‚   â”‚   for action in self.iter_state.actions:                                                                        â”‚
           â”‚ â± 376 â”‚   â”‚   â”‚   result = action(retry_state)                                                                              â”‚
           â”‚   377 â”‚   â”‚   return result                                                                                                 â”‚
           â”‚   378 â”‚                                                                                                                     â”‚
           â”‚   379 â”‚   def _begin_iter(self, retry_state: "RetryCallState") -> None:  # noqa                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:398 in <lambda>                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   395 â”‚                                                                                                                     â”‚
           â”‚   396 â”‚   def _post_retry_check_actions(self, retry_state: "RetryCallState") -> None:                                       â”‚
           â”‚   397 â”‚   â”‚   if not (self.iter_state.is_explicit_retry or self.iter_state.retry_run_result):                               â”‚
           â”‚ â± 398 â”‚   â”‚   â”‚   self._add_action_func(lambda rs: rs.outcome.result())                                                     â”‚
           â”‚   399 â”‚   â”‚   â”‚   return                                                                                                    â”‚
           â”‚   400 â”‚   â”‚                                                                                                                 â”‚
           â”‚   401 â”‚   â”‚   if self.after is not None:                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:449 in result                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚   446 â”‚   â”‚   â”‚   â”‚   if self._state in [CANCELLED, CANCELLED_AND_NOTIFIED]:                                                â”‚
           â”‚   447 â”‚   â”‚   â”‚   â”‚   â”‚   raise CancelledError()                                                                            â”‚
           â”‚   448 â”‚   â”‚   â”‚   â”‚   elif self._state == FINISHED:                                                                         â”‚
           â”‚ â± 449 â”‚   â”‚   â”‚   â”‚   â”‚   return self.__get_result()                                                                        â”‚
           â”‚   450 â”‚   â”‚   â”‚   â”‚                                                                                                         â”‚
           â”‚   451 â”‚   â”‚   â”‚   â”‚   self._condition.wait(timeout)                                                                         â”‚
           â”‚   452                                                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:401 in __get_result                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   398 â”‚   def __get_result(self):                                                                                           â”‚
           â”‚   399 â”‚   â”‚   if self._exception:                                                                                           â”‚
           â”‚   400 â”‚   â”‚   â”‚   try:                                                                                                      â”‚
           â”‚ â± 401 â”‚   â”‚   â”‚   â”‚   raise self._exception                                                                                 â”‚
           â”‚   402 â”‚   â”‚   â”‚   finally:                                                                                                  â”‚
           â”‚   403 â”‚   â”‚   â”‚   â”‚   # Break a reference cycle with the exception in self._exception                                       â”‚
           â”‚   404 â”‚   â”‚   â”‚   â”‚   self = None                                                                                           â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:417 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   414 â”‚   â”‚   â”‚   â”‚   reraise=True,                                                                                         â”‚
           â”‚   415 â”‚   â”‚   â”‚   ):                                                                                                        â”‚
           â”‚   416 â”‚   â”‚   â”‚   â”‚   with attempt:  # Retrying if ToolSelector fails to select a tool                                      â”‚
           â”‚ â± 417 â”‚   â”‚   â”‚   â”‚   â”‚   action = await agent(agent_state.messages, tools)                                                 â”‚
           â”‚   418 â”‚   â”‚   â”‚   agent_state.messages = [*agent_state.messages, action]                                                    â”‚
           â”‚   419 â”‚   â”‚   â”‚   if on_agent_action_callback:                                                                              â”‚
           â”‚   420 â”‚   â”‚   â”‚   â”‚   await on_agent_action_callback(action, agent_state)                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aviary/tools/utils.py:182 in __call__                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   179 â”‚   â”‚   â”‚   self._ledger.messages.extend(messages)                                                                    â”‚
           â”‚   180 â”‚   â”‚   â”‚   messages = self._ledger.messages                                                                          â”‚
           â”‚   181 â”‚   â”‚                                                                                                                 â”‚
           â”‚ â± 182 â”‚   â”‚   model_response = await self._bound_acompletion(                                                               â”‚
           â”‚   183 â”‚   â”‚   â”‚   messages=MessagesAdapter.dump_python(                                                                     â”‚
           â”‚   184 â”‚   â”‚   â”‚   â”‚   messages, exclude_none=True, by_alias=True                                                            â”‚
           â”‚   185 â”‚   â”‚   â”‚   ),                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:817 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    814 â”‚   â”‚   â”‚   â”‚   â”‚   original_exception=e,                                                                            â”‚
           â”‚    815 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    816 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚ â±  817 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    818 â”‚                                                                                                                    â”‚
           â”‚    819 â”‚   async def _acompletion(                                                                                          â”‚
           â”‚    820 â”‚   â”‚   self, model: str, messages: List[Dict[str, str]], **kwargs                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:793 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    790 â”‚   â”‚   â”‚   if request_priority is not None and isinstance(request_priority, int):                                   â”‚
           â”‚    791 â”‚   â”‚   â”‚   â”‚   response = await self.schedule_acompletion(**kwargs)                                                 â”‚
           â”‚    792 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â±  793 â”‚   â”‚   â”‚   â”‚   response = await self.async_function_with_fallbacks(**kwargs)                                        â”‚
           â”‚    794 â”‚   â”‚   â”‚   end_time = time.time()                                                                                   â”‚
           â”‚    795 â”‚   â”‚   â”‚   _duration = end_time - start_time                                                                        â”‚
           â”‚    796 â”‚   â”‚   â”‚   asyncio.create_task(                                                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2795 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2792 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚   2793 â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                                â”‚
           â”‚   2794 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2795 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2796 â”‚                                                                                                                    â”‚
           â”‚   2797 â”‚   def _handle_mock_testing_fallbacks(                                                                              â”‚
           â”‚   2798 â”‚   â”‚   self,                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2631 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2628 â”‚   â”‚   â”‚   â”‚   content_policy_fallbacks=content_policy_fallbacks,                                                   â”‚
           â”‚   2629 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2630 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2631 â”‚   â”‚   â”‚   response = await self.async_function_with_retries(*args, **kwargs)                                       â”‚
           â”‚   2632 â”‚   â”‚   â”‚   verbose_router_logger.debug(f"Async Response: {response}")                                               â”‚
           â”‚   2633 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2634 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2967 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2964 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "max_retries", num_retries)                                              â”‚
           â”‚   2965 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "num_retries", current_attempt)                                          â”‚
           â”‚   2966 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2967 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2968 â”‚                                                                                                                    â”‚
           â”‚   2969 â”‚   async def make_call(self, original_function: Any, *args, **kwargs):                                              â”‚
           â”‚   2970 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2879 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2876 â”‚   â”‚   â”‚   â”‚   model_group=model_group, kwargs=kwargs                                                               â”‚
           â”‚   2877 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2878 â”‚   â”‚   â”‚   # if the function call is successful, no exception will be raised and we'll                              â”‚
           â”‚        break out of the loop                                                                                                â”‚
           â”‚ â± 2879 â”‚   â”‚   â”‚   response = await self.make_call(original_function, *args, **kwargs)                                      â”‚
           â”‚   2880 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   2881 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2882 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2976 in make_call                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2973 â”‚   â”‚   model_group = kwargs.get("model")                                                                            â”‚
           â”‚   2974 â”‚   â”‚   response = original_function(*args, **kwargs)                                                                â”‚
           â”‚   2975 â”‚   â”‚   if inspect.iscoroutinefunction(response) or inspect.isawaitable(response):                                   â”‚
           â”‚ â± 2976 â”‚   â”‚   â”‚   response = await response                                                                                â”‚
           â”‚   2977 â”‚   â”‚   ## PROCESS RESPONSE HEADERS                                                                                  â”‚
           â”‚   2978 â”‚   â”‚   await self.set_response_headers(response=response, model_group=model_group)                                  â”‚
           â”‚   2979                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:947 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    944 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚    945 â”‚   â”‚   â”‚   if model_name is not None:                                                                               â”‚
           â”‚    946 â”‚   â”‚   â”‚   â”‚   self.fail_calls[model_name] += 1                                                                     â”‚
           â”‚ â±  947 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    948 â”‚                                                                                                                    â”‚
           â”‚    949 â”‚   def _update_kwargs_before_fallbacks(self, model: str, kwargs: dict) -> None:                                     â”‚
           â”‚    950 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:915 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    912 â”‚   â”‚   â”‚   â”‚   â”‚   parent_otel_span=parent_otel_span,                                                               â”‚
           â”‚    913 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    914 â”‚   â”‚   â”‚   â”‚                                                                                                        â”‚
           â”‚ â±  915 â”‚   â”‚   â”‚   â”‚   response = await _response                                                                           â”‚
           â”‚    916 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚    917 â”‚   â”‚   â”‚   ## CHECK CONTENT FILTER ERROR ##                                                                         â”‚
           â”‚    918 â”‚   â”‚   â”‚   if isinstance(response, ModelResponse):                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1175 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1172 â”‚   â”‚   â”‚   â”‚   â”‚   else:                                                                                            â”‚
           â”‚   1173 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   kwargs["model"] = context_window_fallback_dict[model]                                        â”‚
           â”‚   1174 â”‚   â”‚   â”‚   â”‚   â”‚   return await original_function(*args, **kwargs)                                                  â”‚
           â”‚ â± 1175 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   1176 â”‚                                                                                                                    â”‚
           â”‚   1177 â”‚   is_coroutine = inspect.iscoroutinefunction(original_function)                                                    â”‚
           â”‚   1178                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1031 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1028 â”‚   â”‚   â”‚   â”‚   return _caching_handler_response.final_embedding_cached_response                                     â”‚
           â”‚   1029 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1030 â”‚   â”‚   â”‚   # MODEL CALL                                                                                             â”‚
           â”‚ â± 1031 â”‚   â”‚   â”‚   result = await original_function(*args, **kwargs)                                                        â”‚
           â”‚   1032 â”‚   â”‚   â”‚   end_time = datetime.datetime.now()                                                                       â”‚
           â”‚   1033 â”‚   â”‚   â”‚   if "stream" in kwargs and kwargs["stream"] is True:                                                      â”‚
           â”‚   1034 â”‚   â”‚   â”‚   â”‚   if (                                                                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:499 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    496 â”‚   â”‚   return response                                                                                              â”‚
           â”‚    497 â”‚   except Exception as e:                                                                                           â”‚
           â”‚    498 â”‚   â”‚   custom_llm_provider = custom_llm_provider or "openai"                                                        â”‚
           â”‚ â±  499 â”‚   â”‚   raise exception_type(                                                                                        â”‚
           â”‚    500 â”‚   â”‚   â”‚   model=model,                                                                                             â”‚
           â”‚    501 â”‚   â”‚   â”‚   custom_llm_provider=custom_llm_provider,                                                                 â”‚
           â”‚    502 â”‚   â”‚   â”‚   original_exception=e,                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:212 â”‚
           â”‚ 5 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2122 â”‚   â”‚   # don't let an error with mapping interrupt the user from receiving an error                                 â”‚
           â”‚        from the llm api calls                                                                                               â”‚
           â”‚   2123 â”‚   â”‚   if exception_mapping_worked:                                                                                 â”‚
           â”‚   2124 â”‚   â”‚   â”‚   setattr(e, "litellm_response_headers", litellm_response_headers)                                         â”‚
           â”‚ â± 2125 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   2126 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   2127 â”‚   â”‚   â”‚   for error_type in litellm.LITELLM_EXCEPTION_TYPES:                                                       â”‚
           â”‚   2128 â”‚   â”‚   â”‚   â”‚   if isinstance(e, error_type):                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:210 â”‚
           â”‚ 1 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2098 â”‚   â”‚   â”‚   â”‚   â”‚   request=original_exception.request,                                                              â”‚
           â”‚   2099 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚   2100 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â± 2101 â”‚   â”‚   â”‚   â”‚   raise APIConnectionError(                                                                            â”‚
           â”‚   2102 â”‚   â”‚   â”‚   â”‚   â”‚   message="{}\n{}".format(                                                                         â”‚
           â”‚   2103 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   str(original_exception), traceback.format_exc()                                              â”‚
           â”‚   2104 â”‚   â”‚   â”‚   â”‚   â”‚   ),                                                                                               â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           APIConnectionError: litellm.APIConnectionError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1109, in                 
           _wrap_create_connection                                                                                                        
               sock = await aiohappyeyeballs.start_connection(                                                                            
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                            
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py", line 123, in              
           start_connection                                                                                                               
               raise OSError(first_errno, msg)                                                                                            
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py", line 477, in acompletion           
               response = await init_response                                                                                             
                          ^^^^^^^^^^^^^^^^^^^                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 566, in                
           ollama_acompletion                                                                                                             
               raise e  # don't use verbose_logger.exception, if exception is raised                                                      
               ^^^^^^^                                                                                                                    
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 507, in                
           ollama_acompletion                                                                                                             
               resp = await session.post(url, json=data)                                                                                  
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                  
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py", line 696, in _request            
               conn = await self._connector.connect(                                                                                      
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 544, in connect          
               proto = await self._create_connection(req, traces, timeout)                                                                
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1050, in                 
           _create_connection                                                                                                             
               _, proto = await self._create_direct_connection(req, traces, timeout)                                                      
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1394, in                 
           _create_direct_connection                                                                                                      
               raise last_exc                                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1363, in                 
           _create_direct_connection                                                                                                      
               transp, proto = await self._wrap_create_connection(                                                                        
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                        
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1124, in                 
           _wrap_create_connection                                                                                                        
               raise client_error(req.connection_key, exc) from exc                                                                       
           aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
                                                                                                                                          
           Received Model Group=ollama/llama3.2                                                                                           
           Available Model Group Fallbacks=None LiteLLM Retried: 2 times, LiteLLM Max Retries: 3                                          
[01:08:58] Answer:                                                                                                                        


 ANSWERING QUESTION: sciqag_question_98.json
 ----------------------------- 



[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.

[01:09:19] Trajectory failed.                                                                                                             
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1109 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1106 â”‚   â”‚   â”‚   async with ceil_timeout(                                                                                 â”‚
           â”‚   1107 â”‚   â”‚   â”‚   â”‚   timeout.sock_connect, ceil_threshold=timeout.ceil_threshold                                          â”‚
           â”‚   1108 â”‚   â”‚   â”‚   ):                                                                                                       â”‚
           â”‚ â± 1109 â”‚   â”‚   â”‚   â”‚   sock = await aiohappyeyeballs.start_connection(                                                      â”‚
           â”‚   1110 â”‚   â”‚   â”‚   â”‚   â”‚   addr_infos=addr_infos,                                                                           â”‚
           â”‚   1111 â”‚   â”‚   â”‚   â”‚   â”‚   local_addr_infos=self._local_addr_infos,                                                         â”‚
           â”‚   1112 â”‚   â”‚   â”‚   â”‚   â”‚   happy_eyeballs_delay=self._happy_eyeballs_delay,                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py:123 in start_connection          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   120 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, OSError) and exc.errno == first_errno                                         â”‚
           â”‚   121 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   for exc in all_exceptions                                                                     â”‚
           â”‚   122 â”‚   â”‚   â”‚   â”‚   â”‚   ):                                                                                                â”‚
           â”‚ â± 123 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   raise OSError(first_errno, msg)                                                               â”‚
           â”‚   124 â”‚   â”‚   â”‚   â”‚   elif isinstance(first_exception, RuntimeError) and all(                                               â”‚
           â”‚   125 â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, RuntimeError) for exc in all_exceptions                                           â”‚
           â”‚   126 â”‚   â”‚   â”‚   â”‚   ):                                                                                                    â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:477 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    474 â”‚   â”‚   â”‚   â”‚   â”‚   response = ModelResponse(**init_response)                                                        â”‚
           â”‚    475 â”‚   â”‚   â”‚   â”‚   response = init_response                                                                             â”‚
           â”‚    476 â”‚   â”‚   â”‚   elif asyncio.iscoroutine(init_response):                                                                 â”‚
           â”‚ â±  477 â”‚   â”‚   â”‚   â”‚   response = await init_response                                                                       â”‚
           â”‚    478 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚    479 â”‚   â”‚   â”‚   â”‚   response = init_response  # type: ignore                                                             â”‚
           â”‚    480                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:566 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   563 â”‚   â”‚   â”‚   )                                                                                                         â”‚
           â”‚   564 â”‚   â”‚   â”‚   return model_response                                                                                     â”‚
           â”‚   565 â”‚   except Exception as e:                                                                                            â”‚
           â”‚ â± 566 â”‚   â”‚   raise e  # don't use verbose_logger.exception, if exception is raised                                         â”‚
           â”‚   567                                                                                                                       â”‚
           â”‚   568                                                                                                                       â”‚
           â”‚   569 async def ollama_aembeddings(                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:507 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   504 â”‚   try:                                                                                                              â”‚
           â”‚   505 â”‚   â”‚   timeout = aiohttp.ClientTimeout(total=litellm.request_timeout)  # 10 minutes                                  â”‚
           â”‚   506 â”‚   â”‚   async with aiohttp.ClientSession(timeout=timeout) as session:                                                 â”‚
           â”‚ â± 507 â”‚   â”‚   â”‚   resp = await session.post(url, json=data)                                                                 â”‚
           â”‚   508 â”‚   â”‚   â”‚                                                                                                             â”‚
           â”‚   509 â”‚   â”‚   â”‚   if resp.status != 200:                                                                                    â”‚
           â”‚   510 â”‚   â”‚   â”‚   â”‚   text = await resp.text()                                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py:696 in _request                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚    693 â”‚   â”‚   â”‚   â”‚   â”‚                                                                                                    â”‚
           â”‚    694 â”‚   â”‚   â”‚   â”‚   â”‚   # connection timeout                                                                             â”‚
           â”‚    695 â”‚   â”‚   â”‚   â”‚   â”‚   try:                                                                                             â”‚
           â”‚ â±  696 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   conn = await self._connector.connect(                                                        â”‚
           â”‚    697 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   req, traces=traces, timeout=real_timeout                                                 â”‚
           â”‚    698 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚    699 â”‚   â”‚   â”‚   â”‚   â”‚   except asyncio.TimeoutError as exc:                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:544 in connect                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚    541 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    542 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    543 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_start()                                                   â”‚
           â”‚ â±  544 â”‚   â”‚   â”‚   â”‚   proto = await self._create_connection(req, traces, timeout)                                          â”‚
           â”‚    545 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    546 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    547 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_end()                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1050 in _create_connection           â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1047 â”‚   â”‚   if req.proxy:                                                                                                â”‚
           â”‚   1048 â”‚   â”‚   â”‚   _, proto = await self._create_proxy_connection(req, traces, timeout)                                     â”‚
           â”‚   1049 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚ â± 1050 â”‚   â”‚   â”‚   _, proto = await self._create_direct_connection(req, traces, timeout)                                    â”‚
           â”‚   1051 â”‚   â”‚                                                                                                                â”‚
           â”‚   1052 â”‚   â”‚   return proto                                                                                                 â”‚
           â”‚   1053                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1394 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1391 â”‚   â”‚   â”‚   return transp, proto                                                                                     â”‚
           â”‚   1392 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   1393 â”‚   â”‚   â”‚   assert last_exc is not None                                                                              â”‚
           â”‚ â± 1394 â”‚   â”‚   â”‚   raise last_exc                                                                                           â”‚
           â”‚   1395 â”‚                                                                                                                    â”‚
           â”‚   1396 â”‚   async def _create_proxy_connection(                                                                              â”‚
           â”‚   1397 â”‚   â”‚   self, req: ClientRequest, traces: List["Trace"], timeout: "ClientTimeout"                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1363 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1360 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   1361 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1362 â”‚   â”‚   â”‚   try:                                                                                                     â”‚
           â”‚ â± 1363 â”‚   â”‚   â”‚   â”‚   transp, proto = await self._wrap_create_connection(                                                  â”‚
           â”‚   1364 â”‚   â”‚   â”‚   â”‚   â”‚   self._factory,                                                                                   â”‚
           â”‚   1365 â”‚   â”‚   â”‚   â”‚   â”‚   timeout=timeout,                                                                                 â”‚
           â”‚   1366 â”‚   â”‚   â”‚   â”‚   â”‚   ssl=sslcontext,                                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1124 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1121 â”‚   â”‚   except OSError as exc:                                                                                       â”‚
           â”‚   1122 â”‚   â”‚   â”‚   if exc.errno is None and isinstance(exc, asyncio.TimeoutError):                                          â”‚
           â”‚   1123 â”‚   â”‚   â”‚   â”‚   raise                                                                                                â”‚
           â”‚ â± 1124 â”‚   â”‚   â”‚   raise client_error(req.connection_key, exc) from exc                                                     â”‚
           â”‚   1125 â”‚                                                                                                                    â”‚
           â”‚   1126 â”‚   async def _wrap_existing_connection(                                                                             â”‚
           â”‚   1127 â”‚   â”‚   self,                                                                                                        â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno 111] Connect call failed 
           ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                                                    
                                                                                                                                          
           During handling of the above exception, another exception occurred:                                                            
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:276 in _run_with_timeout_failure                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   273 ) -> tuple[PQASession, AgentStatus]:                                                                                  â”‚
           â”‚   274 â”‚   try:                                                                                                              â”‚
           â”‚   275 â”‚   â”‚   async with asyncio.timeout(query.settings.agent.timeout):                                                     â”‚
           â”‚ â± 276 â”‚   â”‚   â”‚   status = await rollout()                                                                                  â”‚
           â”‚   277 â”‚   except TimeoutError:                                                                                              â”‚
           â”‚   278 â”‚   â”‚   logger.warning(                                                                                               â”‚
           â”‚   279 â”‚   â”‚   â”‚   f"Agent timeout after {query.settings.agent.timeout}-sec, just answering."                                â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:410 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   407 â”‚   â”‚   â”‚   â”‚   )                                                                                                     â”‚
           â”‚   408 â”‚   â”‚   â”‚   â”‚   return AgentStatus.TRUNCATED                                                                          â”‚
           â”‚   409 â”‚   â”‚   â”‚   agent_state.messages += obs                                                                               â”‚
           â”‚ â± 410 â”‚   â”‚   â”‚   for attempt in Retrying(                                                                                  â”‚
           â”‚   411 â”‚   â”‚   â”‚   â”‚   stop=stop_after_attempt(5),                                                                           â”‚
           â”‚   412 â”‚   â”‚   â”‚   â”‚   retry=retry_if_exception_type(MalformedMessageError),                                                 â”‚
           â”‚   413 â”‚   â”‚   â”‚   â”‚   before_sleep=before_sleep_log(logger, logging.WARNING),                                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:443 in __iter__                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   440 â”‚   â”‚                                                                                                                 â”‚
           â”‚   441 â”‚   â”‚   retry_state = RetryCallState(self, fn=None, args=(), kwargs={})                                               â”‚
           â”‚   442 â”‚   â”‚   while True:                                                                                                   â”‚
           â”‚ â± 443 â”‚   â”‚   â”‚   do = self.iter(retry_state=retry_state)                                                                   â”‚
           â”‚   444 â”‚   â”‚   â”‚   if isinstance(do, DoAttempt):                                                                             â”‚
           â”‚   445 â”‚   â”‚   â”‚   â”‚   yield AttemptManager(retry_state=retry_state)                                                         â”‚
           â”‚   446 â”‚   â”‚   â”‚   elif isinstance(do, DoSleep):                                                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:376 in iter                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   373 â”‚   â”‚   self._begin_iter(retry_state)                                                                                 â”‚
           â”‚   374 â”‚   â”‚   result = None                                                                                                 â”‚
           â”‚   375 â”‚   â”‚   for action in self.iter_state.actions:                                                                        â”‚
           â”‚ â± 376 â”‚   â”‚   â”‚   result = action(retry_state)                                                                              â”‚
           â”‚   377 â”‚   â”‚   return result                                                                                                 â”‚
           â”‚   378 â”‚                                                                                                                     â”‚
           â”‚   379 â”‚   def _begin_iter(self, retry_state: "RetryCallState") -> None:  # noqa                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:398 in <lambda>                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   395 â”‚                                                                                                                     â”‚
           â”‚   396 â”‚   def _post_retry_check_actions(self, retry_state: "RetryCallState") -> None:                                       â”‚
           â”‚   397 â”‚   â”‚   if not (self.iter_state.is_explicit_retry or self.iter_state.retry_run_result):                               â”‚
           â”‚ â± 398 â”‚   â”‚   â”‚   self._add_action_func(lambda rs: rs.outcome.result())                                                     â”‚
           â”‚   399 â”‚   â”‚   â”‚   return                                                                                                    â”‚
           â”‚   400 â”‚   â”‚                                                                                                                 â”‚
           â”‚   401 â”‚   â”‚   if self.after is not None:                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:449 in result                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚   446 â”‚   â”‚   â”‚   â”‚   if self._state in [CANCELLED, CANCELLED_AND_NOTIFIED]:                                                â”‚
           â”‚   447 â”‚   â”‚   â”‚   â”‚   â”‚   raise CancelledError()                                                                            â”‚
           â”‚   448 â”‚   â”‚   â”‚   â”‚   elif self._state == FINISHED:                                                                         â”‚
           â”‚ â± 449 â”‚   â”‚   â”‚   â”‚   â”‚   return self.__get_result()                                                                        â”‚
           â”‚   450 â”‚   â”‚   â”‚   â”‚                                                                                                         â”‚
           â”‚   451 â”‚   â”‚   â”‚   â”‚   self._condition.wait(timeout)                                                                         â”‚
           â”‚   452                                                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:401 in __get_result                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   398 â”‚   def __get_result(self):                                                                                           â”‚
           â”‚   399 â”‚   â”‚   if self._exception:                                                                                           â”‚
           â”‚   400 â”‚   â”‚   â”‚   try:                                                                                                      â”‚
           â”‚ â± 401 â”‚   â”‚   â”‚   â”‚   raise self._exception                                                                                 â”‚
           â”‚   402 â”‚   â”‚   â”‚   finally:                                                                                                  â”‚
           â”‚   403 â”‚   â”‚   â”‚   â”‚   # Break a reference cycle with the exception in self._exception                                       â”‚
           â”‚   404 â”‚   â”‚   â”‚   â”‚   self = None                                                                                           â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:417 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   414 â”‚   â”‚   â”‚   â”‚   reraise=True,                                                                                         â”‚
           â”‚   415 â”‚   â”‚   â”‚   ):                                                                                                        â”‚
           â”‚   416 â”‚   â”‚   â”‚   â”‚   with attempt:  # Retrying if ToolSelector fails to select a tool                                      â”‚
           â”‚ â± 417 â”‚   â”‚   â”‚   â”‚   â”‚   action = await agent(agent_state.messages, tools)                                                 â”‚
           â”‚   418 â”‚   â”‚   â”‚   agent_state.messages = [*agent_state.messages, action]                                                    â”‚
           â”‚   419 â”‚   â”‚   â”‚   if on_agent_action_callback:                                                                              â”‚
           â”‚   420 â”‚   â”‚   â”‚   â”‚   await on_agent_action_callback(action, agent_state)                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aviary/tools/utils.py:182 in __call__                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   179 â”‚   â”‚   â”‚   self._ledger.messages.extend(messages)                                                                    â”‚
           â”‚   180 â”‚   â”‚   â”‚   messages = self._ledger.messages                                                                          â”‚
           â”‚   181 â”‚   â”‚                                                                                                                 â”‚
           â”‚ â± 182 â”‚   â”‚   model_response = await self._bound_acompletion(                                                               â”‚
           â”‚   183 â”‚   â”‚   â”‚   messages=MessagesAdapter.dump_python(                                                                     â”‚
           â”‚   184 â”‚   â”‚   â”‚   â”‚   messages, exclude_none=True, by_alias=True                                                            â”‚
           â”‚   185 â”‚   â”‚   â”‚   ),                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:817 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    814 â”‚   â”‚   â”‚   â”‚   â”‚   original_exception=e,                                                                            â”‚
           â”‚    815 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    816 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚ â±  817 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    818 â”‚                                                                                                                    â”‚
           â”‚    819 â”‚   async def _acompletion(                                                                                          â”‚
           â”‚    820 â”‚   â”‚   self, model: str, messages: List[Dict[str, str]], **kwargs                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:793 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    790 â”‚   â”‚   â”‚   if request_priority is not None and isinstance(request_priority, int):                                   â”‚
           â”‚    791 â”‚   â”‚   â”‚   â”‚   response = await self.schedule_acompletion(**kwargs)                                                 â”‚
           â”‚    792 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â±  793 â”‚   â”‚   â”‚   â”‚   response = await self.async_function_with_fallbacks(**kwargs)                                        â”‚
           â”‚    794 â”‚   â”‚   â”‚   end_time = time.time()                                                                                   â”‚
           â”‚    795 â”‚   â”‚   â”‚   _duration = end_time - start_time                                                                        â”‚
           â”‚    796 â”‚   â”‚   â”‚   asyncio.create_task(                                                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2795 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2792 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚   2793 â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                                â”‚
           â”‚   2794 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2795 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2796 â”‚                                                                                                                    â”‚
           â”‚   2797 â”‚   def _handle_mock_testing_fallbacks(                                                                              â”‚
           â”‚   2798 â”‚   â”‚   self,                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2631 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2628 â”‚   â”‚   â”‚   â”‚   content_policy_fallbacks=content_policy_fallbacks,                                                   â”‚
           â”‚   2629 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2630 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2631 â”‚   â”‚   â”‚   response = await self.async_function_with_retries(*args, **kwargs)                                       â”‚
           â”‚   2632 â”‚   â”‚   â”‚   verbose_router_logger.debug(f"Async Response: {response}")                                               â”‚
           â”‚   2633 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2634 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2967 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2964 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "max_retries", num_retries)                                              â”‚
           â”‚   2965 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "num_retries", current_attempt)                                          â”‚
           â”‚   2966 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2967 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2968 â”‚                                                                                                                    â”‚
           â”‚   2969 â”‚   async def make_call(self, original_function: Any, *args, **kwargs):                                              â”‚
           â”‚   2970 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2879 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2876 â”‚   â”‚   â”‚   â”‚   model_group=model_group, kwargs=kwargs                                                               â”‚
           â”‚   2877 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2878 â”‚   â”‚   â”‚   # if the function call is successful, no exception will be raised and we'll                              â”‚
           â”‚        break out of the loop                                                                                                â”‚
           â”‚ â± 2879 â”‚   â”‚   â”‚   response = await self.make_call(original_function, *args, **kwargs)                                      â”‚
           â”‚   2880 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   2881 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2882 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2976 in make_call                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2973 â”‚   â”‚   model_group = kwargs.get("model")                                                                            â”‚
           â”‚   2974 â”‚   â”‚   response = original_function(*args, **kwargs)                                                                â”‚
           â”‚   2975 â”‚   â”‚   if inspect.iscoroutinefunction(response) or inspect.isawaitable(response):                                   â”‚
           â”‚ â± 2976 â”‚   â”‚   â”‚   response = await response                                                                                â”‚
           â”‚   2977 â”‚   â”‚   ## PROCESS RESPONSE HEADERS                                                                                  â”‚
           â”‚   2978 â”‚   â”‚   await self.set_response_headers(response=response, model_group=model_group)                                  â”‚
           â”‚   2979                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:947 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    944 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚    945 â”‚   â”‚   â”‚   if model_name is not None:                                                                               â”‚
           â”‚    946 â”‚   â”‚   â”‚   â”‚   self.fail_calls[model_name] += 1                                                                     â”‚
           â”‚ â±  947 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    948 â”‚                                                                                                                    â”‚
           â”‚    949 â”‚   def _update_kwargs_before_fallbacks(self, model: str, kwargs: dict) -> None:                                     â”‚
           â”‚    950 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:915 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    912 â”‚   â”‚   â”‚   â”‚   â”‚   parent_otel_span=parent_otel_span,                                                               â”‚
           â”‚    913 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    914 â”‚   â”‚   â”‚   â”‚                                                                                                        â”‚
           â”‚ â±  915 â”‚   â”‚   â”‚   â”‚   response = await _response                                                                           â”‚
           â”‚    916 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚    917 â”‚   â”‚   â”‚   ## CHECK CONTENT FILTER ERROR ##                                                                         â”‚
           â”‚    918 â”‚   â”‚   â”‚   if isinstance(response, ModelResponse):                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1175 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1172 â”‚   â”‚   â”‚   â”‚   â”‚   else:                                                                                            â”‚
           â”‚   1173 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   kwargs["model"] = context_window_fallback_dict[model]                                        â”‚
           â”‚   1174 â”‚   â”‚   â”‚   â”‚   â”‚   return await original_function(*args, **kwargs)                                                  â”‚
           â”‚ â± 1175 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   1176 â”‚                                                                                                                    â”‚
           â”‚   1177 â”‚   is_coroutine = inspect.iscoroutinefunction(original_function)                                                    â”‚
           â”‚   1178                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1031 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1028 â”‚   â”‚   â”‚   â”‚   return _caching_handler_response.final_embedding_cached_response                                     â”‚
           â”‚   1029 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1030 â”‚   â”‚   â”‚   # MODEL CALL                                                                                             â”‚
           â”‚ â± 1031 â”‚   â”‚   â”‚   result = await original_function(*args, **kwargs)                                                        â”‚
           â”‚   1032 â”‚   â”‚   â”‚   end_time = datetime.datetime.now()                                                                       â”‚
           â”‚   1033 â”‚   â”‚   â”‚   if "stream" in kwargs and kwargs["stream"] is True:                                                      â”‚
           â”‚   1034 â”‚   â”‚   â”‚   â”‚   if (                                                                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:499 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    496 â”‚   â”‚   return response                                                                                              â”‚
           â”‚    497 â”‚   except Exception as e:                                                                                           â”‚
           â”‚    498 â”‚   â”‚   custom_llm_provider = custom_llm_provider or "openai"                                                        â”‚
           â”‚ â±  499 â”‚   â”‚   raise exception_type(                                                                                        â”‚
           â”‚    500 â”‚   â”‚   â”‚   model=model,                                                                                             â”‚
           â”‚    501 â”‚   â”‚   â”‚   custom_llm_provider=custom_llm_provider,                                                                 â”‚
           â”‚    502 â”‚   â”‚   â”‚   original_exception=e,                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:212 â”‚
           â”‚ 5 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2122 â”‚   â”‚   # don't let an error with mapping interrupt the user from receiving an error                                 â”‚
           â”‚        from the llm api calls                                                                                               â”‚
           â”‚   2123 â”‚   â”‚   if exception_mapping_worked:                                                                                 â”‚
           â”‚   2124 â”‚   â”‚   â”‚   setattr(e, "litellm_response_headers", litellm_response_headers)                                         â”‚
           â”‚ â± 2125 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   2126 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   2127 â”‚   â”‚   â”‚   for error_type in litellm.LITELLM_EXCEPTION_TYPES:                                                       â”‚
           â”‚   2128 â”‚   â”‚   â”‚   â”‚   if isinstance(e, error_type):                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:210 â”‚
           â”‚ 1 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2098 â”‚   â”‚   â”‚   â”‚   â”‚   request=original_exception.request,                                                              â”‚
           â”‚   2099 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚   2100 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â± 2101 â”‚   â”‚   â”‚   â”‚   raise APIConnectionError(                                                                            â”‚
           â”‚   2102 â”‚   â”‚   â”‚   â”‚   â”‚   message="{}\n{}".format(                                                                         â”‚
           â”‚   2103 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   str(original_exception), traceback.format_exc()                                              â”‚
           â”‚   2104 â”‚   â”‚   â”‚   â”‚   â”‚   ),                                                                                               â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           APIConnectionError: litellm.APIConnectionError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1109, in                 
           _wrap_create_connection                                                                                                        
               sock = await aiohappyeyeballs.start_connection(                                                                            
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                            
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py", line 123, in              
           start_connection                                                                                                               
               raise OSError(first_errno, msg)                                                                                            
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py", line 477, in acompletion           
               response = await init_response                                                                                             
                          ^^^^^^^^^^^^^^^^^^^                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 566, in                
           ollama_acompletion                                                                                                             
               raise e  # don't use verbose_logger.exception, if exception is raised                                                      
               ^^^^^^^                                                                                                                    
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 507, in                
           ollama_acompletion                                                                                                             
               resp = await session.post(url, json=data)                                                                                  
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                  
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py", line 696, in _request            
               conn = await self._connector.connect(                                                                                      
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 544, in connect          
               proto = await self._create_connection(req, traces, timeout)                                                                
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1050, in                 
           _create_connection                                                                                                             
               _, proto = await self._create_direct_connection(req, traces, timeout)                                                      
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1394, in                 
           _create_direct_connection                                                                                                      
               raise last_exc                                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1363, in                 
           _create_direct_connection                                                                                                      
               transp, proto = await self._wrap_create_connection(                                                                        
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                        
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1124, in                 
           _wrap_create_connection                                                                                                        
               raise client_error(req.connection_key, exc) from exc                                                                       
           aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
                                                                                                                                          
           Received Model Group=ollama/llama3.2                                                                                           
           Available Model Group Fallbacks=None LiteLLM Retried: 2 times, LiteLLM Max Retries: 3                                          
[01:09:21] Answer:                                                                                                                        


 ANSWERING QUESTION: sciqag_question_99.json
 ----------------------------- 



[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.


[1;31mGive Feedback / Get Help: https://github.com/BerriAI/litellm/issues/new[0m
LiteLLM.Info: If you need to debug this error, use `litellm.set_verbose=True'.

[01:09:41] Trajectory failed.                                                                                                             
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1109 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1106 â”‚   â”‚   â”‚   async with ceil_timeout(                                                                                 â”‚
           â”‚   1107 â”‚   â”‚   â”‚   â”‚   timeout.sock_connect, ceil_threshold=timeout.ceil_threshold                                          â”‚
           â”‚   1108 â”‚   â”‚   â”‚   ):                                                                                                       â”‚
           â”‚ â± 1109 â”‚   â”‚   â”‚   â”‚   sock = await aiohappyeyeballs.start_connection(                                                      â”‚
           â”‚   1110 â”‚   â”‚   â”‚   â”‚   â”‚   addr_infos=addr_infos,                                                                           â”‚
           â”‚   1111 â”‚   â”‚   â”‚   â”‚   â”‚   local_addr_infos=self._local_addr_infos,                                                         â”‚
           â”‚   1112 â”‚   â”‚   â”‚   â”‚   â”‚   happy_eyeballs_delay=self._happy_eyeballs_delay,                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py:123 in start_connection          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   120 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, OSError) and exc.errno == first_errno                                         â”‚
           â”‚   121 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   for exc in all_exceptions                                                                     â”‚
           â”‚   122 â”‚   â”‚   â”‚   â”‚   â”‚   ):                                                                                                â”‚
           â”‚ â± 123 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   raise OSError(first_errno, msg)                                                               â”‚
           â”‚   124 â”‚   â”‚   â”‚   â”‚   elif isinstance(first_exception, RuntimeError) and all(                                               â”‚
           â”‚   125 â”‚   â”‚   â”‚   â”‚   â”‚   isinstance(exc, RuntimeError) for exc in all_exceptions                                           â”‚
           â”‚   126 â”‚   â”‚   â”‚   â”‚   ):                                                                                                    â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:477 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    474 â”‚   â”‚   â”‚   â”‚   â”‚   response = ModelResponse(**init_response)                                                        â”‚
           â”‚    475 â”‚   â”‚   â”‚   â”‚   response = init_response                                                                             â”‚
           â”‚    476 â”‚   â”‚   â”‚   elif asyncio.iscoroutine(init_response):                                                                 â”‚
           â”‚ â±  477 â”‚   â”‚   â”‚   â”‚   response = await init_response                                                                       â”‚
           â”‚    478 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚    479 â”‚   â”‚   â”‚   â”‚   response = init_response  # type: ignore                                                             â”‚
           â”‚    480                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:566 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   563 â”‚   â”‚   â”‚   )                                                                                                         â”‚
           â”‚   564 â”‚   â”‚   â”‚   return model_response                                                                                     â”‚
           â”‚   565 â”‚   except Exception as e:                                                                                            â”‚
           â”‚ â± 566 â”‚   â”‚   raise e  # don't use verbose_logger.exception, if exception is raised                                         â”‚
           â”‚   567                                                                                                                       â”‚
           â”‚   568                                                                                                                       â”‚
           â”‚   569 async def ollama_aembeddings(                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py:507 in ollama_acompletion          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   504 â”‚   try:                                                                                                              â”‚
           â”‚   505 â”‚   â”‚   timeout = aiohttp.ClientTimeout(total=litellm.request_timeout)  # 10 minutes                                  â”‚
           â”‚   506 â”‚   â”‚   async with aiohttp.ClientSession(timeout=timeout) as session:                                                 â”‚
           â”‚ â± 507 â”‚   â”‚   â”‚   resp = await session.post(url, json=data)                                                                 â”‚
           â”‚   508 â”‚   â”‚   â”‚                                                                                                             â”‚
           â”‚   509 â”‚   â”‚   â”‚   if resp.status != 200:                                                                                    â”‚
           â”‚   510 â”‚   â”‚   â”‚   â”‚   text = await resp.text()                                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py:696 in _request                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚    693 â”‚   â”‚   â”‚   â”‚   â”‚                                                                                                    â”‚
           â”‚    694 â”‚   â”‚   â”‚   â”‚   â”‚   # connection timeout                                                                             â”‚
           â”‚    695 â”‚   â”‚   â”‚   â”‚   â”‚   try:                                                                                             â”‚
           â”‚ â±  696 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   conn = await self._connector.connect(                                                        â”‚
           â”‚    697 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   req, traces=traces, timeout=real_timeout                                                 â”‚
           â”‚    698 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚    699 â”‚   â”‚   â”‚   â”‚   â”‚   except asyncio.TimeoutError as exc:                                                              â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:544 in connect                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚    541 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    542 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    543 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_start()                                                   â”‚
           â”‚ â±  544 â”‚   â”‚   â”‚   â”‚   proto = await self._create_connection(req, traces, timeout)                                          â”‚
           â”‚    545 â”‚   â”‚   â”‚   â”‚   if traces:                                                                                           â”‚
           â”‚    546 â”‚   â”‚   â”‚   â”‚   â”‚   for trace in traces:                                                                             â”‚
           â”‚    547 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   await trace.send_connection_create_end()                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1050 in _create_connection           â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1047 â”‚   â”‚   if req.proxy:                                                                                                â”‚
           â”‚   1048 â”‚   â”‚   â”‚   _, proto = await self._create_proxy_connection(req, traces, timeout)                                     â”‚
           â”‚   1049 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚ â± 1050 â”‚   â”‚   â”‚   _, proto = await self._create_direct_connection(req, traces, timeout)                                    â”‚
           â”‚   1051 â”‚   â”‚                                                                                                                â”‚
           â”‚   1052 â”‚   â”‚   return proto                                                                                                 â”‚
           â”‚   1053                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1394 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1391 â”‚   â”‚   â”‚   return transp, proto                                                                                     â”‚
           â”‚   1392 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   1393 â”‚   â”‚   â”‚   assert last_exc is not None                                                                              â”‚
           â”‚ â± 1394 â”‚   â”‚   â”‚   raise last_exc                                                                                           â”‚
           â”‚   1395 â”‚                                                                                                                    â”‚
           â”‚   1396 â”‚   async def _create_proxy_connection(                                                                              â”‚
           â”‚   1397 â”‚   â”‚   self, req: ClientRequest, traces: List["Trace"], timeout: "ClientTimeout"                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1363 in _create_direct_connection    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1360 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   1361 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1362 â”‚   â”‚   â”‚   try:                                                                                                     â”‚
           â”‚ â± 1363 â”‚   â”‚   â”‚   â”‚   transp, proto = await self._wrap_create_connection(                                                  â”‚
           â”‚   1364 â”‚   â”‚   â”‚   â”‚   â”‚   self._factory,                                                                                   â”‚
           â”‚   1365 â”‚   â”‚   â”‚   â”‚   â”‚   timeout=timeout,                                                                                 â”‚
           â”‚   1366 â”‚   â”‚   â”‚   â”‚   â”‚   ssl=sslcontext,                                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py:1124 in _wrap_create_connection      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1121 â”‚   â”‚   except OSError as exc:                                                                                       â”‚
           â”‚   1122 â”‚   â”‚   â”‚   if exc.errno is None and isinstance(exc, asyncio.TimeoutError):                                          â”‚
           â”‚   1123 â”‚   â”‚   â”‚   â”‚   raise                                                                                                â”‚
           â”‚ â± 1124 â”‚   â”‚   â”‚   raise client_error(req.connection_key, exc) from exc                                                     â”‚
           â”‚   1125 â”‚                                                                                                                    â”‚
           â”‚   1126 â”‚   async def _wrap_existing_connection(                                                                             â”‚
           â”‚   1127 â”‚   â”‚   self,                                                                                                        â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno 111] Connect call failed 
           ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                                                    
                                                                                                                                          
           During handling of the above exception, another exception occurred:                                                            
                                                                                                                                          
           â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Traceback (most recent call last) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:276 in _run_with_timeout_failure                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   273 ) -> tuple[PQASession, AgentStatus]:                                                                                  â”‚
           â”‚   274 â”‚   try:                                                                                                              â”‚
           â”‚   275 â”‚   â”‚   async with asyncio.timeout(query.settings.agent.timeout):                                                     â”‚
           â”‚ â± 276 â”‚   â”‚   â”‚   status = await rollout()                                                                                  â”‚
           â”‚   277 â”‚   except TimeoutError:                                                                                              â”‚
           â”‚   278 â”‚   â”‚   logger.warning(                                                                                               â”‚
           â”‚   279 â”‚   â”‚   â”‚   f"Agent timeout after {query.settings.agent.timeout}-sec, just answering."                                â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:410 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   407 â”‚   â”‚   â”‚   â”‚   )                                                                                                     â”‚
           â”‚   408 â”‚   â”‚   â”‚   â”‚   return AgentStatus.TRUNCATED                                                                          â”‚
           â”‚   409 â”‚   â”‚   â”‚   agent_state.messages += obs                                                                               â”‚
           â”‚ â± 410 â”‚   â”‚   â”‚   for attempt in Retrying(                                                                                  â”‚
           â”‚   411 â”‚   â”‚   â”‚   â”‚   stop=stop_after_attempt(5),                                                                           â”‚
           â”‚   412 â”‚   â”‚   â”‚   â”‚   retry=retry_if_exception_type(MalformedMessageError),                                                 â”‚
           â”‚   413 â”‚   â”‚   â”‚   â”‚   before_sleep=before_sleep_log(logger, logging.WARNING),                                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:443 in __iter__                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   440 â”‚   â”‚                                                                                                                 â”‚
           â”‚   441 â”‚   â”‚   retry_state = RetryCallState(self, fn=None, args=(), kwargs={})                                               â”‚
           â”‚   442 â”‚   â”‚   while True:                                                                                                   â”‚
           â”‚ â± 443 â”‚   â”‚   â”‚   do = self.iter(retry_state=retry_state)                                                                   â”‚
           â”‚   444 â”‚   â”‚   â”‚   if isinstance(do, DoAttempt):                                                                             â”‚
           â”‚   445 â”‚   â”‚   â”‚   â”‚   yield AttemptManager(retry_state=retry_state)                                                         â”‚
           â”‚   446 â”‚   â”‚   â”‚   elif isinstance(do, DoSleep):                                                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:376 in iter                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚   373 â”‚   â”‚   self._begin_iter(retry_state)                                                                                 â”‚
           â”‚   374 â”‚   â”‚   result = None                                                                                                 â”‚
           â”‚   375 â”‚   â”‚   for action in self.iter_state.actions:                                                                        â”‚
           â”‚ â± 376 â”‚   â”‚   â”‚   result = action(retry_state)                                                                              â”‚
           â”‚   377 â”‚   â”‚   return result                                                                                                 â”‚
           â”‚   378 â”‚                                                                                                                     â”‚
           â”‚   379 â”‚   def _begin_iter(self, retry_state: "RetryCallState") -> None:  # noqa                                             â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/tenacity/__init__.py:398 in <lambda>                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚   395 â”‚                                                                                                                     â”‚
           â”‚   396 â”‚   def _post_retry_check_actions(self, retry_state: "RetryCallState") -> None:                                       â”‚
           â”‚   397 â”‚   â”‚   if not (self.iter_state.is_explicit_retry or self.iter_state.retry_run_result):                               â”‚
           â”‚ â± 398 â”‚   â”‚   â”‚   self._add_action_func(lambda rs: rs.outcome.result())                                                     â”‚
           â”‚   399 â”‚   â”‚   â”‚   return                                                                                                    â”‚
           â”‚   400 â”‚   â”‚                                                                                                                 â”‚
           â”‚   401 â”‚   â”‚   if self.after is not None:                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:449 in result                               â”‚
           â”‚                                                                                                                             â”‚
           â”‚   446 â”‚   â”‚   â”‚   â”‚   if self._state in [CANCELLED, CANCELLED_AND_NOTIFIED]:                                                â”‚
           â”‚   447 â”‚   â”‚   â”‚   â”‚   â”‚   raise CancelledError()                                                                            â”‚
           â”‚   448 â”‚   â”‚   â”‚   â”‚   elif self._state == FINISHED:                                                                         â”‚
           â”‚ â± 449 â”‚   â”‚   â”‚   â”‚   â”‚   return self.__get_result()                                                                        â”‚
           â”‚   450 â”‚   â”‚   â”‚   â”‚                                                                                                         â”‚
           â”‚   451 â”‚   â”‚   â”‚   â”‚   self._condition.wait(timeout)                                                                         â”‚
           â”‚   452                                                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/concurrent/futures/_base.py:401 in __get_result                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   398 â”‚   def __get_result(self):                                                                                           â”‚
           â”‚   399 â”‚   â”‚   if self._exception:                                                                                           â”‚
           â”‚   400 â”‚   â”‚   â”‚   try:                                                                                                      â”‚
           â”‚ â± 401 â”‚   â”‚   â”‚   â”‚   raise self._exception                                                                                 â”‚
           â”‚   402 â”‚   â”‚   â”‚   finally:                                                                                                  â”‚
           â”‚   403 â”‚   â”‚   â”‚   â”‚   # Break a reference cycle with the exception in self._exception                                       â”‚
           â”‚   404 â”‚   â”‚   â”‚   â”‚   self = None                                                                                           â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/cRAG/paper-qa/paperqa/agents/main.py:417 in rollout                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   414 â”‚   â”‚   â”‚   â”‚   reraise=True,                                                                                         â”‚
           â”‚   415 â”‚   â”‚   â”‚   ):                                                                                                        â”‚
           â”‚   416 â”‚   â”‚   â”‚   â”‚   with attempt:  # Retrying if ToolSelector fails to select a tool                                      â”‚
           â”‚ â± 417 â”‚   â”‚   â”‚   â”‚   â”‚   action = await agent(agent_state.messages, tools)                                                 â”‚
           â”‚   418 â”‚   â”‚   â”‚   agent_state.messages = [*agent_state.messages, action]                                                    â”‚
           â”‚   419 â”‚   â”‚   â”‚   if on_agent_action_callback:                                                                              â”‚
           â”‚   420 â”‚   â”‚   â”‚   â”‚   await on_agent_action_callback(action, agent_state)                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aviary/tools/utils.py:182 in __call__                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   179 â”‚   â”‚   â”‚   self._ledger.messages.extend(messages)                                                                    â”‚
           â”‚   180 â”‚   â”‚   â”‚   messages = self._ledger.messages                                                                          â”‚
           â”‚   181 â”‚   â”‚                                                                                                                 â”‚
           â”‚ â± 182 â”‚   â”‚   model_response = await self._bound_acompletion(                                                               â”‚
           â”‚   183 â”‚   â”‚   â”‚   messages=MessagesAdapter.dump_python(                                                                     â”‚
           â”‚   184 â”‚   â”‚   â”‚   â”‚   messages, exclude_none=True, by_alias=True                                                            â”‚
           â”‚   185 â”‚   â”‚   â”‚   ),                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:817 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    814 â”‚   â”‚   â”‚   â”‚   â”‚   original_exception=e,                                                                            â”‚
           â”‚    815 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    816 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚ â±  817 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    818 â”‚                                                                                                                    â”‚
           â”‚    819 â”‚   async def _acompletion(                                                                                          â”‚
           â”‚    820 â”‚   â”‚   self, model: str, messages: List[Dict[str, str]], **kwargs                                                   â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:793 in acompletion                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚    790 â”‚   â”‚   â”‚   if request_priority is not None and isinstance(request_priority, int):                                   â”‚
           â”‚    791 â”‚   â”‚   â”‚   â”‚   response = await self.schedule_acompletion(**kwargs)                                                 â”‚
           â”‚    792 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â±  793 â”‚   â”‚   â”‚   â”‚   response = await self.async_function_with_fallbacks(**kwargs)                                        â”‚
           â”‚    794 â”‚   â”‚   â”‚   end_time = time.time()                                                                                   â”‚
           â”‚    795 â”‚   â”‚   â”‚   _duration = end_time - start_time                                                                        â”‚
           â”‚    796 â”‚   â”‚   â”‚   asyncio.create_task(                                                                                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2795 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2792 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                            â”‚
           â”‚   2793 â”‚   â”‚   â”‚   â”‚   â”‚   )                                                                                                â”‚
           â”‚   2794 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2795 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2796 â”‚                                                                                                                    â”‚
           â”‚   2797 â”‚   def _handle_mock_testing_fallbacks(                                                                              â”‚
           â”‚   2798 â”‚   â”‚   self,                                                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2631 in async_function_with_fallbacks   â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2628 â”‚   â”‚   â”‚   â”‚   content_policy_fallbacks=content_policy_fallbacks,                                                   â”‚
           â”‚   2629 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2630 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2631 â”‚   â”‚   â”‚   response = await self.async_function_with_retries(*args, **kwargs)                                       â”‚
           â”‚   2632 â”‚   â”‚   â”‚   verbose_router_logger.debug(f"Async Response: {response}")                                               â”‚
           â”‚   2633 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2634 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2967 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2964 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "max_retries", num_retries)                                              â”‚
           â”‚   2965 â”‚   â”‚   â”‚   â”‚   setattr(original_exception, "num_retries", current_attempt)                                          â”‚
           â”‚   2966 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚ â± 2967 â”‚   â”‚   â”‚   raise original_exception                                                                                 â”‚
           â”‚   2968 â”‚                                                                                                                    â”‚
           â”‚   2969 â”‚   async def make_call(self, original_function: Any, *args, **kwargs):                                              â”‚
           â”‚   2970 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2879 in async_function_with_retries     â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2876 â”‚   â”‚   â”‚   â”‚   model_group=model_group, kwargs=kwargs                                                               â”‚
           â”‚   2877 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚   2878 â”‚   â”‚   â”‚   # if the function call is successful, no exception will be raised and we'll                              â”‚
           â”‚        break out of the loop                                                                                                â”‚
           â”‚ â± 2879 â”‚   â”‚   â”‚   response = await self.make_call(original_function, *args, **kwargs)                                      â”‚
           â”‚   2880 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   2881 â”‚   â”‚   â”‚   return response                                                                                          â”‚
           â”‚   2882 â”‚   â”‚   except Exception as e:                                                                                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:2976 in make_call                       â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2973 â”‚   â”‚   model_group = kwargs.get("model")                                                                            â”‚
           â”‚   2974 â”‚   â”‚   response = original_function(*args, **kwargs)                                                                â”‚
           â”‚   2975 â”‚   â”‚   if inspect.iscoroutinefunction(response) or inspect.isawaitable(response):                                   â”‚
           â”‚ â± 2976 â”‚   â”‚   â”‚   response = await response                                                                                â”‚
           â”‚   2977 â”‚   â”‚   ## PROCESS RESPONSE HEADERS                                                                                  â”‚
           â”‚   2978 â”‚   â”‚   await self.set_response_headers(response=response, model_group=model_group)                                  â”‚
           â”‚   2979                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:947 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    944 â”‚   â”‚   â”‚   )                                                                                                        â”‚
           â”‚    945 â”‚   â”‚   â”‚   if model_name is not None:                                                                               â”‚
           â”‚    946 â”‚   â”‚   â”‚   â”‚   self.fail_calls[model_name] += 1                                                                     â”‚
           â”‚ â±  947 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚    948 â”‚                                                                                                                    â”‚
           â”‚    949 â”‚   def _update_kwargs_before_fallbacks(self, model: str, kwargs: dict) -> None:                                     â”‚
           â”‚    950 â”‚   â”‚   """                                                                                                          â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/router.py:915 in _acompletion                     â”‚
           â”‚                                                                                                                             â”‚
           â”‚    912 â”‚   â”‚   â”‚   â”‚   â”‚   parent_otel_span=parent_otel_span,                                                               â”‚
           â”‚    913 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚    914 â”‚   â”‚   â”‚   â”‚                                                                                                        â”‚
           â”‚ â±  915 â”‚   â”‚   â”‚   â”‚   response = await _response                                                                           â”‚
           â”‚    916 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚    917 â”‚   â”‚   â”‚   ## CHECK CONTENT FILTER ERROR ##                                                                         â”‚
           â”‚    918 â”‚   â”‚   â”‚   if isinstance(response, ModelResponse):                                                                  â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1175 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1172 â”‚   â”‚   â”‚   â”‚   â”‚   else:                                                                                            â”‚
           â”‚   1173 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   kwargs["model"] = context_window_fallback_dict[model]                                        â”‚
           â”‚   1174 â”‚   â”‚   â”‚   â”‚   â”‚   return await original_function(*args, **kwargs)                                                  â”‚
           â”‚ â± 1175 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   1176 â”‚                                                                                                                    â”‚
           â”‚   1177 â”‚   is_coroutine = inspect.iscoroutinefunction(original_function)                                                    â”‚
           â”‚   1178                                                                                                                      â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/utils.py:1031 in wrapper_async                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚   1028 â”‚   â”‚   â”‚   â”‚   return _caching_handler_response.final_embedding_cached_response                                     â”‚
           â”‚   1029 â”‚   â”‚   â”‚                                                                                                            â”‚
           â”‚   1030 â”‚   â”‚   â”‚   # MODEL CALL                                                                                             â”‚
           â”‚ â± 1031 â”‚   â”‚   â”‚   result = await original_function(*args, **kwargs)                                                        â”‚
           â”‚   1032 â”‚   â”‚   â”‚   end_time = datetime.datetime.now()                                                                       â”‚
           â”‚   1033 â”‚   â”‚   â”‚   if "stream" in kwargs and kwargs["stream"] is True:                                                      â”‚
           â”‚   1034 â”‚   â”‚   â”‚   â”‚   if (                                                                                                 â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py:499 in acompletion                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚    496 â”‚   â”‚   return response                                                                                              â”‚
           â”‚    497 â”‚   except Exception as e:                                                                                           â”‚
           â”‚    498 â”‚   â”‚   custom_llm_provider = custom_llm_provider or "openai"                                                        â”‚
           â”‚ â±  499 â”‚   â”‚   raise exception_type(                                                                                        â”‚
           â”‚    500 â”‚   â”‚   â”‚   model=model,                                                                                             â”‚
           â”‚    501 â”‚   â”‚   â”‚   custom_llm_provider=custom_llm_provider,                                                                 â”‚
           â”‚    502 â”‚   â”‚   â”‚   original_exception=e,                                                                                    â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:212 â”‚
           â”‚ 5 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2122 â”‚   â”‚   # don't let an error with mapping interrupt the user from receiving an error                                 â”‚
           â”‚        from the llm api calls                                                                                               â”‚
           â”‚   2123 â”‚   â”‚   if exception_mapping_worked:                                                                                 â”‚
           â”‚   2124 â”‚   â”‚   â”‚   setattr(e, "litellm_response_headers", litellm_response_headers)                                         â”‚
           â”‚ â± 2125 â”‚   â”‚   â”‚   raise e                                                                                                  â”‚
           â”‚   2126 â”‚   â”‚   else:                                                                                                        â”‚
           â”‚   2127 â”‚   â”‚   â”‚   for error_type in litellm.LITELLM_EXCEPTION_TYPES:                                                       â”‚
           â”‚   2128 â”‚   â”‚   â”‚   â”‚   if isinstance(e, error_type):                                                                        â”‚
           â”‚                                                                                                                             â”‚
           â”‚ /home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/litellm_core_utils/exception_mapping_utils.py:210 â”‚
           â”‚ 1 in exception_type                                                                                                         â”‚
           â”‚                                                                                                                             â”‚
           â”‚   2098 â”‚   â”‚   â”‚   â”‚   â”‚   request=original_exception.request,                                                              â”‚
           â”‚   2099 â”‚   â”‚   â”‚   â”‚   )                                                                                                    â”‚
           â”‚   2100 â”‚   â”‚   â”‚   else:                                                                                                    â”‚
           â”‚ â± 2101 â”‚   â”‚   â”‚   â”‚   raise APIConnectionError(                                                                            â”‚
           â”‚   2102 â”‚   â”‚   â”‚   â”‚   â”‚   message="{}\n{}".format(                                                                         â”‚
           â”‚   2103 â”‚   â”‚   â”‚   â”‚   â”‚   â”‚   str(original_exception), traceback.format_exc()                                              â”‚
           â”‚   2104 â”‚   â”‚   â”‚   â”‚   â”‚   ),                                                                                               â”‚
           â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
           APIConnectionError: litellm.APIConnectionError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1109, in                 
           _wrap_create_connection                                                                                                        
               sock = await aiohappyeyeballs.start_connection(                                                                            
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                            
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohappyeyeballs/impl.py", line 123, in              
           start_connection                                                                                                               
               raise OSError(first_errno, msg)                                                                                            
           ConnectionRefusedError: [Errno 111] Multiple exceptions: [Errno 111] Connect call failed ('::1', 11434, 0, 0), [Errno 111]     
           Connect call failed ('127.0.0.1', 11434)                                                                                       
                                                                                                                                          
           The above exception was the direct cause of the following exception:                                                           
                                                                                                                                          
           Traceback (most recent call last):                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/main.py", line 477, in acompletion           
               response = await init_response                                                                                             
                          ^^^^^^^^^^^^^^^^^^^                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 566, in                
           ollama_acompletion                                                                                                             
               raise e  # don't use verbose_logger.exception, if exception is raised                                                      
               ^^^^^^^                                                                                                                    
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/litellm/llms/ollama.py", line 507, in                
           ollama_acompletion                                                                                                             
               resp = await session.post(url, json=data)                                                                                  
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                  
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/client.py", line 696, in _request            
               conn = await self._connector.connect(                                                                                      
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 544, in connect          
               proto = await self._create_connection(req, traces, timeout)                                                                
                       ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1050, in                 
           _create_connection                                                                                                             
               _, proto = await self._create_direct_connection(req, traces, timeout)                                                      
                          ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                      
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1394, in                 
           _create_direct_connection                                                                                                      
               raise last_exc                                                                                                             
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1363, in                 
           _create_direct_connection                                                                                                      
               transp, proto = await self._wrap_create_connection(                                                                        
                               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^                                                                        
             File "/home/hice1/swong97/.conda/envs/cRAG/lib/python3.11/site-packages/aiohttp/connector.py", line 1124, in                 
           _wrap_create_connection                                                                                                        
               raise client_error(req.connection_key, exc) from exc                                                                       
           aiohttp.client_exceptions.ClientConnectorError: Cannot connect to host localhost:11434 ssl:default [Multiple exceptions: [Errno
           111] Connect call failed ('::1', 11434, 0, 0), [Errno 111] Connect call failed ('127.0.0.1', 11434)]                           
                                                                                                                                          
           Received Model Group=ollama/llama3.2                                                                                           
           Available Model Group Fallbacks=None LiteLLM Retried: 2 times, LiteLLM Max Retries: 3                                          
[01:09:43] Answer:                                                                                                                        
